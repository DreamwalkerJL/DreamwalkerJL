function VT(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var KL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function XL(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var N={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=Symbol.for("react.element"),YL=Symbol.for("react.portal"),QL=Symbol.for("react.fragment"),qL=Symbol.for("react.strict_mode"),ZL=Symbol.for("react.profiler"),eF=Symbol.for("react.provider"),tF=Symbol.for("react.context"),nF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),iF=Symbol.for("react.memo"),sF=Symbol.for("react.lazy"),W2=Symbol.iterator;function oF(n){return n===null||typeof n!="object"?null:(n=W2&&n[W2]||n["@@iterator"],typeof n=="function"?n:null)}var WT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jT=Object.assign,$T={};function af(n,e,t){this.props=n,this.context=e,this.refs=$T,this.updater=t||WT}af.prototype.isReactComponent={};af.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};af.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function JT(){}JT.prototype=af.prototype;function fw(n,e,t){this.props=n,this.context=e,this.refs=$T,this.updater=t||WT}var dw=fw.prototype=new JT;dw.constructor=fw;jT(dw,af.prototype);dw.isPureReactComponent=!0;var j2=Array.isArray,KT=Object.prototype.hasOwnProperty,hw={current:null},XT={key:!0,ref:!0,__self:!0,__source:!0};function YT(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)KT.call(e,r)&&!XT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dh,type:n,key:s,ref:o,props:i,_owner:hw.current}}function aF(n,e){return{$$typeof:Dh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pw(n){return typeof n=="object"&&n!==null&&n.$$typeof===Dh}function lF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $2=/\/+/g;function uy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?lF(""+n.key):e.toString(36)}function gg(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Dh:case YL:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+uy(o,0):r,j2(i)?(t="",n!=null&&(t=n.replace($2,"$&/")+"/"),gg(i,e,t,"",function(u){return u})):i!=null&&(pw(i)&&(i=aF(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($2,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",j2(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+uy(s,a);o+=gg(s,e,t,l,i)}else if(l=oF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+uy(s,a++),o+=gg(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zp(n,e,t){if(n==null)return n;var r=[],i=0;return gg(n,r,"","",function(s){return e.call(t,s,i++)}),r}function uF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ii={current:null},vg={transition:null},cF={ReactCurrentDispatcher:ii,ReactCurrentBatchConfig:vg,ReactCurrentOwner:hw};kt.Children={map:Zp,forEach:function(n,e,t){Zp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Zp(n,function(){e++}),e},toArray:function(n){return Zp(n,function(e){return e})||[]},only:function(n){if(!pw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};kt.Component=af;kt.Fragment=QL;kt.Profiler=ZL;kt.PureComponent=fw;kt.StrictMode=qL;kt.Suspense=rF;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cF;kt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=jT({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hw.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)KT.call(e,l)&&!XT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Dh,type:n.type,key:i,ref:s,props:r,_owner:o}};kt.createContext=function(n){return n={$$typeof:tF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:eF,_context:n},n.Consumer=n};kt.createElement=YT;kt.createFactory=function(n){var e=YT.bind(null,n);return e.type=n,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(n){return{$$typeof:nF,render:n}};kt.isValidElement=pw;kt.lazy=function(n){return{$$typeof:sF,_payload:{_status:-1,_result:n},_init:uF}};kt.memo=function(n,e){return{$$typeof:iF,type:n,compare:e===void 0?null:e}};kt.startTransition=function(n){var e=vg.transition;vg.transition={};try{n()}finally{vg.transition=e}};kt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};kt.useCallback=function(n,e){return ii.current.useCallback(n,e)};kt.useContext=function(n){return ii.current.useContext(n)};kt.useDebugValue=function(){};kt.useDeferredValue=function(n){return ii.current.useDeferredValue(n)};kt.useEffect=function(n,e){return ii.current.useEffect(n,e)};kt.useId=function(){return ii.current.useId()};kt.useImperativeHandle=function(n,e,t){return ii.current.useImperativeHandle(n,e,t)};kt.useInsertionEffect=function(n,e){return ii.current.useInsertionEffect(n,e)};kt.useLayoutEffect=function(n,e){return ii.current.useLayoutEffect(n,e)};kt.useMemo=function(n,e){return ii.current.useMemo(n,e)};kt.useReducer=function(n,e,t){return ii.current.useReducer(n,e,t)};kt.useRef=function(n){return ii.current.useRef(n)};kt.useState=function(n){return ii.current.useState(n)};kt.useSyncExternalStore=function(n,e,t){return ii.current.useSyncExternalStore(n,e,t)};kt.useTransition=function(){return ii.current.useTransition()};kt.version="18.2.0";(function(n){n.exports=kt})(N);const At=cw(N.exports),fF=VT({__proto__:null,default:At},[N.exports]);var Z1={},mw={exports:{}},ki={},QT={exports:{}},qT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,O){var z=U.length;U.push(O);e:for(;0<z;){var W=z-1>>>1,q=U[W];if(0<i(q,O))U[W]=O,U[z]=q,z=W;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var O=U[0],z=U.pop();if(z!==O){U[0]=z;e:for(var W=0,q=U.length,oe=q>>>1;W<oe;){var ce=2*(W+1)-1,me=U[ce],re=ce+1,he=U[re];if(0>i(me,z))re<q&&0>i(he,me)?(U[W]=he,U[re]=z,W=re):(U[W]=me,U[ce]=z,W=ce);else if(re<q&&0>i(he,z))U[W]=he,U[re]=z,W=re;else break e}}return O}function i(U,O){var z=U.sortIndex-O.sortIndex;return z!==0?z:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var O=t(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=U)r(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function b(U){if(y=!1,S(U),!g)if(t(l)!==null)g=!0,$(C);else{var O=t(u);O!==null&&ne(b,O.startTime-U)}}function C(U,O){g=!1,y&&(y=!1,x(M),M=-1),m=!0;var z=p;try{for(S(O),f=t(l);f!==null&&(!(f.expirationTime>O)||U&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var q=W(f.expirationTime<=O);O=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&r(l),S(O)}else r(l);f=t(l)}if(f!==null)var oe=!0;else{var ce=t(u);ce!==null&&ne(b,ce.startTime-O),oe=!1}return oe}finally{f=null,p=z,m=!1}}var E=!1,P=null,M=-1,T=5,R=-1;function L(){return!(n.unstable_now()-R<T)}function I(){if(P!==null){var U=n.unstable_now();R=U;var O=!0;try{O=P(!0,U)}finally{O?H():(E=!1,P=null)}}else E=!1}var H;if(typeof _=="function")H=function(){_(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,X=G.port2;G.port1.onmessage=I,H=function(){X.postMessage(null)}}else H=function(){v(I,0)};function $(U){P=U,E||(E=!0,H())}function ne(U,O){M=v(function(){U(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(C))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return U()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=p;p=U;try{return O()}finally{p=z}},n.unstable_scheduleCallback=function(U,O,z){var W=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,U={id:c++,callback:O,priorityLevel:U,startTime:z,expirationTime:q,sortIndex:-1},z>W?(U.sortIndex=z,e(u,U),t(l)===null&&U===t(u)&&(y?(x(M),M=-1):y=!0,ne(b,z-W))):(U.sortIndex=q,e(l,U),g||m||(g=!0,$(C))),U},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(U){var O=p;return function(){var z=p;p=O;try{return U.apply(this,arguments)}finally{p=z}}}})(qT);(function(n){n.exports=qT})(QT);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT=N.exports,Li=QT.exports;function Ne(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e3=new Set,Qd={};function vu(n,e){jc(n,e),jc(n+"Capture",e)}function jc(n,e){for(Qd[n]=e,n=0;n<e.length;n++)e3.add(e[n])}var Uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ex=Object.prototype.hasOwnProperty,dF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J2={},K2={};function hF(n){return ex.call(K2,n)?!0:ex.call(J2,n)?!1:dF.test(n)?K2[n]=!0:(J2[n]=!0,!1)}function pF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function mF(n,e,t,r){if(e===null||typeof e>"u"||pF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function si(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yr[n]=new si(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yr[e]=new si(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yr[n]=new si(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yr[n]=new si(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yr[n]=new si(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yr[n]=new si(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yr[n]=new si(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yr[n]=new si(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yr[n]=new si(n,5,!1,n.toLowerCase(),null,!1,!1)});var gw=/[\-:]([a-z])/g;function vw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(gw,vw);yr[e]=new si(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(gw,vw);yr[e]=new si(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(gw,vw);yr[e]=new si(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yr[n]=new si(n,1,!1,n.toLowerCase(),null,!1,!1)});yr.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yr[n]=new si(n,1,!1,n.toLowerCase(),null,!0,!0)});function yw(n,e,t,r){var i=yr.hasOwnProperty(e)?yr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mF(e,t,i,r)&&(t=null),r||i===null?hF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var jo=ZT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,em=Symbol.for("react.element"),xc=Symbol.for("react.portal"),_c=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),tx=Symbol.for("react.profiler"),t3=Symbol.for("react.provider"),n3=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),nx=Symbol.for("react.suspense"),rx=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),r3=Symbol.for("react.offscreen"),X2=Symbol.iterator;function qf(n){return n===null||typeof n!="object"?null:(n=X2&&n[X2]||n["@@iterator"],typeof n=="function"?n:null)}var An=Object.assign,cy;function Ad(n){if(cy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);cy=e&&e[1]||""}return`
`+cy+n}var fy=!1;function dy(n,e){if(!n||fy)return"";fy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{fy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ad(n):""}function gF(n){switch(n.tag){case 5:return Ad(n.type);case 16:return Ad("Lazy");case 13:return Ad("Suspense");case 19:return Ad("SuspenseList");case 0:case 2:case 15:return n=dy(n.type,!1),n;case 11:return n=dy(n.type.render,!1),n;case 1:return n=dy(n.type,!0),n;default:return""}}function ix(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _c:return"Fragment";case xc:return"Portal";case tx:return"Profiler";case xw:return"StrictMode";case nx:return"Suspense";case rx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case n3:return(n.displayName||"Context")+".Consumer";case t3:return(n._context.displayName||"Context")+".Provider";case _w:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ww:return e=n.displayName||null,e!==null?e:ix(n.type)||"Memo";case Aa:e=n._payload,n=n._init;try{return ix(n(e))}catch{}}return null}function vF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ix(e);case 8:return e===xw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ja(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function i3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yF(n){var e=i3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function tm(n){n._valueTracker||(n._valueTracker=yF(n))}function s3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=i3(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ng(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function sx(n,e){var t=e.checked;return An({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function Y2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ja(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o3(n,e){e=e.checked,e!=null&&yw(n,"checked",e,!1)}function ox(n,e){o3(n,e);var t=ja(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ax(n,e.type,t):e.hasOwnProperty("defaultValue")&&ax(n,e.type,ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Q2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ax(n,e,t){(e!=="number"||Ng(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ed=Array.isArray;function Oc(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ja(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function lx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return An({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function q2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ne(92));if(Ed(t)){if(1<t.length)throw Error(Ne(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ja(t)}}function a3(n,e){var t=ja(e.value),r=ja(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Z2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function l3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ux(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?l3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nm,u3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(nm=nm||document.createElement("div"),nm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function qd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xF=["Webkit","ms","Moz","O"];Object.keys(Dd).forEach(function(n){xF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Dd[e]=Dd[n]})});function c3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Dd.hasOwnProperty(n)&&Dd[n]?(""+e).trim():e+"px"}function f3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=c3(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var _F=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cx(n,e){if(e){if(_F[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function fx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dx=null;function Sw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hx=null,Uc=null,Nc=null;function eM(n){if(n=Fh(n)){if(typeof hx!="function")throw Error(Ne(280));var e=n.stateNode;e&&(e=Pv(e),hx(n.stateNode,n.type,e))}}function d3(n){Uc?Nc?Nc.push(n):Nc=[n]:Uc=n}function h3(){if(Uc){var n=Uc,e=Nc;if(Nc=Uc=null,eM(n),e)for(n=0;n<e.length;n++)eM(e[n])}}function p3(n,e){return n(e)}function m3(){}var hy=!1;function g3(n,e,t){if(hy)return n(e,t);hy=!0;try{return p3(n,e,t)}finally{hy=!1,(Uc!==null||Nc!==null)&&(m3(),h3())}}function Zd(n,e){var t=n.stateNode;if(t===null)return null;var r=Pv(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ne(231,e,typeof t));return t}var px=!1;if(Uo)try{var Zf={};Object.defineProperty(Zf,"passive",{get:function(){px=!0}}),window.addEventListener("test",Zf,Zf),window.removeEventListener("test",Zf,Zf)}catch{px=!1}function wF(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Id=!1,zg=null,Gg=!1,mx=null,SF={onError:function(n){Id=!0,zg=n}};function bF(n,e,t,r,i,s,o,a,l){Id=!1,zg=null,wF.apply(SF,arguments)}function MF(n,e,t,r,i,s,o,a,l){if(bF.apply(this,arguments),Id){if(Id){var u=zg;Id=!1,zg=null}else throw Error(Ne(198));Gg||(Gg=!0,mx=u)}}function yu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function v3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function tM(n){if(yu(n)!==n)throw Error(Ne(188))}function AF(n){var e=n.alternate;if(!e){if(e=yu(n),e===null)throw Error(Ne(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return tM(i),n;if(s===r)return tM(i),e;s=s.sibling}throw Error(Ne(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ne(189))}}if(t.alternate!==r)throw Error(Ne(190))}if(t.tag!==3)throw Error(Ne(188));return t.stateNode.current===t?n:e}function y3(n){return n=AF(n),n!==null?x3(n):null}function x3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=x3(n);if(e!==null)return e;n=n.sibling}return null}var _3=Li.unstable_scheduleCallback,nM=Li.unstable_cancelCallback,EF=Li.unstable_shouldYield,CF=Li.unstable_requestPaint,On=Li.unstable_now,TF=Li.unstable_getCurrentPriorityLevel,bw=Li.unstable_ImmediatePriority,w3=Li.unstable_UserBlockingPriority,Hg=Li.unstable_NormalPriority,RF=Li.unstable_LowPriority,S3=Li.unstable_IdlePriority,Ev=null,Qs=null;function PF(n){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Ev,n,void 0,(n.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:IF,BF=Math.log,DF=Math.LN2;function IF(n){return n>>>=0,n===0?32:31-(BF(n)/DF|0)|0}var rm=64,im=4194304;function Cd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Vg(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Cd(a):(s&=o,s!==0&&(r=Cd(s)))}else o=t&~i,o!==0?r=Cd(o):s!==0&&(r=Cd(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ts(e),i=1<<t,r|=n[t],e&=~i;return r}function LF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ts(s),a=1<<o,l=i[o];l===-1?((a&t)===0||(a&r)!==0)&&(i[o]=LF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function gx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function b3(){var n=rm;return rm<<=1,(rm&4194240)===0&&(rm=64),n}function py(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ih(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ts(e),n[e]=t}function kF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ts(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Mw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ts(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var qt=0;function M3(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var A3,Aw,E3,C3,T3,vx=!1,sm=[],Ia=null,La=null,Fa=null,eh=new Map,th=new Map,Ta=[],OF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rM(n,e){switch(n){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":eh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(e.pointerId)}}function ed(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fh(e),e!==null&&Aw(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function UF(n,e,t,r,i){switch(e){case"focusin":return Ia=ed(Ia,n,e,t,r,i),!0;case"dragenter":return La=ed(La,n,e,t,r,i),!0;case"mouseover":return Fa=ed(Fa,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return eh.set(s,ed(eh.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,th.set(s,ed(th.get(s)||null,n,e,t,r,i)),!0}return!1}function R3(n){var e=zl(n.target);if(e!==null){var t=yu(e);if(t!==null){if(e=t.tag,e===13){if(e=v3(t),e!==null){n.blockedOn=e,T3(n.priority,function(){E3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=yx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);dx=r,t.target.dispatchEvent(r),dx=null}else return e=Fh(t),e!==null&&Aw(e),n.blockedOn=t,!1;e.shift()}return!0}function iM(n,e,t){yg(n)&&t.delete(e)}function NF(){vx=!1,Ia!==null&&yg(Ia)&&(Ia=null),La!==null&&yg(La)&&(La=null),Fa!==null&&yg(Fa)&&(Fa=null),eh.forEach(iM),th.forEach(iM)}function td(n,e){n.blockedOn===e&&(n.blockedOn=null,vx||(vx=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,NF)))}function nh(n){function e(i){return td(i,n)}if(0<sm.length){td(sm[0],n);for(var t=1;t<sm.length;t++){var r=sm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ia!==null&&td(Ia,n),La!==null&&td(La,n),Fa!==null&&td(Fa,n),eh.forEach(e),th.forEach(e),t=0;t<Ta.length;t++)r=Ta[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ta.length&&(t=Ta[0],t.blockedOn===null);)R3(t),t.blockedOn===null&&Ta.shift()}var zc=jo.ReactCurrentBatchConfig,Wg=!0;function zF(n,e,t,r){var i=qt,s=zc.transition;zc.transition=null;try{qt=1,Ew(n,e,t,r)}finally{qt=i,zc.transition=s}}function GF(n,e,t,r){var i=qt,s=zc.transition;zc.transition=null;try{qt=4,Ew(n,e,t,r)}finally{qt=i,zc.transition=s}}function Ew(n,e,t,r){if(Wg){var i=yx(n,e,t,r);if(i===null)My(n,e,r,jg,t),rM(n,r);else if(UF(i,n,e,t,r))r.stopPropagation();else if(rM(n,r),e&4&&-1<OF.indexOf(n)){for(;i!==null;){var s=Fh(i);if(s!==null&&A3(s),s=yx(n,e,t,r),s===null&&My(n,e,r,jg,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else My(n,e,r,null,t)}}var jg=null;function yx(n,e,t,r){if(jg=null,n=Sw(r),n=zl(n),n!==null)if(e=yu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=v3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return jg=n,null}function P3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TF()){case bw:return 1;case w3:return 4;case Hg:case RF:return 16;case S3:return 536870912;default:return 16}default:return 16}}var Pa=null,Cw=null,xg=null;function B3(){if(xg)return xg;var n,e=Cw,t=e.length,r,i="value"in Pa?Pa.value:Pa.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return xg=i.slice(n,1<r?1-r:void 0)}function _g(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function om(){return!0}function sM(){return!1}function Oi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?om:sM,this.isPropagationStopped=sM,this}return An(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=om)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=om)},persist:function(){},isPersistent:om}),e}var lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tw=Oi(lf),Lh=An({},lf,{view:0,detail:0}),HF=Oi(Lh),my,gy,nd,Cv=An({},Lh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==nd&&(nd&&n.type==="mousemove"?(my=n.screenX-nd.screenX,gy=n.screenY-nd.screenY):gy=my=0,nd=n),my)},movementY:function(n){return"movementY"in n?n.movementY:gy}}),oM=Oi(Cv),VF=An({},Cv,{dataTransfer:0}),WF=Oi(VF),jF=An({},Lh,{relatedTarget:0}),vy=Oi(jF),$F=An({},lf,{animationName:0,elapsedTime:0,pseudoElement:0}),JF=Oi($F),KF=An({},lf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),XF=Oi(KF),YF=An({},lf,{data:0}),aM=Oi(YF),QF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=ZF[n])?!!e[n]:!1}function Rw(){return e4}var t4=An({},Lh,{key:function(n){if(n.key){var e=QF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=_g(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rw,charCode:function(n){return n.type==="keypress"?_g(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_g(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n4=Oi(t4),r4=An({},Cv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lM=Oi(r4),i4=An({},Lh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rw}),s4=Oi(i4),o4=An({},lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),a4=Oi(o4),l4=An({},Cv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u4=Oi(l4),c4=[9,13,27,32],Pw=Uo&&"CompositionEvent"in window,Ld=null;Uo&&"documentMode"in document&&(Ld=document.documentMode);var f4=Uo&&"TextEvent"in window&&!Ld,D3=Uo&&(!Pw||Ld&&8<Ld&&11>=Ld),uM=String.fromCharCode(32),cM=!1;function I3(n,e){switch(n){case"keyup":return c4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wc=!1;function d4(n,e){switch(n){case"compositionend":return L3(e);case"keypress":return e.which!==32?null:(cM=!0,uM);case"textInput":return n=e.data,n===uM&&cM?null:n;default:return null}}function h4(n,e){if(wc)return n==="compositionend"||!Pw&&I3(n,e)?(n=B3(),xg=Cw=Pa=null,wc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D3&&e.locale!=="ko"?null:e.data;default:return null}}var p4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!p4[n.type]:e==="textarea"}function F3(n,e,t,r){d3(r),e=$g(e,"onChange"),0<e.length&&(t=new Tw("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Fd=null,rh=null;function m4(n){$3(n,0)}function Tv(n){var e=Mc(n);if(s3(e))return n}function g4(n,e){if(n==="change")return e}var k3=!1;if(Uo){var yy;if(Uo){var xy="oninput"in document;if(!xy){var dM=document.createElement("div");dM.setAttribute("oninput","return;"),xy=typeof dM.oninput=="function"}yy=xy}else yy=!1;k3=yy&&(!document.documentMode||9<document.documentMode)}function hM(){Fd&&(Fd.detachEvent("onpropertychange",O3),rh=Fd=null)}function O3(n){if(n.propertyName==="value"&&Tv(rh)){var e=[];F3(e,rh,n,Sw(n)),g3(m4,e)}}function v4(n,e,t){n==="focusin"?(hM(),Fd=e,rh=t,Fd.attachEvent("onpropertychange",O3)):n==="focusout"&&hM()}function y4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tv(rh)}function x4(n,e){if(n==="click")return Tv(e)}function _4(n,e){if(n==="input"||n==="change")return Tv(e)}function w4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ds=typeof Object.is=="function"?Object.is:w4;function ih(n,e){if(Ds(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!ex.call(e,i)||!Ds(n[i],e[i]))return!1}return!0}function pM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mM(n,e){var t=pM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=pM(t)}}function U3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?U3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function N3(){for(var n=window,e=Ng();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ng(n.document)}return e}function Bw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function S4(n){var e=N3(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&U3(t.ownerDocument.documentElement,t)){if(r!==null&&Bw(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=mM(t,s);var o=mM(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var b4=Uo&&"documentMode"in document&&11>=document.documentMode,Sc=null,xx=null,kd=null,_x=!1;function gM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;_x||Sc==null||Sc!==Ng(r)||(r=Sc,"selectionStart"in r&&Bw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kd&&ih(kd,r)||(kd=r,r=$g(xx,"onSelect"),0<r.length&&(e=new Tw("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Sc)))}function am(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var bc={animationend:am("Animation","AnimationEnd"),animationiteration:am("Animation","AnimationIteration"),animationstart:am("Animation","AnimationStart"),transitionend:am("Transition","TransitionEnd")},_y={},z3={};Uo&&(z3=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function Rv(n){if(_y[n])return _y[n];if(!bc[n])return n;var e=bc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in z3)return _y[n]=e[t];return n}var G3=Rv("animationend"),H3=Rv("animationiteration"),V3=Rv("animationstart"),W3=Rv("transitionend"),j3=new Map,vM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(n,e){j3.set(n,e),vu(e,[n])}for(var wy=0;wy<vM.length;wy++){var Sy=vM[wy],M4=Sy.toLowerCase(),A4=Sy[0].toUpperCase()+Sy.slice(1);tl(M4,"on"+A4)}tl(G3,"onAnimationEnd");tl(H3,"onAnimationIteration");tl(V3,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(W3,"onTransitionEnd");jc("onMouseEnter",["mouseout","mouseover"]);jc("onMouseLeave",["mouseout","mouseover"]);jc("onPointerEnter",["pointerout","pointerover"]);jc("onPointerLeave",["pointerout","pointerover"]);vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function yM(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,MF(r,e,void 0,n),n.currentTarget=null}function $3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;yM(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;yM(i,a,u),s=l}}}if(Gg)throw n=mx,Gg=!1,mx=null,n}function cn(n,e){var t=e[Ax];t===void 0&&(t=e[Ax]=new Set);var r=n+"__bubble";t.has(r)||(J3(e,n,2,!1),t.add(r))}function by(n,e,t){var r=0;e&&(r|=4),J3(t,n,r,e)}var lm="_reactListening"+Math.random().toString(36).slice(2);function sh(n){if(!n[lm]){n[lm]=!0,e3.forEach(function(t){t!=="selectionchange"&&(E4.has(t)||by(t,!1,n),by(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[lm]||(e[lm]=!0,by("selectionchange",!1,e))}}function J3(n,e,t,r){switch(P3(e)){case 1:var i=zF;break;case 4:i=GF;break;default:i=Ew}t=i.bind(null,e,t,n),i=void 0,!px||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function My(n,e,t,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}g3(function(){var u=s,c=Sw(t),f=[];e:{var p=j3.get(n);if(p!==void 0){var m=Tw,g=n;switch(n){case"keypress":if(_g(t)===0)break e;case"keydown":case"keyup":m=n4;break;case"focusin":g="focus",m=vy;break;case"focusout":g="blur",m=vy;break;case"beforeblur":case"afterblur":m=vy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=oM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=WF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=s4;break;case G3:case H3:case V3:m=JF;break;case W3:m=a4;break;case"scroll":m=HF;break;case"wheel":m=u4;break;case"copy":case"cut":case"paste":m=XF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=lM}var y=(e&4)!==0,v=!y&&n==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var _=u,S;_!==null;){S=_;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,x!==null&&(b=Zd(_,x),b!=null&&y.push(oh(_,b,S)))),v)break;_=_.return}0<y.length&&(p=new m(p,g,null,t,c),f.push({event:p,listeners:y}))}}if((e&7)===0){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==dx&&(g=t.relatedTarget||t.fromElement)&&(zl(g)||g[No]))break e;if((m||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=u,g=g?zl(g):null,g!==null&&(v=yu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=oM,b="onMouseLeave",x="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(y=lM,b="onPointerLeave",x="onPointerEnter",_="pointer"),v=m==null?p:Mc(m),S=g==null?p:Mc(g),p=new y(b,_+"leave",m,t,c),p.target=v,p.relatedTarget=S,b=null,zl(c)===u&&(y=new y(x,_+"enter",g,t,c),y.target=S,y.relatedTarget=v,b=y),v=b,m&&g)t:{for(y=m,x=g,_=0,S=y;S;S=$u(S))_++;for(S=0,b=x;b;b=$u(b))S++;for(;0<_-S;)y=$u(y),_--;for(;0<S-_;)x=$u(x),S--;for(;_--;){if(y===x||x!==null&&y===x.alternate)break t;y=$u(y),x=$u(x)}y=null}else y=null;m!==null&&xM(f,p,m,y,!1),g!==null&&v!==null&&xM(f,v,g,y,!0)}}e:{if(p=u?Mc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=g4;else if(fM(p))if(k3)C=_4;else{C=y4;var E=v4}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=x4);if(C&&(C=C(n,u))){F3(f,C,t,c);break e}E&&E(n,p,u),n==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&ax(p,"number",p.value)}switch(E=u?Mc(u):window,n){case"focusin":(fM(E)||E.contentEditable==="true")&&(Sc=E,xx=u,kd=null);break;case"focusout":kd=xx=Sc=null;break;case"mousedown":_x=!0;break;case"contextmenu":case"mouseup":case"dragend":_x=!1,gM(f,t,c);break;case"selectionchange":if(b4)break;case"keydown":case"keyup":gM(f,t,c)}var P;if(Pw)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else wc?I3(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(D3&&t.locale!=="ko"&&(wc||M!=="onCompositionStart"?M==="onCompositionEnd"&&wc&&(P=B3()):(Pa=c,Cw="value"in Pa?Pa.value:Pa.textContent,wc=!0)),E=$g(u,M),0<E.length&&(M=new aM(M,n,null,t,c),f.push({event:M,listeners:E}),P?M.data=P:(P=L3(t),P!==null&&(M.data=P)))),(P=f4?d4(n,t):h4(n,t))&&(u=$g(u,"onBeforeInput"),0<u.length&&(c=new aM("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=P))}$3(f,e)})}function oh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function $g(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zd(n,t),s!=null&&r.unshift(oh(n,s,i)),s=Zd(n,e),s!=null&&r.push(oh(n,s,i))),n=n.return}return r}function $u(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Zd(t,s),l!=null&&o.unshift(oh(t,l,a))):i||(l=Zd(t,s),l!=null&&o.push(oh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var C4=/\r\n?/g,T4=/\u0000|\uFFFD/g;function _M(n){return(typeof n=="string"?n:""+n).replace(C4,`
`).replace(T4,"")}function um(n,e,t){if(e=_M(e),_M(n)!==e&&t)throw Error(Ne(425))}function Jg(){}var wx=null,Sx=null;function bx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,R4=typeof clearTimeout=="function"?clearTimeout:void 0,wM=typeof Promise=="function"?Promise:void 0,P4=typeof queueMicrotask=="function"?queueMicrotask:typeof wM<"u"?function(n){return wM.resolve(null).then(n).catch(B4)}:Mx;function B4(n){setTimeout(function(){throw n})}function Ay(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),nh(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);nh(e)}function ka(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function SM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var uf=Math.random().toString(36).slice(2),Ys="__reactFiber$"+uf,ah="__reactProps$"+uf,No="__reactContainer$"+uf,Ax="__reactEvents$"+uf,D4="__reactListeners$"+uf,I4="__reactHandles$"+uf;function zl(n){var e=n[Ys];if(e)return e;for(var t=n.parentNode;t;){if(e=t[No]||t[Ys]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=SM(n);n!==null;){if(t=n[Ys])return t;n=SM(n)}return e}n=t,t=n.parentNode}return null}function Fh(n){return n=n[Ys]||n[No],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Mc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ne(33))}function Pv(n){return n[ah]||null}var Ex=[],Ac=-1;function nl(n){return{current:n}}function fn(n){0>Ac||(n.current=Ex[Ac],Ex[Ac]=null,Ac--)}function ln(n,e){Ac++,Ex[Ac]=n.current,n.current=e}var $a={},kr=nl($a),mi=nl(!1),ou=$a;function $c(n,e){var t=n.type.contextTypes;if(!t)return $a;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function gi(n){return n=n.childContextTypes,n!=null}function Kg(){fn(mi),fn(kr)}function bM(n,e,t){if(kr.current!==$a)throw Error(Ne(168));ln(kr,e),ln(mi,t)}function K3(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ne(108,vF(n)||"Unknown",i));return An({},t,r)}function Xg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$a,ou=kr.current,ln(kr,n),ln(mi,mi.current),!0}function MM(n,e,t){var r=n.stateNode;if(!r)throw Error(Ne(169));t?(n=K3(n,e,ou),r.__reactInternalMemoizedMergedChildContext=n,fn(mi),fn(kr),ln(kr,n)):fn(mi),ln(mi,t)}var Eo=null,Bv=!1,Ey=!1;function X3(n){Eo===null?Eo=[n]:Eo.push(n)}function L4(n){Bv=!0,X3(n)}function rl(){if(!Ey&&Eo!==null){Ey=!0;var n=0,e=qt;try{var t=Eo;for(qt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Eo=null,Bv=!1}catch(i){throw Eo!==null&&(Eo=Eo.slice(n+1)),_3(bw,rl),i}finally{qt=e,Ey=!1}}return null}var Ec=[],Cc=0,Yg=null,Qg=0,Zi=[],es=0,au=null,Po=1,Bo="";function Il(n,e){Ec[Cc++]=Qg,Ec[Cc++]=Yg,Yg=n,Qg=e}function Y3(n,e,t){Zi[es++]=Po,Zi[es++]=Bo,Zi[es++]=au,au=n;var r=Po;n=Bo;var i=32-Ts(r)-1;r&=~(1<<i),t+=1;var s=32-Ts(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Po=1<<32-Ts(e)+i|t<<i|r,Bo=s+n}else Po=1<<s|t<<i|r,Bo=n}function Dw(n){n.return!==null&&(Il(n,1),Y3(n,1,0))}function Iw(n){for(;n===Yg;)Yg=Ec[--Cc],Ec[Cc]=null,Qg=Ec[--Cc],Ec[Cc]=null;for(;n===au;)au=Zi[--es],Zi[es]=null,Bo=Zi[--es],Zi[es]=null,Po=Zi[--es],Zi[es]=null}var Di=null,Bi=null,mn=!1,Es=null;function Q3(n,e){var t=is(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function AM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Di=n,Bi=ka(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Di=n,Bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=au!==null?{id:Po,overflow:Bo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=is(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Di=n,Bi=null,!0):!1;default:return!1}}function Cx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tx(n){if(mn){var e=Bi;if(e){var t=e;if(!AM(n,e)){if(Cx(n))throw Error(Ne(418));e=ka(t.nextSibling);var r=Di;e&&AM(n,e)?Q3(r,t):(n.flags=n.flags&-4097|2,mn=!1,Di=n)}}else{if(Cx(n))throw Error(Ne(418));n.flags=n.flags&-4097|2,mn=!1,Di=n}}}function EM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Di=n}function cm(n){if(n!==Di)return!1;if(!mn)return EM(n),mn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!bx(n.type,n.memoizedProps)),e&&(e=Bi)){if(Cx(n))throw q3(),Error(Ne(418));for(;e;)Q3(n,e),e=ka(e.nextSibling)}if(EM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ne(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Bi=ka(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Bi=null}}else Bi=Di?ka(n.stateNode.nextSibling):null;return!0}function q3(){for(var n=Bi;n;)n=ka(n.nextSibling)}function Jc(){Bi=Di=null,mn=!1}function Lw(n){Es===null?Es=[n]:Es.push(n)}var F4=jo.ReactCurrentBatchConfig;function Ms(n,e){if(n&&n.defaultProps){e=An({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var qg=nl(null),Zg=null,Tc=null,Fw=null;function kw(){Fw=Tc=Zg=null}function Ow(n){var e=qg.current;fn(qg),n._currentValue=e}function Rx(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Gc(n,e){Zg=n,Fw=Tc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(hi=!0),n.firstContext=null)}function as(n){var e=n._currentValue;if(Fw!==n)if(n={context:n,memoizedValue:e,next:null},Tc===null){if(Zg===null)throw Error(Ne(308));Tc=n,Zg.dependencies={lanes:0,firstContext:n}}else Tc=Tc.next=n;return e}var Gl=null;function Uw(n){Gl===null?Gl=[n]:Gl.push(n)}function Z3(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Uw(e)):(t.next=i.next,i.next=t),e.interleaved=t,zo(n,r)}function zo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ea=!1;function Nw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Fo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,(Vt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zo(n,t)}return i=r.interleaved,i===null?(e.next=e,Uw(r)):(e.next=i.next,i.next=e),r.interleaved=e,zo(n,t)}function wg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Mw(n,t)}}function CM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ev(n,e,t,r){var i=n.updateQueue;Ea=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(p=e,m=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=An({},f,p);break e;case 2:Ea=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);uu|=o,n.lanes=o,n.memoizedState=f}}function TM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var tR=new ZT.Component().refs;function Px(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:An({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Dv={isMounted:function(n){return(n=n._reactInternals)?yu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ei(),i=Na(n),s=Fo(r,i);s.payload=e,t!=null&&(s.callback=t),e=Oa(n,s,i),e!==null&&(Rs(e,n,i,r),wg(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ei(),i=Na(n),s=Fo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Oa(n,s,i),e!==null&&(Rs(e,n,i,r),wg(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ei(),r=Na(n),i=Fo(t,r);i.tag=2,e!=null&&(i.callback=e),e=Oa(n,i,r),e!==null&&(Rs(e,n,r,t),wg(e,n,r))}};function RM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ih(t,r)||!ih(i,s):!0}function nR(n,e,t){var r=!1,i=$a,s=e.contextType;return typeof s=="object"&&s!==null?s=as(s):(i=gi(e)?ou:kr.current,r=e.contextTypes,s=(r=r!=null)?$c(n,i):$a),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dv,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function PM(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Dv.enqueueReplaceState(e,e.state,null)}function Bx(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=tR,Nw(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=as(s):(s=gi(e)?ou:kr.current,i.context=$c(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Px(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Dv.enqueueReplaceState(i,i.state,null),ev(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function rd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ne(309));var r=t.stateNode}if(!r)throw Error(Ne(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===tR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ne(284));if(!t._owner)throw Error(Ne(290,n))}return n}function fm(n,e){throw n=Object.prototype.toString.call(e),Error(Ne(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function BM(n){var e=n._init;return e(n._payload)}function rR(n){function e(x,_){if(n){var S=x.deletions;S===null?(x.deletions=[_],x.flags|=16):S.push(_)}}function t(x,_){if(!n)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=za(x,_),x.index=0,x.sibling=null,x}function s(x,_,S){return x.index=S,n?(S=x.alternate,S!==null?(S=S.index,S<_?(x.flags|=2,_):S):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,_,S,b){return _===null||_.tag!==6?(_=Iy(S,x.mode,b),_.return=x,_):(_=i(_,S),_.return=x,_)}function l(x,_,S,b){var C=S.type;return C===_c?c(x,_,S.props.children,b,S.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Aa&&BM(C)===_.type)?(b=i(_,S.props),b.ref=rd(x,_,S),b.return=x,b):(b=Cg(S.type,S.key,S.props,null,x.mode,b),b.ref=rd(x,_,S),b.return=x,b)}function u(x,_,S,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Ly(S,x.mode,b),_.return=x,_):(_=i(_,S.children||[]),_.return=x,_)}function c(x,_,S,b,C){return _===null||_.tag!==7?(_=Ql(S,x.mode,b,C),_.return=x,_):(_=i(_,S),_.return=x,_)}function f(x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Iy(""+_,x.mode,S),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case em:return S=Cg(_.type,_.key,_.props,null,x.mode,S),S.ref=rd(x,null,_),S.return=x,S;case xc:return _=Ly(_,x.mode,S),_.return=x,_;case Aa:var b=_._init;return f(x,b(_._payload),S)}if(Ed(_)||qf(_))return _=Ql(_,x.mode,S,null),_.return=x,_;fm(x,_)}return null}function p(x,_,S,b){var C=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(x,_,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case em:return S.key===C?l(x,_,S,b):null;case xc:return S.key===C?u(x,_,S,b):null;case Aa:return C=S._init,p(x,_,C(S._payload),b)}if(Ed(S)||qf(S))return C!==null?null:c(x,_,S,b,null);fm(x,S)}return null}function m(x,_,S,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(S)||null,a(_,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case em:return x=x.get(b.key===null?S:b.key)||null,l(_,x,b,C);case xc:return x=x.get(b.key===null?S:b.key)||null,u(_,x,b,C);case Aa:var E=b._init;return m(x,_,S,E(b._payload),C)}if(Ed(b)||qf(b))return x=x.get(S)||null,c(_,x,b,C,null);fm(_,b)}return null}function g(x,_,S,b){for(var C=null,E=null,P=_,M=_=0,T=null;P!==null&&M<S.length;M++){P.index>M?(T=P,P=null):T=P.sibling;var R=p(x,P,S[M],b);if(R===null){P===null&&(P=T);break}n&&P&&R.alternate===null&&e(x,P),_=s(R,_,M),E===null?C=R:E.sibling=R,E=R,P=T}if(M===S.length)return t(x,P),mn&&Il(x,M),C;if(P===null){for(;M<S.length;M++)P=f(x,S[M],b),P!==null&&(_=s(P,_,M),E===null?C=P:E.sibling=P,E=P);return mn&&Il(x,M),C}for(P=r(x,P);M<S.length;M++)T=m(P,x,M,S[M],b),T!==null&&(n&&T.alternate!==null&&P.delete(T.key===null?M:T.key),_=s(T,_,M),E===null?C=T:E.sibling=T,E=T);return n&&P.forEach(function(L){return e(x,L)}),mn&&Il(x,M),C}function y(x,_,S,b){var C=qf(S);if(typeof C!="function")throw Error(Ne(150));if(S=C.call(S),S==null)throw Error(Ne(151));for(var E=C=null,P=_,M=_=0,T=null,R=S.next();P!==null&&!R.done;M++,R=S.next()){P.index>M?(T=P,P=null):T=P.sibling;var L=p(x,P,R.value,b);if(L===null){P===null&&(P=T);break}n&&P&&L.alternate===null&&e(x,P),_=s(L,_,M),E===null?C=L:E.sibling=L,E=L,P=T}if(R.done)return t(x,P),mn&&Il(x,M),C;if(P===null){for(;!R.done;M++,R=S.next())R=f(x,R.value,b),R!==null&&(_=s(R,_,M),E===null?C=R:E.sibling=R,E=R);return mn&&Il(x,M),C}for(P=r(x,P);!R.done;M++,R=S.next())R=m(P,x,M,R.value,b),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?M:R.key),_=s(R,_,M),E===null?C=R:E.sibling=R,E=R);return n&&P.forEach(function(I){return e(x,I)}),mn&&Il(x,M),C}function v(x,_,S,b){if(typeof S=="object"&&S!==null&&S.type===_c&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case em:e:{for(var C=S.key,E=_;E!==null;){if(E.key===C){if(C=S.type,C===_c){if(E.tag===7){t(x,E.sibling),_=i(E,S.props.children),_.return=x,x=_;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Aa&&BM(C)===E.type){t(x,E.sibling),_=i(E,S.props),_.ref=rd(x,E,S),_.return=x,x=_;break e}t(x,E);break}else e(x,E);E=E.sibling}S.type===_c?(_=Ql(S.props.children,x.mode,b,S.key),_.return=x,x=_):(b=Cg(S.type,S.key,S.props,null,x.mode,b),b.ref=rd(x,_,S),b.return=x,x=b)}return o(x);case xc:e:{for(E=S.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){t(x,_.sibling),_=i(_,S.children||[]),_.return=x,x=_;break e}else{t(x,_);break}else e(x,_);_=_.sibling}_=Ly(S,x.mode,b),_.return=x,x=_}return o(x);case Aa:return E=S._init,v(x,_,E(S._payload),b)}if(Ed(S))return g(x,_,S,b);if(qf(S))return y(x,_,S,b);fm(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(t(x,_.sibling),_=i(_,S),_.return=x,x=_):(t(x,_),_=Iy(S,x.mode,b),_.return=x,x=_),o(x)):t(x,_)}return v}var Kc=rR(!0),iR=rR(!1),kh={},qs=nl(kh),lh=nl(kh),uh=nl(kh);function Hl(n){if(n===kh)throw Error(Ne(174));return n}function zw(n,e){switch(ln(uh,e),ln(lh,n),ln(qs,kh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ux(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ux(e,n)}fn(qs),ln(qs,e)}function Xc(){fn(qs),fn(lh),fn(uh)}function sR(n){Hl(uh.current);var e=Hl(qs.current),t=ux(e,n.type);e!==t&&(ln(lh,n),ln(qs,t))}function Gw(n){lh.current===n&&(fn(qs),fn(lh))}var _n=nl(0);function tv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cy=[];function Hw(){for(var n=0;n<Cy.length;n++)Cy[n]._workInProgressVersionPrimary=null;Cy.length=0}var Sg=jo.ReactCurrentDispatcher,Ty=jo.ReactCurrentBatchConfig,lu=0,bn=null,Yn=null,sr=null,nv=!1,Od=!1,ch=0,k4=0;function Cr(){throw Error(Ne(321))}function Vw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ds(n[t],e[t]))return!1;return!0}function Ww(n,e,t,r,i,s){if(lu=s,bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sg.current=n===null||n.memoizedState===null?z4:G4,n=t(r,i),Od){s=0;do{if(Od=!1,ch=0,25<=s)throw Error(Ne(301));s+=1,sr=Yn=null,e.updateQueue=null,Sg.current=H4,n=t(r,i)}while(Od)}if(Sg.current=rv,e=Yn!==null&&Yn.next!==null,lu=0,sr=Yn=bn=null,nv=!1,e)throw Error(Ne(300));return n}function jw(){var n=ch!==0;return ch=0,n}function Ks(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?bn.memoizedState=sr=n:sr=sr.next=n,sr}function ls(){if(Yn===null){var n=bn.alternate;n=n!==null?n.memoizedState:null}else n=Yn.next;var e=sr===null?bn.memoizedState:sr.next;if(e!==null)sr=e,Yn=n;else{if(n===null)throw Error(Ne(310));Yn=n,n={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},sr===null?bn.memoizedState=sr=n:sr=sr.next=n}return sr}function fh(n,e){return typeof e=="function"?e(n):e}function Ry(n){var e=ls(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=Yn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((lu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,bn.lanes|=c,uu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ds(r,e.memoizedState)||(hi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,bn.lanes|=s,uu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Py(n){var e=ls(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ds(s,e.memoizedState)||(hi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function oR(){}function aR(n,e){var t=bn,r=ls(),i=e(),s=!Ds(r.memoizedState,i);if(s&&(r.memoizedState=i,hi=!0),r=r.queue,$w(cR.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||sr!==null&&sr.memoizedState.tag&1){if(t.flags|=2048,dh(9,uR.bind(null,t,r,i,e),void 0,null),lr===null)throw Error(Ne(349));(lu&30)!==0||lR(t,e,i)}return i}function lR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=bn.updateQueue,e===null?(e={lastEffect:null,stores:null},bn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function uR(n,e,t,r){e.value=t,e.getSnapshot=r,fR(e)&&dR(n)}function cR(n,e,t){return t(function(){fR(e)&&dR(n)})}function fR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ds(n,t)}catch{return!0}}function dR(n){var e=zo(n,1);e!==null&&Rs(e,n,1,-1)}function DM(n){var e=Ks();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fh,lastRenderedState:n},e.queue=n,n=n.dispatch=N4.bind(null,bn,n),[e.memoizedState,n]}function dh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=bn.updateQueue,e===null?(e={lastEffect:null,stores:null},bn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function hR(){return ls().memoizedState}function bg(n,e,t,r){var i=Ks();bn.flags|=n,i.memoizedState=dh(1|e,t,void 0,r===void 0?null:r)}function Iv(n,e,t,r){var i=ls();r=r===void 0?null:r;var s=void 0;if(Yn!==null){var o=Yn.memoizedState;if(s=o.destroy,r!==null&&Vw(r,o.deps)){i.memoizedState=dh(e,t,s,r);return}}bn.flags|=n,i.memoizedState=dh(1|e,t,s,r)}function IM(n,e){return bg(8390656,8,n,e)}function $w(n,e){return Iv(2048,8,n,e)}function pR(n,e){return Iv(4,2,n,e)}function mR(n,e){return Iv(4,4,n,e)}function gR(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function vR(n,e,t){return t=t!=null?t.concat([n]):null,Iv(4,4,gR.bind(null,e,n),t)}function Jw(){}function yR(n,e){var t=ls();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Vw(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function xR(n,e){var t=ls();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Vw(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function _R(n,e,t){return(lu&21)===0?(n.baseState&&(n.baseState=!1,hi=!0),n.memoizedState=t):(Ds(t,e)||(t=b3(),bn.lanes|=t,uu|=t,n.baseState=!0),e)}function O4(n,e){var t=qt;qt=t!==0&&4>t?t:4,n(!0);var r=Ty.transition;Ty.transition={};try{n(!1),e()}finally{qt=t,Ty.transition=r}}function wR(){return ls().memoizedState}function U4(n,e,t){var r=Na(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},SR(n))bR(e,t);else if(t=Z3(n,e,t,r),t!==null){var i=ei();Rs(t,n,r,i),MR(t,e,r)}}function N4(n,e,t){var r=Na(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(SR(n))bR(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ds(a,o)){var l=e.interleaved;l===null?(i.next=i,Uw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Z3(n,e,i,r),t!==null&&(i=ei(),Rs(t,n,r,i),MR(t,e,r))}}function SR(n){var e=n.alternate;return n===bn||e!==null&&e===bn}function bR(n,e){Od=nv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function MR(n,e,t){if((t&4194240)!==0){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Mw(n,t)}}var rv={readContext:as,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},z4={readContext:as,useCallback:function(n,e){return Ks().memoizedState=[n,e===void 0?null:e],n},useContext:as,useEffect:IM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,bg(4194308,4,gR.bind(null,e,n),t)},useLayoutEffect:function(n,e){return bg(4194308,4,n,e)},useInsertionEffect:function(n,e){return bg(4,2,n,e)},useMemo:function(n,e){var t=Ks();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ks();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=U4.bind(null,bn,n),[r.memoizedState,n]},useRef:function(n){var e=Ks();return n={current:n},e.memoizedState=n},useState:DM,useDebugValue:Jw,useDeferredValue:function(n){return Ks().memoizedState=n},useTransition:function(){var n=DM(!1),e=n[0];return n=O4.bind(null,n[1]),Ks().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=bn,i=Ks();if(mn){if(t===void 0)throw Error(Ne(407));t=t()}else{if(t=e(),lr===null)throw Error(Ne(349));(lu&30)!==0||lR(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,IM(cR.bind(null,r,s,n),[n]),r.flags|=2048,dh(9,uR.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ks(),e=lr.identifierPrefix;if(mn){var t=Bo,r=Po;t=(r&~(1<<32-Ts(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=ch++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=k4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},G4={readContext:as,useCallback:yR,useContext:as,useEffect:$w,useImperativeHandle:vR,useInsertionEffect:pR,useLayoutEffect:mR,useMemo:xR,useReducer:Ry,useRef:hR,useState:function(){return Ry(fh)},useDebugValue:Jw,useDeferredValue:function(n){var e=ls();return _R(e,Yn.memoizedState,n)},useTransition:function(){var n=Ry(fh)[0],e=ls().memoizedState;return[n,e]},useMutableSource:oR,useSyncExternalStore:aR,useId:wR,unstable_isNewReconciler:!1},H4={readContext:as,useCallback:yR,useContext:as,useEffect:$w,useImperativeHandle:vR,useInsertionEffect:pR,useLayoutEffect:mR,useMemo:xR,useReducer:Py,useRef:hR,useState:function(){return Py(fh)},useDebugValue:Jw,useDeferredValue:function(n){var e=ls();return Yn===null?e.memoizedState=n:_R(e,Yn.memoizedState,n)},useTransition:function(){var n=Py(fh)[0],e=ls().memoizedState;return[n,e]},useMutableSource:oR,useSyncExternalStore:aR,useId:wR,unstable_isNewReconciler:!1};function Yc(n,e){try{var t="",r=e;do t+=gF(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function By(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function Dx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var V4=typeof WeakMap=="function"?WeakMap:Map;function AR(n,e,t){t=Fo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){sv||(sv=!0,Hx=r),Dx(n,e)},t}function ER(n,e,t){t=Fo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Dx(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Dx(n,e),typeof r!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function LM(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new V4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=rk.bind(null,n,e,t),e.then(n,n))}function FM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function kM(n,e,t,r,i){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Fo(-1,1),e.tag=2,Oa(t,e,1))),t.lanes|=1),n):(n.flags|=65536,n.lanes=i,n)}var W4=jo.ReactCurrentOwner,hi=!1;function Xr(n,e,t,r){e.child=n===null?iR(e,null,t,r):Kc(e,n.child,t,r)}function OM(n,e,t,r,i){t=t.render;var s=e.ref;return Gc(e,i),r=Ww(n,e,t,r,s,i),t=jw(),n!==null&&!hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Go(n,e,i)):(mn&&t&&Dw(e),e.flags|=1,Xr(n,e,r,i),e.child)}function UM(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!tS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,CR(n,e,s,r,i)):(n=Cg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,(n.lanes&i)===0){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ih,t(o,r)&&n.ref===e.ref)return Go(n,e,i)}return e.flags|=1,n=za(s,r),n.ref=e.ref,n.return=e,e.child=n}function CR(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ih(s,r)&&n.ref===e.ref)if(hi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)(n.flags&131072)!==0&&(hi=!0);else return e.lanes=n.lanes,Go(n,e,i)}return Ix(n,e,t,r,i)}function TR(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Pc,Pi),Pi|=t;else{if((t&1073741824)===0)return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ln(Pc,Pi),Pi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ln(Pc,Pi),Pi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ln(Pc,Pi),Pi|=r;return Xr(n,e,i,t),e.child}function RR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ix(n,e,t,r,i){var s=gi(t)?ou:kr.current;return s=$c(e,s),Gc(e,i),t=Ww(n,e,t,r,s,i),r=jw(),n!==null&&!hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Go(n,e,i)):(mn&&r&&Dw(e),e.flags|=1,Xr(n,e,t,i),e.child)}function NM(n,e,t,r,i){if(gi(t)){var s=!0;Xg(e)}else s=!1;if(Gc(e,i),e.stateNode===null)Mg(n,e),nR(e,t,r),Bx(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=as(u):(u=gi(t)?ou:kr.current,u=$c(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&PM(e,o,r,u),Ea=!1;var p=e.memoizedState;o.state=p,ev(e,r,o,i),l=e.memoizedState,a!==r||p!==l||mi.current||Ea?(typeof c=="function"&&(Px(e,t,c,r),l=e.memoizedState),(a=Ea||RM(e,t,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eR(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ms(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=as(l):(l=gi(t)?ou:kr.current,l=$c(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&PM(e,o,r,l),Ea=!1,p=e.memoizedState,o.state=p,ev(e,r,o,i);var g=e.memoizedState;a!==f||p!==g||mi.current||Ea?(typeof m=="function"&&(Px(e,t,m,r),g=e.memoizedState),(u=Ea||RM(e,t,u,r,p,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Lx(n,e,t,r,s,i)}function Lx(n,e,t,r,i,s){RR(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MM(e,t,!1),Go(n,e,s);r=e.stateNode,W4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Kc(e,n.child,null,s),e.child=Kc(e,null,a,s)):Xr(n,e,a,s),e.memoizedState=r.state,i&&MM(e,t,!0),e.child}function PR(n){var e=n.stateNode;e.pendingContext?bM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&bM(n,e.context,!1),zw(n,e.containerInfo)}function zM(n,e,t,r,i){return Jc(),Lw(i),e.flags|=256,Xr(n,e,t,r),e.child}var Fx={dehydrated:null,treeContext:null,retryLane:0};function kx(n){return{baseLanes:n,cachePool:null,transitions:null}}function BR(n,e,t){var r=e.pendingProps,i=_n.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ln(_n,i&1),n===null)return Tx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kv(o,r,0,null),n=Ql(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=kx(t),e.memoizedState=Fx,n):Kw(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return j4(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=za(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=za(a,s):(s=Ql(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?kx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Fx,r}return s=n.child,n=s.sibling,r=za(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Kw(n,e){return e=kv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function dm(n,e,t,r){return r!==null&&Lw(r),Kc(e,n.child,null,t),n=Kw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function j4(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=By(Error(Ne(422))),dm(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kv({mode:"visible",children:r.children},i,0,null),s=Ql(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Kc(e,n.child,null,o),e.child.memoizedState=kx(o),e.memoizedState=Fx,s);if((e.mode&1)===0)return dm(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ne(419)),r=By(s,r,void 0),dm(n,e,o,r)}if(a=(o&n.childLanes)!==0,hi||a){if(r=lr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zo(n,i),Rs(r,n,i,-1))}return eS(),r=By(Error(Ne(421))),dm(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=ik.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Bi=ka(i.nextSibling),Di=e,mn=!0,Es=null,n!==null&&(Zi[es++]=Po,Zi[es++]=Bo,Zi[es++]=au,Po=n.id,Bo=n.overflow,au=e),e=Kw(e,r.children),e.flags|=4096,e)}function GM(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Rx(n.return,e,t)}function Dy(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function DR(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xr(n,e,r.children,t),r=_n.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GM(n,t,e);else if(n.tag===19)GM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ln(_n,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&tv(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Dy(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&tv(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Dy(e,!0,t,null,s);break;case"together":Dy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mg(n,e){(e.mode&1)===0&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Go(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),uu|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(Ne(153));if(e.child!==null){for(n=e.child,t=za(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=za(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function $4(n,e,t){switch(e.tag){case 3:PR(e),Jc();break;case 5:sR(e);break;case 1:gi(e.type)&&Xg(e);break;case 4:zw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ln(qg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ln(_n,_n.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?BR(n,e,t):(ln(_n,_n.current&1),n=Go(n,e,t),n!==null?n.sibling:null);ln(_n,_n.current&1);break;case 19:if(r=(t&e.childLanes)!==0,(n.flags&128)!==0){if(r)return DR(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ln(_n,_n.current),r)break;return null;case 22:case 23:return e.lanes=0,TR(n,e,t)}return Go(n,e,t)}var IR,Ox,LR,FR;IR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ox=function(){};LR=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Hl(qs.current);var s=null;switch(t){case"input":i=sx(n,i),r=sx(n,r),s=[];break;case"select":i=An({},i,{value:void 0}),r=An({},r,{value:void 0}),s=[];break;case"textarea":i=lx(n,i),r=lx(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Jg)}cx(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&cn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};FR=function(n,e,t,r){t!==r&&(e.flags|=4)};function id(n,e){if(!mn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Tr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function J4(n,e,t){var r=e.pendingProps;switch(Iw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(e),null;case 1:return gi(e.type)&&Kg(),Tr(e),null;case 3:return r=e.stateNode,Xc(),fn(mi),fn(kr),Hw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(cm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Es!==null&&(jx(Es),Es=null))),Ox(n,e),Tr(e),null;case 5:Gw(e);var i=Hl(uh.current);if(t=e.type,n!==null&&e.stateNode!=null)LR(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return Tr(e),null}if(n=Hl(qs.current),cm(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Ys]=e,r[ah]=s,n=(e.mode&1)!==0,t){case"dialog":cn("cancel",r),cn("close",r);break;case"iframe":case"object":case"embed":cn("load",r);break;case"video":case"audio":for(i=0;i<Td.length;i++)cn(Td[i],r);break;case"source":cn("error",r);break;case"img":case"image":case"link":cn("error",r),cn("load",r);break;case"details":cn("toggle",r);break;case"input":Y2(r,s),cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},cn("invalid",r);break;case"textarea":q2(r,s),cn("invalid",r)}cx(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&um(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&um(r.textContent,a,n),i=["children",""+a]):Qd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&cn("scroll",r)}switch(t){case"input":tm(r),Q2(r,s,!0);break;case"textarea":tm(r),Z2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Jg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=l3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ys]=e,n[ah]=r,IR(n,e,!1,!1),e.stateNode=n;e:{switch(o=fx(t,r),t){case"dialog":cn("cancel",n),cn("close",n),i=r;break;case"iframe":case"object":case"embed":cn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Td.length;i++)cn(Td[i],n);i=r;break;case"source":cn("error",n),i=r;break;case"img":case"image":case"link":cn("error",n),cn("load",n),i=r;break;case"details":cn("toggle",n),i=r;break;case"input":Y2(n,r),i=sx(n,r),cn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=An({},r,{value:void 0}),cn("invalid",n);break;case"textarea":q2(n,r),i=lx(n,r),cn("invalid",n);break;default:i=r}cx(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?f3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&u3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&qd(n,l):typeof l=="number"&&qd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&cn("scroll",n):l!=null&&yw(n,s,l,o))}switch(t){case"input":tm(n),Q2(n,r,!1);break;case"textarea":tm(n),Z2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ja(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Oc(n,!!r.multiple,s,!1):r.defaultValue!=null&&Oc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Jg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tr(e),null;case 6:if(n&&e.stateNode!=null)FR(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));if(t=Hl(uh.current),Hl(qs.current),cm(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ys]=e,(s=r.nodeValue!==t)&&(n=Di,n!==null))switch(n.tag){case 3:um(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&um(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ys]=e,e.stateNode=r}return Tr(e),null;case 13:if(fn(_n),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(mn&&Bi!==null&&(e.mode&1)!==0&&(e.flags&128)===0)q3(),Jc(),e.flags|=98560,s=!1;else if(s=cm(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[Ys]=e}else Jc(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Tr(e),s=!1}else Es!==null&&(jx(Es),Es=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(_n.current&1)!==0?qn===0&&(qn=3):eS())),e.updateQueue!==null&&(e.flags|=4),Tr(e),null);case 4:return Xc(),Ox(n,e),n===null&&sh(e.stateNode.containerInfo),Tr(e),null;case 10:return Ow(e.type._context),Tr(e),null;case 17:return gi(e.type)&&Kg(),Tr(e),null;case 19:if(fn(_n),s=e.memoizedState,s===null)return Tr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)id(s,!1);else{if(qn!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=tv(n),o!==null){for(e.flags|=128,id(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ln(_n,_n.current&1|2),e.child}n=n.sibling}s.tail!==null&&On()>Qc&&(e.flags|=128,r=!0,id(s,!1),e.lanes=4194304)}else{if(!r)if(n=tv(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),id(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mn)return Tr(e),null}else 2*On()-s.renderingStartTime>Qc&&t!==1073741824&&(e.flags|=128,r=!0,id(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=On(),e.sibling=null,t=_n.current,ln(_n,r?t&1|2:t&1),e):(Tr(e),null);case 22:case 23:return Zw(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Pi&1073741824)!==0&&(Tr(e),e.subtreeFlags&6&&(e.flags|=8192)):Tr(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function K4(n,e){switch(Iw(e),e.tag){case 1:return gi(e.type)&&Kg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Xc(),fn(mi),fn(kr),Hw(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return Gw(e),null;case 13:if(fn(_n),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));Jc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return fn(_n),null;case 4:return Xc(),null;case 10:return Ow(e.type._context),null;case 22:case 23:return Zw(),null;case 24:return null;default:return null}}var hm=!1,Br=!1,X4=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Rc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Rn(n,e,r)}else t.current=null}function Ux(n,e,t){try{t()}catch(r){Rn(n,e,r)}}var HM=!1;function Y4(n,e){if(wx=Wg,n=N3(),Bw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++c===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Sx={focusedElem:n,selectionRange:t},Wg=!1,Qe=e;Qe!==null;)if(e=Qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Qe=n;else for(;Qe!==null;){e=Qe;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ms(e.type,y),v);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(b){Rn(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}return g=HM,HM=!1,g}function Ud(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ux(e,t,s)}i=i.next}while(i!==r)}}function Lv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Nx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function kR(n){var e=n.alternate;e!==null&&(n.alternate=null,kR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ys],delete e[ah],delete e[Ax],delete e[D4],delete e[I4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function OR(n){return n.tag===5||n.tag===3||n.tag===4}function VM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||OR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zx(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Jg));else if(r!==4&&(n=n.child,n!==null))for(zx(n,e,t),n=n.sibling;n!==null;)zx(n,e,t),n=n.sibling}function Gx(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Gx(n,e,t),n=n.sibling;n!==null;)Gx(n,e,t),n=n.sibling}var pr=null,As=!1;function ca(n,e,t){for(t=t.child;t!==null;)UR(n,e,t),t=t.sibling}function UR(n,e,t){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Ev,t)}catch{}switch(t.tag){case 5:Br||Rc(t,e);case 6:var r=pr,i=As;pr=null,ca(n,e,t),pr=r,As=i,pr!==null&&(As?(n=pr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):pr.removeChild(t.stateNode));break;case 18:pr!==null&&(As?(n=pr,t=t.stateNode,n.nodeType===8?Ay(n.parentNode,t):n.nodeType===1&&Ay(n,t),nh(n)):Ay(pr,t.stateNode));break;case 4:r=pr,i=As,pr=t.stateNode.containerInfo,As=!0,ca(n,e,t),pr=r,As=i;break;case 0:case 11:case 14:case 15:if(!Br&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Ux(t,e,o),i=i.next}while(i!==r)}ca(n,e,t);break;case 1:if(!Br&&(Rc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Rn(t,e,a)}ca(n,e,t);break;case 21:ca(n,e,t);break;case 22:t.mode&1?(Br=(r=Br)||t.memoizedState!==null,ca(n,e,t),Br=r):ca(n,e,t);break;default:ca(n,e,t)}}function WM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new X4),e.forEach(function(r){var i=sk.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function xs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:pr=a.stateNode,As=!1;break e;case 3:pr=a.stateNode.containerInfo,As=!0;break e;case 4:pr=a.stateNode.containerInfo,As=!0;break e}a=a.return}if(pr===null)throw Error(Ne(160));UR(s,o,i),pr=null,As=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Rn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NR(e,n),e=e.sibling}function NR(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xs(e,n),$s(n),r&4){try{Ud(3,n,n.return),Lv(3,n)}catch(y){Rn(n,n.return,y)}try{Ud(5,n,n.return)}catch(y){Rn(n,n.return,y)}}break;case 1:xs(e,n),$s(n),r&512&&t!==null&&Rc(t,t.return);break;case 5:if(xs(e,n),$s(n),r&512&&t!==null&&Rc(t,t.return),n.flags&32){var i=n.stateNode;try{qd(i,"")}catch(y){Rn(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&o3(i,s),fx(a,o);var u=fx(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?f3(i,f):c==="dangerouslySetInnerHTML"?u3(i,f):c==="children"?qd(i,f):yw(i,c,f,u)}switch(a){case"input":ox(i,s);break;case"textarea":a3(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Oc(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Oc(i,!!s.multiple,s.defaultValue,!0):Oc(i,!!s.multiple,s.multiple?[]:"",!1))}i[ah]=s}catch(y){Rn(n,n.return,y)}}break;case 6:if(xs(e,n),$s(n),r&4){if(n.stateNode===null)throw Error(Ne(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){Rn(n,n.return,y)}}break;case 3:if(xs(e,n),$s(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{nh(e.containerInfo)}catch(y){Rn(n,n.return,y)}break;case 4:xs(e,n),$s(n);break;case 13:xs(e,n),$s(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qw=On())),r&4&&WM(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Br=(u=Br)||c,xs(e,n),Br=u):xs(e,n),$s(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&(n.mode&1)!==0)for(Qe=n,c=n.child;c!==null;){for(f=Qe=c;Qe!==null;){switch(p=Qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:Ud(4,p,p.return);break;case 1:Rc(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Rn(r,t,y)}}break;case 5:Rc(p,p.return);break;case 22:if(p.memoizedState!==null){$M(f);continue}}m!==null?(m.return=p,Qe=m):$M(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=c3("display",o))}catch(y){Rn(n,n.return,y)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Rn(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xs(e,n),$s(n),r&4&&WM(n);break;case 21:break;default:xs(e,n),$s(n)}}function $s(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(OR(t)){var r=t;break e}t=t.return}throw Error(Ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qd(i,""),r.flags&=-33);var s=VM(n);Gx(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VM(n);zx(n,a,o);break;default:throw Error(Ne(161))}}catch(l){Rn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Q4(n,e,t){Qe=n,zR(n)}function zR(n,e,t){for(var r=(n.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Br;a=hm;var u=Br;if(hm=o,(Br=l)&&!u)for(Qe=i;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?JM(i):l!==null?(l.return=o,Qe=l):JM(i);for(;s!==null;)Qe=s,zR(s),s=s.sibling;Qe=i,hm=a,Br=u}jM(n)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,Qe=s):jM(n)}}function jM(n){for(;Qe!==null;){var e=Qe;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Br||Lv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Br)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ms(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&TM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}TM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&nh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}Br||e.flags&512&&Nx(e)}catch(p){Rn(e,e.return,p)}}if(e===n){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function $M(n){for(;Qe!==null;){var e=Qe;if(e===n){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function JM(n){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Lv(4,e)}catch(l){Rn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Rn(e,i,l)}}var s=e.return;try{Nx(e)}catch(l){Rn(e,s,l)}break;case 5:var o=e.return;try{Nx(e)}catch(l){Rn(e,o,l)}}}catch(l){Rn(e,e.return,l)}if(e===n){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var q4=Math.ceil,iv=jo.ReactCurrentDispatcher,Xw=jo.ReactCurrentOwner,os=jo.ReactCurrentBatchConfig,Vt=0,lr=null,Wn=null,gr=0,Pi=0,Pc=nl(0),qn=0,hh=null,uu=0,Fv=0,Yw=0,Nd=null,di=null,Qw=0,Qc=1/0,Ao=null,sv=!1,Hx=null,Ua=null,pm=!1,Ba=null,ov=0,zd=0,Vx=null,Ag=-1,Eg=0;function ei(){return(Vt&6)!==0?On():Ag!==-1?Ag:Ag=On()}function Na(n){return(n.mode&1)===0?1:(Vt&2)!==0&&gr!==0?gr&-gr:F4.transition!==null?(Eg===0&&(Eg=b3()),Eg):(n=qt,n!==0||(n=window.event,n=n===void 0?16:P3(n.type)),n)}function Rs(n,e,t,r){if(50<zd)throw zd=0,Vx=null,Error(Ne(185));Ih(n,t,r),((Vt&2)===0||n!==lr)&&(n===lr&&((Vt&2)===0&&(Fv|=t),qn===4&&Ra(n,gr)),vi(n,r),t===1&&Vt===0&&(e.mode&1)===0&&(Qc=On()+500,Bv&&rl()))}function vi(n,e){var t=n.callbackNode;FF(n,e);var r=Vg(n,n===lr?gr:0);if(r===0)t!==null&&nM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&nM(t),e===1)n.tag===0?L4(KM.bind(null,n)):X3(KM.bind(null,n)),P4(function(){(Vt&6)===0&&rl()}),t=null;else{switch(M3(r)){case 1:t=bw;break;case 4:t=w3;break;case 16:t=Hg;break;case 536870912:t=S3;break;default:t=Hg}t=KR(t,GR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function GR(n,e){if(Ag=-1,Eg=0,(Vt&6)!==0)throw Error(Ne(327));var t=n.callbackNode;if(Hc()&&n.callbackNode!==t)return null;var r=Vg(n,n===lr?gr:0);if(r===0)return null;if((r&30)!==0||(r&n.expiredLanes)!==0||e)e=av(n,r);else{e=r;var i=Vt;Vt|=2;var s=VR();(lr!==n||gr!==e)&&(Ao=null,Qc=On()+500,Yl(n,e));do try{tk();break}catch(a){HR(n,a)}while(1);kw(),iv.current=s,Vt=i,Wn!==null?e=0:(lr=null,gr=0,e=qn)}if(e!==0){if(e===2&&(i=gx(n),i!==0&&(r=i,e=Wx(n,i))),e===1)throw t=hh,Yl(n,0),Ra(n,r),vi(n,On()),t;if(e===6)Ra(n,r);else{if(i=n.current.alternate,(r&30)===0&&!Z4(i)&&(e=av(n,r),e===2&&(s=gx(n),s!==0&&(r=s,e=Wx(n,s))),e===1))throw t=hh,Yl(n,0),Ra(n,r),vi(n,On()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ne(345));case 2:Ll(n,di,Ao);break;case 3:if(Ra(n,r),(r&130023424)===r&&(e=Qw+500-On(),10<e)){if(Vg(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ei(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Mx(Ll.bind(null,n,di,Ao),e);break}Ll(n,di,Ao);break;case 4:if(Ra(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ts(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=On()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*q4(r/1960))-r,10<r){n.timeoutHandle=Mx(Ll.bind(null,n,di,Ao),r);break}Ll(n,di,Ao);break;case 5:Ll(n,di,Ao);break;default:throw Error(Ne(329))}}}return vi(n,On()),n.callbackNode===t?GR.bind(null,n):null}function Wx(n,e){var t=Nd;return n.current.memoizedState.isDehydrated&&(Yl(n,e).flags|=256),n=av(n,e),n!==2&&(e=di,di=t,e!==null&&jx(e)),n}function jx(n){di===null?di=n:di.push.apply(di,n)}function Z4(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ds(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ra(n,e){for(e&=~Yw,e&=~Fv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ts(e),r=1<<t;n[t]=-1,e&=~r}}function KM(n){if((Vt&6)!==0)throw Error(Ne(327));Hc();var e=Vg(n,0);if((e&1)===0)return vi(n,On()),null;var t=av(n,e);if(n.tag!==0&&t===2){var r=gx(n);r!==0&&(e=r,t=Wx(n,r))}if(t===1)throw t=hh,Yl(n,0),Ra(n,e),vi(n,On()),t;if(t===6)throw Error(Ne(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ll(n,di,Ao),vi(n,On()),null}function qw(n,e){var t=Vt;Vt|=1;try{return n(e)}finally{Vt=t,Vt===0&&(Qc=On()+500,Bv&&rl())}}function cu(n){Ba!==null&&Ba.tag===0&&(Vt&6)===0&&Hc();var e=Vt;Vt|=1;var t=os.transition,r=qt;try{if(os.transition=null,qt=1,n)return n()}finally{qt=r,os.transition=t,Vt=e,(Vt&6)===0&&rl()}}function Zw(){Pi=Pc.current,fn(Pc)}function Yl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,R4(t)),Wn!==null)for(t=Wn.return;t!==null;){var r=t;switch(Iw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kg();break;case 3:Xc(),fn(mi),fn(kr),Hw();break;case 5:Gw(r);break;case 4:Xc();break;case 13:fn(_n);break;case 19:fn(_n);break;case 10:Ow(r.type._context);break;case 22:case 23:Zw()}t=t.return}if(lr=n,Wn=n=za(n.current,null),gr=Pi=e,qn=0,hh=null,Yw=Fv=uu=0,di=Nd=null,Gl!==null){for(e=0;e<Gl.length;e++)if(t=Gl[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Gl=null}return n}function HR(n,e){do{var t=Wn;try{if(kw(),Sg.current=rv,nv){for(var r=bn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nv=!1}if(lu=0,sr=Yn=bn=null,Od=!1,ch=0,Xw.current=null,t===null||t.return===null){qn=1,hh=e,Wn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=gr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=FM(o);if(m!==null){m.flags&=-257,kM(m,o,a,s,e),m.mode&1&&LM(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if((e&1)===0){LM(s,u,e),eS();break e}l=Error(Ne(426))}}else if(mn&&a.mode&1){var v=FM(o);if(v!==null){(v.flags&65536)===0&&(v.flags|=256),kM(v,o,a,s,e),Lw(Yc(l,a));break e}}s=l=Yc(l,a),qn!==4&&(qn=2),Nd===null?Nd=[s]:Nd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=AR(s,l,e);CM(s,x);break e;case 1:a=l;var _=s.type,S=s.stateNode;if((s.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ua===null||!Ua.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=ER(s,a,e);CM(s,b);break e}}s=s.return}while(s!==null)}jR(t)}catch(C){e=C,Wn===t&&t!==null&&(Wn=t=t.return);continue}break}while(1)}function VR(){var n=iv.current;return iv.current=rv,n===null?rv:n}function eS(){(qn===0||qn===3||qn===2)&&(qn=4),lr===null||(uu&268435455)===0&&(Fv&268435455)===0||Ra(lr,gr)}function av(n,e){var t=Vt;Vt|=2;var r=VR();(lr!==n||gr!==e)&&(Ao=null,Yl(n,e));do try{ek();break}catch(i){HR(n,i)}while(1);if(kw(),Vt=t,iv.current=r,Wn!==null)throw Error(Ne(261));return lr=null,gr=0,qn}function ek(){for(;Wn!==null;)WR(Wn)}function tk(){for(;Wn!==null&&!EF();)WR(Wn)}function WR(n){var e=JR(n.alternate,n,Pi);n.memoizedProps=n.pendingProps,e===null?jR(n):Wn=e,Xw.current=null}function jR(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=J4(t,e,Pi),t!==null){Wn=t;return}}else{if(t=K4(t,e),t!==null){t.flags&=32767,Wn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qn=6,Wn=null;return}}if(e=e.sibling,e!==null){Wn=e;return}Wn=e=n}while(e!==null);qn===0&&(qn=5)}function Ll(n,e,t){var r=qt,i=os.transition;try{os.transition=null,qt=1,nk(n,e,t,r)}finally{os.transition=i,qt=r}return null}function nk(n,e,t,r){do Hc();while(Ba!==null);if((Vt&6)!==0)throw Error(Ne(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ne(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(kF(n,s),n===lr&&(Wn=lr=null,gr=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||pm||(pm=!0,KR(Hg,function(){return Hc(),null})),s=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||s){s=os.transition,os.transition=null;var o=qt;qt=1;var a=Vt;Vt|=4,Xw.current=null,Y4(n,t),NR(t,n),S4(Sx),Wg=!!wx,Sx=wx=null,n.current=t,Q4(t),CF(),Vt=a,qt=o,os.transition=s}else n.current=t;if(pm&&(pm=!1,Ba=n,ov=i),s=n.pendingLanes,s===0&&(Ua=null),PF(t.stateNode),vi(n,On()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(sv)throw sv=!1,n=Hx,Hx=null,n;return(ov&1)!==0&&n.tag!==0&&Hc(),s=n.pendingLanes,(s&1)!==0?n===Vx?zd++:(zd=0,Vx=n):zd=0,rl(),null}function Hc(){if(Ba!==null){var n=M3(ov),e=os.transition,t=qt;try{if(os.transition=null,qt=16>n?16:n,Ba===null)var r=!1;else{if(n=Ba,Ba=null,ov=0,(Vt&6)!==0)throw Error(Ne(331));var i=Vt;for(Vt|=4,Qe=n.current;Qe!==null;){var s=Qe,o=s.child;if((Qe.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Qe=u;Qe!==null;){var c=Qe;switch(c.tag){case 0:case 11:case 15:Ud(8,c,s)}var f=c.child;if(f!==null)f.return=c,Qe=f;else for(;Qe!==null;){c=Qe;var p=c.sibling,m=c.return;if(kR(c),c===u){Qe=null;break}if(p!==null){p.return=m,Qe=p;break}Qe=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Qe=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ud(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Qe=x;break e}Qe=s.return}}var _=n.current;for(Qe=_;Qe!==null;){o=Qe;var S=o.child;if((o.subtreeFlags&2064)!==0&&S!==null)S.return=o,Qe=S;else e:for(o=_;Qe!==null;){if(a=Qe,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Lv(9,a)}}catch(C){Rn(a,a.return,C)}if(a===o){Qe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Qe=b;break e}Qe=a.return}}if(Vt=i,rl(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Ev,n)}catch{}r=!0}return r}finally{qt=t,os.transition=e}}return!1}function XM(n,e,t){e=Yc(t,e),e=AR(n,e,1),n=Oa(n,e,1),e=ei(),n!==null&&(Ih(n,1,e),vi(n,e))}function Rn(n,e,t){if(n.tag===3)XM(n,n,t);else for(;e!==null;){if(e.tag===3){XM(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ua===null||!Ua.has(r))){n=Yc(t,n),n=ER(e,n,1),e=Oa(e,n,1),n=ei(),e!==null&&(Ih(e,1,n),vi(e,n));break}}e=e.return}}function rk(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ei(),n.pingedLanes|=n.suspendedLanes&t,lr===n&&(gr&t)===t&&(qn===4||qn===3&&(gr&130023424)===gr&&500>On()-Qw?Yl(n,0):Yw|=t),vi(n,e)}function $R(n,e){e===0&&((n.mode&1)===0?e=1:(e=im,im<<=1,(im&130023424)===0&&(im=4194304)));var t=ei();n=zo(n,e),n!==null&&(Ih(n,e,t),vi(n,t))}function ik(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),$R(n,t)}function sk(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(e),$R(n,t)}var JR;JR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||mi.current)hi=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return hi=!1,$4(n,e,t);hi=(n.flags&131072)!==0}else hi=!1,mn&&(e.flags&1048576)!==0&&Y3(e,Qg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mg(n,e),n=e.pendingProps;var i=$c(e,kr.current);Gc(e,t),i=Ww(null,e,r,n,i,t);var s=jw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)?(s=!0,Xg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nw(e),i.updater=Dv,e.stateNode=i,i._reactInternals=e,Bx(e,r,n,t),e=Lx(null,e,r,!0,s,t)):(e.tag=0,mn&&s&&Dw(e),Xr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Mg(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ak(r),n=Ms(r,n),i){case 0:e=Ix(null,e,r,n,t);break e;case 1:e=NM(null,e,r,n,t);break e;case 11:e=OM(null,e,r,n,t);break e;case 14:e=UM(null,e,r,Ms(r.type,n),t);break e}throw Error(Ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),Ix(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),NM(n,e,r,i,t);case 3:e:{if(PR(e),n===null)throw Error(Ne(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eR(n,e),ev(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yc(Error(Ne(423)),e),e=zM(n,e,r,t,i);break e}else if(r!==i){i=Yc(Error(Ne(424)),e),e=zM(n,e,r,t,i);break e}else for(Bi=ka(e.stateNode.containerInfo.firstChild),Di=e,mn=!0,Es=null,t=iR(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Jc(),r===i){e=Go(n,e,t);break e}Xr(n,e,r,t)}e=e.child}return e;case 5:return sR(e),n===null&&Tx(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,bx(r,i)?o=null:s!==null&&bx(r,s)&&(e.flags|=32),RR(n,e),Xr(n,e,o,t),e.child;case 6:return n===null&&Tx(e),null;case 13:return BR(n,e,t);case 4:return zw(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Kc(e,null,r,t):Xr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),OM(n,e,r,i,t);case 7:return Xr(n,e,e.pendingProps,t),e.child;case 8:return Xr(n,e,e.pendingProps.children,t),e.child;case 12:return Xr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ln(qg,r._currentValue),r._currentValue=o,s!==null)if(Ds(s.value,o)){if(s.children===i.children&&!mi.current){e=Go(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Rx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ne(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Rx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gc(e,t),i=as(i),r=r(i),e.flags|=1,Xr(n,e,r,t),e.child;case 14:return r=e.type,i=Ms(r,e.pendingProps),i=Ms(r.type,i),UM(n,e,r,i,t);case 15:return CR(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),Mg(n,e),e.tag=1,gi(r)?(n=!0,Xg(e)):n=!1,Gc(e,t),nR(e,r,i),Bx(e,r,i,t),Lx(null,e,r,!0,n,t);case 19:return DR(n,e,t);case 22:return TR(n,e,t)}throw Error(Ne(156,e.tag))};function KR(n,e){return _3(n,e)}function ok(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(n,e,t,r){return new ok(n,e,t,r)}function tS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ak(n){if(typeof n=="function")return tS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_w)return 11;if(n===ww)return 14}return 2}function za(n,e){var t=n.alternate;return t===null?(t=is(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Cg(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")tS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case _c:return Ql(t.children,i,s,e);case xw:o=8,i|=8;break;case tx:return n=is(12,t,e,i|2),n.elementType=tx,n.lanes=s,n;case nx:return n=is(13,t,e,i),n.elementType=nx,n.lanes=s,n;case rx:return n=is(19,t,e,i),n.elementType=rx,n.lanes=s,n;case r3:return kv(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case t3:o=10;break e;case n3:o=9;break e;case _w:o=11;break e;case ww:o=14;break e;case Aa:o=16,r=null;break e}throw Error(Ne(130,n==null?n:typeof n,""))}return e=is(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ql(n,e,t,r){return n=is(7,n,r,e),n.lanes=t,n}function kv(n,e,t,r){return n=is(22,n,r,e),n.elementType=r3,n.lanes=t,n.stateNode={isHidden:!1},n}function Iy(n,e,t){return n=is(6,n,null,e),n.lanes=t,n}function Ly(n,e,t){return e=is(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function lk(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=py(0),this.expirationTimes=py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=py(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nS(n,e,t,r,i,s,o,a,l){return n=new lk(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=is(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nw(s),n}function uk(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xc,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function XR(n){if(!n)return $a;n=n._reactInternals;e:{if(yu(n)!==n||n.tag!==1)throw Error(Ne(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(n.tag===1){var t=n.type;if(gi(t))return K3(n,t,e)}return e}function YR(n,e,t,r,i,s,o,a,l){return n=nS(t,r,!0,n,i,s,o,a,l),n.context=XR(null),t=n.current,r=ei(),i=Na(t),s=Fo(r,i),s.callback=e!=null?e:null,Oa(t,s,i),n.current.lanes=i,Ih(n,i,r),vi(n,r),n}function Ov(n,e,t,r){var i=e.current,s=ei(),o=Na(i);return t=XR(t),e.context===null?e.context=t:e.pendingContext=t,e=Fo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Oa(i,e,o),n!==null&&(Rs(n,i,o,s),wg(n,i,o)),o}function lv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function YM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function rS(n,e){YM(n,e),(n=n.alternate)&&YM(n,e)}function ck(){return null}var QR=typeof reportError=="function"?reportError:function(n){console.error(n)};function iS(n){this._internalRoot=n}Uv.prototype.render=iS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ne(409));Ov(n,e,null,null)};Uv.prototype.unmount=iS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;cu(function(){Ov(null,n,null,null)}),e[No]=null}};function Uv(n){this._internalRoot=n}Uv.prototype.unstable_scheduleHydration=function(n){if(n){var e=C3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ta.length&&e!==0&&e<Ta[t].priority;t++);Ta.splice(t,0,n),t===0&&R3(n)}};function sS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Nv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function QM(){}function fk(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=lv(o);s.call(u)}}var o=YR(e,r,n,0,null,!1,!1,"",QM);return n._reactRootContainer=o,n[No]=o.current,sh(n.nodeType===8?n.parentNode:n),cu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=lv(l);a.call(u)}}var l=nS(n,0,!1,null,null,!1,!1,"",QM);return n._reactRootContainer=l,n[No]=l.current,sh(n.nodeType===8?n.parentNode:n),cu(function(){Ov(e,l,t,r)}),l}function zv(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=lv(o);a.call(l)}}Ov(e,o,n,i)}else o=fk(t,e,n,i,r);return lv(o)}A3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Cd(e.pendingLanes);t!==0&&(Mw(e,t|1),vi(e,On()),(Vt&6)===0&&(Qc=On()+500,rl()))}break;case 13:cu(function(){var r=zo(n,1);if(r!==null){var i=ei();Rs(r,n,1,i)}}),rS(n,1)}};Aw=function(n){if(n.tag===13){var e=zo(n,134217728);if(e!==null){var t=ei();Rs(e,n,134217728,t)}rS(n,134217728)}};E3=function(n){if(n.tag===13){var e=Na(n),t=zo(n,e);if(t!==null){var r=ei();Rs(t,n,e,r)}rS(n,e)}};C3=function(){return qt};T3=function(n,e){var t=qt;try{return qt=n,e()}finally{qt=t}};hx=function(n,e,t){switch(e){case"input":if(ox(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Pv(r);if(!i)throw Error(Ne(90));s3(r),ox(r,i)}}}break;case"textarea":a3(n,t);break;case"select":e=t.value,e!=null&&Oc(n,!!t.multiple,e,!1)}};p3=qw;m3=cu;var dk={usingClientEntryPoint:!1,Events:[Fh,Mc,Pv,d3,h3,qw]},sd={findFiberByHostInstance:zl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},hk={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=y3(n),n===null?null:n.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||ck,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{Ev=mm.inject(hk),Qs=mm}catch{}}ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dk;ki.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sS(e))throw Error(Ne(200));return uk(n,e,null,t)};ki.createRoot=function(n,e){if(!sS(n))throw Error(Ne(299));var t=!1,r="",i=QR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nS(n,1,!1,null,null,t,!1,r,i),n[No]=e.current,sh(n.nodeType===8?n.parentNode:n),new iS(e)};ki.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ne(188)):(n=Object.keys(n).join(","),Error(Ne(268,n)));return n=y3(e),n=n===null?null:n.stateNode,n};ki.flushSync=function(n){return cu(n)};ki.hydrate=function(n,e,t){if(!Nv(e))throw Error(Ne(200));return zv(null,n,e,!0,t)};ki.hydrateRoot=function(n,e,t){if(!sS(n))throw Error(Ne(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=QR;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=YR(e,null,n,1,t!=null?t:null,i,!1,s,o),n[No]=e.current,sh(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Uv(e)};ki.render=function(n,e,t){if(!Nv(e))throw Error(Ne(200));return zv(null,n,e,!1,t)};ki.unmountComponentAtNode=function(n){if(!Nv(n))throw Error(Ne(40));return n._reactRootContainer?(cu(function(){zv(null,null,n,!1,function(){n._reactRootContainer=null,n[No]=null})}),!0):!1};ki.unstable_batchedUpdates=qw;ki.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Nv(t))throw Error(Ne(200));if(n==null||n._reactInternals===void 0)throw Error(Ne(38));return zv(n,e,t,!1,r)};ki.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=ki})(mw);const oS=cw(mw.exports);var qM=mw.exports;Z1.createRoot=qM.createRoot,Z1.hydrateRoot=qM.hydrateRoot;function jn(){return jn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const il="144",pk={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mk={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},qR=0,$x=1,ZR=2,gk=3,vk=0,aS=1,lS=2,Bc=3,to=0,ar=1,Dr=2,vr=0,ql=1,Jx=2,Kx=3,Xx=4,eP=5,Ul=100,tP=101,nP=102,Yx=103,Qx=104,rP=200,iP=201,sP=202,oP=203,uS=204,cS=205,aP=206,lP=207,uP=208,cP=209,fP=210,dP=0,hP=1,pP=2,uv=3,mP=4,gP=5,vP=6,yP=7,Oh=0,xP=1,_P=2,Ps=0,wP=1,SP=2,bP=3,fS=4,MP=5,Gv=300,Ja=301,Ka=302,ph=303,mh=304,cf=306,Xa=1e3,Qn=1001,qc=1002,on=1003,gh=1004,yk=1004,vh=1005,xk=1005,Ht=1006,Hv=1007,_k=1007,ro=1008,wk=1008,xr=1009,AP=1010,EP=1011,dS=1012,CP=1013,Do=1014,mr=1015,fu=1016,TP=1017,RP=1018,Ga=1020,PP=1021,BP=1022,Qr=1023,DP=1024,IP=1025,Ha=1026,Ya=1027,LP=1028,FP=1029,kP=1030,OP=1031,UP=1033,Tg=33776,Rg=33777,Pg=33778,Bg=33779,qx=35840,Zx=35841,e_=35842,t_=35843,NP=36196,n_=37492,r_=37496,i_=37808,s_=37809,o_=37810,a_=37811,l_=37812,u_=37813,c_=37814,f_=37815,d_=37816,h_=37817,p_=37818,m_=37819,g_=37820,v_=37821,y_=36492,zP=2200,GP=2201,HP=2202,Zc=2300,du=2301,Dg=2302,Vl=2400,Wl=2401,yh=2402,Vv=2500,hS=2501,Sk=0,VP=1,pS=2,Fi=3e3,gt=3001,sl=3200,mS=3201,$o=0,WP=1,bk="",Xs="srgb",Da="srgb-linear",Mk=0,Ig=7680,Ak=7681,Ek=7682,Ck=7683,Tk=34055,Rk=34056,Pk=5386,Bk=512,Dk=513,Ik=514,Lk=515,Fk=516,kk=517,Ok=518,jP=519,xh=35044,Uk=35048,Nk=35040,zk=35045,Gk=35049,Hk=35041,Vk=35046,Wk=35050,jk=35042,$k="100",x_="300 es",cv=1035;class fs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Rr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZM=1234567;const Zl=Math.PI/180,_h=180/Math.PI;function Ii(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Rr[n&255]+Rr[n>>8&255]+Rr[n>>16&255]+Rr[n>>24&255]+"-"+Rr[e&255]+Rr[e>>8&255]+"-"+Rr[e>>16&15|64]+Rr[e>>24&255]+"-"+Rr[t&63|128]+Rr[t>>8&255]+"-"+Rr[t>>16&255]+Rr[t>>24&255]+Rr[r&255]+Rr[r>>8&255]+Rr[r>>16&255]+Rr[r>>24&255]).toLowerCase()}function Un(n,e,t){return Math.max(e,Math.min(t,n))}function gS(n,e){return(n%e+e)%e}function Jk(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Kk(n,e,t){return n!==e?(t-n)/(e-n):0}function Gd(n,e,t){return(1-t)*n+t*e}function Xk(n,e,t,r){return Gd(n,e,1-Math.exp(-t*r))}function Yk(n,e=1){return e-Math.abs(gS(n,e*2)-e)}function Qk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function qk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Zk(n,e){return n+Math.floor(Math.random()*(e-n+1))}function eO(n,e){return n+Math.random()*(e-n)}function tO(n){return n*(.5-Math.random())}function nO(n){n!==void 0&&(ZM=n);let e=ZM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rO(n){return n*Zl}function iO(n){return n*_h}function __(n){return(n&n-1)===0&&n!==0}function $P(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function sO(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*p,a*u);break;case"YZY":n.set(l*p,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*p,a*c,a*u);break;case"XZX":n.set(a*c,l*g,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*g,a*u);break;case"ZYZ":n.set(l*g,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Io(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Uh=Object.freeze({__proto__:null,DEG2RAD:Zl,RAD2DEG:_h,generateUUID:Ii,clamp:Un,euclideanModulo:gS,mapLinear:Jk,inverseLerp:Kk,lerp:Gd,damp:Xk,pingpong:Yk,smoothstep:Qk,smootherstep:qk,randInt:Zk,randFloat:eO,randFloatSpread:tO,seededRandom:nO,degToRad:rO,radToDeg:iO,isPowerOfTwo:__,ceilPowerOfTwo:$P,floorPowerOfTwo:fv,setQuaternionFromProperEuler:sO,normalize:sn,denormalize:Io});class Ae{constructor(e=0,t=0){Ae.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ir{constructor(){Ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],p=r[2],m=r[5],g=r[8],y=i[0],v=i[3],x=i[6],_=i[1],S=i[4],b=i[7],C=i[2],E=i[5],P=i[8];return s[0]=o*y+a*_+l*C,s[3]=o*v+a*S+l*E,s[6]=o*x+a*b+l*P,s[1]=u*y+c*_+f*C,s[4]=u*v+c*S+f*E,s[7]=u*x+c*b+f*P,s[2]=p*y+m*_+g*C,s[5]=p*v+m*S+g*E,s[8]=p*x+m*b+g*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,p=a*l-c*s,m=u*s-o*l,g=t*f+r*p+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=f*y,e[1]=(i*u-c*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(c*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=m*y,e[7]=(r*l-u*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],u=i[4],c=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*u,i[6]=t*a+r*c,i[1]=-r*s+t*l,i[4]=-r*o+t*u,i[7]=-r*a+t*c,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function JP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const oO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Dc(n,e){return new oO[n](e)}function wh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function eu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Lg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Fy={[Xs]:{[Da]:eu},[Da]:{[Xs]:Lg}},Qi={legacyMode:!0,get workingColorSpace(){return Da},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Fy[e]&&Fy[e][t]!==void 0){const r=Fy[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},KP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xn={r:0,g:0,b:0},_s={h:0,s:0,l:0},gm={h:0,s:0,l:0};function ky(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function vm(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ge{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Da){return this.r=e,this.g=t,this.b=r,Qi.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Da){if(e=gS(e,1),t=Un(t,0,1),r=Un(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=ky(o,s,e+1/3),this.g=ky(o,s,e),this.b=ky(o,s,e-1/3)}return Qi.toWorkingColorSpace(this,i),this}setStyle(e,t=Xs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Qi.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Qi.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,u,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Qi.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Qi.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Xs){const r=KP[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=eu(e.r),this.g=eu(e.g),this.b=eu(e.b),this}copyLinearToSRGB(e){return this.r=Lg(e.r),this.g=Lg(e.g),this.b=Lg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xs){return Qi.fromWorkingColorSpace(vm(this,Xn),e),Un(Xn.r*255,0,255)<<16^Un(Xn.g*255,0,255)<<8^Un(Xn.b*255,0,255)<<0}getHexString(e=Xs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Da){Qi.fromWorkingColorSpace(vm(this,Xn),t);const r=Xn.r,i=Xn.g,s=Xn.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Da){return Qi.fromWorkingColorSpace(vm(this,Xn),t),e.r=Xn.r,e.g=Xn.g,e.b=Xn.b,e}getStyle(e=Xs){return Qi.fromWorkingColorSpace(vm(this,Xn),e),e!==Xs?`color(${e} ${Xn.r} ${Xn.g} ${Xn.b})`:`rgb(${Xn.r*255|0},${Xn.g*255|0},${Xn.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(_s),_s.h+=e,_s.s+=t,_s.l+=r,this.setHSL(_s.h,_s.s,_s.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(_s),e.getHSL(gm);const r=Gd(_s.h,gm.h,t),i=Gd(_s.s,gm.s,t),s=Gd(_s.l,gm.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ge.NAMES=KP;let Ju;class vS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ju===void 0&&(Ju=wh("canvas")),Ju.width=e.width,Ju.height=e.height;const r=Ju.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ju}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=wh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=eu(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(eu(t[r]/255)*255):t[r]=eu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class jl{constructor(e=null){this.isSource=!0,this.uuid=Ii(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Oy(i[o].image)):s.push(Oy(i[o]))}else s=Oy(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Oy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?vS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aO=0;class un extends fs{constructor(e=un.DEFAULT_IMAGE,t=un.DEFAULT_MAPPING,r=Qn,i=Qn,s=Ht,o=ro,a=Qr,l=xr,u=1,c=Fi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aO++}),this.uuid=Ii(),this.name="",this.source=new jl(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Gv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xa:e.x=e.x-Math.floor(e.x);break;case Qn:e.x=e.x<0?0:1;break;case qc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xa:e.y=e.y-Math.floor(e.y);break;case Qn:e.y=e.y<0?0:1;break;case qc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}un.DEFAULT_IMAGE=null;un.DEFAULT_MAPPING=Gv;class zt{constructor(e=0,t=0,r=0,i=1){zt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],p=l[1],m=l[5],g=l[9],y=l[2],v=l[6],x=l[10];if(Math.abs(c-p)<.01&&Math.abs(f-y)<.01&&Math.abs(g-v)<.01){if(Math.abs(c+p)<.1&&Math.abs(f+y)<.1&&Math.abs(g+v)<.1&&Math.abs(u+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,b=(m+1)/2,C=(x+1)/2,E=(c+p)/4,P=(f+y)/4,M=(g+v)/4;return S>b&&S>C?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=E/r,s=P/r):b>C?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=E/i,s=M/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=P/s,i=M/s),this.set(r,i,s,t),this}let _=Math.sqrt((v-g)*(v-g)+(f-y)*(f-y)+(p-c)*(p-c));return Math.abs(_)<.001&&(_=1),this.x=(v-g)/_,this.y=(f-y)/_,this.z=(p-c)/_,this.w=Math.acos((u+m+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dn extends fs{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new zt(0,0,e,t),this.scissorTest=!1,this.viewport=new zt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new un(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ht,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new jl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Nh extends un{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=on,this.minFilter=on,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lO extends dn{constructor(e,t,r){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Nh(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Wv extends un{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=on,this.minFilter=on,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uO extends dn{constructor(e,t,r){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Wv(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class cO extends dn{constructor(e,t,r,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ti{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=y;return}if(f!==y||l!==p||u!==m||c!==g){let v=1-a;const x=l*p+u*m+c*g+f*y,_=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const C=Math.sqrt(S),E=Math.atan2(C,x*_);v=Math.sin(v*E)/C,a=Math.sin(a*E)/C}const b=a*_;if(l=l*v+p*b,u=u*v+m*b,c=c*v+g*b,f=f*v+y*b,v===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=C,u*=C,c*=C,f*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+c*f+l*m-u*p,e[t+1]=l*g+c*p+u*f-a*m,e[t+2]=u*g+c*m+a*p-l*f,e[t+3]=c*g-a*f-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=p*c*f+u*m*g,this._y=u*m*f-p*c*g,this._z=u*c*g+p*m*f,this._w=u*c*f-p*m*g;break;case"YXZ":this._x=p*c*f+u*m*g,this._y=u*m*f-p*c*g,this._z=u*c*g-p*m*f,this._w=u*c*f+p*m*g;break;case"ZXY":this._x=p*c*f-u*m*g,this._y=u*m*f+p*c*g,this._z=u*c*g+p*m*f,this._w=u*c*f-p*m*g;break;case"ZYX":this._x=p*c*f-u*m*g,this._y=u*m*f+p*c*g,this._z=u*c*g-p*m*f,this._w=u*c*f+p*m*g;break;case"YZX":this._x=p*c*f+u*m*g,this._y=u*m*f+p*c*g,this._z=u*c*g-p*m*f,this._w=u*c*f-p*m*g;break;case"XZY":this._x=p*c*f-u*m*g,this._y=u*m*f-p*c*g,this._z=u*c*g+p*m*f,this._w=u*c*f+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(c-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,p=Math.sin(t*c)/u;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,r=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(eA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,c=l*r+a*t-s*i,f=l*i+s*r-o*t,p=-s*t-o*r-a*i;return this.x=u*l+p*-s+c*-a-f*-o,this.y=c*l+p*-o+f*-s-u*-a,this.z=f*l+p*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Uy.copy(this).projectOnVector(e),this.sub(Uy)}reflect(e){return this.sub(Uy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Un(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Uy=new J,eA=new ti;class Jo{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],p=e[l+2];c<t&&(t=c),f<r&&(r=f),p<i&&(i=p),c>s&&(s=c),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),p=e.getZ(l);c<t&&(t=c),f<r&&(r=f),p<i&&(i=p),c>s&&(s=c),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ml.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Ml.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ml)}else r.boundingBox===null&&r.computeBoundingBox(),Ny.copy(r.boundingBox),Ny.applyMatrix4(e.matrixWorld),this.union(Ny);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ml),Ml.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(od),ym.subVectors(this.max,od),Ku.subVectors(e.a,od),Xu.subVectors(e.b,od),Yu.subVectors(e.c,od),fa.subVectors(Xu,Ku),da.subVectors(Yu,Xu),Al.subVectors(Ku,Yu);let t=[0,-fa.z,fa.y,0,-da.z,da.y,0,-Al.z,Al.y,fa.z,0,-fa.x,da.z,0,-da.x,Al.z,0,-Al.x,-fa.y,fa.x,0,-da.y,da.x,0,-Al.y,Al.x,0];return!zy(t,Ku,Xu,Yu,ym)||(t=[1,0,0,0,1,0,0,0,1],!zy(t,Ku,Xu,Yu,ym))?!1:(xm.crossVectors(fa,da),t=[xm.x,xm.y,xm.z],zy(t,Ku,Xu,Yu,ym))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ml.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ml).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(go),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const go=[new J,new J,new J,new J,new J,new J,new J,new J],Ml=new J,Ny=new Jo,Ku=new J,Xu=new J,Yu=new J,fa=new J,da=new J,Al=new J,od=new J,ym=new J,xm=new J,El=new J;function zy(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){El.fromArray(n,s);const a=i.x*Math.abs(El.x)+i.y*Math.abs(El.y)+i.z*Math.abs(El.z),l=e.dot(El),u=t.dot(El),c=r.dot(El);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const fO=new Jo,tA=new J,_m=new J,Gy=new J;class io{constructor(e=new J,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):fO.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Gy.subVectors(e,this.center);const t=Gy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Gy.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?_m.set(0,0,1).multiplyScalar(e.radius):_m.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(tA.copy(e.center).add(_m)),this.expandByPoint(tA.copy(e.center).sub(_m)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const vo=new J,Hy=new J,wm=new J,ha=new J,Vy=new J,Sm=new J,Wy=new J;class ff{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vo.copy(this.direction).multiplyScalar(t).add(this.origin),vo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Hy.copy(e).add(t).multiplyScalar(.5),wm.copy(t).sub(e).normalize(),ha.copy(this.origin).sub(Hy);const s=e.distanceTo(t)*.5,o=-this.direction.dot(wm),a=ha.dot(this.direction),l=-ha.dot(wm),u=ha.lengthSq(),c=Math.abs(1-o*o);let f,p,m,g;if(c>0)if(f=o*l-a,p=o*a-l,g=s*c,f>=0)if(p>=-g)if(p<=g){const y=1/c;f*=y,p*=y,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+u}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;else p<=-g?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u):p<=g?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+u);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(f).add(this.origin),i&&i.copy(wm).multiplyScalar(p).add(Hy),m}intersectSphere(e,t){vo.subVectors(e.center,this.origin);const r=vo.dot(this.direction),i=vo.dot(vo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),c>=0?(s=(e.min.y-p.y)*c,o=(e.max.y-p.y)*c):(s=(e.max.y-p.y)*c,o=(e.min.y-p.y)*c),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,vo)!==null}intersectTriangle(e,t,r,i,s){Vy.subVectors(t,e),Sm.subVectors(r,e),Wy.crossVectors(Vy,Sm);let o=this.direction.dot(Wy),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ha.subVectors(this.origin,e);const l=a*this.direction.dot(Sm.crossVectors(ha,Sm));if(l<0)return null;const u=a*this.direction.dot(Vy.cross(ha));if(u<0||l+u>o)return null;const c=-a*ha.dot(Wy);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,u,c,f,p,m,g,y,v){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=u,x[6]=c,x[10]=f,x[14]=p,x[3]=m,x[7]=g,x[11]=y,x[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Qu.setFromMatrixColumn(e,0).length(),s=1/Qu.setFromMatrixColumn(e,1).length(),o=1/Qu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*c,m=o*f,g=a*c,y=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=m+g*u,t[5]=p-y*u,t[9]=-a*l,t[2]=y-p*u,t[6]=g+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*c,m=l*f,g=u*c,y=u*f;t[0]=p+y*a,t[4]=g*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=m*a-g,t[6]=y+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*c,m=l*f,g=u*c,y=u*f;t[0]=p-y*a,t[4]=-o*f,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*c,t[9]=y-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*c,m=o*f,g=a*c,y=a*f;t[0]=l*c,t[4]=g*u-m,t[8]=p*u+y,t[1]=l*f,t[5]=y*u+p,t[9]=m*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,g=a*l,y=a*u;t[0]=l*c,t[4]=y-p*f,t[8]=g*f+m,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*f+g,t[10]=p-y*f}else if(e.order==="XZY"){const p=o*l,m=o*u,g=a*l,y=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=p*f+y,t[5]=o*c,t[9]=m*f-g,t[2]=g*f-m,t[6]=a*c,t[10]=y*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dO,e,hO)}lookAt(e,t,r){const i=this.elements;return Ti.subVectors(e,t),Ti.lengthSq()===0&&(Ti.z=1),Ti.normalize(),pa.crossVectors(r,Ti),pa.lengthSq()===0&&(Math.abs(r.z)===1?Ti.x+=1e-4:Ti.z+=1e-4,Ti.normalize(),pa.crossVectors(r,Ti)),pa.normalize(),bm.crossVectors(Ti,pa),i[0]=pa.x,i[4]=bm.x,i[8]=Ti.x,i[1]=pa.y,i[5]=bm.y,i[9]=Ti.y,i[2]=pa.z,i[6]=bm.z,i[10]=Ti.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],p=r[9],m=r[13],g=r[2],y=r[6],v=r[10],x=r[14],_=r[3],S=r[7],b=r[11],C=r[15],E=i[0],P=i[4],M=i[8],T=i[12],R=i[1],L=i[5],I=i[9],H=i[13],G=i[2],X=i[6],$=i[10],ne=i[14],U=i[3],O=i[7],z=i[11],W=i[15];return s[0]=o*E+a*R+l*G+u*U,s[4]=o*P+a*L+l*X+u*O,s[8]=o*M+a*I+l*$+u*z,s[12]=o*T+a*H+l*ne+u*W,s[1]=c*E+f*R+p*G+m*U,s[5]=c*P+f*L+p*X+m*O,s[9]=c*M+f*I+p*$+m*z,s[13]=c*T+f*H+p*ne+m*W,s[2]=g*E+y*R+v*G+x*U,s[6]=g*P+y*L+v*X+x*O,s[10]=g*M+y*I+v*$+x*z,s[14]=g*T+y*H+v*ne+x*W,s[3]=_*E+S*R+b*G+C*U,s[7]=_*P+S*L+b*X+C*O,s[11]=_*M+S*I+b*$+C*z,s[15]=_*T+S*H+b*ne+C*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],p=e[10],m=e[14],g=e[3],y=e[7],v=e[11],x=e[15];return g*(+s*l*f-i*u*f-s*a*p+r*u*p+i*a*m-r*l*m)+y*(+t*l*m-t*u*p+s*o*p-i*o*m+i*u*c-s*l*c)+v*(+t*u*f-t*a*m-s*o*f+r*o*m+s*a*c-r*u*c)+x*(-i*a*c-t*l*f+t*a*p+i*o*f-r*o*p+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],p=e[10],m=e[11],g=e[12],y=e[13],v=e[14],x=e[15],_=f*v*u-y*p*u+y*l*m-a*v*m-f*l*x+a*p*x,S=g*p*u-c*v*u-g*l*m+o*v*m+c*l*x-o*p*x,b=c*y*u-g*f*u+g*a*m-o*y*m-c*a*x+o*f*x,C=g*f*l-c*y*l-g*a*p+o*y*p+c*a*v-o*f*v,E=t*_+r*S+i*b+s*C;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/E;return e[0]=_*P,e[1]=(y*p*s-f*v*s-y*i*m+r*v*m+f*i*x-r*p*x)*P,e[2]=(a*v*s-y*l*s+y*i*u-r*v*u-a*i*x+r*l*x)*P,e[3]=(f*l*s-a*p*s-f*i*u+r*p*u+a*i*m-r*l*m)*P,e[4]=S*P,e[5]=(c*v*s-g*p*s+g*i*m-t*v*m-c*i*x+t*p*x)*P,e[6]=(g*l*s-o*v*s-g*i*u+t*v*u+o*i*x-t*l*x)*P,e[7]=(o*p*s-c*l*s+c*i*u-t*p*u-o*i*m+t*l*m)*P,e[8]=b*P,e[9]=(g*f*s-c*y*s-g*r*m+t*y*m+c*r*x-t*f*x)*P,e[10]=(o*y*s-g*a*s+g*r*u-t*y*u-o*r*x+t*a*x)*P,e[11]=(c*a*s-o*f*s-c*r*u+t*f*u+o*r*m-t*a*m)*P,e[12]=C*P,e[13]=(c*y*i-g*f*i+g*r*p-t*y*p-c*r*v+t*f*v)*P,e[14]=(g*a*i-o*y*i-g*r*l+t*y*l+o*r*v-t*a*v)*P,e[15]=(o*f*i-c*a*i+c*r*l-t*f*l-o*r*p+t*a*p)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,p=s*u,m=s*c,g=s*f,y=o*c,v=o*f,x=a*f,_=l*u,S=l*c,b=l*f,C=r.x,E=r.y,P=r.z;return i[0]=(1-(y+x))*C,i[1]=(m+b)*C,i[2]=(g-S)*C,i[3]=0,i[4]=(m-b)*E,i[5]=(1-(p+x))*E,i[6]=(v+_)*E,i[7]=0,i[8]=(g+S)*P,i[9]=(v-_)*P,i[10]=(1-(p+y))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Qu.set(i[0],i[1],i[2]).length();const o=Qu.set(i[4],i[5],i[6]).length(),a=Qu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ws.copy(this);const u=1/s,c=1/o,f=1/a;return ws.elements[0]*=u,ws.elements[1]*=u,ws.elements[2]*=u,ws.elements[4]*=c,ws.elements[5]*=c,ws.elements[6]*=c,ws.elements[8]*=f,ws.elements[9]*=f,ws.elements[10]*=f,t.setFromRotationMatrix(ws),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),c=(t+e)/(t-e),f=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),c=1/(o-s),f=(t+e)*l,p=(r+i)*u,m=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Qu=new J,ws=new ht,dO=new J(0,0,0),hO=new J(1,1,1),pa=new J,bm=new J,Ti=new J,nA=new ht,rA=new ti;class df{constructor(e=0,t=0,r=0,i=df.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Un(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Un(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Un(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Un(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return nA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nA,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rA.setFromEuler(this),this.setFromQuaternion(rA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}df.DefaultOrder="XYZ";df.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class tu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let pO=0;const iA=new J,qu=new ti,yo=new ht,Mm=new J,ad=new J,mO=new J,gO=new ti,sA=new J(1,0,0),oA=new J(0,1,0),aA=new J(0,0,1),vO={type:"added"},lA={type:"removed"};class Gt extends fs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pO++}),this.uuid=Ii(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DefaultUp.clone();const e=new J,t=new df,r=new ti,i=new J(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ht},normalMatrix:{value:new Ir}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Gt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Gt.DefaultMatrixWorldAutoUpdate,this.layers=new tu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.multiply(qu),this}rotateOnWorldAxis(e,t){return qu.setFromAxisAngle(e,t),this.quaternion.premultiply(qu),this}rotateX(e){return this.rotateOnAxis(sA,e)}rotateY(e){return this.rotateOnAxis(oA,e)}rotateZ(e){return this.rotateOnAxis(aA,e)}translateOnAxis(e,t){return iA.copy(e).applyQuaternion(this.quaternion),this.position.add(iA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(sA,e)}translateY(e){return this.translateOnAxis(oA,e)}translateZ(e){return this.translateOnAxis(aA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(yo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Mm.copy(e):Mm.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),ad.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yo.lookAt(ad,Mm,this.up):yo.lookAt(Mm,ad,this.up),this.quaternion.setFromRotationMatrix(yo),i&&(yo.extractRotation(i.matrixWorld),qu.setFromRotationMatrix(yo),this.quaternion.premultiply(qu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(vO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(lA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),yo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yo.multiply(e.parent.matrixWorld)),e.applyMatrix4(yo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ad,e,mO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ad,gO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gt.DefaultUp=new J(0,1,0);Gt.DefaultMatrixAutoUpdate=!0;Gt.DefaultMatrixWorldAutoUpdate=!0;const Ss=new J,xo=new J,jy=new J,_o=new J,Zu=new J,ec=new J,uA=new J,$y=new J,Jy=new J,Ky=new J;class ns{constructor(e=new J,t=new J,r=new J){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ss.subVectors(e,t),i.cross(Ss);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ss.subVectors(i,t),xo.subVectors(r,t),jy.subVectors(e,t);const o=Ss.dot(Ss),a=Ss.dot(xo),l=Ss.dot(jy),u=xo.dot(xo),c=xo.dot(jy),f=o*u-a*a;if(f===0)return s.set(-2,-1,-1);const p=1/f,m=(u*l-a*c)*p,g=(o*c-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,_o),_o.x>=0&&_o.y>=0&&_o.x+_o.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,_o),l.set(0,0),l.addScaledVector(s,_o.x),l.addScaledVector(o,_o.y),l.addScaledVector(a,_o.z),l}static isFrontFacing(e,t,r,i){return Ss.subVectors(r,t),xo.subVectors(e,t),Ss.cross(xo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ss.subVectors(this.c,this.b),xo.subVectors(this.a,this.b),Ss.cross(xo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ns.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ns.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return ns.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ns.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ns.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Zu.subVectors(i,r),ec.subVectors(s,r),$y.subVectors(e,r);const l=Zu.dot($y),u=ec.dot($y);if(l<=0&&u<=0)return t.copy(r);Jy.subVectors(e,i);const c=Zu.dot(Jy),f=ec.dot(Jy);if(c>=0&&f<=c)return t.copy(i);const p=l*f-c*u;if(p<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(Zu,o);Ky.subVectors(e,s);const m=Zu.dot(Ky),g=ec.dot(Ky);if(g>=0&&m<=g)return t.copy(s);const y=m*u-l*g;if(y<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(r).addScaledVector(ec,a);const v=c*g-m*f;if(v<=0&&f-c>=0&&m-g>=0)return uA.subVectors(s,i),a=(f-c)/(f-c+(m-g)),t.copy(i).addScaledVector(uA,a);const x=1/(v+y+p);return o=y*x,a=p*x,t.copy(r).addScaledVector(Zu,o).addScaledVector(ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let yO=0;class Mn extends fs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yO++}),this.uuid=Ii(),this.name="",this.type="Material",this.blending=ql,this.side=to,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=uS,this.blendDst=cS,this.blendEquation=Ul,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=uv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ig,this.stencilZFail=Ig,this.stencilZPass=Ig,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ql&&(r.blending=this.blending),this.side!==to&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class qr extends Mn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hn=new J,Am=new Ae;class St{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=xh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Am.fromBufferAttribute(this,t),Am.applyMatrix3(e),this.setXY(t,Am.x,Am.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix3(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Hn.fromBufferAttribute(this,t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Hn.fromBufferAttribute(this,t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Io(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Io(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Io(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Io(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==xh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class xO extends St{constructor(e,t,r){super(new Int8Array(e),t,r)}}class _O extends St{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class wO extends St{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class SO extends St{constructor(e,t,r){super(new Int16Array(e),t,r)}}class yS extends St{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class bO extends St{constructor(e,t,r){super(new Int32Array(e),t,r)}}class xS extends St{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class MO extends St{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class nt extends St{constructor(e,t,r){super(new Float32Array(e),t,r)}}class AO extends St{constructor(e,t,r){super(new Float64Array(e),t,r)}}let EO=0;const Xi=new ht,Xy=new Gt,tc=new J,Ri=new Jo,ld=new Jo,ir=new J;class vt extends fs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EO++}),this.uuid=Ii(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JP(e)?xS:yS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Ir().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xi.makeRotationFromQuaternion(e),this.applyMatrix4(Xi),this}rotateX(e){return Xi.makeRotationX(e),this.applyMatrix4(Xi),this}rotateY(e){return Xi.makeRotationY(e),this.applyMatrix4(Xi),this}rotateZ(e){return Xi.makeRotationZ(e),this.applyMatrix4(Xi),this}translate(e,t,r){return Xi.makeTranslation(e,t,r),this.applyMatrix4(Xi),this}scale(e,t,r){return Xi.makeScale(e,t,r),this.applyMatrix4(Xi),this}lookAt(e){return Xy.lookAt(e),Xy.updateMatrix(),this.applyMatrix4(Xy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tc).negate(),this.translate(tc.x,tc.y,tc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new nt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Jo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ri.setFromBufferAttribute(s),this.morphTargetsRelative?(ir.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(ir),ir.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(ir)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new io);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new J,1/0);return}if(e){const r=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];ld.setFromBufferAttribute(a),this.morphTargetsRelative?(ir.addVectors(Ri.min,ld.min),Ri.expandByPoint(ir),ir.addVectors(Ri.max,ld.max),Ri.expandByPoint(ir)):(Ri.expandByPoint(ld.min),Ri.expandByPoint(ld.max))}Ri.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ir.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ir));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)ir.fromBufferAttribute(a,u),l&&(tc.fromBufferAttribute(e,u),ir.add(tc)),i=Math.max(i,r.distanceToSquared(ir))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new St(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let R=0;R<a;R++)u[R]=new J,c[R]=new J;const f=new J,p=new J,m=new J,g=new Ae,y=new Ae,v=new Ae,x=new J,_=new J;function S(R,L,I){f.fromArray(i,R*3),p.fromArray(i,L*3),m.fromArray(i,I*3),g.fromArray(o,R*2),y.fromArray(o,L*2),v.fromArray(o,I*2),p.sub(f),m.sub(f),y.sub(g),v.sub(g);const H=1/(y.x*v.y-v.x*y.y);!isFinite(H)||(x.copy(p).multiplyScalar(v.y).addScaledVector(m,-y.y).multiplyScalar(H),_.copy(m).multiplyScalar(y.x).addScaledVector(p,-v.x).multiplyScalar(H),u[R].add(x),u[L].add(x),u[I].add(x),c[R].add(_),c[L].add(_),c[I].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let R=0,L=b.length;R<L;++R){const I=b[R],H=I.start,G=I.count;for(let X=H,$=H+G;X<$;X+=3)S(r[X+0],r[X+1],r[X+2])}const C=new J,E=new J,P=new J,M=new J;function T(R){P.fromArray(s,R*3),M.copy(P);const L=u[R];C.copy(L),C.sub(P.multiplyScalar(P.dot(L))).normalize(),E.crossVectors(M,L);const H=E.dot(c[R])<0?-1:1;l[R*4]=C.x,l[R*4+1]=C.y,l[R*4+2]=C.z,l[R*4+3]=H}for(let R=0,L=b.length;R<L;++R){const I=b[R],H=I.start,G=I.count;for(let X=H,$=H+G;X<$;X+=3)T(r[X+0]),T(r[X+1]),T(r[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new St(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new J,s=new J,o=new J,a=new J,l=new J,u=new J,c=new J,f=new J;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),y=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,v),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,y),u.fromBufferAttribute(r,v),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(p+0,c.x,c.y,c.z),r.setXYZ(p+1,c.x,c.y,c.z),r.setXYZ(p+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ir.fromBufferAttribute(e,t),ir.normalize(),e.setXYZ(t,ir.x,ir.y,ir.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,p=new u.constructor(l.length*c);let m=0,g=0;for(let y=0,v=l.length;y<v;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*c;for(let x=0;x<c;x++)p[g++]=u[m++]}return new St(p,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const p=u[c],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,p=u.length;f<p;f++){const m=u[f];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let p=0,m=f.length;p<m;p++)c.push(f[p].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const cA=new ht,nc=new ff,Yy=new io,ma=new J,ga=new J,va=new J,Qy=new J,qy=new J,Zy=new J,Em=new J,Cm=new J,Tm=new J,Rm=new Ae,Pm=new Ae,Bm=new Ae,e1=new J,Dm=new J;class Bn extends Gt{constructor(e=new vt,t=new qr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Yy.copy(r.boundingSphere),Yy.applyMatrix4(s),e.ray.intersectsSphere(Yy)===!1)||(cA.copy(s).invert(),nc.copy(e.ray).applyMatrix4(cA),r.boundingBox!==null&&nc.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,f=r.attributes.uv,p=r.attributes.uv2,m=r.groups,g=r.drawRange;if(a!==null)if(Array.isArray(i))for(let y=0,v=m.length;y<v;y++){const x=m[y],_=i[x.materialIndex],S=Math.max(x.start,g.start),b=Math.min(a.count,Math.min(x.start+x.count,g.start+g.count));for(let C=S,E=b;C<E;C+=3){const P=a.getX(C),M=a.getX(C+1),T=a.getX(C+2);o=Im(this,_,e,nc,l,u,c,f,p,P,M,T),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const y=Math.max(0,g.start),v=Math.min(a.count,g.start+g.count);for(let x=y,_=v;x<_;x+=3){const S=a.getX(x),b=a.getX(x+1),C=a.getX(x+2);o=Im(this,i,e,nc,l,u,c,f,p,S,b,C),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let y=0,v=m.length;y<v;y++){const x=m[y],_=i[x.materialIndex],S=Math.max(x.start,g.start),b=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let C=S,E=b;C<E;C+=3){const P=C,M=C+1,T=C+2;o=Im(this,_,e,nc,l,u,c,f,p,P,M,T),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const y=Math.max(0,g.start),v=Math.min(l.count,g.start+g.count);for(let x=y,_=v;x<_;x+=3){const S=x,b=x+1,C=x+2;o=Im(this,i,e,nc,l,u,c,f,p,S,b,C),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}}}function CO(n,e,t,r,i,s,o,a){let l;if(e.side===ar?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==Dr,a),l===null)return null;Dm.copy(a),Dm.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Dm);return u<t.near||u>t.far?null:{distance:u,point:Dm.clone(),object:n}}function Im(n,e,t,r,i,s,o,a,l,u,c,f){ma.fromBufferAttribute(i,u),ga.fromBufferAttribute(i,c),va.fromBufferAttribute(i,f);const p=n.morphTargetInfluences;if(s&&p){Em.set(0,0,0),Cm.set(0,0,0),Tm.set(0,0,0);for(let g=0,y=s.length;g<y;g++){const v=p[g],x=s[g];v!==0&&(Qy.fromBufferAttribute(x,u),qy.fromBufferAttribute(x,c),Zy.fromBufferAttribute(x,f),o?(Em.addScaledVector(Qy,v),Cm.addScaledVector(qy,v),Tm.addScaledVector(Zy,v)):(Em.addScaledVector(Qy.sub(ma),v),Cm.addScaledVector(qy.sub(ga),v),Tm.addScaledVector(Zy.sub(va),v)))}ma.add(Em),ga.add(Cm),va.add(Tm)}n.isSkinnedMesh&&(n.boneTransform(u,ma),n.boneTransform(c,ga),n.boneTransform(f,va));const m=CO(n,e,t,r,ma,ga,va,e1);if(m){a&&(Rm.fromBufferAttribute(a,u),Pm.fromBufferAttribute(a,c),Bm.fromBufferAttribute(a,f),m.uv=ns.getUV(e1,ma,ga,va,Rm,Pm,Bm,new Ae)),l&&(Rm.fromBufferAttribute(l,u),Pm.fromBufferAttribute(l,c),Bm.fromBufferAttribute(l,f),m.uv2=ns.getUV(e1,ma,ga,va,Rm,Pm,Bm,new Ae));const g={a:u,b:c,c:f,normal:new J,materialIndex:0};ns.getNormal(ma,ga,va,g.normal),m.face=g}return m}class ol extends vt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let p=0,m=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new nt(u,3)),this.setAttribute("normal",new nt(c,3)),this.setAttribute("uv",new nt(f,2));function g(y,v,x,_,S,b,C,E,P,M,T){const R=b/P,L=C/M,I=b/2,H=C/2,G=E/2,X=P+1,$=M+1;let ne=0,U=0;const O=new J;for(let z=0;z<$;z++){const W=z*L-H;for(let q=0;q<X;q++){const oe=q*R-I;O[y]=oe*_,O[v]=W*S,O[x]=G,u.push(O.x,O.y,O.z),O[y]=0,O[v]=0,O[x]=E>0?1:-1,c.push(O.x,O.y,O.z),f.push(q/P),f.push(1-z/M),ne+=1}}for(let z=0;z<M;z++)for(let W=0;W<P;W++){const q=p+W+X*z,oe=p+W+X*(z+1),ce=p+(W+1)+X*(z+1),me=p+(W+1)+X*z;l.push(q,oe,me),l.push(oe,ce,me),U+=6}a.addGroup(m,U,T),m+=U,p+=ne}}static fromJSON(e){return new ol(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ef(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Pr(n){const e={};for(let t=0;t<n.length;t++){const r=ef(n[t]);for(const i in r)e[i]=r[i]}return e}function TO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const _S={clone:ef,merge:Pr};var RO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zn extends Mn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RO,this.fragmentShader=PO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ef(e.uniforms),this.uniformsGroups=TO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class hf extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Vn extends hf{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_h*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _h*2*Math.atan(Math.tan(Zl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Zl*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const rc=90,ic=1;class XP extends Gt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Vn(rc,ic,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new J(1,0,0)),this.add(i);const s=new Vn(rc,ic,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new J(-1,0,0)),this.add(s);const o=new Vn(rc,ic,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new J(0,1,0)),this.add(o);const a=new Vn(rc,ic,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new J(0,-1,0)),this.add(a);const l=new Vn(rc,ic,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new J(0,0,1)),this.add(l);const u=new Vn(rc,ic,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new J(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=Ps,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class zh extends un{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Ja,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class YP extends dn{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new zh(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ht}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ol(5,5,5),s=new Zn({name:"CubemapFromEquirect",uniforms:ef(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ar,blending:vr});s.uniforms.tEquirect.value=t;const o=new Bn(i,s),a=t.minFilter;return t.minFilter===ro&&(t.minFilter=Ht),new XP(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const t1=new J,BO=new J,DO=new Ir;class Ca{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=t1.subVectors(r,t).cross(BO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(t1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||DO.getNormalMatrix(e),i=this.coplanarPoint(t1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sc=new io,Lm=new J;class jv{constructor(e=new Ca,t=new Ca,r=new Ca,i=new Ca,s=new Ca,o=new Ca){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],p=r[8],m=r[9],g=r[10],y=r[11],v=r[12],x=r[13],_=r[14],S=r[15];return t[0].setComponents(a-i,f-l,y-p,S-v).normalize(),t[1].setComponents(a+i,f+l,y+p,S+v).normalize(),t[2].setComponents(a+s,f+u,y+m,S+x).normalize(),t[3].setComponents(a-s,f-u,y-m,S-x).normalize(),t[4].setComponents(a-o,f-c,y-g,S-_).normalize(),t[5].setComponents(a+o,f+c,y+g,S+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),sc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(sc)}intersectsSprite(e){return sc.center.set(0,0,0),sc.radius=.7071067811865476,sc.applyMatrix4(e.matrixWorld),this.intersectsSphere(sc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Lm.x=i.normal.x>0?e.max.x:e.min.x,Lm.y=i.normal.y>0?e.max.y:e.min.y,Lm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Lm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function QP(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function IO(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,f,p),u.onUploadCallback();let g;if(f instanceof Float32Array)g=5126;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(f instanceof Int16Array)g=5122;else if(f instanceof Uint32Array)g=5125;else if(f instanceof Int32Array)g=5124;else if(f instanceof Int8Array)g=5120;else if(f instanceof Uint8Array)g=5121;else if(f instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const p=c.array,m=c.updateRange;n.bindBuffer(f,u),m.count===-1?n.bufferSubData(f,0,p):(t?n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:o,remove:a,update:l}}class pf extends vt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,p=t/l,m=[],g=[],y=[],v=[];for(let x=0;x<c;x++){const _=x*p-o;for(let S=0;S<u;S++){const b=S*f-s;g.push(b,-_,0),y.push(0,0,1),v.push(S/a),v.push(1-x/l)}}for(let x=0;x<l;x++)for(let _=0;_<a;_++){const S=_+u*x,b=_+u*(x+1),C=_+1+u*(x+1),E=_+1+u*x;m.push(S,b,E),m.push(b,C,E)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(y,3)),this.setAttribute("uv",new nt(v,2))}static fromJSON(e){return new pf(e.width,e.height,e.widthSegments,e.heightSegments)}}var LO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,FO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kO=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,OO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,UO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,NO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zO="vec3 transformed = vec3( position );",GO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,HO=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,VO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,WO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,$O=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,JO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,KO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,XO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,YO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,QO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,qO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ZO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,eU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,tU=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,nU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,iU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,oU="gl_FragColor = linearToOutputTexel( gl_FragColor );",aU=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,lU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,dU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,pU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,mU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,yU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,xU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_U=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,SU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bU=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,MU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,EU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,TU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,RU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,PU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,BU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,DU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,IU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,LU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,kU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,OU=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,UU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,NU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,zU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,HU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,VU=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,WU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jU=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,$U=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,JU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,KU=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,XU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,ZU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,eN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,tN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,nN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,sN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,aN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,lN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fN=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,dN=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hN=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,pN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,mN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,vN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_N=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,wN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,SN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,MN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,AN=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,EN=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,CN=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,TN=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,RN=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,PN=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,BN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const DN=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,IN=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,LN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FN=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,kN=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ON=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,UN=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NN=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,GN=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,HN=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VN=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WN=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jN=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$N=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,XN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,QN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ez=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,sz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oz=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,az=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,lz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ut={alphamap_fragment:LO,alphamap_pars_fragment:FO,alphatest_fragment:kO,alphatest_pars_fragment:OO,aomap_fragment:UO,aomap_pars_fragment:NO,begin_vertex:zO,beginnormal_vertex:GO,bsdfs:HO,iridescence_fragment:VO,bumpmap_pars_fragment:WO,clipping_planes_fragment:jO,clipping_planes_pars_fragment:$O,clipping_planes_pars_vertex:JO,clipping_planes_vertex:KO,color_fragment:XO,color_pars_fragment:YO,color_pars_vertex:QO,color_vertex:qO,common:ZO,cube_uv_reflection_fragment:eU,defaultnormal_vertex:tU,displacementmap_pars_vertex:nU,displacementmap_vertex:rU,emissivemap_fragment:iU,emissivemap_pars_fragment:sU,encodings_fragment:oU,encodings_pars_fragment:aU,envmap_fragment:lU,envmap_common_pars_fragment:uU,envmap_pars_fragment:cU,envmap_pars_vertex:fU,envmap_physical_pars_fragment:bU,envmap_vertex:dU,fog_vertex:hU,fog_pars_vertex:pU,fog_fragment:mU,fog_pars_fragment:gU,gradientmap_pars_fragment:vU,lightmap_fragment:yU,lightmap_pars_fragment:xU,lights_lambert_fragment:_U,lights_lambert_pars_fragment:wU,lights_pars_begin:SU,lights_toon_fragment:MU,lights_toon_pars_fragment:AU,lights_phong_fragment:EU,lights_phong_pars_fragment:CU,lights_physical_fragment:TU,lights_physical_pars_fragment:RU,lights_fragment_begin:PU,lights_fragment_maps:BU,lights_fragment_end:DU,logdepthbuf_fragment:IU,logdepthbuf_pars_fragment:LU,logdepthbuf_pars_vertex:FU,logdepthbuf_vertex:kU,map_fragment:OU,map_pars_fragment:UU,map_particle_fragment:NU,map_particle_pars_fragment:zU,metalnessmap_fragment:GU,metalnessmap_pars_fragment:HU,morphcolor_vertex:VU,morphnormal_vertex:WU,morphtarget_pars_vertex:jU,morphtarget_vertex:$U,normal_fragment_begin:JU,normal_fragment_maps:KU,normal_pars_fragment:XU,normal_pars_vertex:YU,normal_vertex:QU,normalmap_pars_fragment:qU,clearcoat_normal_fragment_begin:ZU,clearcoat_normal_fragment_maps:eN,clearcoat_pars_fragment:tN,iridescence_pars_fragment:nN,output_fragment:rN,packing:iN,premultiplied_alpha_fragment:sN,project_vertex:oN,dithering_fragment:aN,dithering_pars_fragment:lN,roughnessmap_fragment:uN,roughnessmap_pars_fragment:cN,shadowmap_pars_fragment:fN,shadowmap_pars_vertex:dN,shadowmap_vertex:hN,shadowmask_pars_fragment:pN,skinbase_vertex:mN,skinning_pars_vertex:gN,skinning_vertex:vN,skinnormal_vertex:yN,specularmap_fragment:xN,specularmap_pars_fragment:_N,tonemapping_fragment:wN,tonemapping_pars_fragment:SN,transmission_fragment:bN,transmission_pars_fragment:MN,uv_pars_fragment:AN,uv_pars_vertex:EN,uv_vertex:CN,uv2_pars_fragment:TN,uv2_pars_vertex:RN,uv2_vertex:PN,worldpos_vertex:BN,background_vert:DN,background_frag:IN,cube_vert:LN,cube_frag:FN,depth_vert:kN,depth_frag:ON,distanceRGBA_vert:UN,distanceRGBA_frag:NN,equirect_vert:zN,equirect_frag:GN,linedashed_vert:HN,linedashed_frag:VN,meshbasic_vert:WN,meshbasic_frag:jN,meshlambert_vert:$N,meshlambert_frag:JN,meshmatcap_vert:KN,meshmatcap_frag:XN,meshnormal_vert:YN,meshnormal_frag:QN,meshphong_vert:qN,meshphong_frag:ZN,meshphysical_vert:ez,meshphysical_frag:tz,meshtoon_vert:nz,meshtoon_frag:rz,points_vert:iz,points_frag:sz,shadow_vert:oz,shadow_frag:az,sprite_vert:lz,sprite_frag:uz},Je={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ir},uv2Transform:{value:new Ir},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}}},Cs={basic:{uniforms:Pr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:Pr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new Ge(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:Pr([Je.common,Je.specularmap,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,Je.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:Pr([Je.common,Je.envmap,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.roughnessmap,Je.metalnessmap,Je.fog,Je.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:Pr([Je.common,Je.aomap,Je.lightmap,Je.emissivemap,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.gradientmap,Je.fog,Je.lights,{emissive:{value:new Ge(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:Pr([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,Je.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:Pr([Je.points,Je.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:Pr([Je.common,Je.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:Pr([Je.common,Je.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:Pr([Je.common,Je.bumpmap,Je.normalmap,Je.displacementmap,{opacity:{value:1}}]),vertexShader:ut.meshnormal_vert,fragmentShader:ut.meshnormal_frag},sprite:{uniforms:Pr([Je.sprite,Je.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},cube:{uniforms:Pr([Je.envmap,{opacity:{value:1}}]),vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:Pr([Je.common,Je.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:Pr([Je.lights,Je.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};Cs.physical={uniforms:Pr([Cs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ge(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ge(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ge(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};function cz(n,e,t,r,i,s){const o=new Ge(0);let a=i===!0?0:1,l,u,c=null,f=0,p=null;function m(y,v){let x=!1,_=v.isScene===!0?v.background:null;_&&_.isTexture&&(_=e.get(_));const S=n.xr,b=S.getSession&&S.getSession();b&&b.environmentBlendMode==="additive"&&(_=null),_===null?g(o,a):_&&_.isColor&&(g(_,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===cf)?(u===void 0&&(u=new Bn(new ol(1,1,1),new Zn({name:"BackgroundCubeMaterial",uniforms:ef(Cs.cube.uniforms),vertexShader:Cs.cube.vertexShader,fragmentShader:Cs.cube.fragmentShader,side:ar,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,E,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(c!==_||f!==_.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,c=_,f=_.version,p=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new Bn(new pf(2,2),new Zn({name:"BackgroundMaterial",uniforms:ef(Cs.background.uniforms),vertexShader:Cs.background.vertexShader,fragmentShader:Cs.background.fragmentShader,side:to,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(c!==_||f!==_.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,c=_,f=_.version,p=n.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null))}function g(y,v){t.buffers.color.setClear(y.r,y.g,y.b,v,s)}return{getClearColor:function(){return o},setClearColor:function(y,v=1){o.set(y),a=v,g(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,g(o,a)},render:m}}function fz(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=v(null);let u=l,c=!1;function f(G,X,$,ne,U){let O=!1;if(o){const z=y(ne,$,X);u!==z&&(u=z,m(u.object)),O=x(G,ne,$,U),O&&_(G,ne,$,U)}else{const z=X.wireframe===!0;(u.geometry!==ne.id||u.program!==$.id||u.wireframe!==z)&&(u.geometry=ne.id,u.program=$.id,u.wireframe=z,O=!0)}U!==null&&t.update(U,34963),(O||c)&&(c=!1,M(G,X,$,ne),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(G){return r.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function g(G){return r.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function y(G,X,$){const ne=$.wireframe===!0;let U=a[G.id];U===void 0&&(U={},a[G.id]=U);let O=U[X.id];O===void 0&&(O={},U[X.id]=O);let z=O[ne];return z===void 0&&(z=v(p()),O[ne]=z),z}function v(G){const X=[],$=[],ne=[];for(let U=0;U<i;U++)X[U]=0,$[U]=0,ne[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:$,attributeDivisors:ne,object:G,attributes:{},index:null}}function x(G,X,$,ne){const U=u.attributes,O=X.attributes;let z=0;const W=$.getAttributes();for(const q in W)if(W[q].location>=0){const ce=U[q];let me=O[q];if(me===void 0&&(q==="instanceMatrix"&&G.instanceMatrix&&(me=G.instanceMatrix),q==="instanceColor"&&G.instanceColor&&(me=G.instanceColor)),ce===void 0||ce.attribute!==me||me&&ce.data!==me.data)return!0;z++}return u.attributesNum!==z||u.index!==ne}function _(G,X,$,ne){const U={},O=X.attributes;let z=0;const W=$.getAttributes();for(const q in W)if(W[q].location>=0){let ce=O[q];ce===void 0&&(q==="instanceMatrix"&&G.instanceMatrix&&(ce=G.instanceMatrix),q==="instanceColor"&&G.instanceColor&&(ce=G.instanceColor));const me={};me.attribute=ce,ce&&ce.data&&(me.data=ce.data),U[q]=me,z++}u.attributes=U,u.attributesNum=z,u.index=ne}function S(){const G=u.newAttributes;for(let X=0,$=G.length;X<$;X++)G[X]=0}function b(G){C(G,0)}function C(G,X){const $=u.newAttributes,ne=u.enabledAttributes,U=u.attributeDivisors;$[G]=1,ne[G]===0&&(n.enableVertexAttribArray(G),ne[G]=1),U[G]!==X&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,X),U[G]=X)}function E(){const G=u.newAttributes,X=u.enabledAttributes;for(let $=0,ne=X.length;$<ne;$++)X[$]!==G[$]&&(n.disableVertexAttribArray($),X[$]=0)}function P(G,X,$,ne,U,O){r.isWebGL2===!0&&($===5124||$===5125)?n.vertexAttribIPointer(G,X,$,U,O):n.vertexAttribPointer(G,X,$,ne,U,O)}function M(G,X,$,ne){if(r.isWebGL2===!1&&(G.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const U=ne.attributes,O=$.getAttributes(),z=X.defaultAttributeValues;for(const W in O){const q=O[W];if(q.location>=0){let oe=U[W];if(oe===void 0&&(W==="instanceMatrix"&&G.instanceMatrix&&(oe=G.instanceMatrix),W==="instanceColor"&&G.instanceColor&&(oe=G.instanceColor)),oe!==void 0){const ce=oe.normalized,me=oe.itemSize,re=t.get(oe);if(re===void 0)continue;const he=re.buffer,ie=re.type,k=re.bytesPerElement;if(oe.isInterleavedBufferAttribute){const V=oe.data,K=V.stride,Y=oe.offset;if(V.isInstancedInterleavedBuffer){for(let ee=0;ee<q.locationSize;ee++)C(q.location+ee,V.meshPerAttribute);G.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let ee=0;ee<q.locationSize;ee++)b(q.location+ee);n.bindBuffer(34962,he);for(let ee=0;ee<q.locationSize;ee++)P(q.location+ee,me/q.locationSize,ie,ce,K*k,(Y+me/q.locationSize*ee)*k)}else{if(oe.isInstancedBufferAttribute){for(let V=0;V<q.locationSize;V++)C(q.location+V,oe.meshPerAttribute);G.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let V=0;V<q.locationSize;V++)b(q.location+V);n.bindBuffer(34962,he);for(let V=0;V<q.locationSize;V++)P(q.location+V,me/q.locationSize,ie,ce,me*k,me/q.locationSize*V*k)}}else if(z!==void 0){const ce=z[W];if(ce!==void 0)switch(ce.length){case 2:n.vertexAttrib2fv(q.location,ce);break;case 3:n.vertexAttrib3fv(q.location,ce);break;case 4:n.vertexAttrib4fv(q.location,ce);break;default:n.vertexAttrib1fv(q.location,ce)}}}}E()}function T(){I();for(const G in a){const X=a[G];for(const $ in X){const ne=X[$];for(const U in ne)g(ne[U].object),delete ne[U];delete X[$]}delete a[G]}}function R(G){if(a[G.id]===void 0)return;const X=a[G.id];for(const $ in X){const ne=X[$];for(const U in ne)g(ne[U].object),delete ne[U];delete X[$]}delete a[G.id]}function L(G){for(const X in a){const $=a[X];if($[G.id]===void 0)continue;const ne=$[G.id];for(const U in ne)g(ne[U].object),delete ne[U];delete $[G.id]}}function I(){H(),c=!0,u!==l&&(u=l,m(u.object))}function H(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:I,resetDefaultState:H,dispose:T,releaseStatesOfGeometry:R,releaseStatesOfProgram:L,initAttributes:S,enableAttribute:b,disableUnusedAttributes:E}}function dz(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,f){if(f===0)return;let p,m;if(i)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,c,f),t.update(c,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function hz(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,f=n.getParameter(34930),p=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),y=n.getParameter(34921),v=n.getParameter(36347),x=n.getParameter(36348),_=n.getParameter(36349),S=p>0,b=o||e.has("OES_texture_float"),C=S&&b,E=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:v,maxVaryings:x,maxFragmentUniforms:_,vertexTextures:S,floatFragmentTextures:b,floatVertexTextures:C,maxSamples:E}}function pz(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Ca,a=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p,m){const g=f.length!==0||p||r!==0||i;return i=p,t=c(f,m,0),r=f.length,g},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(f,p,m){const g=f.clippingPlanes,y=f.clipIntersection,v=f.clipShadows,x=n.get(f);if(!i||g===null||g.length===0||s&&!v)s?c(null):u();else{const _=s?0:r,S=_*4;let b=x.clippingState||null;l.value=b,b=c(g,p,S,m);for(let C=0;C!==S;++C)b[C]=t[C];x.clippingState=b,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,p,m,g){const y=f!==null?f.length:0;let v=null;if(y!==0){if(v=l.value,g!==!0||v===null){const x=m+y*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(v===null||v.length<x)&&(v=new Float32Array(x));for(let S=0,b=m;S!==y;++S,b+=4)o.copy(f[S]).applyMatrix4(_,a),o.normal.toArray(v,b),v[b+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function mz(n){let e=new WeakMap;function t(o,a){return a===ph?o.mapping=Ja:a===mh&&(o.mapping=Ka),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ph||a===mh)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new YP(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class mf extends hf{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ic=4,fA=[.125,.215,.35,.446,.526,.582],Nl=20,n1=new mf,dA=new Ge;let r1=null;const Fl=(1+Math.sqrt(5))/2,oc=1/Fl,hA=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,Fl,oc),new J(0,Fl,-oc),new J(oc,0,Fl),new J(-oc,0,Fl),new J(Fl,oc,0),new J(-Fl,oc,0)];class w_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){r1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(r1),e.scissorTest=!1,Fm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ja||e.mapping===Ka?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),r1=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ht,minFilter:Ht,generateMipmaps:!1,type:fu,format:Qr,encoding:Fi,depthBuffer:!1},i=pA(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pA(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=gz(s)),this._blurMaterial=vz(s,e,t)}return i}_compileMaterial(e){const t=new Bn(this._lodPlanes[0],e);this._renderer.compile(t,n1)}_sceneToCubeUV(e,t,r,i){const a=new Vn(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,p=c.toneMapping;c.getClearColor(dA),c.toneMapping=Ps,c.autoClear=!1;const m=new qr({name:"PMREM.Background",side:ar,depthWrite:!1,depthTest:!1}),g=new Bn(new ol,m);let y=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,y=!0):(m.color.copy(dA),y=!0);for(let x=0;x<6;x++){const _=x%3;_===0?(a.up.set(0,l[x],0),a.lookAt(u[x],0,0)):_===1?(a.up.set(0,0,l[x]),a.lookAt(0,u[x],0)):(a.up.set(0,l[x],0),a.lookAt(0,0,u[x]));const S=this._cubeSize;Fm(i,_*S,x>2?S:0,S,S),c.setRenderTarget(i),y&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=p,c.autoClear=f,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ja||e.mapping===Ka;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=gA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mA());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Bn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Fm(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,n1)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=hA[(i-1)%hA.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Bn(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Nl-1),y=s/g,v=isFinite(s)?1+Math.floor(c*y):Nl;v>Nl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Nl}`);const x=[];let _=0;for(let P=0;P<Nl;++P){const M=P/y,T=Math.exp(-M*M/2);x.push(T),P===0?_+=T:P<v&&(_+=2*T)}for(let P=0;P<x.length;P++)x[P]=x[P]/_;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=x,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=g,p.mipInt.value=S-r;const b=this._sizeLods[i],C=3*b*(i>S-Ic?i-S+Ic:0),E=4*(this._cubeSize-b);Fm(t,C,E,3*b,2*b),l.setRenderTarget(t),l.render(f,n1)}}function gz(n){const e=[],t=[],r=[];let i=n;const s=n-Ic+1+fA.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ic?l=fA[o-n+Ic-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,p=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,g=6,y=3,v=2,x=1,_=new Float32Array(y*g*m),S=new Float32Array(v*g*m),b=new Float32Array(x*g*m);for(let E=0;E<m;E++){const P=E%3*2/3-1,M=E>2?0:-1,T=[P,M,0,P+2/3,M,0,P+2/3,M+1,0,P,M,0,P+2/3,M+1,0,P,M+1,0];_.set(T,y*g*E),S.set(p,v*g*E);const R=[E,E,E,E,E,E];b.set(R,x*g*E)}const C=new vt;C.setAttribute("position",new St(_,y)),C.setAttribute("uv",new St(S,v)),C.setAttribute("faceIndex",new St(b,x)),e.push(C),i>Ic&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function pA(n,e,t){const r=new dn(n,e,t);return r.texture.mapping=cf,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Fm(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function vz(n,e,t){const r=new Float32Array(Nl),i=new J(0,1,0);return new Zn({name:"SphericalGaussianBlur",defines:{n:Nl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:wS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function mA(){return new Zn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function gA(){return new Zn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:vr,depthTest:!1,depthWrite:!1})}function wS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yz(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===ph||l===mh,c=l===Ja||l===Ka;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new w_(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){t===null&&(t=new w_(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function xz(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function _z(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const g in p)e.update(p[g],34962);const m=f.morphAttributes;for(const g in m){const y=m[g];for(let v=0,x=y.length;v<x;v++)e.update(y[v],34962)}}function u(f){const p=[],m=f.index,g=f.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let S=0,b=_.length;S<b;S+=3){const C=_[S+0],E=_[S+1],P=_[S+2];p.push(C,E,E,P,P,C)}}else{const _=g.array;y=g.version;for(let S=0,b=_.length/3-1;S<b;S+=3){const C=S+0,E=S+1,P=S+2;p.push(C,E,E,P,P,C)}}const v=new(JP(p)?xS:yS)(p,1);v.version=y;const x=s.get(f);x&&e.remove(x),s.set(f,v)}function c(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function wz(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function c(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function f(p,m,g){if(g===0)return;let y,v;if(i)y=n,v="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](s,m,a,p*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f}function Sz(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function bz(n,e){return n[0]-e[0]}function Mz(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Az(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new zt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f,p){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=y!==void 0?y.length:0;let x=s.get(c);if(x===void 0||x.count!==v){let $=function(){G.dispose(),s.delete(c),c.removeEventListener("dispose",$)};var g=$;x!==void 0&&x.texture.dispose();const b=c.morphAttributes.position!==void 0,C=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,P=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],T=c.morphAttributes.color||[];let R=0;b===!0&&(R=1),C===!0&&(R=2),E===!0&&(R=3);let L=c.attributes.position.count*R,I=1;L>e.maxTextureSize&&(I=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const H=new Float32Array(L*I*4*v),G=new Nh(H,L,I,v);G.type=mr,G.needsUpdate=!0;const X=R*4;for(let ne=0;ne<v;ne++){const U=P[ne],O=M[ne],z=T[ne],W=L*I*4*ne;for(let q=0;q<U.count;q++){const oe=q*X;b===!0&&(o.fromBufferAttribute(U,q),H[W+oe+0]=o.x,H[W+oe+1]=o.y,H[W+oe+2]=o.z,H[W+oe+3]=0),C===!0&&(o.fromBufferAttribute(O,q),H[W+oe+4]=o.x,H[W+oe+5]=o.y,H[W+oe+6]=o.z,H[W+oe+7]=0),E===!0&&(o.fromBufferAttribute(z,q),H[W+oe+8]=o.x,H[W+oe+9]=o.y,H[W+oe+10]=o.z,H[W+oe+11]=z.itemSize===4?o.w:1)}}x={count:v,texture:G,size:new Ae(L,I)},s.set(c,x),c.addEventListener("dispose",$)}let _=0;for(let b=0;b<m.length;b++)_+=m[b];const S=c.morphTargetsRelative?1:1-_;p.getUniforms().setValue(n,"morphTargetBaseInfluence",S),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const y=m===void 0?0:m.length;let v=r[c.id];if(v===void 0||v.length!==y){v=[];for(let C=0;C<y;C++)v[C]=[C,0];r[c.id]=v}for(let C=0;C<y;C++){const E=v[C];E[0]=C,E[1]=m[C]}v.sort(Mz);for(let C=0;C<8;C++)C<y&&v[C][1]?(a[C][0]=v[C][0],a[C][1]=v[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(bz);const x=c.morphAttributes.position,_=c.morphAttributes.normal;let S=0;for(let C=0;C<8;C++){const E=a[C],P=E[0],M=E[1];P!==Number.MAX_SAFE_INTEGER&&M?(x&&c.getAttribute("morphTarget"+C)!==x[P]&&c.setAttribute("morphTarget"+C,x[P]),_&&c.getAttribute("morphNormal"+C)!==_[P]&&c.setAttribute("morphNormal"+C,_[P]),i[C]=M,S+=M):(x&&c.hasAttribute("morphTarget"+C)===!0&&c.deleteAttribute("morphTarget"+C),_&&c.hasAttribute("morphNormal"+C)===!0&&c.deleteAttribute("morphNormal"+C),i[C]=0)}const b=c.morphTargetsRelative?1:1-S;p.getUniforms().setValue(n,"morphTargetBaseInfluence",b),p.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Ez(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const qP=new un,ZP=new Nh,eB=new Wv,tB=new zh,vA=[],yA=[],xA=new Float32Array(16),_A=new Float32Array(9),wA=new Float32Array(4);function gf(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=vA[i];if(s===void 0&&(s=new Float32Array(i),vA[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ni(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ri(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function $v(n,e){let t=yA[e];t===void 0&&(t=new Int32Array(e),yA[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Cz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Tz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;n.uniform2fv(this.addr,e),ri(t,e)}}function Rz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ni(t,e))return;n.uniform3fv(this.addr,e),ri(t,e)}}function Pz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;n.uniform4fv(this.addr,e),ri(t,e)}}function Bz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ni(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ri(t,e)}else{if(ni(t,r))return;wA.set(r),n.uniformMatrix2fv(this.addr,!1,wA),ri(t,r)}}function Dz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ni(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ri(t,e)}else{if(ni(t,r))return;_A.set(r),n.uniformMatrix3fv(this.addr,!1,_A),ri(t,r)}}function Iz(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ni(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ri(t,e)}else{if(ni(t,r))return;xA.set(r),n.uniformMatrix4fv(this.addr,!1,xA),ri(t,r)}}function Lz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fz(n,e){const t=this.cache;ni(t,e)||(n.uniform2iv(this.addr,e),ri(t,e))}function kz(n,e){const t=this.cache;ni(t,e)||(n.uniform3iv(this.addr,e),ri(t,e))}function Oz(n,e){const t=this.cache;ni(t,e)||(n.uniform4iv(this.addr,e),ri(t,e))}function Uz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Nz(n,e){const t=this.cache;ni(t,e)||(n.uniform2uiv(this.addr,e),ri(t,e))}function zz(n,e){const t=this.cache;ni(t,e)||(n.uniform3uiv(this.addr,e),ri(t,e))}function Gz(n,e){const t=this.cache;ni(t,e)||(n.uniform4uiv(this.addr,e),ri(t,e))}function Hz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||qP,i)}function Vz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||eB,i)}function Wz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||tB,i)}function jz(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||ZP,i)}function $z(n){switch(n){case 5126:return Cz;case 35664:return Tz;case 35665:return Rz;case 35666:return Pz;case 35674:return Bz;case 35675:return Dz;case 35676:return Iz;case 5124:case 35670:return Lz;case 35667:case 35671:return Fz;case 35668:case 35672:return kz;case 35669:case 35673:return Oz;case 5125:return Uz;case 36294:return Nz;case 36295:return zz;case 36296:return Gz;case 35678:case 36198:case 36298:case 36306:case 35682:return Hz;case 35679:case 36299:case 36307:return Vz;case 35680:case 36300:case 36308:case 36293:return Wz;case 36289:case 36303:case 36311:case 36292:return jz}}function Jz(n,e){n.uniform1fv(this.addr,e)}function Kz(n,e){const t=gf(e,this.size,2);n.uniform2fv(this.addr,t)}function Xz(n,e){const t=gf(e,this.size,3);n.uniform3fv(this.addr,t)}function Yz(n,e){const t=gf(e,this.size,4);n.uniform4fv(this.addr,t)}function Qz(n,e){const t=gf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function qz(n,e){const t=gf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Zz(n,e){const t=gf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function e5(n,e){n.uniform1iv(this.addr,e)}function t5(n,e){n.uniform2iv(this.addr,e)}function n5(n,e){n.uniform3iv(this.addr,e)}function r5(n,e){n.uniform4iv(this.addr,e)}function i5(n,e){n.uniform1uiv(this.addr,e)}function s5(n,e){n.uniform2uiv(this.addr,e)}function o5(n,e){n.uniform3uiv(this.addr,e)}function a5(n,e){n.uniform4uiv(this.addr,e)}function l5(n,e,t){const r=e.length,i=$v(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||qP,i[s])}function u5(n,e,t){const r=e.length,i=$v(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||eB,i[s])}function c5(n,e,t){const r=e.length,i=$v(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||tB,i[s])}function f5(n,e,t){const r=e.length,i=$v(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||ZP,i[s])}function d5(n){switch(n){case 5126:return Jz;case 35664:return Kz;case 35665:return Xz;case 35666:return Yz;case 35674:return Qz;case 35675:return qz;case 35676:return Zz;case 5124:case 35670:return e5;case 35667:case 35671:return t5;case 35668:case 35672:return n5;case 35669:case 35673:return r5;case 5125:return i5;case 36294:return s5;case 36295:return o5;case 36296:return a5;case 35678:case 36198:case 36298:case 36306:case 35682:return l5;case 35679:case 36299:case 36307:return u5;case 35680:case 36300:case 36308:case 36293:return c5;case 36289:case 36303:case 36311:case 36292:return f5}}class h5{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=$z(t.type)}}class p5{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=d5(t.type)}}class m5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const i1=/(\w+)(\])?(\[|\.)?/g;function SA(n,e){n.seq.push(e),n.map[e.id]=e}function g5(n,e,t){const r=n.name,i=r.length;for(i1.lastIndex=0;;){const s=i1.exec(r),o=i1.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){SA(t,u===void 0?new h5(a,n,e):new p5(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new m5(a),SA(t,f)),t=f}}}class Fg{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);g5(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function bA(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let v5=0;function y5(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function x5(n){switch(n){case Fi:return["Linear","( value )"];case gt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function MA(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+y5(n.getShaderSource(e),o)}else return i}function _5(n,e){const t=x5(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function w5(n,e){let t;switch(e){case wP:t="Linear";break;case SP:t="Reinhard";break;case bP:t="OptimizedCineon";break;case fS:t="ACESFilmic";break;case MP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function S5(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Rd).join(`
`)}function b5(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function M5(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Rd(n){return n!==""}function AA(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function EA(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const A5=/^[ \t]*#include +<([\w\d./]+)>/gm;function S_(n){return n.replace(A5,E5)}function E5(n,e){const t=ut[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return S_(t)}const C5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CA(n){return n.replace(C5,T5)}function T5(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function TA(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function R5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===aS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===lS?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Bc&&(e="SHADOWMAP_TYPE_VSM"),e}function P5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ja:case Ka:e="ENVMAP_TYPE_CUBE";break;case cf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function B5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ka:e="ENVMAP_MODE_REFRACTION";break}return e}function D5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Oh:e="ENVMAP_BLENDING_MULTIPLY";break;case xP:e="ENVMAP_BLENDING_MIX";break;case _P:e="ENVMAP_BLENDING_ADD";break}return e}function I5(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function L5(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=R5(t),u=P5(t),c=B5(t),f=D5(t),p=I5(t),m=t.isWebGL2?"":S5(t),g=b5(s),y=i.createProgram();let v,x,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[g].filter(Rd).join(`
`),v.length>0&&(v+=`
`),x=[m,g].filter(Rd).join(`
`),x.length>0&&(x+=`
`)):(v=[TA(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rd).join(`
`),x=[m,TA(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ps?"#define TONE_MAPPING":"",t.toneMapping!==Ps?ut.tonemapping_pars_fragment:"",t.toneMapping!==Ps?w5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ut.encodings_pars_fragment,_5("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Rd).join(`
`)),o=S_(o),o=AA(o,t),o=EA(o,t),a=S_(a),a=AA(a,t),a=EA(a,t),o=CA(o),a=CA(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,x=["#define varying in",t.glslVersion===x_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===x_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=_+v+o,b=_+x+a,C=bA(i,35633,S),E=bA(i,35632,b);if(i.attachShader(y,C),i.attachShader(y,E),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),n.debug.checkShaderErrors){const T=i.getProgramInfoLog(y).trim(),R=i.getShaderInfoLog(C).trim(),L=i.getShaderInfoLog(E).trim();let I=!0,H=!0;if(i.getProgramParameter(y,35714)===!1){I=!1;const G=MA(i,C,"vertex"),X=MA(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+`

Program Info Log: `+T+`
`+G+`
`+X)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(R===""||L==="")&&(H=!1);H&&(this.diagnostics={runnable:I,programLog:T,vertexShader:{log:R,prefix:v},fragmentShader:{log:L,prefix:x}})}i.deleteShader(C),i.deleteShader(E);let P;this.getUniforms=function(){return P===void 0&&(P=new Fg(i,y)),P};let M;return this.getAttributes=function(){return M===void 0&&(M=M5(i,y)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=v5++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=E,this}let F5=0;class k5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new O5(e),t.set(e,r)),r}}class O5{constructor(e){this.id=F5++,this.code=e,this.usedTimes=0}}function U5(n,e,t,r,i,s,o){const a=new tu,l=new k5,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(M,T,R,L,I){const H=L.fog,G=I.geometry,X=M.isMeshStandardMaterial?L.environment:null,$=(M.isMeshStandardMaterial?t:e).get(M.envMap||X),ne=!!$&&$.mapping===cf?$.image.height:null,U=g[M.type];M.precision!==null&&(m=i.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));const O=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,z=O!==void 0?O.length:0;let W=0;G.morphAttributes.position!==void 0&&(W=1),G.morphAttributes.normal!==void 0&&(W=2),G.morphAttributes.color!==void 0&&(W=3);let q,oe,ce,me;if(U){const K=Cs[U];q=K.vertexShader,oe=K.fragmentShader}else q=M.vertexShader,oe=M.fragmentShader,l.update(M),ce=l.getVertexShaderID(M),me=l.getFragmentShaderID(M);const re=n.getRenderTarget(),he=M.alphaTest>0,ie=M.clearcoat>0,k=M.iridescence>0;return{isWebGL2:c,shaderID:U,shaderName:M.type,vertexShader:q,fragmentShader:oe,defines:M.defines,customVertexShaderID:ce,customFragmentShaderID:me,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:m,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:p,outputEncoding:re===null?n.outputEncoding:re.isXRRenderTarget===!0?re.texture.encoding:Fi,map:!!M.map,matcap:!!M.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:ne,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===WP,tangentSpaceNormalMap:M.normalMapType===$o,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===gt,clearcoat:ie,clearcoatMap:ie&&!!M.clearcoatMap,clearcoatRoughnessMap:ie&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!M.clearcoatNormalMap,iridescence:k,iridescenceMap:k&&!!M.iridescenceMap,iridescenceThicknessMap:k&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===ql,alphaMap:!!M.alphaMap,alphaTest:he,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!G.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||M.transmission>0||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||M.sheen>0||!!M.sheenColorMap||!!M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!H,useFog:M.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:f,skinning:I.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:W,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:M.toneMapped?n.toneMapping:Ps,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Dr,flipSided:M.side===ar,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function v(M){const T=[];if(M.shaderID?T.push(M.shaderID):(T.push(M.customVertexShaderID),T.push(M.customFragmentShaderID)),M.defines!==void 0)for(const R in M.defines)T.push(R),T.push(M.defines[R]);return M.isRawShaderMaterial===!1&&(x(T,M),_(T,M),T.push(n.outputEncoding)),T.push(M.customProgramCacheKey),T.join()}function x(M,T){M.push(T.precision),M.push(T.outputEncoding),M.push(T.envMapMode),M.push(T.envMapCubeUVHeight),M.push(T.combine),M.push(T.vertexUvs),M.push(T.fogExp2),M.push(T.sizeAttenuation),M.push(T.morphTargetsCount),M.push(T.morphAttributeCount),M.push(T.numDirLights),M.push(T.numPointLights),M.push(T.numSpotLights),M.push(T.numSpotLightMaps),M.push(T.numHemiLights),M.push(T.numRectAreaLights),M.push(T.numDirLightShadows),M.push(T.numPointLightShadows),M.push(T.numSpotLightShadows),M.push(T.numSpotLightShadowsWithMaps),M.push(T.shadowMapType),M.push(T.toneMapping),M.push(T.numClippingPlanes),M.push(T.numClipIntersection),M.push(T.depthPacking)}function _(M,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.map&&a.enable(4),T.matcap&&a.enable(5),T.envMap&&a.enable(6),T.lightMap&&a.enable(7),T.aoMap&&a.enable(8),T.emissiveMap&&a.enable(9),T.bumpMap&&a.enable(10),T.normalMap&&a.enable(11),T.objectSpaceNormalMap&&a.enable(12),T.tangentSpaceNormalMap&&a.enable(13),T.clearcoat&&a.enable(14),T.clearcoatMap&&a.enable(15),T.clearcoatRoughnessMap&&a.enable(16),T.clearcoatNormalMap&&a.enable(17),T.iridescence&&a.enable(18),T.iridescenceMap&&a.enable(19),T.iridescenceThicknessMap&&a.enable(20),T.displacementMap&&a.enable(21),T.specularMap&&a.enable(22),T.roughnessMap&&a.enable(23),T.metalnessMap&&a.enable(24),T.gradientMap&&a.enable(25),T.alphaMap&&a.enable(26),T.alphaTest&&a.enable(27),T.vertexColors&&a.enable(28),T.vertexAlphas&&a.enable(29),T.vertexUvs&&a.enable(30),T.vertexTangents&&a.enable(31),T.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.physicallyCorrectLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.specularIntensityMap&&a.enable(15),T.specularColorMap&&a.enable(16),T.transmission&&a.enable(17),T.transmissionMap&&a.enable(18),T.thicknessMap&&a.enable(19),T.sheen&&a.enable(20),T.sheenColorMap&&a.enable(21),T.sheenRoughnessMap&&a.enable(22),T.decodeVideoTexture&&a.enable(23),T.opaque&&a.enable(24),M.push(a.mask)}function S(M){const T=g[M.type];let R;if(T){const L=Cs[T];R=_S.clone(L.uniforms)}else R=M.uniforms;return R}function b(M,T){let R;for(let L=0,I=u.length;L<I;L++){const H=u[L];if(H.cacheKey===T){R=H,++R.usedTimes;break}}return R===void 0&&(R=new L5(n,T,M,s),u.push(R)),R}function C(M){if(--M.usedTimes===0){const T=u.indexOf(M);u[T]=u[u.length-1],u.pop(),M.destroy()}}function E(M){l.remove(M)}function P(){l.dispose()}return{getParameters:y,getProgramCacheKey:v,getUniforms:S,acquireProgram:b,releaseProgram:C,releaseShaderCache:E,programs:u,dispose:P}}function N5(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function z5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function RA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function PA(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,g,y,v){let x=n[e];return x===void 0?(x={id:f.id,object:f,geometry:p,material:m,groupOrder:g,renderOrder:f.renderOrder,z:y,group:v},n[e]=x):(x.id=f.id,x.object=f,x.geometry=p,x.material=m,x.groupOrder=g,x.renderOrder=f.renderOrder,x.z=y,x.group=v),e++,x}function a(f,p,m,g,y,v){const x=o(f,p,m,g,y,v);m.transmission>0?r.push(x):m.transparent===!0?i.push(x):t.push(x)}function l(f,p,m,g,y,v){const x=o(f,p,m,g,y,v);m.transmission>0?r.unshift(x):m.transparent===!0?i.unshift(x):t.unshift(x)}function u(f,p){t.length>1&&t.sort(f||z5),r.length>1&&r.sort(p||RA),i.length>1&&i.sort(p||RA)}function c(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function G5(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new PA,n.set(r,[o])):i>=s.length?(o=new PA,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function H5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new Ge};break;case"SpotLight":t={position:new J,direction:new J,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":t={color:new Ge,position:new J,halfWidth:new J,halfHeight:new J};break}return n[e.id]=t,t}}}function V5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let W5=0;function j5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function $5(n,e){const t=new H5,r=V5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new J);const s=new J,o=new ht,a=new ht;function l(c,f){let p=0,m=0,g=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let y=0,v=0,x=0,_=0,S=0,b=0,C=0,E=0,P=0,M=0;c.sort(j5);const T=f!==!0?Math.PI:1;for(let L=0,I=c.length;L<I;L++){const H=c[L],G=H.color,X=H.intensity,$=H.distance,ne=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=G.r*X*T,m+=G.g*X*T,g+=G.b*X*T;else if(H.isLightProbe)for(let U=0;U<9;U++)i.probe[U].addScaledVector(H.sh.coefficients[U],X);else if(H.isDirectionalLight){const U=t.get(H);if(U.color.copy(H.color).multiplyScalar(H.intensity*T),H.castShadow){const O=H.shadow,z=r.get(H);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,i.directionalShadow[y]=z,i.directionalShadowMap[y]=ne,i.directionalShadowMatrix[y]=H.shadow.matrix,b++}i.directional[y]=U,y++}else if(H.isSpotLight){const U=t.get(H);U.position.setFromMatrixPosition(H.matrixWorld),U.color.copy(G).multiplyScalar(X*T),U.distance=$,U.coneCos=Math.cos(H.angle),U.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),U.decay=H.decay,i.spot[x]=U;const O=H.shadow;if(H.map&&(i.spotLightMap[P]=H.map,P++,O.updateMatrices(H),H.castShadow&&M++),i.spotLightMatrix[x]=O.matrix,H.castShadow){const z=r.get(H);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,i.spotShadow[x]=z,i.spotShadowMap[x]=ne,E++}x++}else if(H.isRectAreaLight){const U=t.get(H);U.color.copy(G).multiplyScalar(X),U.halfWidth.set(H.width*.5,0,0),U.halfHeight.set(0,H.height*.5,0),i.rectArea[_]=U,_++}else if(H.isPointLight){const U=t.get(H);if(U.color.copy(H.color).multiplyScalar(H.intensity*T),U.distance=H.distance,U.decay=H.decay,H.castShadow){const O=H.shadow,z=r.get(H);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,z.shadowCameraNear=O.camera.near,z.shadowCameraFar=O.camera.far,i.pointShadow[v]=z,i.pointShadowMap[v]=ne,i.pointShadowMatrix[v]=H.shadow.matrix,C++}i.point[v]=U,v++}else if(H.isHemisphereLight){const U=t.get(H);U.skyColor.copy(H.color).multiplyScalar(X*T),U.groundColor.copy(H.groundColor).multiplyScalar(X*T),i.hemi[S]=U,S++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Je.LTC_FLOAT_1,i.rectAreaLTC2=Je.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Je.LTC_HALF_1,i.rectAreaLTC2=Je.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=g;const R=i.hash;(R.directionalLength!==y||R.pointLength!==v||R.spotLength!==x||R.rectAreaLength!==_||R.hemiLength!==S||R.numDirectionalShadows!==b||R.numPointShadows!==C||R.numSpotShadows!==E||R.numSpotMaps!==P)&&(i.directional.length=y,i.spot.length=x,i.rectArea.length=_,i.point.length=v,i.hemi.length=S,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=E+P-M,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=M,R.directionalLength=y,R.pointLength=v,R.spotLength=x,R.rectAreaLength=_,R.hemiLength=S,R.numDirectionalShadows=b,R.numPointShadows=C,R.numSpotShadows=E,R.numSpotMaps=P,i.version=W5++)}function u(c,f){let p=0,m=0,g=0,y=0,v=0;const x=f.matrixWorldInverse;for(let _=0,S=c.length;_<S;_++){const b=c[_];if(b.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),p++}else if(b.isSpotLight){const C=i.spot[g];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(x),C.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),g++}else if(b.isRectAreaLight){const C=i.rectArea[y];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(x),a.identity(),o.copy(b.matrixWorld),o.premultiply(x),a.extractRotation(o),C.halfWidth.set(b.width*.5,0,0),C.halfHeight.set(0,b.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),y++}else if(b.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(b.matrixWorld),C.position.applyMatrix4(x),m++}else if(b.isHemisphereLight){const C=i.hemi[v];C.direction.setFromMatrixPosition(b.matrixWorld),C.direction.transformDirection(x),v++}}}return{setup:l,setupView:u,state:i}}function BA(n,e){const t=new $5(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function u(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function J5(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new BA(n,e),t.set(s,[l])):o>=a.length?(l=new BA(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Jv extends Mn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Kv extends Mn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new J,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const K5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,X5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Y5(n,e,t){let r=new jv;const i=new Ae,s=new Ae,o=new zt,a=new Jv({depthPacking:mS}),l=new Kv,u={},c=t.maxTextureSize,f={0:ar,1:to,2:Dr},p=new Zn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:K5,fragmentShader:X5}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new vt;g.setAttribute("position",new St(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Bn(g,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=aS,this.render=function(b,C,E){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||b.length===0)return;const P=n.getRenderTarget(),M=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),R=n.state;R.setBlending(vr),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let L=0,I=b.length;L<I;L++){const H=b[L],G=H.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const X=G.getFrameExtents();if(i.multiply(X),s.copy(G.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/X.x),i.x=s.x*X.x,G.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/X.y),i.y=s.y*X.y,G.mapSize.y=s.y)),G.map===null){const ne=this.type!==Bc?{minFilter:on,magFilter:on}:{};G.map=new dn(i.x,i.y,ne),G.map.texture.name=H.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const $=G.getViewportCount();for(let ne=0;ne<$;ne++){const U=G.getViewport(ne);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),R.viewport(o),G.updateMatrices(H,ne),r=G.getFrustum(),S(C,E,G.camera,H,this.type)}G.isPointLightShadow!==!0&&this.type===Bc&&x(G,E),G.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(P,M,T)};function x(b,C){const E=e.update(y);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new dn(i.x,i.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(C,null,E,p,y,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(C,null,E,m,y,null)}function _(b,C,E,P,M,T){let R=null;const L=E.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(L!==void 0?R=L:R=E.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const I=R.uuid,H=C.uuid;let G=u[I];G===void 0&&(G={},u[I]=G);let X=G[H];X===void 0&&(X=R.clone(),G[H]=X),R=X}return R.visible=C.visible,R.wireframe=C.wireframe,T===Bc?R.side=C.shadowSide!==null?C.shadowSide:C.side:R.side=C.shadowSide!==null?C.shadowSide:f[C.side],R.alphaMap=C.alphaMap,R.alphaTest=C.alphaTest,R.clipShadows=C.clipShadows,R.clippingPlanes=C.clippingPlanes,R.clipIntersection=C.clipIntersection,R.displacementMap=C.displacementMap,R.displacementScale=C.displacementScale,R.displacementBias=C.displacementBias,R.wireframeLinewidth=C.wireframeLinewidth,R.linewidth=C.linewidth,E.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(E.matrixWorld),R.nearDistance=P,R.farDistance=M),R}function S(b,C,E,P,M){if(b.visible===!1)return;if(b.layers.test(C.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&M===Bc)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,b.matrixWorld);const L=e.update(b),I=b.material;if(Array.isArray(I)){const H=L.groups;for(let G=0,X=H.length;G<X;G++){const $=H[G],ne=I[$.materialIndex];if(ne&&ne.visible){const U=_(b,ne,P,E.near,E.far,M);n.renderBufferDirect(E,null,L,U,b,$)}}}else if(I.visible){const H=_(b,I,P,E.near,E.far,M);n.renderBufferDirect(E,null,L,H,b,null)}}const R=b.children;for(let L=0,I=R.length;L<I;L++)S(R[L],C,E,P,M)}}function Q5(n,e,t){const r=t.isWebGL2;function i(){let se=!1;const je=new zt;let be=null;const ze=new zt(0,0,0,0);return{setMask:function($e){be!==$e&&!se&&(n.colorMask($e,$e,$e,$e),be=$e)},setLocked:function($e){se=$e},setClear:function($e,Et,Bt,Jt,It){It===!0&&($e*=Jt,Et*=Jt,Bt*=Jt),je.set($e,Et,Bt,Jt),ze.equals(je)===!1&&(n.clearColor($e,Et,Bt,Jt),ze.copy(je))},reset:function(){se=!1,be=null,ze.set(-1,0,0,0)}}}function s(){let se=!1,je=null,be=null,ze=null;return{setTest:function($e){$e?he(2929):ie(2929)},setMask:function($e){je!==$e&&!se&&(n.depthMask($e),je=$e)},setFunc:function($e){if(be!==$e){if($e)switch($e){case dP:n.depthFunc(512);break;case hP:n.depthFunc(519);break;case pP:n.depthFunc(513);break;case uv:n.depthFunc(515);break;case mP:n.depthFunc(514);break;case gP:n.depthFunc(518);break;case vP:n.depthFunc(516);break;case yP:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);be=$e}},setLocked:function($e){se=$e},setClear:function($e){ze!==$e&&(n.clearDepth($e),ze=$e)},reset:function(){se=!1,je=null,be=null,ze=null}}}function o(){let se=!1,je=null,be=null,ze=null,$e=null,Et=null,Bt=null,Jt=null,It=null;return{setTest:function(ot){se||(ot?he(2960):ie(2960))},setMask:function(ot){je!==ot&&!se&&(n.stencilMask(ot),je=ot)},setFunc:function(ot,Kt,Yt){(be!==ot||ze!==Kt||$e!==Yt)&&(n.stencilFunc(ot,Kt,Yt),be=ot,ze=Kt,$e=Yt)},setOp:function(ot,Kt,Yt){(Et!==ot||Bt!==Kt||Jt!==Yt)&&(n.stencilOp(ot,Kt,Yt),Et=ot,Bt=Kt,Jt=Yt)},setLocked:function(ot){se=ot},setClear:function(ot){It!==ot&&(n.clearStencil(ot),It=ot)},reset:function(){se=!1,je=null,be=null,ze=null,$e=null,Et=null,Bt=null,Jt=null,It=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,f=new WeakMap;let p={},m={},g=new WeakMap,y=[],v=null,x=!1,_=null,S=null,b=null,C=null,E=null,P=null,M=null,T=!1,R=null,L=null,I=null,H=null,G=null;const X=n.getParameter(35661);let $=!1,ne=0;const U=n.getParameter(7938);U.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(U)[1]),$=ne>=1):U.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),$=ne>=2);let O=null,z={};const W=n.getParameter(3088),q=n.getParameter(2978),oe=new zt().fromArray(W),ce=new zt().fromArray(q);function me(se,je,be){const ze=new Uint8Array(4),$e=n.createTexture();n.bindTexture(se,$e),n.texParameteri(se,10241,9728),n.texParameteri(se,10240,9728);for(let Et=0;Et<be;Et++)n.texImage2D(je+Et,0,6408,1,1,0,6408,5121,ze);return $e}const re={};re[3553]=me(3553,3553,1),re[34067]=me(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),he(2929),l.setFunc(uv),Se(!1),Ue($x),he(2884),le(vr);function he(se){p[se]!==!0&&(n.enable(se),p[se]=!0)}function ie(se){p[se]!==!1&&(n.disable(se),p[se]=!1)}function k(se,je){return m[se]!==je?(n.bindFramebuffer(se,je),m[se]=je,r&&(se===36009&&(m[36160]=je),se===36160&&(m[36009]=je)),!0):!1}function V(se,je){let be=y,ze=!1;if(se)if(be=g.get(je),be===void 0&&(be=[],g.set(je,be)),se.isWebGLMultipleRenderTargets){const $e=se.texture;if(be.length!==$e.length||be[0]!==36064){for(let Et=0,Bt=$e.length;Et<Bt;Et++)be[Et]=36064+Et;be.length=$e.length,ze=!0}}else be[0]!==36064&&(be[0]=36064,ze=!0);else be[0]!==1029&&(be[0]=1029,ze=!0);ze&&(t.isWebGL2?n.drawBuffers(be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function K(se){return v!==se?(n.useProgram(se),v=se,!0):!1}const Y={[Ul]:32774,[tP]:32778,[nP]:32779};if(r)Y[Yx]=32775,Y[Qx]=32776;else{const se=e.get("EXT_blend_minmax");se!==null&&(Y[Yx]=se.MIN_EXT,Y[Qx]=se.MAX_EXT)}const ee={[rP]:0,[iP]:1,[sP]:768,[uS]:770,[fP]:776,[uP]:774,[aP]:772,[oP]:769,[cS]:771,[cP]:775,[lP]:773};function le(se,je,be,ze,$e,Et,Bt,Jt){if(se===vr){x===!0&&(ie(3042),x=!1);return}if(x===!1&&(he(3042),x=!0),se!==eP){if(se!==_||Jt!==T){if((S!==Ul||E!==Ul)&&(n.blendEquation(32774),S=Ul,E=Ul),Jt)switch(se){case ql:n.blendFuncSeparate(1,771,1,771);break;case Jx:n.blendFunc(1,1);break;case Kx:n.blendFuncSeparate(0,769,0,1);break;case Xx:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case ql:n.blendFuncSeparate(770,771,1,771);break;case Jx:n.blendFunc(770,1);break;case Kx:n.blendFuncSeparate(0,769,0,1);break;case Xx:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}b=null,C=null,P=null,M=null,_=se,T=Jt}return}$e=$e||je,Et=Et||be,Bt=Bt||ze,(je!==S||$e!==E)&&(n.blendEquationSeparate(Y[je],Y[$e]),S=je,E=$e),(be!==b||ze!==C||Et!==P||Bt!==M)&&(n.blendFuncSeparate(ee[be],ee[ze],ee[Et],ee[Bt]),b=be,C=ze,P=Et,M=Bt),_=se,T=null}function we(se,je){se.side===Dr?ie(2884):he(2884);let be=se.side===ar;je&&(be=!be),Se(be),se.blending===ql&&se.transparent===!1?le(vr):le(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.premultipliedAlpha),l.setFunc(se.depthFunc),l.setTest(se.depthTest),l.setMask(se.depthWrite),a.setMask(se.colorWrite);const ze=se.stencilWrite;u.setTest(ze),ze&&(u.setMask(se.stencilWriteMask),u.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),u.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),Re(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?he(32926):ie(32926)}function Se(se){R!==se&&(se?n.frontFace(2304):n.frontFace(2305),R=se)}function Ue(se){se!==qR?(he(2884),se!==L&&(se===$x?n.cullFace(1029):se===ZR?n.cullFace(1028):n.cullFace(1032))):ie(2884),L=se}function xe(se){se!==I&&($&&n.lineWidth(se),I=se)}function Re(se,je,be){se?(he(32823),(H!==je||G!==be)&&(n.polygonOffset(je,be),H=je,G=be)):ie(32823)}function Ie(se){se?he(3089):ie(3089)}function ye(se){se===void 0&&(se=33984+X-1),O!==se&&(n.activeTexture(se),O=se)}function j(se,je){O===null&&ye();let be=z[O];be===void 0&&(be={type:void 0,texture:void 0},z[O]=be),(be.type!==se||be.texture!==je)&&(n.bindTexture(se,je||re[se]),be.type=se,be.texture=je)}function F(){const se=z[O];se!==void 0&&se.type!==void 0&&(n.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function te(){try{n.compressedTexImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function pe(){try{n.texSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ee(){try{n.texSubImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function De(){try{n.texStorage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function fe(){try{n.texStorage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function We(){try{n.texImage2D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Le(){try{n.texImage3D.apply(n,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function He(se){oe.equals(se)===!1&&(n.scissor(se.x,se.y,se.z,se.w),oe.copy(se))}function ke(se){ce.equals(se)===!1&&(n.viewport(se.x,se.y,se.z,se.w),ce.copy(se))}function Fe(se,je){let be=f.get(je);be===void 0&&(be=new WeakMap,f.set(je,be));let ze=be.get(se);ze===void 0&&(ze=n.getUniformBlockIndex(je,se.name),be.set(se,ze))}function Oe(se,je){const ze=f.get(je).get(se);c.get(se)!==ze&&(n.uniformBlockBinding(je,ze,se.__bindingPointIndex),c.set(se,ze))}function tt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},O=null,z={},m={},g=new WeakMap,y=[],v=null,x=!1,_=null,S=null,b=null,C=null,E=null,P=null,M=null,T=!1,R=null,L=null,I=null,H=null,G=null,oe.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:he,disable:ie,bindFramebuffer:k,drawBuffers:V,useProgram:K,setBlending:le,setMaterial:we,setFlipSided:Se,setCullFace:Ue,setLineWidth:xe,setPolygonOffset:Re,setScissorTest:Ie,activeTexture:ye,bindTexture:j,unbindTexture:F,compressedTexImage2D:te,texImage2D:We,texImage3D:Le,updateUBOMapping:Fe,uniformBlockBinding:Oe,texStorage2D:De,texStorage3D:fe,texSubImage2D:pe,texSubImage3D:Ee,compressedTexSubImage2D:Be,scissor:He,viewport:ke,reset:tt}}function q5(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let y;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(j,F){return x?new OffscreenCanvas(j,F):wh("canvas")}function S(j,F,te,pe){let Ee=1;if((j.width>pe||j.height>pe)&&(Ee=pe/Math.max(j.width,j.height)),Ee<1||F===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const Be=F?fv:Math.floor,De=Be(Ee*j.width),fe=Be(Ee*j.height);y===void 0&&(y=_(De,fe));const We=te?_(De,fe):y;return We.width=De,We.height=fe,We.getContext("2d").drawImage(j,0,0,De,fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+De+"x"+fe+")."),We}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function b(j){return __(j.width)&&__(j.height)}function C(j){return a?!1:j.wrapS!==Qn||j.wrapT!==Qn||j.minFilter!==on&&j.minFilter!==Ht}function E(j,F){return j.generateMipmaps&&F&&j.minFilter!==on&&j.minFilter!==Ht}function P(j){n.generateMipmap(j)}function M(j,F,te,pe,Ee=!1){if(a===!1)return F;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Be=F;return F===6403&&(te===5126&&(Be=33326),te===5131&&(Be=33325),te===5121&&(Be=33321)),F===33319&&(te===5126&&(Be=33328),te===5131&&(Be=33327),te===5121&&(Be=33323)),F===6408&&(te===5126&&(Be=34836),te===5131&&(Be=34842),te===5121&&(Be=pe===gt&&Ee===!1?35907:32856),te===32819&&(Be=32854),te===32820&&(Be=32855)),(Be===33325||Be===33326||Be===33327||Be===33328||Be===34842||Be===34836)&&e.get("EXT_color_buffer_float"),Be}function T(j,F,te){return E(j,te)===!0||j.isFramebufferTexture&&j.minFilter!==on&&j.minFilter!==Ht?Math.log2(Math.max(F.width,F.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?F.mipmaps.length:1}function R(j){return j===on||j===gh||j===vh?9728:9729}function L(j){const F=j.target;F.removeEventListener("dispose",L),H(F),F.isVideoTexture&&g.delete(F)}function I(j){const F=j.target;F.removeEventListener("dispose",I),X(F)}function H(j){const F=r.get(j);if(F.__webglInit===void 0)return;const te=j.source,pe=v.get(te);if(pe){const Ee=pe[F.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&G(j),Object.keys(pe).length===0&&v.delete(te)}r.remove(j)}function G(j){const F=r.get(j);n.deleteTexture(F.__webglTexture);const te=j.source,pe=v.get(te);delete pe[F.__cacheKey],o.memory.textures--}function X(j){const F=j.texture,te=r.get(j),pe=r.get(F);if(pe.__webglTexture!==void 0&&(n.deleteTexture(pe.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++)n.deleteFramebuffer(te.__webglFramebuffer[Ee]),te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer[Ee]);else{if(n.deleteFramebuffer(te.__webglFramebuffer),te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&n.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let Ee=0;Ee<te.__webglColorRenderbuffer.length;Ee++)te.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(te.__webglColorRenderbuffer[Ee]);te.__webglDepthRenderbuffer&&n.deleteRenderbuffer(te.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Ee=0,Be=F.length;Ee<Be;Ee++){const De=r.get(F[Ee]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),r.remove(F[Ee])}r.remove(F),r.remove(j)}let $=0;function ne(){$=0}function U(){const j=$;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),$+=1,j}function O(j){const F=[];return F.push(j.wrapS),F.push(j.wrapT),F.push(j.magFilter),F.push(j.minFilter),F.push(j.anisotropy),F.push(j.internalFormat),F.push(j.format),F.push(j.type),F.push(j.generateMipmaps),F.push(j.premultiplyAlpha),F.push(j.flipY),F.push(j.unpackAlignment),F.push(j.encoding),F.join()}function z(j,F){const te=r.get(j);if(j.isVideoTexture&&Ie(j),j.isRenderTargetTexture===!1&&j.version>0&&te.__version!==j.version){const pe=j.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(te,j,F);return}}t.activeTexture(33984+F),t.bindTexture(3553,te.__webglTexture)}function W(j,F){const te=r.get(j);if(j.version>0&&te.__version!==j.version){ie(te,j,F);return}t.activeTexture(33984+F),t.bindTexture(35866,te.__webglTexture)}function q(j,F){const te=r.get(j);if(j.version>0&&te.__version!==j.version){ie(te,j,F);return}t.activeTexture(33984+F),t.bindTexture(32879,te.__webglTexture)}function oe(j,F){const te=r.get(j);if(j.version>0&&te.__version!==j.version){k(te,j,F);return}t.activeTexture(33984+F),t.bindTexture(34067,te.__webglTexture)}const ce={[Xa]:10497,[Qn]:33071,[qc]:33648},me={[on]:9728,[gh]:9984,[vh]:9986,[Ht]:9729,[Hv]:9985,[ro]:9987};function re(j,F,te){if(te?(n.texParameteri(j,10242,ce[F.wrapS]),n.texParameteri(j,10243,ce[F.wrapT]),(j===32879||j===35866)&&n.texParameteri(j,32882,ce[F.wrapR]),n.texParameteri(j,10240,me[F.magFilter]),n.texParameteri(j,10241,me[F.minFilter])):(n.texParameteri(j,10242,33071),n.texParameteri(j,10243,33071),(j===32879||j===35866)&&n.texParameteri(j,32882,33071),(F.wrapS!==Qn||F.wrapT!==Qn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,10240,R(F.magFilter)),n.texParameteri(j,10241,R(F.minFilter)),F.minFilter!==on&&F.minFilter!==Ht&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const pe=e.get("EXT_texture_filter_anisotropic");if(F.type===mr&&e.has("OES_texture_float_linear")===!1||a===!1&&F.type===fu&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(n.texParameterf(j,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function he(j,F){let te=!1;j.__webglInit===void 0&&(j.__webglInit=!0,F.addEventListener("dispose",L));const pe=F.source;let Ee=v.get(pe);Ee===void 0&&(Ee={},v.set(pe,Ee));const Be=O(F);if(Be!==j.__cacheKey){Ee[Be]===void 0&&(Ee[Be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,te=!0),Ee[Be].usedTimes++;const De=Ee[j.__cacheKey];De!==void 0&&(Ee[j.__cacheKey].usedTimes--,De.usedTimes===0&&G(F)),j.__cacheKey=Be,j.__webglTexture=Ee[Be].texture}return te}function ie(j,F,te){let pe=3553;F.isDataArrayTexture&&(pe=35866),F.isData3DTexture&&(pe=32879);const Ee=he(j,F),Be=F.source;if(t.activeTexture(33984+te),t.bindTexture(pe,j.__webglTexture),Be.version!==Be.__currentVersion||Ee===!0){n.pixelStorei(37440,F.flipY),n.pixelStorei(37441,F.premultiplyAlpha),n.pixelStorei(3317,F.unpackAlignment),n.pixelStorei(37443,0);const De=C(F)&&b(F.image)===!1;let fe=S(F.image,De,!1,c);fe=ye(F,fe);const We=b(fe)||a,Le=s.convert(F.format,F.encoding);let He=s.convert(F.type),ke=M(F.internalFormat,Le,He,F.encoding,F.isVideoTexture);re(pe,F,We);let Fe;const Oe=F.mipmaps,tt=a&&F.isVideoTexture!==!0,se=Be.__currentVersion===void 0||Ee===!0,je=T(F,fe,We);if(F.isDepthTexture)ke=6402,a?F.type===mr?ke=36012:F.type===Do?ke=33190:F.type===Ga?ke=35056:ke=33189:F.type===mr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===Ha&&ke===6402&&F.type!==dS&&F.type!==Do&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=Do,He=s.convert(F.type)),F.format===Ya&&ke===6402&&(ke=34041,F.type!==Ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=Ga,He=s.convert(F.type))),se&&(tt?t.texStorage2D(3553,1,ke,fe.width,fe.height):t.texImage2D(3553,0,ke,fe.width,fe.height,0,Le,He,null));else if(F.isDataTexture)if(Oe.length>0&&We){tt&&se&&t.texStorage2D(3553,je,ke,Oe[0].width,Oe[0].height);for(let be=0,ze=Oe.length;be<ze;be++)Fe=Oe[be],tt?t.texSubImage2D(3553,be,0,0,Fe.width,Fe.height,Le,He,Fe.data):t.texImage2D(3553,be,ke,Fe.width,Fe.height,0,Le,He,Fe.data);F.generateMipmaps=!1}else tt?(se&&t.texStorage2D(3553,je,ke,fe.width,fe.height),t.texSubImage2D(3553,0,0,0,fe.width,fe.height,Le,He,fe.data)):t.texImage2D(3553,0,ke,fe.width,fe.height,0,Le,He,fe.data);else if(F.isCompressedTexture){tt&&se&&t.texStorage2D(3553,je,ke,Oe[0].width,Oe[0].height);for(let be=0,ze=Oe.length;be<ze;be++)Fe=Oe[be],F.format!==Qr?Le!==null?tt?t.compressedTexSubImage2D(3553,be,0,0,Fe.width,Fe.height,Le,Fe.data):t.compressedTexImage2D(3553,be,ke,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?t.texSubImage2D(3553,be,0,0,Fe.width,Fe.height,Le,He,Fe.data):t.texImage2D(3553,be,ke,Fe.width,Fe.height,0,Le,He,Fe.data)}else if(F.isDataArrayTexture)tt?(se&&t.texStorage3D(35866,je,ke,fe.width,fe.height,fe.depth),t.texSubImage3D(35866,0,0,0,0,fe.width,fe.height,fe.depth,Le,He,fe.data)):t.texImage3D(35866,0,ke,fe.width,fe.height,fe.depth,0,Le,He,fe.data);else if(F.isData3DTexture)tt?(se&&t.texStorage3D(32879,je,ke,fe.width,fe.height,fe.depth),t.texSubImage3D(32879,0,0,0,0,fe.width,fe.height,fe.depth,Le,He,fe.data)):t.texImage3D(32879,0,ke,fe.width,fe.height,fe.depth,0,Le,He,fe.data);else if(F.isFramebufferTexture){if(se)if(tt)t.texStorage2D(3553,je,ke,fe.width,fe.height);else{let be=fe.width,ze=fe.height;for(let $e=0;$e<je;$e++)t.texImage2D(3553,$e,ke,be,ze,0,Le,He,null),be>>=1,ze>>=1}}else if(Oe.length>0&&We){tt&&se&&t.texStorage2D(3553,je,ke,Oe[0].width,Oe[0].height);for(let be=0,ze=Oe.length;be<ze;be++)Fe=Oe[be],tt?t.texSubImage2D(3553,be,0,0,Le,He,Fe):t.texImage2D(3553,be,ke,Le,He,Fe);F.generateMipmaps=!1}else tt?(se&&t.texStorage2D(3553,je,ke,fe.width,fe.height),t.texSubImage2D(3553,0,0,0,Le,He,fe)):t.texImage2D(3553,0,ke,Le,He,fe);E(F,We)&&P(pe),Be.__currentVersion=Be.version,F.onUpdate&&F.onUpdate(F)}j.__version=F.version}function k(j,F,te){if(F.image.length!==6)return;const pe=he(j,F),Ee=F.source;if(t.activeTexture(33984+te),t.bindTexture(34067,j.__webglTexture),Ee.version!==Ee.__currentVersion||pe===!0){n.pixelStorei(37440,F.flipY),n.pixelStorei(37441,F.premultiplyAlpha),n.pixelStorei(3317,F.unpackAlignment),n.pixelStorei(37443,0);const Be=F.isCompressedTexture||F.image[0].isCompressedTexture,De=F.image[0]&&F.image[0].isDataTexture,fe=[];for(let be=0;be<6;be++)!Be&&!De?fe[be]=S(F.image[be],!1,!0,u):fe[be]=De?F.image[be].image:F.image[be],fe[be]=ye(F,fe[be]);const We=fe[0],Le=b(We)||a,He=s.convert(F.format,F.encoding),ke=s.convert(F.type),Fe=M(F.internalFormat,He,ke,F.encoding),Oe=a&&F.isVideoTexture!==!0,tt=Ee.__currentVersion===void 0||pe===!0;let se=T(F,We,Le);re(34067,F,Le);let je;if(Be){Oe&&tt&&t.texStorage2D(34067,se,Fe,We.width,We.height);for(let be=0;be<6;be++){je=fe[be].mipmaps;for(let ze=0;ze<je.length;ze++){const $e=je[ze];F.format!==Qr?He!==null?Oe?t.compressedTexSubImage2D(34069+be,ze,0,0,$e.width,$e.height,He,$e.data):t.compressedTexImage2D(34069+be,ze,Fe,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Oe?t.texSubImage2D(34069+be,ze,0,0,$e.width,$e.height,He,ke,$e.data):t.texImage2D(34069+be,ze,Fe,$e.width,$e.height,0,He,ke,$e.data)}}}else{je=F.mipmaps,Oe&&tt&&(je.length>0&&se++,t.texStorage2D(34067,se,Fe,fe[0].width,fe[0].height));for(let be=0;be<6;be++)if(De){Oe?t.texSubImage2D(34069+be,0,0,0,fe[be].width,fe[be].height,He,ke,fe[be].data):t.texImage2D(34069+be,0,Fe,fe[be].width,fe[be].height,0,He,ke,fe[be].data);for(let ze=0;ze<je.length;ze++){const Et=je[ze].image[be].image;Oe?t.texSubImage2D(34069+be,ze+1,0,0,Et.width,Et.height,He,ke,Et.data):t.texImage2D(34069+be,ze+1,Fe,Et.width,Et.height,0,He,ke,Et.data)}}else{Oe?t.texSubImage2D(34069+be,0,0,0,He,ke,fe[be]):t.texImage2D(34069+be,0,Fe,He,ke,fe[be]);for(let ze=0;ze<je.length;ze++){const $e=je[ze];Oe?t.texSubImage2D(34069+be,ze+1,0,0,He,ke,$e.image[be]):t.texImage2D(34069+be,ze+1,Fe,He,ke,$e.image[be])}}}E(F,Le)&&P(34067),Ee.__currentVersion=Ee.version,F.onUpdate&&F.onUpdate(F)}j.__version=F.version}function V(j,F,te,pe,Ee){const Be=s.convert(te.format,te.encoding),De=s.convert(te.type),fe=M(te.internalFormat,Be,De,te.encoding);r.get(F).__hasExternalTextures||(Ee===32879||Ee===35866?t.texImage3D(Ee,0,fe,F.width,F.height,F.depth,0,Be,De,null):t.texImage2D(Ee,0,fe,F.width,F.height,0,Be,De,null)),t.bindFramebuffer(36160,j),Re(F)?p.framebufferTexture2DMultisampleEXT(36160,pe,Ee,r.get(te).__webglTexture,0,xe(F)):n.framebufferTexture2D(36160,pe,Ee,r.get(te).__webglTexture,0),t.bindFramebuffer(36160,null)}function K(j,F,te){if(n.bindRenderbuffer(36161,j),F.depthBuffer&&!F.stencilBuffer){let pe=33189;if(te||Re(F)){const Ee=F.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===mr?pe=36012:Ee.type===Do&&(pe=33190));const Be=xe(F);Re(F)?p.renderbufferStorageMultisampleEXT(36161,Be,pe,F.width,F.height):n.renderbufferStorageMultisample(36161,Be,pe,F.width,F.height)}else n.renderbufferStorage(36161,pe,F.width,F.height);n.framebufferRenderbuffer(36160,36096,36161,j)}else if(F.depthBuffer&&F.stencilBuffer){const pe=xe(F);te&&Re(F)===!1?n.renderbufferStorageMultisample(36161,pe,35056,F.width,F.height):Re(F)?p.renderbufferStorageMultisampleEXT(36161,pe,35056,F.width,F.height):n.renderbufferStorage(36161,34041,F.width,F.height),n.framebufferRenderbuffer(36160,33306,36161,j)}else{const pe=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Ee=0;Ee<pe.length;Ee++){const Be=pe[Ee],De=s.convert(Be.format,Be.encoding),fe=s.convert(Be.type),We=M(Be.internalFormat,De,fe,Be.encoding),Le=xe(F);te&&Re(F)===!1?n.renderbufferStorageMultisample(36161,Le,We,F.width,F.height):Re(F)?p.renderbufferStorageMultisampleEXT(36161,Le,We,F.width,F.height):n.renderbufferStorage(36161,We,F.width,F.height)}}n.bindRenderbuffer(36161,null)}function Y(j,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),z(F.depthTexture,0);const pe=r.get(F.depthTexture).__webglTexture,Ee=xe(F);if(F.depthTexture.format===Ha)Re(F)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,pe,0,Ee):n.framebufferTexture2D(36160,36096,3553,pe,0);else if(F.depthTexture.format===Ya)Re(F)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,pe,0,Ee):n.framebufferTexture2D(36160,33306,3553,pe,0);else throw new Error("Unknown depthTexture format")}function ee(j){const F=r.get(j),te=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!F.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");Y(F.__webglFramebuffer,j)}else if(te){F.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)t.bindFramebuffer(36160,F.__webglFramebuffer[pe]),F.__webglDepthbuffer[pe]=n.createRenderbuffer(),K(F.__webglDepthbuffer[pe],j,!1)}else t.bindFramebuffer(36160,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),K(F.__webglDepthbuffer,j,!1);t.bindFramebuffer(36160,null)}function le(j,F,te){const pe=r.get(j);F!==void 0&&V(pe.__webglFramebuffer,j,j.texture,36064,3553),te!==void 0&&ee(j)}function we(j){const F=j.texture,te=r.get(j),pe=r.get(F);j.addEventListener("dispose",I),j.isWebGLMultipleRenderTargets!==!0&&(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=F.version,o.memory.textures++);const Ee=j.isWebGLCubeRenderTarget===!0,Be=j.isWebGLMultipleRenderTargets===!0,De=b(j)||a;if(Ee){te.__webglFramebuffer=[];for(let fe=0;fe<6;fe++)te.__webglFramebuffer[fe]=n.createFramebuffer()}else{if(te.__webglFramebuffer=n.createFramebuffer(),Be)if(i.drawBuffers){const fe=j.texture;for(let We=0,Le=fe.length;We<Le;We++){const He=r.get(fe[We]);He.__webglTexture===void 0&&(He.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&Re(j)===!1){const fe=Be?F:[F];te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,te.__webglMultisampledFramebuffer);for(let We=0;We<fe.length;We++){const Le=fe[We];te.__webglColorRenderbuffer[We]=n.createRenderbuffer(),n.bindRenderbuffer(36161,te.__webglColorRenderbuffer[We]);const He=s.convert(Le.format,Le.encoding),ke=s.convert(Le.type),Fe=M(Le.internalFormat,He,ke,Le.encoding),Oe=xe(j);n.renderbufferStorageMultisample(36161,Oe,Fe,j.width,j.height),n.framebufferRenderbuffer(36160,36064+We,36161,te.__webglColorRenderbuffer[We])}n.bindRenderbuffer(36161,null),j.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),K(te.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}}if(Ee){t.bindTexture(34067,pe.__webglTexture),re(34067,F,De);for(let fe=0;fe<6;fe++)V(te.__webglFramebuffer[fe],j,F,36064,34069+fe);E(F,De)&&P(34067),t.unbindTexture()}else if(Be){const fe=j.texture;for(let We=0,Le=fe.length;We<Le;We++){const He=fe[We],ke=r.get(He);t.bindTexture(3553,ke.__webglTexture),re(3553,He,De),V(te.__webglFramebuffer,j,He,36064+We,3553),E(He,De)&&P(3553)}t.unbindTexture()}else{let fe=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?fe=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(fe,pe.__webglTexture),re(fe,F,De),V(te.__webglFramebuffer,j,F,36064,fe),E(F,De)&&P(fe),t.unbindTexture()}j.depthBuffer&&ee(j)}function Se(j){const F=b(j)||a,te=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let pe=0,Ee=te.length;pe<Ee;pe++){const Be=te[pe];if(E(Be,F)){const De=j.isWebGLCubeRenderTarget?34067:3553,fe=r.get(Be).__webglTexture;t.bindTexture(De,fe),P(De),t.unbindTexture()}}}function Ue(j){if(a&&j.samples>0&&Re(j)===!1){const F=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],te=j.width,pe=j.height;let Ee=16384;const Be=[],De=j.stencilBuffer?33306:36096,fe=r.get(j),We=j.isWebGLMultipleRenderTargets===!0;if(We)for(let Le=0;Le<F.length;Le++)t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Le,36161,null),t.bindFramebuffer(36160,fe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Le,3553,null,0);t.bindFramebuffer(36008,fe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,fe.__webglFramebuffer);for(let Le=0;Le<F.length;Le++){Be.push(36064+Le),j.depthBuffer&&Be.push(De);const He=fe.__ignoreDepthValues!==void 0?fe.__ignoreDepthValues:!1;if(He===!1&&(j.depthBuffer&&(Ee|=256),j.stencilBuffer&&(Ee|=1024)),We&&n.framebufferRenderbuffer(36008,36064,36161,fe.__webglColorRenderbuffer[Le]),He===!0&&(n.invalidateFramebuffer(36008,[De]),n.invalidateFramebuffer(36009,[De])),We){const ke=r.get(F[Le]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ke,0)}n.blitFramebuffer(0,0,te,pe,0,0,te,pe,Ee,9728),m&&n.invalidateFramebuffer(36008,Be)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),We)for(let Le=0;Le<F.length;Le++){t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Le,36161,fe.__webglColorRenderbuffer[Le]);const He=r.get(F[Le]).__webglTexture;t.bindFramebuffer(36160,fe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Le,3553,He,0)}t.bindFramebuffer(36009,fe.__webglMultisampledFramebuffer)}}function xe(j){return Math.min(f,j.samples)}function Re(j){const F=r.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ie(j){const F=o.render.frame;g.get(j)!==F&&(g.set(j,F),j.update())}function ye(j,F){const te=j.encoding,pe=j.format,Ee=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===cv||te!==Fi&&(te===gt?a===!1?e.has("EXT_sRGB")===!0&&pe===Qr?(j.format=cv,j.minFilter=Ht,j.generateMipmaps=!1):F=vS.sRGBToLinear(F):(pe!==Qr||Ee!==xr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",te)),F}this.allocateTextureUnit=U,this.resetTextureUnits=ne,this.setTexture2D=z,this.setTexture2DArray=W,this.setTexture3D=q,this.setTextureCube=oe,this.rebindTextures=le,this.setupRenderTarget=we,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=V,this.useMultisampledRTT=Re}function nB(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===xr)return 5121;if(s===TP)return 32819;if(s===RP)return 32820;if(s===AP)return 5120;if(s===EP)return 5122;if(s===dS)return 5123;if(s===CP)return 5124;if(s===Do)return 5125;if(s===mr)return 5126;if(s===fu)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===PP)return 6406;if(s===Qr)return 6408;if(s===DP)return 6409;if(s===IP)return 6410;if(s===Ha)return 6402;if(s===Ya)return 34041;if(s===LP)return 6403;if(s===BP)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===cv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===FP)return 36244;if(s===kP)return 33319;if(s===OP)return 33320;if(s===UP)return 36249;if(s===Tg||s===Rg||s===Pg||s===Bg)if(o===gt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Tg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Rg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Pg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Bg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Tg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Rg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Pg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Bg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===qx||s===Zx||s===e_||s===t_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===qx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Zx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===e_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===t_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===NP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===n_||s===r_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===n_)return o===gt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===r_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===i_||s===s_||s===o_||s===a_||s===l_||s===u_||s===c_||s===f_||s===d_||s===h_||s===p_||s===m_||s===g_||s===v_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===i_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===s_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===o_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===a_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===l_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===u_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===c_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===f_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===d_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===h_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===p_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===m_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===g_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===v_)return o===gt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===y_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===y_)return o===gt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Ga?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class rB extends Vn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Lo extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Z5={type:"move"};class s1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const y of e.hand.values()){const v=t.getJointPose(y,r);if(u.joints[y.jointName]===void 0){const _=new Lo;_.matrixAutoUpdate=!1,_.visible=!1,u.joints[y.jointName]=_,u.add(_)}const x=u.joints[y.jointName];v!==null&&(x.matrix.fromArray(v.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=v.radius),x.visible=v!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],p=c.position.distanceTo(f.position),m=.02,g=.005;u.inputState.pinching&&p>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Z5)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}}class SS extends un{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Ha,c!==Ha&&c!==Ya)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Ha&&(r=Do),r===void 0&&c===Ya&&(r=Ga),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:on,this.minFilter=l!==void 0?l:on,this.flipY=!1,this.generateMipmaps=!1}}class eG extends fs{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,u=null,c=null,f=null,p=null,m=null;const g=t.getContextAttributes();let y=null,v=null;const x=[],_=[],S=new Vn;S.layers.enable(1),S.viewport=new zt;const b=new Vn;b.layers.enable(2),b.viewport=new zt;const C=[S,b],E=new rB;E.layers.enable(1),E.layers.enable(2);let P=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let z=x[O];return z===void 0&&(z=new s1,x[O]=z),z.getTargetRaySpace()},this.getControllerGrip=function(O){let z=x[O];return z===void 0&&(z=new s1,x[O]=z),z.getGripSpace()},this.getHand=function(O){let z=x[O];return z===void 0&&(z=new s1,x[O]=z),z.getHandSpace()};function T(O){const z=_.indexOf(O.inputSource);if(z===-1)return;const W=x[z];W!==void 0&&W.dispatchEvent({type:O.type,data:O.inputSource})}function R(){i.removeEventListener("select",T),i.removeEventListener("selectstart",T),i.removeEventListener("selectend",T),i.removeEventListener("squeeze",T),i.removeEventListener("squeezestart",T),i.removeEventListener("squeezeend",T),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",L);for(let O=0;O<x.length;O++){const z=_[O];z!==null&&(_[O]=null,x[O].disconnect(z))}P=null,M=null,e.setRenderTarget(y),p=null,f=null,c=null,i=null,v=null,U.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(O){l=O},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return c},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(O){if(i=O,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",R),i.addEventListener("inputsourceschange",L),g.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const z={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,z),i.updateRenderState({baseLayer:p}),v=new dn(p.framebufferWidth,p.framebufferHeight,{format:Qr,type:xr,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let z=null,W=null,q=null;g.depth&&(q=g.stencil?35056:33190,z=g.stencil?Ya:Ha,W=g.stencil?Ga:Do);const oe={colorFormat:32856,depthFormat:q,scaleFactor:s};c=new XRWebGLBinding(i,t),f=c.createProjectionLayer(oe),i.updateRenderState({layers:[f]}),v=new dn(f.textureWidth,f.textureHeight,{format:Qr,type:xr,depthTexture:new SS(f.textureWidth,f.textureHeight,W,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const ce=e.properties.get(v);ce.__ignoreDepthValues=f.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await i.requestReferenceSpace(a),U.setContext(i),U.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function L(O){for(let z=0;z<O.removed.length;z++){const W=O.removed[z],q=_.indexOf(W);q>=0&&(_[q]=null,x[q].dispatchEvent({type:"disconnected",data:W}))}for(let z=0;z<O.added.length;z++){const W=O.added[z];let q=_.indexOf(W);if(q===-1){for(let ce=0;ce<x.length;ce++)if(ce>=_.length){_.push(W),q=ce;break}else if(_[ce]===null){_[ce]=W,q=ce;break}if(q===-1)break}const oe=x[q];oe&&oe.dispatchEvent({type:"connected",data:W})}}const I=new J,H=new J;function G(O,z,W){I.setFromMatrixPosition(z.matrixWorld),H.setFromMatrixPosition(W.matrixWorld);const q=I.distanceTo(H),oe=z.projectionMatrix.elements,ce=W.projectionMatrix.elements,me=oe[14]/(oe[10]-1),re=oe[14]/(oe[10]+1),he=(oe[9]+1)/oe[5],ie=(oe[9]-1)/oe[5],k=(oe[8]-1)/oe[0],V=(ce[8]+1)/ce[0],K=me*k,Y=me*V,ee=q/(-k+V),le=ee*-k;z.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(le),O.translateZ(ee),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const we=me+ee,Se=re+ee,Ue=K-le,xe=Y+(q-le),Re=he*re/Se*we,Ie=ie*re/Se*we;O.projectionMatrix.makePerspective(Ue,xe,Re,Ie,we,Se)}function X(O,z){z===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(z.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(i===null)return;E.near=b.near=S.near=O.near,E.far=b.far=S.far=O.far,(P!==E.near||M!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),P=E.near,M=E.far);const z=O.parent,W=E.cameras;X(E,z);for(let oe=0;oe<W.length;oe++)X(W[oe],z);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),O.matrix.copy(E.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale);const q=O.children;for(let oe=0,ce=q.length;oe<ce;oe++)q[oe].updateMatrixWorld(!0);W.length===2?G(E,S,b):E.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(O){f!==null&&(f.fixedFoveation=O),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=O)};let $=null;function ne(O,z){if(u=z.getViewerPose(l||o),m=z,u!==null){const W=u.views;p!==null&&(e.setRenderTargetFramebuffer(v,p.framebuffer),e.setRenderTarget(v));let q=!1;W.length!==E.cameras.length&&(E.cameras.length=0,q=!0);for(let oe=0;oe<W.length;oe++){const ce=W[oe];let me=null;if(p!==null)me=p.getViewport(ce);else{const he=c.getViewSubImage(f,ce);me=he.viewport,oe===0&&(e.setRenderTargetTextures(v,he.colorTexture,f.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(v))}let re=C[oe];re===void 0&&(re=new Vn,re.layers.enable(oe),re.viewport=new zt,C[oe]=re),re.matrix.fromArray(ce.transform.matrix),re.projectionMatrix.fromArray(ce.projectionMatrix),re.viewport.set(me.x,me.y,me.width,me.height),oe===0&&E.matrix.copy(re.matrix),q===!0&&E.cameras.push(re)}}for(let W=0;W<x.length;W++){const q=_[W],oe=x[W];q!==null&&oe!==void 0&&oe.update(q,z,l||o)}$&&$(O,z),m=null}const U=new QP;U.setAnimationLoop(ne),this.setAnimationLoop=function(O){$=O},this.dispose=function(){}}}function tG(n,e){function t(y,v){y.fogColor.value.copy(v.color),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)}function r(y,v,x,_,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?i(y,v):v.isMeshToonMaterial?(i(y,v),c(y,v)):v.isMeshPhongMaterial?(i(y,v),u(y,v)):v.isMeshStandardMaterial?(i(y,v),f(y,v),v.isMeshPhysicalMaterial&&p(y,v,S)):v.isMeshMatcapMaterial?(i(y,v),m(y,v)):v.isMeshDepthMaterial?i(y,v):v.isMeshDistanceMaterial?(i(y,v),g(y,v)):v.isMeshNormalMaterial?i(y,v):v.isLineBasicMaterial?(s(y,v),v.isLineDashedMaterial&&o(y,v)):v.isPointsMaterial?a(y,v,x,_):v.isSpriteMaterial?l(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function i(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.bumpMap&&(y.bumpMap.value=v.bumpMap,y.bumpScale.value=v.bumpScale,v.side===ar&&(y.bumpScale.value*=-1)),v.displacementMap&&(y.displacementMap.value=v.displacementMap,y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap),v.normalMap&&(y.normalMap.value=v.normalMap,y.normalScale.value.copy(v.normalScale),v.side===ar&&y.normalScale.value.negate()),v.specularMap&&(y.specularMap.value=v.specularMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const x=e.get(v).envMap;if(x&&(y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap){y.lightMap.value=v.lightMap;const b=n.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=v.lightMapIntensity*b}v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity);let _;v.map?_=v.map:v.specularMap?_=v.specularMap:v.displacementMap?_=v.displacementMap:v.normalMap?_=v.normalMap:v.bumpMap?_=v.bumpMap:v.roughnessMap?_=v.roughnessMap:v.metalnessMap?_=v.metalnessMap:v.alphaMap?_=v.alphaMap:v.emissiveMap?_=v.emissiveMap:v.clearcoatMap?_=v.clearcoatMap:v.clearcoatNormalMap?_=v.clearcoatNormalMap:v.clearcoatRoughnessMap?_=v.clearcoatRoughnessMap:v.iridescenceMap?_=v.iridescenceMap:v.iridescenceThicknessMap?_=v.iridescenceThicknessMap:v.specularIntensityMap?_=v.specularIntensityMap:v.specularColorMap?_=v.specularColorMap:v.transmissionMap?_=v.transmissionMap:v.thicknessMap?_=v.thicknessMap:v.sheenColorMap?_=v.sheenColorMap:v.sheenRoughnessMap&&(_=v.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix));let S;v.aoMap?S=v.aoMap:v.lightMap&&(S=v.lightMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uv2Transform.value.copy(S.matrix))}function s(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity}function o(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}function a(y,v,x,_){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*x,y.scale.value=_*.5,v.map&&(y.map.value=v.map),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);let S;v.map?S=v.map:v.alphaMap&&(S=v.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uvTransform.value.copy(S.matrix))}function l(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);let x;v.map?x=v.map:v.alphaMap&&(x=v.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix))}function u(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}function c(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}function f(y,v){y.roughness.value=v.roughness,y.metalness.value=v.metalness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(y.envMapIntensity.value=v.envMapIntensity)}function p(y,v,x){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),y.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===ar&&y.clearcoatNormalScale.value.negate())),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap)}function m(y,v){v.matcap&&(y.matcap.value=v.matcap)}function g(y,v){y.referencePosition.value.copy(v.referencePosition),y.nearDistance.value=v.nearDistance,y.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function nG(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(_,S){const b=S.program;r.uniformBlockBinding(_,b)}function u(_,S){let b=i[_.id];b===void 0&&(g(_),b=c(_),i[_.id]=b,_.addEventListener("dispose",v));const C=S.program;r.updateUBOMapping(_,C);const E=e.render.frame;s[_.id]!==E&&(p(_),s[_.id]=E)}function c(_){const S=f();_.__bindingPointIndex=S;const b=n.createBuffer(),C=_.__size,E=_.usage;return n.bindBuffer(35345,b),n.bufferData(35345,C,E),n.bindBuffer(35345,null),n.bindBufferBase(35345,S,b),b}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const S=i[_.id],b=_.uniforms,C=_.__cache;n.bindBuffer(35345,S);for(let E=0,P=b.length;E<P;E++){const M=b[E];if(m(M,E,C)===!0){const T=M.value,R=M.__offset;typeof T=="number"?(M.__data[0]=T,n.bufferSubData(35345,R,M.__data)):(M.value.isMatrix3?(M.__data[0]=M.value.elements[0],M.__data[1]=M.value.elements[1],M.__data[2]=M.value.elements[2],M.__data[3]=M.value.elements[0],M.__data[4]=M.value.elements[3],M.__data[5]=M.value.elements[4],M.__data[6]=M.value.elements[5],M.__data[7]=M.value.elements[0],M.__data[8]=M.value.elements[6],M.__data[9]=M.value.elements[7],M.__data[10]=M.value.elements[8],M.__data[11]=M.value.elements[0]):T.toArray(M.__data),n.bufferSubData(35345,R,M.__data))}}n.bindBuffer(35345,null)}function m(_,S,b){const C=_.value;if(b[S]===void 0)return typeof C=="number"?b[S]=C:b[S]=C.clone(),!0;if(typeof C=="number"){if(b[S]!==C)return b[S]=C,!0}else{const E=b[S];if(E.equals(C)===!1)return E.copy(C),!0}return!1}function g(_){const S=_.uniforms;let b=0;const C=16;let E=0;for(let P=0,M=S.length;P<M;P++){const T=S[P],R=y(T);if(T.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=b,P>0){E=b%C;const L=C-E;E!==0&&L-R.boundary<0&&(b+=C-E,T.__offset=b)}b+=R.storage}return E=b%C,E>0&&(b+=C-E),_.__size=b,_.__cache={},this}function y(_){const S=_.value,b={boundary:0,storage:0};return typeof S=="number"?(b.boundary=4,b.storage=4):S.isVector2?(b.boundary=8,b.storage=8):S.isVector3||S.isColor?(b.boundary=16,b.storage=12):S.isVector4?(b.boundary=16,b.storage=16):S.isMatrix3?(b.boundary=48,b.storage=48):S.isMatrix4?(b.boundary=64,b.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),b}function v(_){const S=_.target;S.removeEventListener("dispose",v);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function x(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:u,dispose:x}}function rG(){const n=wh("canvas");return n.style.display="block",n}function bS(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:rG(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let f=null,p=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Fi,this.physicallyCorrectLights=!1,this.toneMapping=Ps,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const y=this;let v=!1,x=0,_=0,S=null,b=-1,C=null;const E=new zt,P=new zt;let M=null,T=e.width,R=e.height,L=1,I=null,H=null;const G=new zt(0,0,T,R),X=new zt(0,0,T,R);let $=!1;const ne=new jv;let U=!1,O=!1,z=null;const W=new ht,q=new Ae,oe=new J,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function me(){return S===null?L:1}let re=t;function he(Q,ge){for(let Ce=0;Ce<Q.length;Ce++){const ve=Q[Ce],Pe=e.getContext(ve,ge);if(Pe!==null)return Pe}return null}try{const Q={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${il}`),e.addEventListener("webglcontextlost",Fe,!1),e.addEventListener("webglcontextrestored",Oe,!1),e.addEventListener("webglcontextcreationerror",tt,!1),re===null){const ge=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&ge.shift(),re=he(ge,Q),re===null)throw he(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let ie,k,V,K,Y,ee,le,we,Se,Ue,xe,Re,Ie,ye,j,F,te,pe,Ee,Be,De,fe,We,Le;function He(){ie=new xz(re),k=new hz(re,ie,n),ie.init(k),fe=new nB(re,ie,k),V=new Q5(re,ie,k),K=new Sz,Y=new N5,ee=new q5(re,ie,V,Y,k,fe,K),le=new mz(y),we=new yz(y),Se=new IO(re,k),We=new fz(re,ie,Se,k),Ue=new _z(re,Se,K,We),xe=new Ez(re,Ue,Se,K),Ee=new Az(re,k,ee),F=new pz(Y),Re=new U5(y,le,we,ie,k,We,F),Ie=new tG(y,Y),ye=new G5,j=new J5(ie,k),pe=new cz(y,le,V,xe,c,o),te=new Y5(y,xe,k),Le=new nG(re,K,k,V),Be=new dz(re,ie,K,k),De=new wz(re,ie,K,k),K.programs=Re.programs,y.capabilities=k,y.extensions=ie,y.properties=Y,y.renderLists=ye,y.shadowMap=te,y.state=V,y.info=K}He();const ke=new eG(y,re);this.xr=ke,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const Q=ie.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=ie.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(Q){Q!==void 0&&(L=Q,this.setSize(T,R,!1))},this.getSize=function(Q){return Q.set(T,R)},this.setSize=function(Q,ge,Ce){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=Q,R=ge,e.width=Math.floor(Q*L),e.height=Math.floor(ge*L),Ce!==!1&&(e.style.width=Q+"px",e.style.height=ge+"px"),this.setViewport(0,0,Q,ge)},this.getDrawingBufferSize=function(Q){return Q.set(T*L,R*L).floor()},this.setDrawingBufferSize=function(Q,ge,Ce){T=Q,R=ge,L=Ce,e.width=Math.floor(Q*Ce),e.height=Math.floor(ge*Ce),this.setViewport(0,0,Q,ge)},this.getCurrentViewport=function(Q){return Q.copy(E)},this.getViewport=function(Q){return Q.copy(G)},this.setViewport=function(Q,ge,Ce,ve){Q.isVector4?G.set(Q.x,Q.y,Q.z,Q.w):G.set(Q,ge,Ce,ve),V.viewport(E.copy(G).multiplyScalar(L).floor())},this.getScissor=function(Q){return Q.copy(X)},this.setScissor=function(Q,ge,Ce,ve){Q.isVector4?X.set(Q.x,Q.y,Q.z,Q.w):X.set(Q,ge,Ce,ve),V.scissor(P.copy(X).multiplyScalar(L).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(Q){V.setScissorTest($=Q)},this.setOpaqueSort=function(Q){I=Q},this.setTransparentSort=function(Q){H=Q},this.getClearColor=function(Q){return Q.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(Q=!0,ge=!0,Ce=!0){let ve=0;Q&&(ve|=16384),ge&&(ve|=256),Ce&&(ve|=1024),re.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Fe,!1),e.removeEventListener("webglcontextrestored",Oe,!1),e.removeEventListener("webglcontextcreationerror",tt,!1),ye.dispose(),j.dispose(),Y.dispose(),le.dispose(),we.dispose(),xe.dispose(),We.dispose(),Le.dispose(),Re.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",Et),ke.removeEventListener("sessionend",Bt),z&&(z.dispose(),z=null),Jt.stop()};function Fe(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Oe(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const Q=K.autoReset,ge=te.enabled,Ce=te.autoUpdate,ve=te.needsUpdate,Pe=te.type;He(),K.autoReset=Q,te.enabled=ge,te.autoUpdate=Ce,te.needsUpdate=ve,te.type=Pe}function tt(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function se(Q){const ge=Q.target;ge.removeEventListener("dispose",se),je(ge)}function je(Q){be(Q),Y.remove(Q)}function be(Q){const ge=Y.get(Q).programs;ge!==void 0&&(ge.forEach(function(Ce){Re.releaseProgram(Ce)}),Q.isShaderMaterial&&Re.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,ge,Ce,ve,Pe,st){ge===null&&(ge=ce);const ft=Pe.isMesh&&Pe.matrixWorld.determinant()<0,bt=Dn(Q,ge,Ce,ve,Pe);V.setMaterial(ve,ft);let pt=Ce.index;const Lt=Ce.attributes.position;if(pt===null){if(Lt===void 0||Lt.count===0)return}else if(pt.count===0)return;let Tt=1;ve.wireframe===!0&&(pt=Ue.getWireframeAttribute(Ce),Tt=2),We.setup(Pe,ve,bt,Ce,pt);let Ft,tn=Be;pt!==null&&(Ft=Se.get(pt),tn=De,tn.setIndex(Ft));const oi=pt!==null?pt.count:Lt.count,Ui=Ce.drawRange.start*Tt,Ni=Ce.drawRange.count*Tt,Ye=st!==null?st.start*Tt:0,Mt=st!==null?st.count*Tt:1/0,zi=Math.max(Ui,Ye),Qt=Math.min(oi,Ui+Ni,Ye+Mt)-1,ur=Math.max(0,Qt-zi+1);if(ur!==0){if(Pe.isMesh)ve.wireframe===!0?(V.setLineWidth(ve.wireframeLinewidth*me()),tn.setMode(1)):tn.setMode(4);else if(Pe.isLine){let _r=ve.linewidth;_r===void 0&&(_r=1),V.setLineWidth(_r*me()),Pe.isLineSegments?tn.setMode(1):Pe.isLineLoop?tn.setMode(2):tn.setMode(3)}else Pe.isPoints?tn.setMode(0):Pe.isSprite&&tn.setMode(4);if(Pe.isInstancedMesh)tn.renderInstances(zi,ur,Pe.count);else if(Ce.isInstancedBufferGeometry){const _r=Math.min(Ce.instanceCount,Ce._maxInstanceCount);tn.renderInstances(zi,ur,_r)}else tn.render(zi,ur)}},this.compile=function(Q,ge){function Ce(ve,Pe,st){ve.transparent===!0&&ve.side===Dr?(ve.side=ar,ve.needsUpdate=!0,En(ve,Pe,st),ve.side=to,ve.needsUpdate=!0,En(ve,Pe,st),ve.side=Dr):En(ve,Pe,st)}p=j.get(Q),p.init(),g.push(p),Q.traverseVisible(function(ve){ve.isLight&&ve.layers.test(ge.layers)&&(p.pushLight(ve),ve.castShadow&&p.pushShadow(ve))}),p.setupLights(y.physicallyCorrectLights),Q.traverse(function(ve){const Pe=ve.material;if(Pe)if(Array.isArray(Pe))for(let st=0;st<Pe.length;st++){const ft=Pe[st];Ce(ft,Q,ve)}else Ce(Pe,Q,ve)}),g.pop(),p=null};let ze=null;function $e(Q){ze&&ze(Q)}function Et(){Jt.stop()}function Bt(){Jt.start()}const Jt=new QP;Jt.setAnimationLoop($e),typeof self<"u"&&Jt.setContext(self),this.setAnimationLoop=function(Q){ze=Q,ke.setAnimationLoop(Q),Q===null?Jt.stop():Jt.start()},ke.addEventListener("sessionstart",Et),ke.addEventListener("sessionend",Bt),this.render=function(Q,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(ge),ge=ke.getCamera()),Q.isScene===!0&&Q.onBeforeRender(y,Q,ge,S),p=j.get(Q,g.length),p.init(),g.push(p),W.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ne.setFromProjectionMatrix(W),O=this.localClippingEnabled,U=F.init(this.clippingPlanes,O,ge),f=ye.get(Q,m.length),f.init(),m.push(f),It(Q,ge,0,y.sortObjects),f.finish(),y.sortObjects===!0&&f.sort(I,H),U===!0&&F.beginShadows();const Ce=p.state.shadowsArray;if(te.render(Ce,Q,ge),U===!0&&F.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(f,Q),p.setupLights(y.physicallyCorrectLights),ge.isArrayCamera){const ve=ge.cameras;for(let Pe=0,st=ve.length;Pe<st;Pe++){const ft=ve[Pe];ot(f,Q,ft,ft.viewport)}}else ot(f,Q,ge);S!==null&&(ee.updateMultisampleRenderTarget(S),ee.updateRenderTargetMipmap(S)),Q.isScene===!0&&Q.onAfterRender(y,Q,ge),We.resetDefaultState(),b=-1,C=null,g.pop(),g.length>0?p=g[g.length-1]:p=null,m.pop(),m.length>0?f=m[m.length-1]:f=null};function It(Q,ge,Ce,ve){if(Q.visible===!1)return;if(Q.layers.test(ge.layers)){if(Q.isGroup)Ce=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(ge);else if(Q.isLight)p.pushLight(Q),Q.castShadow&&p.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||ne.intersectsSprite(Q)){ve&&oe.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(W);const ft=xe.update(Q),bt=Q.material;bt.visible&&f.push(Q,ft,bt,Ce,oe.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==K.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=K.render.frame),!Q.frustumCulled||ne.intersectsObject(Q))){ve&&oe.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(W);const ft=xe.update(Q),bt=Q.material;if(Array.isArray(bt)){const pt=ft.groups;for(let Lt=0,Tt=pt.length;Lt<Tt;Lt++){const Ft=pt[Lt],tn=bt[Ft.materialIndex];tn&&tn.visible&&f.push(Q,ft,tn,Ce,oe.z,Ft)}}else bt.visible&&f.push(Q,ft,bt,Ce,oe.z,null)}}const st=Q.children;for(let ft=0,bt=st.length;ft<bt;ft++)It(st[ft],ge,Ce,ve)}function ot(Q,ge,Ce,ve){const Pe=Q.opaque,st=Q.transmissive,ft=Q.transparent;p.setupLightsView(Ce),st.length>0&&Kt(Pe,ge,Ce),ve&&V.viewport(E.copy(ve)),Pe.length>0&&Yt(Pe,ge,Ce),st.length>0&&Yt(st,ge,Ce),ft.length>0&&Yt(ft,ge,Ce),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function Kt(Q,ge,Ce){const ve=k.isWebGL2;z===null&&(z=new dn(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?fu:xr,minFilter:ro,samples:ve&&s===!0?4:0})),y.getDrawingBufferSize(q),ve?z.setSize(q.x,q.y):z.setSize(fv(q.x),fv(q.y));const Pe=y.getRenderTarget();y.setRenderTarget(z),y.clear();const st=y.toneMapping;y.toneMapping=Ps,Yt(Q,ge,Ce),y.toneMapping=st,ee.updateMultisampleRenderTarget(z),ee.updateRenderTargetMipmap(z),y.setRenderTarget(Pe)}function Yt(Q,ge,Ce){const ve=ge.isScene===!0?ge.overrideMaterial:null;for(let Pe=0,st=Q.length;Pe<st;Pe++){const ft=Q[Pe],bt=ft.object,pt=ft.geometry,Lt=ve===null?ft.material:ve,Tt=ft.group;bt.layers.test(Ce.layers)&&Xt(bt,ge,Ce,pt,Lt,Tt)}}function Xt(Q,ge,Ce,ve,Pe,st){Q.onBeforeRender(y,ge,Ce,ve,Pe,st),Q.modelViewMatrix.multiplyMatrices(Ce.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Pe.onBeforeRender(y,ge,Ce,ve,Q,st),Pe.transparent===!0&&Pe.side===Dr?(Pe.side=ar,Pe.needsUpdate=!0,y.renderBufferDirect(Ce,ge,ve,Pe,Q,st),Pe.side=to,Pe.needsUpdate=!0,y.renderBufferDirect(Ce,ge,ve,Pe,Q,st),Pe.side=Dr):y.renderBufferDirect(Ce,ge,ve,Pe,Q,st),Q.onAfterRender(y,ge,Ce,ve,Pe,st)}function En(Q,ge,Ce){ge.isScene!==!0&&(ge=ce);const ve=Y.get(Q),Pe=p.state.lights,st=p.state.shadowsArray,ft=Pe.state.version,bt=Re.getParameters(Q,Pe.state,st,ge,Ce),pt=Re.getProgramCacheKey(bt);let Lt=ve.programs;ve.environment=Q.isMeshStandardMaterial?ge.environment:null,ve.fog=ge.fog,ve.envMap=(Q.isMeshStandardMaterial?we:le).get(Q.envMap||ve.environment),Lt===void 0&&(Q.addEventListener("dispose",se),Lt=new Map,ve.programs=Lt);let Tt=Lt.get(pt);if(Tt!==void 0){if(ve.currentProgram===Tt&&ve.lightsStateVersion===ft)return zr(Q,bt),Tt}else bt.uniforms=Re.getUniforms(Q),Q.onBuild(Ce,bt,y),Q.onBeforeCompile(bt,y),Tt=Re.acquireProgram(bt,pt),Lt.set(pt,Tt),ve.uniforms=bt.uniforms;const Ft=ve.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Ft.clippingPlanes=F.uniform),zr(Q,bt),ve.needsLights=$n(Q),ve.lightsStateVersion=ft,ve.needsLights&&(Ft.ambientLightColor.value=Pe.state.ambient,Ft.lightProbe.value=Pe.state.probe,Ft.directionalLights.value=Pe.state.directional,Ft.directionalLightShadows.value=Pe.state.directionalShadow,Ft.spotLights.value=Pe.state.spot,Ft.spotLightShadows.value=Pe.state.spotShadow,Ft.rectAreaLights.value=Pe.state.rectArea,Ft.ltc_1.value=Pe.state.rectAreaLTC1,Ft.ltc_2.value=Pe.state.rectAreaLTC2,Ft.pointLights.value=Pe.state.point,Ft.pointLightShadows.value=Pe.state.pointShadow,Ft.hemisphereLights.value=Pe.state.hemi,Ft.directionalShadowMap.value=Pe.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Ft.spotShadowMap.value=Pe.state.spotShadowMap,Ft.spotLightMatrix.value=Pe.state.spotLightMatrix,Ft.spotLightMap.value=Pe.state.spotLightMap,Ft.pointShadowMap.value=Pe.state.pointShadowMap,Ft.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const tn=Tt.getUniforms(),oi=Fg.seqWithValue(tn.seq,Ft);return ve.currentProgram=Tt,ve.uniformsList=oi,Tt}function zr(Q,ge){const Ce=Y.get(Q);Ce.outputEncoding=ge.outputEncoding,Ce.instancing=ge.instancing,Ce.skinning=ge.skinning,Ce.morphTargets=ge.morphTargets,Ce.morphNormals=ge.morphNormals,Ce.morphColors=ge.morphColors,Ce.morphTargetsCount=ge.morphTargetsCount,Ce.numClippingPlanes=ge.numClippingPlanes,Ce.numIntersection=ge.numClipIntersection,Ce.vertexAlphas=ge.vertexAlphas,Ce.vertexTangents=ge.vertexTangents,Ce.toneMapping=ge.toneMapping}function Dn(Q,ge,Ce,ve,Pe){ge.isScene!==!0&&(ge=ce),ee.resetTextureUnits();const st=ge.fog,ft=ve.isMeshStandardMaterial?ge.environment:null,bt=S===null?y.outputEncoding:S.isXRRenderTarget===!0?S.texture.encoding:Fi,pt=(ve.isMeshStandardMaterial?we:le).get(ve.envMap||ft),Lt=ve.vertexColors===!0&&!!Ce.attributes.color&&Ce.attributes.color.itemSize===4,Tt=!!ve.normalMap&&!!Ce.attributes.tangent,Ft=!!Ce.morphAttributes.position,tn=!!Ce.morphAttributes.normal,oi=!!Ce.morphAttributes.color,Ui=ve.toneMapped?y.toneMapping:Ps,Ni=Ce.morphAttributes.position||Ce.morphAttributes.normal||Ce.morphAttributes.color,Ye=Ni!==void 0?Ni.length:0,Mt=Y.get(ve),zi=p.state.lights;if(U===!0&&(O===!0||Q!==C)){const Ut=Q===C&&ve.id===b;F.setState(ve,Q,Ut)}let Qt=!1;ve.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==zi.state.version||Mt.outputEncoding!==bt||Pe.isInstancedMesh&&Mt.instancing===!1||!Pe.isInstancedMesh&&Mt.instancing===!0||Pe.isSkinnedMesh&&Mt.skinning===!1||!Pe.isSkinnedMesh&&Mt.skinning===!0||Mt.envMap!==pt||ve.fog===!0&&Mt.fog!==st||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==F.numPlanes||Mt.numIntersection!==F.numIntersection)||Mt.vertexAlphas!==Lt||Mt.vertexTangents!==Tt||Mt.morphTargets!==Ft||Mt.morphNormals!==tn||Mt.morphColors!==oi||Mt.toneMapping!==Ui||k.isWebGL2===!0&&Mt.morphTargetsCount!==Ye)&&(Qt=!0):(Qt=!0,Mt.__version=ve.version);let ur=Mt.currentProgram;Qt===!0&&(ur=En(ve,ge,Pe));let _r=!1,cr=!1,fr=!1;const xt=ur.getUniforms(),Rt=Mt.uniforms;if(V.useProgram(ur.program)&&(_r=!0,cr=!0,fr=!0),ve.id!==b&&(b=ve.id,cr=!0),_r||C!==Q){if(xt.setValue(re,"projectionMatrix",Q.projectionMatrix),k.logarithmicDepthBuffer&&xt.setValue(re,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),C!==Q&&(C=Q,cr=!0,fr=!0),ve.isShaderMaterial||ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshStandardMaterial||ve.envMap){const Ut=xt.map.cameraPosition;Ut!==void 0&&Ut.setValue(re,oe.setFromMatrixPosition(Q.matrixWorld))}(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&xt.setValue(re,"isOrthographic",Q.isOrthographicCamera===!0),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial||ve.isShadowMaterial||Pe.isSkinnedMesh)&&xt.setValue(re,"viewMatrix",Q.matrixWorldInverse)}if(Pe.isSkinnedMesh){xt.setOptional(re,Pe,"bindMatrix"),xt.setOptional(re,Pe,"bindMatrixInverse");const Ut=Pe.skeleton;Ut&&(k.floatVertexTextures?(Ut.boneTexture===null&&Ut.computeBoneTexture(),xt.setValue(re,"boneTexture",Ut.boneTexture,ee),xt.setValue(re,"boneTextureSize",Ut.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Gr=Ce.morphAttributes;if((Gr.position!==void 0||Gr.normal!==void 0||Gr.color!==void 0&&k.isWebGL2===!0)&&Ee.update(Pe,Ce,ve,ur),(cr||Mt.receiveShadow!==Pe.receiveShadow)&&(Mt.receiveShadow=Pe.receiveShadow,xt.setValue(re,"receiveShadow",Pe.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(Rt.envMap.value=pt,Rt.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),cr&&(xt.setValue(re,"toneMappingExposure",y.toneMappingExposure),Mt.needsLights&&gn(Rt,fr),st&&ve.fog===!0&&Ie.refreshFogUniforms(Rt,st),Ie.refreshMaterialUniforms(Rt,ve,L,R,z),Fg.upload(re,Mt.uniformsList,Rt,ee)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(Fg.upload(re,Mt.uniformsList,Rt,ee),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&xt.setValue(re,"center",Pe.center),xt.setValue(re,"modelViewMatrix",Pe.modelViewMatrix),xt.setValue(re,"normalMatrix",Pe.normalMatrix),xt.setValue(re,"modelMatrix",Pe.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Ut=ve.uniformsGroups;for(let In=0,Hr=Ut.length;In<Hr;In++)if(k.isWebGL2){const wi=Ut[In];Le.update(wi,ur),Le.bind(wi,ur)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ur}function gn(Q,ge){Q.ambientLightColor.needsUpdate=ge,Q.lightProbe.needsUpdate=ge,Q.directionalLights.needsUpdate=ge,Q.directionalLightShadows.needsUpdate=ge,Q.pointLights.needsUpdate=ge,Q.pointLightShadows.needsUpdate=ge,Q.spotLights.needsUpdate=ge,Q.spotLightShadows.needsUpdate=ge,Q.rectAreaLights.needsUpdate=ge,Q.hemisphereLights.needsUpdate=ge}function $n(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(Q,ge,Ce){Y.get(Q.texture).__webglTexture=ge,Y.get(Q.depthTexture).__webglTexture=Ce;const ve=Y.get(Q);ve.__hasExternalTextures=!0,ve.__hasExternalTextures&&(ve.__autoAllocateDepthBuffer=Ce===void 0,ve.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Q,ge){const Ce=Y.get(Q);Ce.__webglFramebuffer=ge,Ce.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function(Q,ge=0,Ce=0){S=Q,x=ge,_=Ce;let ve=!0;if(Q){const pt=Y.get(Q);pt.__useDefaultFramebuffer!==void 0?(V.bindFramebuffer(36160,null),ve=!1):pt.__webglFramebuffer===void 0?ee.setupRenderTarget(Q):pt.__hasExternalTextures&&ee.rebindTextures(Q,Y.get(Q.texture).__webglTexture,Y.get(Q.depthTexture).__webglTexture)}let Pe=null,st=!1,ft=!1;if(Q){const pt=Q.texture;(pt.isData3DTexture||pt.isDataArrayTexture)&&(ft=!0);const Lt=Y.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Pe=Lt[ge],st=!0):k.isWebGL2&&Q.samples>0&&ee.useMultisampledRTT(Q)===!1?Pe=Y.get(Q).__webglMultisampledFramebuffer:Pe=Lt,E.copy(Q.viewport),P.copy(Q.scissor),M=Q.scissorTest}else E.copy(G).multiplyScalar(L).floor(),P.copy(X).multiplyScalar(L).floor(),M=$;if(V.bindFramebuffer(36160,Pe)&&k.drawBuffers&&ve&&V.drawBuffers(Q,Pe),V.viewport(E),V.scissor(P),V.setScissorTest(M),st){const pt=Y.get(Q.texture);re.framebufferTexture2D(36160,36064,34069+ge,pt.__webglTexture,Ce)}else if(ft){const pt=Y.get(Q.texture),Lt=ge||0;re.framebufferTextureLayer(36160,36064,pt.__webglTexture,Ce||0,Lt)}b=-1},this.readRenderTargetPixels=function(Q,ge,Ce,ve,Pe,st,ft){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=Y.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&ft!==void 0&&(bt=bt[ft]),bt){V.bindFramebuffer(36160,bt);try{const pt=Q.texture,Lt=pt.format,Tt=pt.type;if(Lt!==Qr&&fe.convert(Lt)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ft=Tt===fu&&(ie.has("EXT_color_buffer_half_float")||k.isWebGL2&&ie.has("EXT_color_buffer_float"));if(Tt!==xr&&fe.convert(Tt)!==re.getParameter(35738)&&!(Tt===mr&&(k.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!Ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=Q.width-ve&&Ce>=0&&Ce<=Q.height-Pe&&re.readPixels(ge,Ce,ve,Pe,fe.convert(Lt),fe.convert(Tt),st)}finally{const pt=S!==null?Y.get(S).__webglFramebuffer:null;V.bindFramebuffer(36160,pt)}}},this.copyFramebufferToTexture=function(Q,ge,Ce=0){const ve=Math.pow(2,-Ce),Pe=Math.floor(ge.image.width*ve),st=Math.floor(ge.image.height*ve);ee.setTexture2D(ge,0),re.copyTexSubImage2D(3553,Ce,0,0,Q.x,Q.y,Pe,st),V.unbindTexture()},this.copyTextureToTexture=function(Q,ge,Ce,ve=0){const Pe=ge.image.width,st=ge.image.height,ft=fe.convert(Ce.format),bt=fe.convert(Ce.type);ee.setTexture2D(Ce,0),re.pixelStorei(37440,Ce.flipY),re.pixelStorei(37441,Ce.premultiplyAlpha),re.pixelStorei(3317,Ce.unpackAlignment),ge.isDataTexture?re.texSubImage2D(3553,ve,Q.x,Q.y,Pe,st,ft,bt,ge.image.data):ge.isCompressedTexture?re.compressedTexSubImage2D(3553,ve,Q.x,Q.y,ge.mipmaps[0].width,ge.mipmaps[0].height,ft,ge.mipmaps[0].data):re.texSubImage2D(3553,ve,Q.x,Q.y,ft,bt,ge.image),ve===0&&Ce.generateMipmaps&&re.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(Q,ge,Ce,ve,Pe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const st=Q.max.x-Q.min.x+1,ft=Q.max.y-Q.min.y+1,bt=Q.max.z-Q.min.z+1,pt=fe.convert(ve.format),Lt=fe.convert(ve.type);let Tt;if(ve.isData3DTexture)ee.setTexture3D(ve,0),Tt=32879;else if(ve.isDataArrayTexture)ee.setTexture2DArray(ve,0),Tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(37440,ve.flipY),re.pixelStorei(37441,ve.premultiplyAlpha),re.pixelStorei(3317,ve.unpackAlignment);const Ft=re.getParameter(3314),tn=re.getParameter(32878),oi=re.getParameter(3316),Ui=re.getParameter(3315),Ni=re.getParameter(32877),Ye=Ce.isCompressedTexture?Ce.mipmaps[0]:Ce.image;re.pixelStorei(3314,Ye.width),re.pixelStorei(32878,Ye.height),re.pixelStorei(3316,Q.min.x),re.pixelStorei(3315,Q.min.y),re.pixelStorei(32877,Q.min.z),Ce.isDataTexture||Ce.isData3DTexture?re.texSubImage3D(Tt,Pe,ge.x,ge.y,ge.z,st,ft,bt,pt,Lt,Ye.data):Ce.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Tt,Pe,ge.x,ge.y,ge.z,st,ft,bt,pt,Ye.data)):re.texSubImage3D(Tt,Pe,ge.x,ge.y,ge.z,st,ft,bt,pt,Lt,Ye),re.pixelStorei(3314,Ft),re.pixelStorei(32878,tn),re.pixelStorei(3316,oi),re.pixelStorei(3315,Ui),re.pixelStorei(32877,Ni),Pe===0&&ve.generateMipmaps&&re.generateMipmap(Tt),V.unbindTexture()},this.initTexture=function(Q){Q.isCubeTexture?ee.setTextureCube(Q,0):Q.isData3DTexture?ee.setTexture3D(Q,0):Q.isDataArrayTexture?ee.setTexture2DArray(Q,0):ee.setTexture2D(Q,0),V.unbindTexture()},this.resetState=function(){x=0,_=0,S=null,V.reset(),We.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class iB extends bS{}iB.prototype.isWebGL1Renderer=!0;class Xv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ge(e),this.density=t}clone(){return new Xv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Yv{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ge(e),this.near=t,this.far=r}clone(){return new Yv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Sh extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Gh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=xh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ii()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ii()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jr=new J;class Qa{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.applyMatrix4(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.applyNormalMatrix(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.transformDirection(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Io(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Io(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Io(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Io(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new St(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MS extends Mn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ac;const ud=new J,lc=new J,uc=new J,cc=new Ae,cd=new Ae,sB=new ht,km=new J,fd=new J,Om=new J,DA=new Ae,o1=new Ae,IA=new Ae;class oB extends Gt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",ac===void 0){ac=new vt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Gh(t,5);ac.setIndex([0,1,2,0,2,3]),ac.setAttribute("position",new Qa(r,3,0,!1)),ac.setAttribute("uv",new Qa(r,2,3,!1))}this.geometry=ac,this.material=e!==void 0?e:new MS,this.center=new Ae(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lc.setFromMatrixScale(this.matrixWorld),sB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&lc.multiplyScalar(-uc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Um(km.set(-.5,-.5,0),uc,o,lc,i,s),Um(fd.set(.5,-.5,0),uc,o,lc,i,s),Um(Om.set(.5,.5,0),uc,o,lc,i,s),DA.set(0,0),o1.set(1,0),IA.set(1,1);let a=e.ray.intersectTriangle(km,fd,Om,!1,ud);if(a===null&&(Um(fd.set(-.5,.5,0),uc,o,lc,i,s),o1.set(0,1),a=e.ray.intersectTriangle(km,Om,fd,!1,ud),a===null))return;const l=e.ray.origin.distanceTo(ud);l<e.near||l>e.far||t.push({distance:l,point:ud.clone(),uv:ns.getUV(ud,km,fd,Om,DA,o1,IA,new Ae),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Um(n,e,t,r,i,s){cc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(cd.x=s*cc.x-i*cc.y,cd.y=i*cc.x+s*cc.y):cd.copy(cc),n.copy(e),n.x+=cd.x,n.y+=cd.y,n.applyMatrix4(sB)}const Nm=new J,LA=new J;class aB extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Nm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Nm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Nm.setFromMatrixPosition(e.matrixWorld),LA.setFromMatrixPosition(this.matrixWorld);const r=Nm.distanceTo(LA)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const FA=new J,kA=new zt,OA=new zt,iG=new J,UA=new ht;class AS extends Bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ht,this.bindMatrixInverse=new ht}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;kA.fromBufferAttribute(i.attributes.skinIndex,e),OA.fromBufferAttribute(i.attributes.skinWeight,e),FA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=OA.getComponent(s);if(o!==0){const a=kA.getComponent(s);UA.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(iG.copy(FA).applyMatrix4(UA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Qv extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class nu extends un{constructor(e=null,t=1,r=1,i,s,o,a,l,u=on,c=on,f,p){super(null,o,a,l,u,c,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const NA=new ht,sG=new ht;class Hh{constructor(e=[],t=[]){this.uuid=Ii(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sG;NA.multiplyMatrices(a,t[s]),NA.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Hh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=$P(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new nu(t,e,e,Qr,mr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Qv),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class hu extends St{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zA=new ht,GA=new ht,zm=[],dd=new Bn;class lB extends Bn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new hu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(dd.geometry=this.geometry,dd.material=this.material,dd.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,zA),GA.multiplyMatrices(r,zA),dd.matrixWorld=GA,dd.raycast(e,zm);for(let o=0,a=zm.length;o<a;o++){const l=zm[o];l.instanceId=s,l.object=this,t.push(l)}zm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new hu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Or extends Mn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ge(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const HA=new J,VA=new J,WA=new ht,a1=new ff,Gm=new io;class Ho extends Gt{constructor(e=new vt,t=new Or){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)HA.fromBufferAttribute(t,i-1),VA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=HA.distanceTo(VA);e.setAttribute("lineDistance",new nt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Gm.copy(r.boundingSphere),Gm.applyMatrix4(i),Gm.radius+=s,e.ray.intersectsSphere(Gm)===!1)return;WA.copy(i).invert(),a1.copy(e.ray).applyMatrix4(WA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new J,c=new J,f=new J,p=new J,m=this.isLineSegments?2:1,g=r.index,v=r.attributes.position;if(g!==null){const x=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let S=x,b=_-1;S<b;S+=m){const C=g.getX(S),E=g.getX(S+1);if(u.fromBufferAttribute(v,C),c.fromBufferAttribute(v,E),a1.distanceSqToSegment(u,c,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(p);M<e.near||M>e.far||t.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let S=x,b=_-1;S<b;S+=m){if(u.fromBufferAttribute(v,S),c.fromBufferAttribute(v,S+1),a1.distanceSqToSegment(u,c,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(p);E<e.near||E>e.far||t.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const jA=new J,$A=new J;class ds extends Ho{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)jA.fromBufferAttribute(t,i),$A.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+jA.distanceTo($A);e.setAttribute("lineDistance",new nt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ES extends Ho{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class qv extends Mn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JA=new ht,b_=new ff,Hm=new io,Vm=new J;class CS extends Gt{constructor(e=new vt,t=new qv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Hm.copy(r.boundingSphere),Hm.applyMatrix4(i),Hm.radius+=s,e.ray.intersectsSphere(Hm)===!1)return;JA.copy(i).invert(),b_.copy(e.ray).applyMatrix4(JA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=p,y=m;g<y;g++){const v=u.getX(g);Vm.fromBufferAttribute(f,v),KA(Vm,v,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let g=p,y=m;g<y;g++)Vm.fromBufferAttribute(f,g),KA(Vm,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function KA(n,e,t,r,i,s,o){const a=b_.distanceSqToPoint(n);if(a<t){const l=new J;b_.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class oG extends un{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ht,this.magFilter=s!==void 0?s:Ht,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class aG extends un{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=on,this.minFilter=on,this.generateMipmaps=!1,this.needsUpdate=!0}}class uB extends un{constructor(e,t,r,i,s,o,a,l,u,c,f,p){super(null,o,a,l,u,c,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lG extends un{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ls{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],p=r[i+1]-c,m=(o-c)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ae:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new J,i=[],s=[],o=[],a=new J,l=new ht;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new J)}s[0]=new J,o[0]=new J;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Un(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Un(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Zv extends Ls{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Ae,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*c-m*f+this.aX,u=p*f+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cB extends Zv{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function TS(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let p=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+f)+(l-a)/f;p*=c,m*=c,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Wm=new J,l1=new TS,u1=new TS,c1=new TS;class fB extends Ls{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new J){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(Wm.subVectors(i[0],i[1]).add(i[0]),u=Wm);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(Wm.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=Wm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(c),m);y<1e-4&&(y=1),g<1e-4&&(g=y),v<1e-4&&(v=y),l1.initNonuniformCatmullRom(u.x,f.x,p.x,c.x,g,y,v),u1.initNonuniformCatmullRom(u.y,f.y,p.y,c.y,g,y,v),c1.initNonuniformCatmullRom(u.z,f.z,p.z,c.z,g,y,v)}else this.curveType==="catmullrom"&&(l1.initCatmullRom(u.x,f.x,p.x,c.x,this.tension),u1.initCatmullRom(u.y,f.y,p.y,c.y,this.tension),c1.initCatmullRom(u.z,f.z,p.z,c.z,this.tension));return r.set(l1.calc(l),u1.calc(l),c1.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new J().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function XA(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function uG(n,e){const t=1-n;return t*t*e}function cG(n,e){return 2*(1-n)*n*e}function fG(n,e){return n*n*e}function Hd(n,e,t,r){return uG(n,e)+cG(n,t)+fG(n,r)}function dG(n,e){const t=1-n;return t*t*t*e}function hG(n,e){const t=1-n;return 3*t*t*n*e}function pG(n,e){return 3*(1-n)*n*n*e}function mG(n,e){return n*n*n*e}function Vd(n,e,t,r,i){return dG(n,e)+hG(n,t)+pG(n,r)+mG(n,i)}class RS extends Ls{constructor(e=new Ae,t=new Ae,r=new Ae,i=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ae){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vd(e,i.x,s.x,o.x,a.x),Vd(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dB extends Ls{constructor(e=new J,t=new J,r=new J,i=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new J){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vd(e,i.x,s.x,o.x,a.x),Vd(e,i.y,s.y,o.y,a.y),Vd(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class e0 extends Ls{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ae){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Ae;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hB extends Ls{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PS extends Ls{constructor(e=new Ae,t=new Ae,r=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ae){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hd(e,i.x,s.x,o.x),Hd(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BS extends Ls{constructor(e=new J,t=new J,r=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new J){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Hd(e,i.x,s.x,o.x),Hd(e,i.y,s.y,o.y),Hd(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DS extends Ls{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ae){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(XA(a,l.x,u.x,c.x,f.x),XA(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ae().fromArray(i))}return this}}var IS=Object.freeze({__proto__:null,ArcCurve:cB,CatmullRomCurve3:fB,CubicBezierCurve:RS,CubicBezierCurve3:dB,EllipseCurve:Zv,LineCurve:e0,LineCurve3:hB,QuadraticBezierCurve:PS,QuadraticBezierCurve3:BS,SplineCurve:DS});class pB extends Ls{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new e0(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new IS[i.type]().fromJSON(i))}return this}}class bh extends pB{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new e0(this.currentPoint.clone(),new Ae(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new PS(this.currentPoint.clone(),new Ae(e,t),new Ae(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new RS(this.currentPoint.clone(),new Ae(e,t),new Ae(r,i),new Ae(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new DS(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new Zv(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vf extends vt{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Un(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new J,p=new Ae,m=new J,g=new J,y=new J;let v=0,x=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:v=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,m.x=x*1,m.y=-v,m.z=x*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:v=e[_+1].x-e[_].x,x=e[_+1].y-e[_].y,m.x=x*1,m.y=-v,m.z=x*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let _=0;_<=t;_++){const S=r+_*c*i,b=Math.sin(S),C=Math.cos(S);for(let E=0;E<=e.length-1;E++){f.x=e[E].x*b,f.y=e[E].y,f.z=e[E].x*C,o.push(f.x,f.y,f.z),p.x=_/t,p.y=E/(e.length-1),a.push(p.x,p.y);const P=l[3*E+0]*b,M=l[3*E+1],T=l[3*E+0]*C;u.push(P,M,T)}}for(let _=0;_<t;_++)for(let S=0;S<e.length-1;S++){const b=S+_*e.length,C=b,E=b+e.length,P=b+e.length+1,M=b+1;s.push(C,E,M),s.push(P,M,E)}this.setIndex(s),this.setAttribute("position",new nt(o,3)),this.setAttribute("uv",new nt(a,2)),this.setAttribute("normal",new nt(u,3))}static fromJSON(e){return new vf(e.points,e.segments,e.phiStart,e.phiLength)}}class Vh extends vf{constructor(e=1,t=1,r=4,i=8){const s=new bh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Vh(e.radius,e.length,e.capSegments,e.radialSegments)}}class Wh extends vt{constructor(e=1,t=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new J,c=new Ae;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[p]/e+1)/2,c.y=(o[p+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new nt(o,3)),this.setAttribute("normal",new nt(a,3)),this.setAttribute("uv",new nt(l,2))}static fromJSON(e){return new Wh(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xu extends vt{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],p=[],m=[];let g=0;const y=[],v=r/2;let x=0;_(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(c),this.setAttribute("position",new nt(f,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function _(){const b=new J,C=new J;let E=0;const P=(t-e)/r;for(let M=0;M<=s;M++){const T=[],R=M/s,L=R*(t-e)+e;for(let I=0;I<=i;I++){const H=I/i,G=H*l+a,X=Math.sin(G),$=Math.cos(G);C.x=L*X,C.y=-R*r+v,C.z=L*$,f.push(C.x,C.y,C.z),b.set(X,P,$).normalize(),p.push(b.x,b.y,b.z),m.push(H,1-R),T.push(g++)}y.push(T)}for(let M=0;M<i;M++)for(let T=0;T<s;T++){const R=y[T][M],L=y[T+1][M],I=y[T+1][M+1],H=y[T][M+1];c.push(R,L,H),c.push(L,I,H),E+=6}u.addGroup(x,E,0),x+=E}function S(b){const C=g,E=new Ae,P=new J;let M=0;const T=b===!0?e:t,R=b===!0?1:-1;for(let I=1;I<=i;I++)f.push(0,v*R,0),p.push(0,R,0),m.push(.5,.5),g++;const L=g;for(let I=0;I<=i;I++){const G=I/i*l+a,X=Math.cos(G),$=Math.sin(G);P.x=T*$,P.y=v*R,P.z=T*X,f.push(P.x,P.y,P.z),p.push(0,R,0),E.x=X*.5+.5,E.y=$*.5*R+.5,m.push(E.x,E.y),g++}for(let I=0;I<i;I++){const H=C+I,G=L+I;b===!0?c.push(G,G+1,H):c.push(G+1,G,H),M+=3}u.addGroup(x,M,b===!0?1:2),x+=M}}static fromJSON(e){return new xu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jh extends xu{constructor(e=1,t=1,r=8,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new jh(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ko extends vt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(s.slice(),3)),this.setAttribute("uv",new nt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const S=new J,b=new J,C=new J;for(let E=0;E<t.length;E+=3)m(t[E+0],S),m(t[E+1],b),m(t[E+2],C),l(S,b,C,_)}function l(_,S,b,C){const E=C+1,P=[];for(let M=0;M<=E;M++){P[M]=[];const T=_.clone().lerp(b,M/E),R=S.clone().lerp(b,M/E),L=E-M;for(let I=0;I<=L;I++)I===0&&M===E?P[M][I]=T:P[M][I]=T.clone().lerp(R,I/L)}for(let M=0;M<E;M++)for(let T=0;T<2*(E-M)-1;T++){const R=Math.floor(T/2);T%2===0?(p(P[M][R+1]),p(P[M+1][R]),p(P[M][R])):(p(P[M][R+1]),p(P[M+1][R+1]),p(P[M+1][R]))}}function u(_){const S=new J;for(let b=0;b<s.length;b+=3)S.x=s[b+0],S.y=s[b+1],S.z=s[b+2],S.normalize().multiplyScalar(_),s[b+0]=S.x,s[b+1]=S.y,s[b+2]=S.z}function c(){const _=new J;for(let S=0;S<s.length;S+=3){_.x=s[S+0],_.y=s[S+1],_.z=s[S+2];const b=v(_)/2/Math.PI+.5,C=x(_)/Math.PI+.5;o.push(b,1-C)}g(),f()}function f(){for(let _=0;_<o.length;_+=6){const S=o[_+0],b=o[_+2],C=o[_+4],E=Math.max(S,b,C),P=Math.min(S,b,C);E>.9&&P<.1&&(S<.2&&(o[_+0]+=1),b<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,S){const b=_*3;S.x=e[b+0],S.y=e[b+1],S.z=e[b+2]}function g(){const _=new J,S=new J,b=new J,C=new J,E=new Ae,P=new Ae,M=new Ae;for(let T=0,R=0;T<s.length;T+=9,R+=6){_.set(s[T+0],s[T+1],s[T+2]),S.set(s[T+3],s[T+4],s[T+5]),b.set(s[T+6],s[T+7],s[T+8]),E.set(o[R+0],o[R+1]),P.set(o[R+2],o[R+3]),M.set(o[R+4],o[R+5]),C.copy(_).add(S).add(b).divideScalar(3);const L=v(C);y(E,R+0,_,L),y(P,R+2,S,L),y(M,R+4,b,L)}}function y(_,S,b,C){C<0&&_.x===1&&(o[S]=_.x-1),b.x===0&&b.z===0&&(o[S]=C/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function x(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new Ko(e.vertices,e.indices,e.radius,e.details)}}class $h extends Ko{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $h(e.radius,e.detail)}}const jm=new J,$m=new J,f1=new J,Jm=new ns;class mB extends vt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Zl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:y,b:v,c:x}=Jm;if(y.fromBufferAttribute(a,u[0]),v.fromBufferAttribute(a,u[1]),x.fromBufferAttribute(a,u[2]),Jm.getNormal(f1),f[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const S=(_+1)%3,b=f[_],C=f[S],E=Jm[c[_]],P=Jm[c[S]],M=`${b}_${C}`,T=`${C}_${b}`;T in p&&p[T]?(f1.dot(p[T].normal)<=s&&(m.push(E.x,E.y,E.z),m.push(P.x,P.y,P.z)),p[T]=null):M in p||(p[M]={index0:u[_],index1:u[S],normal:f1.clone()})}}for(const g in p)if(p[g]){const{index0:y,index1:v}=p[g];jm.fromBufferAttribute(a,y),$m.fromBufferAttribute(a,v),m.push(jm.x,jm.y,jm.z),m.push($m.x,$m.y,$m.z)}this.setAttribute("position",new nt(m,3))}}}class ru extends bh{constructor(e){super(e),this.uuid=Ii(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new bh().fromJSON(i))}return this}}const gG={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=gB(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,p,m;if(r&&(s=wG(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let g=t;g<i;g+=t)f=n[g],p=n[g+1],f<a&&(a=f),p<l&&(l=p),f>u&&(u=f),p>c&&(c=p);m=Math.max(u-a,c-l),m=m!==0?1/m:0}return Mh(s,o,t,a,l,m),o}};function gB(n,e,t,r,i){let s,o;if(i===DG(n,e,t,r)>0)for(s=e;s<t;s+=r)o=YA(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=YA(s,n[s],n[s+1],o);return o&&t0(o,o.next)&&(Eh(o),o=o.next),o}function qa(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(t0(t,t.next)||wn(t.prev,t,t.next)===0)){if(Eh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Mh(n,e,t,r,i,s,o){if(!n)return;!o&&s&&EG(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?yG(n,r,i,s):vG(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),Eh(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=xG(qa(n),e,t),Mh(n,e,t,r,i,s,2)):o===2&&_G(n,e,t,r,i,s):Mh(qa(n),e,t,r,i,s,1);break}}}function vG(n){const e=n.prev,t=n,r=n.next;if(wn(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(Lc(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&wn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yG(n,e,t,r){const i=n.prev,s=n,o=n.next;if(wn(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,u=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,c=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,f=M_(a,l,e,t,r),p=M_(u,c,e,t,r);let m=n.prevZ,g=n.nextZ;for(;m&&m.z>=f&&g&&g.z<=p;){if(m!==n.prev&&m!==n.next&&Lc(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&wn(m.prev,m,m.next)>=0||(m=m.prevZ,g!==n.prev&&g!==n.next&&Lc(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&wn(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=f;){if(m!==n.prev&&m!==n.next&&Lc(i.x,i.y,s.x,s.y,o.x,o.y,m.x,m.y)&&wn(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=p;){if(g!==n.prev&&g!==n.next&&Lc(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&wn(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function xG(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!t0(i,s)&&vB(i,r,r.next,s)&&Ah(i,s)&&Ah(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),Eh(r),Eh(r.next),r=n=s),r=r.next}while(r!==n);return qa(r)}function _G(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&RG(o,a)){let l=yB(o,a);o=qa(o,o.next),l=qa(l,l.next),Mh(o,e,t,r,i,s),Mh(l,e,t,r,i,s);return}a=a.next}o=o.next}while(o!==n)}function wG(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=gB(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(TG(u));for(i.sort(SG),s=0;s<i.length;s++)bG(i[s],t),t=qa(t,t.next);return t}function SG(n,e){return n.x-e.x}function bG(n,e){if(e=MG(n,e),e){const t=yB(e,n);qa(e,e.next),qa(t,t.next)}}function MG(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const p=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>s){if(s=p,p===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,u=o.y;let c=1/0,f;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&Lc(i<u?r:s,i,l,u,i<u?s:r,i,t.x,t.y)&&(f=Math.abs(i-t.y)/(r-t.x),Ah(t,n)&&(f<c||f===c&&(t.x>o.x||t.x===o.x&&AG(o,t)))&&(o=t,c=f)),t=t.next;while(t!==a);return o}function AG(n,e){return wn(n.prev,n,e.prev)<0&&wn(e.next,n,n.next)<0}function EG(n,e,t,r){let i=n;do i.z===null&&(i.z=M_(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,CG(i)}function CG(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function M_(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TG(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Lc(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function RG(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!PG(n,e)&&(Ah(n,e)&&Ah(e,n)&&BG(n,e)&&(wn(n.prev,n,e.prev)||wn(n,e.prev,e))||t0(n,e)&&wn(n.prev,n,n.next)>0&&wn(e.prev,e,e.next)>0)}function wn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function t0(n,e){return n.x===e.x&&n.y===e.y}function vB(n,e,t,r){const i=Xm(wn(n,e,t)),s=Xm(wn(n,e,r)),o=Xm(wn(t,r,n)),a=Xm(wn(t,r,e));return!!(i!==s&&o!==a||i===0&&Km(n,t,e)||s===0&&Km(n,r,e)||o===0&&Km(t,n,r)||a===0&&Km(t,e,r))}function Km(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Xm(n){return n>0?1:n<0?-1:0}function PG(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ah(n,e){return wn(n.prev,n,n.next)<0?wn(n,e,n.next)>=0&&wn(n,n.prev,e)>=0:wn(n,e,n.prev)<0||wn(n,n.next,e)<0}function BG(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function yB(n,e){const t=new A_(n.i,n.x,n.y),r=new A_(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function YA(n,e,t,r){const i=new A_(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Eh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function A_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function DG(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Zs{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Zs.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];QA(e),qA(r,e);let o=e.length;t.forEach(QA);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,qA(r,t[l]);const a=gG.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function QA(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function qA(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Jh extends vt{constructor(e=new ru([new Ae(.5,.5),new Ae(-.5,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new nt(i,3)),this.setAttribute("uv",new nt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:IG;let S,b=!1,C,E,P,M;x&&(S=x.getSpacedPoints(c),b=!0,p=!1,C=x.computeFrenetFrames(c,!1),E=new J,P=new J,M=new J),p||(v=0,m=0,g=0,y=0);const T=a.extractPoints(u);let R=T.shape;const L=T.holes;if(!Zs.isClockWise(R)){R=R.reverse();for(let Y=0,ee=L.length;Y<ee;Y++){const le=L[Y];Zs.isClockWise(le)&&(L[Y]=le.reverse())}}const H=Zs.triangulateShape(R,L),G=R;for(let Y=0,ee=L.length;Y<ee;Y++){const le=L[Y];R=R.concat(le)}function X(Y,ee,le){return ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().multiplyScalar(le).add(Y)}const $=R.length,ne=H.length;function U(Y,ee,le){let we,Se,Ue;const xe=Y.x-ee.x,Re=Y.y-ee.y,Ie=le.x-Y.x,ye=le.y-Y.y,j=xe*xe+Re*Re,F=xe*ye-Re*Ie;if(Math.abs(F)>Number.EPSILON){const te=Math.sqrt(j),pe=Math.sqrt(Ie*Ie+ye*ye),Ee=ee.x-Re/te,Be=ee.y+xe/te,De=le.x-ye/pe,fe=le.y+Ie/pe,We=((De-Ee)*ye-(fe-Be)*Ie)/(xe*ye-Re*Ie);we=Ee+xe*We-Y.x,Se=Be+Re*We-Y.y;const Le=we*we+Se*Se;if(Le<=2)return new Ae(we,Se);Ue=Math.sqrt(Le/2)}else{let te=!1;xe>Number.EPSILON?Ie>Number.EPSILON&&(te=!0):xe<-Number.EPSILON?Ie<-Number.EPSILON&&(te=!0):Math.sign(Re)===Math.sign(ye)&&(te=!0),te?(we=-Re,Se=xe,Ue=Math.sqrt(j)):(we=xe,Se=Re,Ue=Math.sqrt(j/2))}return new Ae(we/Ue,Se/Ue)}const O=[];for(let Y=0,ee=G.length,le=ee-1,we=Y+1;Y<ee;Y++,le++,we++)le===ee&&(le=0),we===ee&&(we=0),O[Y]=U(G[Y],G[le],G[we]);const z=[];let W,q=O.concat();for(let Y=0,ee=L.length;Y<ee;Y++){const le=L[Y];W=[];for(let we=0,Se=le.length,Ue=Se-1,xe=we+1;we<Se;we++,Ue++,xe++)Ue===Se&&(Ue=0),xe===Se&&(xe=0),W[we]=U(le[we],le[Ue],le[xe]);z.push(W),q=q.concat(W)}for(let Y=0;Y<v;Y++){const ee=Y/v,le=m*Math.cos(ee*Math.PI/2),we=g*Math.sin(ee*Math.PI/2)+y;for(let Se=0,Ue=G.length;Se<Ue;Se++){const xe=X(G[Se],O[Se],we);he(xe.x,xe.y,-le)}for(let Se=0,Ue=L.length;Se<Ue;Se++){const xe=L[Se];W=z[Se];for(let Re=0,Ie=xe.length;Re<Ie;Re++){const ye=X(xe[Re],W[Re],we);he(ye.x,ye.y,-le)}}}const oe=g+y;for(let Y=0;Y<$;Y++){const ee=p?X(R[Y],q[Y],oe):R[Y];b?(P.copy(C.normals[0]).multiplyScalar(ee.x),E.copy(C.binormals[0]).multiplyScalar(ee.y),M.copy(S[0]).add(P).add(E),he(M.x,M.y,M.z)):he(ee.x,ee.y,0)}for(let Y=1;Y<=c;Y++)for(let ee=0;ee<$;ee++){const le=p?X(R[ee],q[ee],oe):R[ee];b?(P.copy(C.normals[Y]).multiplyScalar(le.x),E.copy(C.binormals[Y]).multiplyScalar(le.y),M.copy(S[Y]).add(P).add(E),he(M.x,M.y,M.z)):he(le.x,le.y,f/c*Y)}for(let Y=v-1;Y>=0;Y--){const ee=Y/v,le=m*Math.cos(ee*Math.PI/2),we=g*Math.sin(ee*Math.PI/2)+y;for(let Se=0,Ue=G.length;Se<Ue;Se++){const xe=X(G[Se],O[Se],we);he(xe.x,xe.y,f+le)}for(let Se=0,Ue=L.length;Se<Ue;Se++){const xe=L[Se];W=z[Se];for(let Re=0,Ie=xe.length;Re<Ie;Re++){const ye=X(xe[Re],W[Re],we);b?he(ye.x,ye.y+S[c-1].y,S[c-1].x+le):he(ye.x,ye.y,f+le)}}}ce(),me();function ce(){const Y=i.length/3;if(p){let ee=0,le=$*ee;for(let we=0;we<ne;we++){const Se=H[we];ie(Se[2]+le,Se[1]+le,Se[0]+le)}ee=c+v*2,le=$*ee;for(let we=0;we<ne;we++){const Se=H[we];ie(Se[0]+le,Se[1]+le,Se[2]+le)}}else{for(let ee=0;ee<ne;ee++){const le=H[ee];ie(le[2],le[1],le[0])}for(let ee=0;ee<ne;ee++){const le=H[ee];ie(le[0]+$*c,le[1]+$*c,le[2]+$*c)}}r.addGroup(Y,i.length/3-Y,0)}function me(){const Y=i.length/3;let ee=0;re(G,ee),ee+=G.length;for(let le=0,we=L.length;le<we;le++){const Se=L[le];re(Se,ee),ee+=Se.length}r.addGroup(Y,i.length/3-Y,1)}function re(Y,ee){let le=Y.length;for(;--le>=0;){const we=le;let Se=le-1;Se<0&&(Se=Y.length-1);for(let Ue=0,xe=c+v*2;Ue<xe;Ue++){const Re=$*Ue,Ie=$*(Ue+1),ye=ee+we+Re,j=ee+Se+Re,F=ee+Se+Ie,te=ee+we+Ie;k(ye,j,F,te)}}}function he(Y,ee,le){l.push(Y),l.push(ee),l.push(le)}function ie(Y,ee,le){V(Y),V(ee),V(le);const we=i.length/3,Se=_.generateTopUV(r,i,we-3,we-2,we-1);K(Se[0]),K(Se[1]),K(Se[2])}function k(Y,ee,le,we){V(Y),V(ee),V(we),V(ee),V(le),V(we);const Se=i.length/3,Ue=_.generateSideWallUV(r,i,Se-6,Se-3,Se-2,Se-1);K(Ue[0]),K(Ue[1]),K(Ue[3]),K(Ue[1]),K(Ue[2]),K(Ue[3])}function V(Y){i.push(l[Y*3+0]),i.push(l[Y*3+1]),i.push(l[Y*3+2])}function K(Y){s.push(Y.x),s.push(Y.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return LG(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new IS[i.type]().fromJSON(i)),new Jh(r,e.options)}}const IG={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Ae(s,o),new Ae(a,l),new Ae(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[s*3],v=e[s*3+1],x=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ae(o,1-l),new Ae(u,1-f),new Ae(p,1-g),new Ae(y,1-x)]:[new Ae(a,1-l),new Ae(c,1-f),new Ae(m,1-g),new Ae(v,1-x)]}};function LG(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Kh extends Ko{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kh(e.radius,e.detail)}}class yf extends Ko{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yf(e.radius,e.detail)}}class Xh extends vt{constructor(e=.5,t=1,r=8,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const p=(t-e)/i,m=new J,g=new Ae;for(let y=0;y<=i;y++){for(let v=0;v<=r;v++){const x=s+v/r*o;m.x=f*Math.cos(x),m.y=f*Math.sin(x),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,c.push(g.x,g.y)}f+=p}for(let y=0;y<i;y++){const v=y*(r+1);for(let x=0;x<r;x++){const _=x+v,S=_,b=_+r+1,C=_+r+2,E=_+1;a.push(S,b,E),a.push(b,C,E)}}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(u,3)),this.setAttribute("uv",new nt(c,2))}static fromJSON(e){return new Xh(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yh extends vt{constructor(e=new ru([new Ae(0,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new nt(i,3)),this.setAttribute("normal",new nt(s,3)),this.setAttribute("uv",new nt(o,2));function u(c){const f=i.length/3,p=c.extractPoints(t);let m=p.shape;const g=p.holes;Zs.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,x=g.length;v<x;v++){const _=g[v];Zs.isClockWise(_)===!0&&(g[v]=_.reverse())}const y=Zs.triangulateShape(m,g);for(let v=0,x=g.length;v<x;v++){const _=g[v];m=m.concat(_)}for(let v=0,x=m.length;v<x;v++){const _=m[v];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let v=0,x=y.length;v<x;v++){const _=y[v],S=_[0]+f,b=_[1]+f,C=_[2]+f;r.push(S,b,C),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return FG(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Yh(r,e.curveSegments)}}function FG(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class xf extends vt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new J,p=new J,m=[],g=[],y=[],v=[];for(let x=0;x<=r;x++){const _=[],S=x/r;let b=0;x==0&&o==0?b=.5/t:x==r&&l==Math.PI&&(b=-.5/t);for(let C=0;C<=t;C++){const E=C/t;f.x=-e*Math.cos(i+E*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+E*s)*Math.sin(o+S*a),g.push(f.x,f.y,f.z),p.copy(f).normalize(),y.push(p.x,p.y,p.z),v.push(E+b,1-S),_.push(u++)}c.push(_)}for(let x=0;x<r;x++)for(let _=0;_<t;_++){const S=c[x][_+1],b=c[x][_],C=c[x+1][_],E=c[x+1][_+1];(x!==0||o>0)&&m.push(S,b,E),(x!==r-1||l<Math.PI)&&m.push(b,C,E)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(y,3)),this.setAttribute("uv",new nt(v,2))}static fromJSON(e){return new xf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qh extends Ko{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qh(e.radius,e.detail)}}class qh extends vt{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new J,f=new J,p=new J;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const y=g/i*s,v=m/r*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(y),f.y=(e+t*Math.cos(v))*Math.sin(y),f.z=t*Math.sin(v),a.push(f.x,f.y,f.z),c.x=e*Math.cos(y),c.y=e*Math.sin(y),p.subVectors(f,c).normalize(),l.push(p.x,p.y,p.z),u.push(g/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const y=(i+1)*m+g-1,v=(i+1)*(m-1)+g-1,x=(i+1)*(m-1)+g,_=(i+1)*m+g;o.push(y,v,_),o.push(v,x,_)}this.setIndex(o),this.setAttribute("position",new nt(a,3)),this.setAttribute("normal",new nt(l,3)),this.setAttribute("uv",new nt(u,2))}static fromJSON(e){return new qh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Zh extends vt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new J,p=new J,m=new J,g=new J,y=new J,v=new J,x=new J;for(let S=0;S<=r;++S){const b=S/r*s*Math.PI*2;_(b,s,o,e,m),_(b+.01,s,o,e,g),v.subVectors(g,m),x.addVectors(g,m),y.crossVectors(v,x),x.crossVectors(y,v),y.normalize(),x.normalize();for(let C=0;C<=i;++C){const E=C/i*Math.PI*2,P=-t*Math.cos(E),M=t*Math.sin(E);f.x=m.x+(P*x.x+M*y.x),f.y=m.y+(P*x.y+M*y.y),f.z=m.z+(P*x.z+M*y.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),u.push(p.x,p.y,p.z),c.push(S/r),c.push(C/i)}}for(let S=1;S<=r;S++)for(let b=1;b<=i;b++){const C=(i+1)*(S-1)+(b-1),E=(i+1)*S+(b-1),P=(i+1)*S+b,M=(i+1)*(S-1)+b;a.push(C,E,M),a.push(E,P,M)}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(u,3)),this.setAttribute("uv",new nt(c,2));function _(S,b,C,E,P){const M=Math.cos(S),T=Math.sin(S),R=C/b*S,L=Math.cos(R);P.x=E*(2+L)*.5*M,P.y=E*(2+L)*T*.5,P.z=E*Math.sin(R)*.5}}static fromJSON(e){return new Zh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ep extends vt{constructor(e=new BS(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,u=new Ae;let c=new J;const f=[],p=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new nt(f,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function y(){for(let S=0;S<t;S++)v(S);v(s===!1?t:0),_(),x()}function v(S){c=e.getPointAt(S/t,c);const b=o.normals[S],C=o.binormals[S];for(let E=0;E<=i;E++){const P=E/i*Math.PI*2,M=Math.sin(P),T=-Math.cos(P);l.x=T*b.x+M*C.x,l.y=T*b.y+M*C.y,l.z=T*b.z+M*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function x(){for(let S=1;S<=t;S++)for(let b=1;b<=i;b++){const C=(i+1)*(S-1)+(b-1),E=(i+1)*S+(b-1),P=(i+1)*S+b,M=(i+1)*(S-1)+b;g.push(C,E,M),g.push(E,P,M)}}function _(){for(let S=0;S<=t;S++)for(let b=0;b<=i;b++)u.x=S/t,u.y=b/i,m.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ep(new IS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class xB extends vt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],p=f.start,m=f.count;for(let g=p,y=p+m;g<y;g+=3)for(let v=0;v<3;v++){const x=a.getX(g+v),_=a.getX(g+(v+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,_),ZA(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),ZA(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new nt(t,3))}}}function ZA(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var eE=Object.freeze({__proto__:null,BoxGeometry:ol,CapsuleGeometry:Vh,CircleGeometry:Wh,ConeGeometry:jh,CylinderGeometry:xu,DodecahedronGeometry:$h,EdgesGeometry:mB,ExtrudeGeometry:Jh,IcosahedronGeometry:Kh,LatheGeometry:vf,OctahedronGeometry:yf,PlaneGeometry:pf,PolyhedronGeometry:Ko,RingGeometry:Xh,ShapeGeometry:Yh,SphereGeometry:xf,TetrahedronGeometry:Qh,TorusGeometry:qh,TorusKnotGeometry:Zh,TubeGeometry:ep,WireframeGeometry:xB});class _B extends Mn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ge(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class wB extends Zn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _u extends Mn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xo extends _u{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ge(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class LS extends Mn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FS extends Mn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ge(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kS extends Mn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OS extends Mn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SB extends Mn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ge(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$o,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bB extends Or{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qi(n,e,t){return US(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function $l(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function US(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function MB(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function E_(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function NS(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function kG(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],p=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*i;if(!(g<t||g>=r)){f.push(u.times[m]);for(let y=0;y<c;++y)p.push(u.values[m*c+y])}}f.length!==0&&(u.times=$l(f,u.times.constructor),u.values=$l(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function OG(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let y;if(s<=a.times[0]){const x=c,_=f-c;y=qi(a.values,x,_)}else if(s>=a.times[g]){const x=g*f+c,_=x+f-c;y=qi(a.values,x,_)}else{const x=a.createInterpolant(),_=c,S=f-c;x.evaluate(s),y=qi(x.resultBuffer,_,S)}l==="quaternion"&&new ti().fromArray(y).normalize().conjugate().toArray(y);const v=u.times.length;for(let x=0;x<v;++x){const _=x*m+p;if(l==="quaternion")ti.multiplyQuaternionsFlat(u.values,_,y,0,u.values,_);else{const S=m-p*2;for(let b=0;b<S;++b)u.values[_+b]-=y[b]}}}return n.blendMode=hS,n}var UG=Object.freeze({__proto__:null,arraySlice:qi,convertArray:$l,isTypedArray:US,getKeyframeOrder:MB,sortedArray:E_,flattenJSON:NS,subclip:kG,makeClipAdditive:OG});class _f{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class AB extends _f{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vl,endingEnd:Vl}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Wl:s=e,a=2*t-r;break;case yh:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Wl:o=e,l=2*r-t;break;case yh:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),y=g*g,v=y*g,x=-p*v+2*p*y-p*g,_=(1+p)*v+(-1.5-2*p)*y+(-.5+p)*g+1,S=(-1-m)*v+(1.5+m)*y+.5*g,b=m*v-m*y;for(let C=0;C!==a;++C)s[C]=x*o[c+C]+_*o[u+C]+S*o[l+C]+b*o[f+C];return s}}class zS extends _f{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let p=0;p!==a;++p)s[p]=o[u+p]*f+o[l+p]*c;return s}}class EB extends _f{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$l(t,this.TimeBufferType),this.values=$l(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:$l(e.times,Array),values:$l(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new EB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new AB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zc:t=this.InterpolantFactoryMethodDiscrete;break;case du:t=this.InterpolantFactoryMethodLinear;break;case Dg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zc;case this.InterpolantFactoryMethodLinear:return du;case this.InterpolantFactoryMethodSmooth:return Dg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qi(r,s,o),this.values=qi(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&US(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=qi(this.times),t=qi(this.values),r=this.getValueSize(),i=this.getInterpolation()===Dg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let g=0;g!==r;++g){const y=t[f+g];if(y!==t[p+g]||y!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=qi(e,0,o),this.values=qi(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=qi(this.times,0),t=qi(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Fs.prototype.TimeBufferType=Float32Array;Fs.prototype.ValueBufferType=Float32Array;Fs.prototype.DefaultInterpolation=du;class wu extends Fs{}wu.prototype.ValueTypeName="bool";wu.prototype.ValueBufferType=Array;wu.prototype.DefaultInterpolation=Zc;wu.prototype.InterpolantFactoryMethodLinear=void 0;wu.prototype.InterpolantFactoryMethodSmooth=void 0;class GS extends Fs{}GS.prototype.ValueTypeName="color";class tf extends Fs{}tf.prototype.ValueTypeName="number";class CB extends _f{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)ti.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Za extends Fs{InterpolantFactoryMethodLinear(e){return new CB(this.times,this.values,this.getValueSize(),e)}}Za.prototype.ValueTypeName="quaternion";Za.prototype.DefaultInterpolation=du;Za.prototype.InterpolantFactoryMethodSmooth=void 0;class Su extends Fs{}Su.prototype.ValueTypeName="string";Su.prototype.ValueBufferType=Array;Su.prototype.DefaultInterpolation=Zc;Su.prototype.InterpolantFactoryMethodLinear=void 0;Su.prototype.InterpolantFactoryMethodSmooth=void 0;class nf extends Fs{}nf.prototype.ValueTypeName="vector";class rf{constructor(e,t=-1,r,i=Vv){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ii(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(zG(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Fs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=MB(l);l=E_(l,1,c),u=E_(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new tf(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let p=i[f];p||(i[f]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,g,y){if(m.length!==0){const v=[],x=[];NS(m,v,x,g),v.length!==0&&y.push(new f(p,v,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const p=u[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let y=0;y<p[g].morphTargets.length;y++)m[p[g].morphTargets[y]]=-1;for(const y in m){const v=[],x=[];for(let _=0;_!==p[g].morphTargets.length;++_){const S=p[g];v.push(S.time),x.push(S.morphTarget===y?1:0)}i.push(new tf(".morphTargetInfluence["+y+"]",v,x))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(nf,m+".position",p,"pos",i),r(Za,m+".quaternion",p,"rot",i),r(nf,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function NG(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return tf;case"vector":case"vector2":case"vector3":case"vector4":return nf;case"color":return GS;case"quaternion":return Za;case"bool":case"boolean":return wu;case"string":return Su}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function zG(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=NG(n.type);if(n.times===void 0){const t=[],r=[];NS(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const pu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class n0{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,p=u.length;f<p;f+=2){const m=u[f],g=u[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return g}return null}}}const TB=new n0;class Ur{constructor(e){this.manager=e!==void 0?e:TB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wo={};class GG extends Error{constructor(e,t){super(e),this.response=t}}class xi extends Ur{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=pu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wo[e]!==void 0){wo[e].push({onLoad:t,onProgress:r,onError:i});return}wo[e]=[],wo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=wo[e],f=u.body.getReader(),p=u.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let y=0;const v=new ReadableStream({start(x){_();function _(){f.read().then(({done:S,value:b})=>{if(S)x.close();else{y+=b.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let E=0,P=c.length;E<P;E++){const M=c[E];M.onProgress&&M.onProgress(C)}x.enqueue(b),_()}})}}});return new Response(v)}else throw new GG(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{pu.add(e,u);const c=wo[e];delete wo[e];for(let f=0,p=c.length;f<p;f++){const m=c[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=wo[e];if(c===void 0)throw this.manager.itemError(e),u;delete wo[e];for(let f=0,p=c.length;f<p;f++){const m=c[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class HG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=rf.parse(e[r]);t.push(i)}return t}}class VG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new uB,l=new xi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Ht),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)c(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+y]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Ht),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Ch extends Ur{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=pu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=wh("img");function l(){c(),pu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class WG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=new zh,o=new Ch(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class jG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new nu,a=new xi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);!u||(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Qn,o.wrapT=u.wrapT!==void 0?u.wrapT:Qn,o.magFilter=u.magFilter!==void 0?u.magFilter:Ht,o.minFilter=u.minFilter!==void 0?u.minFilter:Ht,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ro),u.mipmapCount===1&&(o.minFilter=Ht),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class r0 extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=new un,o=new Ch(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class al extends Gt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ge(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class RB extends al{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.groundColor=new Ge(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const tE=new ht,nE=new J,rE=new J;class HS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jv,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new zt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;nE.setFromMatrixPosition(e.matrixWorld),t.position.copy(nE),rE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rE),t.updateMatrixWorld(),tE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $G extends HS{constructor(){super(new Vn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=_h*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class VS extends al{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.target=new Gt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new $G}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const iE=new ht,hd=new J,d1=new J;class JG extends HS{constructor(){super(new Vn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new zt(2,1,1,1),new zt(0,1,1,1),new zt(3,1,1,1),new zt(1,1,1,1),new zt(3,0,1,1),new zt(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),hd.setFromMatrixPosition(e.matrixWorld),r.position.copy(hd),d1.copy(r.position),d1.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(d1),r.updateMatrixWorld(),i.makeTranslation(-hd.x,-hd.y,-hd.z),iE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iE)}}class WS extends al{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new JG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KG extends HS{constructor(){super(new mf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jS extends al{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.target=new Gt,this.shadow=new KG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class PB extends al{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BB extends al{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class DB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class i0 extends al{constructor(e=new DB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class s0 extends Ur{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new xi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=s0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ge().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ge().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ae().fromArray(o.value);break;case"v3":i.uniforms[s].value=new J().fromArray(o.value);break;case"v4":i.uniforms[s].value=new zt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Ir().fromArray(o.value);break;case"m4":i.uniforms[s].value=new ht().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ae().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ae().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:_B,SpriteMaterial:MS,RawShaderMaterial:wB,ShaderMaterial:Zn,PointsMaterial:qv,MeshPhysicalMaterial:Xo,MeshStandardMaterial:_u,MeshPhongMaterial:LS,MeshToonMaterial:FS,MeshNormalMaterial:kS,MeshLambertMaterial:OS,MeshDepthMaterial:Jv,MeshDistanceMaterial:Kv,MeshBasicMaterial:qr,MeshMatcapMaterial:SB,LineDashedMaterial:bB,LineBasicMaterial:Or,Material:Mn};return new t[e]}}class eo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $S extends vt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class IB extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,g){if(t[g]!==void 0)return t[g];const v=m.interleavedBuffers[g],x=s(m,v.buffer),_=Dc(v.type,x),S=new Gh(_,v.stride);return S.uuid=v.uuid,t[g]=S,S}function s(m,g){if(r[g]!==void 0)return r[g];const v=m.arrayBuffers[g],x=new Uint32Array(v).buffer;return r[g]=x,x}const o=e.isInstancedBufferGeometry?new $S:new vt,a=e.data.index;if(a!==void 0){const m=Dc(a.type,a.array);o.setIndex(new St(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const v=i(e.data,g.data);y=new Qa(v,g.itemSize,g.offset,g.normalized)}else{const v=Dc(g.type,g.array),x=g.isInstancedBufferAttribute?hu:St;y=new x(v,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),g.updateRange!==void 0&&(y.updateRange.offset=g.updateRange.offset,y.updateRange.count=g.updateRange.count),o.setAttribute(m,y)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],y=[];for(let v=0,x=g.length;v<x;v++){const _=g[v];let S;if(_.isInterleavedBufferAttribute){const b=i(e.data,_.data);S=new Qa(b,_.itemSize,_.offset,_.normalized)}else{const b=Dc(_.type,_.array);S=new St(b,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),y.push(S)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,g=f.length;m!==g;++m){const y=f[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new J;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new io(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class XG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?eo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new xi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?eo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new xi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new ru().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Hh().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new IB;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in eE?a=eE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new s0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=rf.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Dc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new n0(t);s=new Ch(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],p=f.url;if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const v=p[g],x=a(v);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new nu(x.data,x.width,x.height)))}i[f.uuid]=new jl(m)}else{const m=a(f.url);i[f.uuid]=new jl(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Dc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Ch(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],g=await s(m);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new nu(g.data,g.width,g.height)))}r[l.uuid]=new jl(c)}else{const c=await s(l.url);r[l.uuid]=new jl(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new zh,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new nu:c=new un,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,YG)),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],sE),c.wrapT=r(a.wrap[1],sE)),a.format!==void 0&&(c.format=a.format),a.type!==void 0&&(c.type=a.type),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,oE)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,oE)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const v=p[g];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let c,f;switch(e.type){case"Scene":o=new Sh,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ge(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Yv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Xv(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Vn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new mf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new PB(e.color,e.intensity);break;case"DirectionalLight":o=new jS(e.color,e.intensity);break;case"PointLight":o=new WS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new BB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new VS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new RB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new i0().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new AS(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new Bn(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new lB(c,f,p),o.instanceMatrix=new hu(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new hu(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new aB;break;case"Line":o=new Ho(a(e.geometry),l(e.material));break;case"LineLoop":o=new ES(a(e.geometry),l(e.material));break;case"LineSegments":o=new ds(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new CS(a(e.geometry),l(e.material));break;case"Sprite":o=new oB(l(e.material));break;case"Group":o=new Lo;break;case"Bone":o=new Qv;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],y=o.getObjectByProperty("uuid",g.object);y!==void 0&&o.addLevel(y,g.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const YG={UVMapping:Gv,CubeReflectionMapping:Ja,CubeRefractionMapping:Ka,EquirectangularReflectionMapping:ph,EquirectangularRefractionMapping:mh,CubeUVReflectionMapping:cf},sE={RepeatWrapping:Xa,ClampToEdgeWrapping:Qn,MirroredRepeatWrapping:qc},oE={NearestFilter:on,NearestMipmapNearestFilter:gh,NearestMipmapLinearFilter:vh,LinearFilter:Ht,LinearMipmapNearestFilter:Hv,LinearMipmapLinearFilter:ro};class LB extends Ur{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=pu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){pu.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Ym;const JS={getContext:function(){return Ym===void 0&&(Ym=new(window.AudioContext||window.webkitAudioContext)),Ym},setContext:function(n){Ym=n}};class QG extends Ur{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new xi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);JS.getContext().decodeAudioData(l,function(c){t(c)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class qG extends i0{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Ge().set(e),s=new Ge().set(t),o=new J(i.r,i.g,i.b),a=new J(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class ZG extends i0{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Ge().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const aE=new ht,lE=new ht,Cl=new ht;class e6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Cl.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Zl*t.fov*.5)/t.zoom;let a,l;lE.elements[12]=-i,aE.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Cl.elements[0]=2*t.near/(l-a),Cl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Cl),a=-o*t.aspect-s,l=o*t.aspect-s,Cl.elements[0]=2*t.near/(l-a),Cl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Cl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(lE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(aE)}}class KS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uE(){return(typeof performance>"u"?Date:performance).now()}const Tl=new J,cE=new ti,t6=new J,Rl=new J;class n6 extends Gt{constructor(){super(),this.type="AudioListener",this.context=JS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Tl,cE,t6),Rl.set(0,0,-1).applyQuaternion(cE),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Tl.x,i),t.positionY.linearRampToValueAtTime(Tl.y,i),t.positionZ.linearRampToValueAtTime(Tl.z,i),t.forwardX.linearRampToValueAtTime(Rl.x,i),t.forwardY.linearRampToValueAtTime(Rl.y,i),t.forwardZ.linearRampToValueAtTime(Rl.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Tl.x,Tl.y,Tl.z),t.setOrientation(Rl.x,Rl.y,Rl.z,r.x,r.y,r.z)}}class FB extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Pl=new J,fE=new ti,r6=new J,Bl=new J;class i6 extends FB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Pl,fE,r6),Bl.set(0,0,1).applyQuaternion(fE);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Pl.x,r),t.positionY.linearRampToValueAtTime(Pl.y,r),t.positionZ.linearRampToValueAtTime(Pl.z,r),t.orientationX.linearRampToValueAtTime(Bl.x,r),t.orientationY.linearRampToValueAtTime(Bl.y,r),t.orientationZ.linearRampToValueAtTime(Bl.z,r)}else t.setPosition(Pl.x,Pl.y,Pl.z),t.setOrientation(Bl.x,Bl.y,Bl.z)}}class s6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class kB{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){ti.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;ti.multiplyQuaternionsFlat(e,o,e,t,e,r),ti.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const XS="\\[\\]\\.:\\/",o6=new RegExp("["+XS+"]","g"),YS="[^"+XS+"]",a6="[^"+XS.replace("\\.","")+"]",l6=/((?:WC+[\/:])*)/.source.replace("WC",YS),u6=/(WCOD+)?/.source.replace("WCOD",a6),c6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YS),f6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YS),d6=new RegExp("^"+l6+u6+c6+f6+"$"),h6=["material","materials","bones","map"];class p6{constructor(e,t,r){const i=r||Nt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Nt{constructor(e,t,r){this.path=t,this.parsedPath=r||Nt.parseTrackName(t),this.node=Nt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Nt.Composite(e,t,r):new Nt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(o6,"")}static parseTrackName(e){const t=d6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);h6.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Nt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=p6;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class m6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ii(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const p=arguments[c],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let y=0,v=o;y!==v;++y)s[y].push(new Nt(p,r[y],i[y]))}else if(g<u){a=e[g];const y=--u,v=e[y];t[v.uuid]=g,e[g]=v,t[m]=y,e[y]=p;for(let x=0,_=o;x!==_;++x){const S=s[x],b=S[y];let C=S[g];S[g]=b,C===void 0&&(C=new Nt(p,r[x],i[x])),S[y]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,p=e[f];t[p.uuid]=c,e[c]=p,t[u]=f,e[f]=l;for(let m=0,g=i;m!==g;++m){const y=r[m],v=y[f],x=y[c];y[c]=v,y[f]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const p=--s,m=e[p],g=--o,y=e[g];t[m.uuid]=f,e[f]=m,t[y.uuid]=p,e[p]=y,e.pop();for(let v=0,x=i;v!==x;++v){const _=r[v],S=_[p],b=_[g];_[f]=S,_[p]=b,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let g=0,y=i;g!==y;++g){const v=r[g];v[f]=v[p],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=c,m=l.length;p!==m;++p){const g=l[p];f[p]=new Nt(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class g6{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Vl,endingEnd:Vl};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=GP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case hS:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case Vv:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===HP;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===zP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Wl,i.endingEnd=Wl):(e?i.endingStart=this.zeroSlopeAtStart?Wl:Vl:i.endingStart=yh,t?i.endingEnd=this.zeroSlopeAtEnd?Wl:Vl:i.endingEnd=yh)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const v6=new Float32Array(1);class y6 extends fs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let g=c[m];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=t&&t._propertyBindings[f].binding.parsedPath;g=new kB(Nt.create(r,m,y),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new zS(new Float32Array(2),new Float32Array(2),1,v6),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?rf.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Vv),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new g6(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?rf.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class et{constructor(e){this.value=e}clone(){return new et(this.value.clone===void 0?this.value:this.value.clone())}}let x6=0;class _6 extends fs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:x6++}),this.name="",this.usage=xh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class w6 extends Gh{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class S6{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class OB{constructor(e,t,r=0,i=1/0){this.ray=new ff(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new tu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return C_(e,this,r,t),r.sort(dE),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)C_(e[i],this,r,t);return r.sort(dE),r}}function dE(n,e){return n.distance-e.distance}function C_(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)C_(i[s],e,t,!0)}}class b6{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class M6{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const hE=new Ae;class A6{constructor(e=new Ae(1/0,1/0),t=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=hE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pE=new J,Qm=new J;class E6{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){pE.subVectors(e,this.start),Qm.subVectors(this.end,this.start);const r=Qm.dot(Qm);let s=Qm.dot(pE)/r;return t&&(s=Un(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const mE=new J;class C6 extends Gt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new vt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new nt(i,3));const s=new Or({fog:!1,toneMapped:!1});this.cone=new ds(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ya=new J,qm=new ht,h1=new ht;class T6 extends ds{constructor(e){const t=UB(e),r=new vt,i=[],s=[],o=new Ge(0,0,1),a=new Ge(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new nt(i,3)),r.setAttribute("color",new nt(s,3));const l=new Or({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");h1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(qm.multiplyMatrices(h1,a.matrixWorld),ya.setFromMatrixPosition(qm),i.setXYZ(o,ya.x,ya.y,ya.z),qm.multiplyMatrices(h1,a.parent.matrixWorld),ya.setFromMatrixPosition(qm),i.setXYZ(o+1,ya.x,ya.y,ya.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function UB(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,UB(n.children[t]));return e}class R6 extends Bn{constructor(e,t,r){const i=new xf(t,4,2),s=new qr({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const P6=new J,gE=new Ge,vE=new Ge;class B6 extends Gt{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new yf(t);i.rotateY(Math.PI*.5),this.material=new qr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new St(o,3)),this.add(new Bn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");gE.copy(this.light.color),vE.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?gE:vE;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(P6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class D6 extends ds{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ge(r),i=new Ge(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=p===s?r:i;y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3}const c=new vt;c.setAttribute("position",new nt(l,3)),c.setAttribute("color",new nt(u,3));const f=new Or({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}}class I6 extends ds{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Ge(s),o=new Ge(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const y=f&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let g=0;g<i;g++){let y=g/i*(Math.PI*2),v=Math.sin(y)*m,x=Math.cos(y)*m;a.push(v,0,x),l.push(p.r,p.g,p.b),y=(g+1)/i*(Math.PI*2),v=Math.sin(y)*m,x=Math.cos(y)*m,a.push(v,0,x),l.push(p.r,p.g,p.b)}}const u=new vt;u.setAttribute("position",new nt(a,3)),u.setAttribute("color",new nt(l,3));const c=new Or({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}}const yE=new J,Zm=new J,xE=new J;class L6 extends Gt{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new vt;i.setAttribute("position",new nt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Or({fog:!1,toneMapped:!1});this.lightPlane=new Ho(i,s),this.add(this.lightPlane),i=new vt,i.setAttribute("position",new nt([0,0,0,0,0,1],3)),this.targetLine=new Ho(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){yE.setFromMatrixPosition(this.light.matrixWorld),Zm.setFromMatrixPosition(this.light.target.matrixWorld),xE.subVectors(Zm,yE),this.lightPlane.lookAt(Zm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Zm),this.targetLine.scale.z=xE.length()}}const eg=new J,Tn=new hf;class F6 extends ds{constructor(e){const t=new vt,r=new Or({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new nt(i,3)),t.setAttribute("color",new nt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ge(16755200),c=new Ge(16711680),f=new Ge(43775),p=new Ge(16777215),m=new Ge(3355443);this.setColors(u,c,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Tn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kn("c",t,e,Tn,0,0,-1),kn("t",t,e,Tn,0,0,1),kn("n1",t,e,Tn,-r,-i,-1),kn("n2",t,e,Tn,r,-i,-1),kn("n3",t,e,Tn,-r,i,-1),kn("n4",t,e,Tn,r,i,-1),kn("f1",t,e,Tn,-r,-i,1),kn("f2",t,e,Tn,r,-i,1),kn("f3",t,e,Tn,-r,i,1),kn("f4",t,e,Tn,r,i,1),kn("u1",t,e,Tn,r*.7,i*1.1,-1),kn("u2",t,e,Tn,-r*.7,i*1.1,-1),kn("u3",t,e,Tn,0,i*2,-1),kn("cf1",t,e,Tn,-r,0,1),kn("cf2",t,e,Tn,r,0,1),kn("cf3",t,e,Tn,0,-i,1),kn("cf4",t,e,Tn,0,i,1),kn("cn1",t,e,Tn,-r,0,-1),kn("cn2",t,e,Tn,r,0,-1),kn("cn3",t,e,Tn,0,-i,-1),kn("cn4",t,e,Tn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kn(n,e,t,r,i,s,o){eg.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],eg.x,eg.y,eg.z)}}const tg=new Jo;class k6 extends ds{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new vt;s.setIndex(new St(r,1)),s.setAttribute("position",new St(i,3)),super(s,new Or({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&tg.setFromObject(this.object),tg.isEmpty())return;const t=tg.min,r=tg.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class O6 extends ds{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new vt;s.setIndex(new St(r,1)),s.setAttribute("position",new nt(i,3)),super(s,new Or({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class U6 extends Ho{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new vt;o.setAttribute("position",new nt(s,3)),o.computeBoundingSphere(),super(o,new Or({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new vt;l.setAttribute("position",new nt(a,3)),l.computeBoundingSphere(),this.add(new Bn(l,new qr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const _E=new J;let ng,p1;class N6 extends Gt{constructor(e=new J(0,0,1),t=new J(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",ng===void 0&&(ng=new vt,ng.setAttribute("position",new nt([0,0,0,0,1,0],3)),p1=new xu(0,.5,1,5,1),p1.translate(0,-.5,0)),this.position.copy(t),this.line=new Ho(ng,new Or({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bn(p1,new qr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_E.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_E,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class z6 extends ds{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new vt;i.setAttribute("position",new nt(t,3)),i.setAttribute("color",new nt(r,3));const s=new Or({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ge,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class G6{constructor(){this.type="ShapePath",this.color=new Ge,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new bh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const _=[];for(let S=0,b=x.length;S<b;S++){const C=x[S],E=new ru;E.curves=C.curves,_.push(E)}return _}function r(x,_){const S=_.length;let b=!1;for(let C=S-1,E=0;E<S;C=E++){let P=_[C],M=_[E],T=M.x-P.x,R=M.y-P.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(P=_[E],T=-T,M=_[C],R=-R),x.y<P.y||x.y>M.y)continue;if(x.y===P.y){if(x.x===P.x)return!0}else{const L=R*(x.x-P.x)-T*(x.y-P.y);if(L===0)return!0;if(L<0)continue;b=!b}}else{if(x.y!==P.y)continue;if(M.x<=x.x&&x.x<=P.x||P.x<=x.x&&x.x<=M.x)return!0}}return b}const i=Zs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new ru,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],p=[];let m=[],g=0,y;p[g]=void 0,m[g]=[];for(let x=0,_=s.length;x<_;x++)a=s[x],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!c&&p[g]&&g++,p[g]={s:new ru,p:y},p[g].s.curves=a.curves,c&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!p[0])return t(s);if(p.length>1){let x=!1,_=0;for(let S=0,b=p.length;S<b;S++)f[S]=[];for(let S=0,b=p.length;S<b;S++){const C=m[S];for(let E=0;E<C.length;E++){const P=C[E];let M=!0;for(let T=0;T<p.length;T++)r(P.p,p[T].p)&&(S!==T&&_++,M?(M=!1,f[T].push(P)):x=!0);M&&f[S].push(P)}}_>0&&x===!1&&(m=f)}let v;for(let x=0,_=p.length;x<_;x++){l=p[x].s,u.push(l),v=m[x];for(let S=0,b=v.length;S<b;S++)l.holes.push(v[S].h)}return u}}const Co=H6();function H6(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function V6(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Un(n,-65504,65504),Co.floatView[0]=n;const e=Co.uint32View[0],t=e>>23&511;return Co.baseTable[t]+((e&8388607)>>Co.shiftTable[t])}function W6(n){const e=n>>10;return Co.uint32View[0]=Co.mantissaTable[Co.offsetTable[e]+(n&1023)]+Co.exponentTable[e],Co.floatView[0]}var j6=Object.freeze({__proto__:null,toHalfFloat:V6,fromHalfFloat:W6});function $6(){console.error("THREE.ImmediateRenderObject has been removed.")}class NB extends dn{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}}class J6 extends Nh{constructor(e,t,r,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,r,i)}}class zB extends Wv{constructor(e,t,r,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,r,i)}}class K6 extends ol{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class X6 extends Vh{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class Y6 extends Wh{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class Q6 extends jh{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class q6 extends xu{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class Z6 extends $h{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class e8 extends Jh{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class t8 extends Kh{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class n8 extends vf{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class r8 extends yf{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class dv extends pf{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class i8 extends Ko{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class s8 extends Xh{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class o8 extends Yh{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class a8 extends xf{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class l8 extends Qh{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class u8 extends qh{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class c8 extends Zh{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class f8 extends ep{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:il}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=il);const Th=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:fS,AddEquation:Ul,AddOperation:_P,AdditiveAnimationBlendMode:hS,AdditiveBlending:Jx,AlphaFormat:PP,AlwaysDepth:hP,AlwaysStencilFunc:jP,AmbientLight:PB,AmbientLightProbe:ZG,AnimationClip:rf,AnimationLoader:HG,AnimationMixer:y6,AnimationObjectGroup:m6,AnimationUtils:UG,ArcCurve:cB,ArrayCamera:rB,ArrowHelper:N6,Audio:FB,AudioAnalyser:s6,AudioContext:JS,AudioListener:n6,AudioLoader:QG,AxesHelper:z6,BackSide:ar,BasicDepthPacking:sl,BasicShadowMap:vk,Bone:Qv,BooleanKeyframeTrack:wu,Box2:A6,Box3:Jo,Box3Helper:O6,BoxBufferGeometry:K6,BoxGeometry:ol,BoxHelper:k6,BufferAttribute:St,BufferGeometry:vt,BufferGeometryLoader:IB,ByteType:AP,Cache:pu,Camera:hf,CameraHelper:F6,CanvasTexture:lG,CapsuleBufferGeometry:X6,CapsuleGeometry:Vh,CatmullRomCurve3:fB,CineonToneMapping:bP,CircleBufferGeometry:Y6,CircleGeometry:Wh,ClampToEdgeWrapping:Qn,Clock:KS,Color:Ge,ColorKeyframeTrack:GS,ColorManagement:Qi,CompressedTexture:uB,CompressedTextureLoader:VG,ConeBufferGeometry:Q6,ConeGeometry:jh,CubeCamera:XP,CubeReflectionMapping:Ja,CubeRefractionMapping:Ka,CubeTexture:zh,CubeTextureLoader:WG,CubeUVReflectionMapping:cf,CubicBezierCurve:RS,CubicBezierCurve3:dB,CubicInterpolant:AB,CullFaceBack:$x,CullFaceFront:ZR,CullFaceFrontBack:gk,CullFaceNone:qR,Curve:Ls,CurvePath:pB,CustomBlending:eP,CustomToneMapping:MP,CylinderBufferGeometry:q6,CylinderGeometry:xu,Cylindrical:M6,Data3DTexture:Wv,DataArrayTexture:Nh,DataTexture:nu,DataTexture2DArray:J6,DataTexture3D:zB,DataTextureLoader:jG,DataUtils:j6,DecrementStencilOp:Ck,DecrementWrapStencilOp:Rk,DefaultLoadingManager:TB,DepthFormat:Ha,DepthStencilFormat:Ya,DepthTexture:SS,DirectionalLight:jS,DirectionalLightHelper:L6,DiscreteInterpolant:EB,DodecahedronBufferGeometry:Z6,DodecahedronGeometry:$h,DoubleSide:Dr,DstAlphaFactor:aP,DstColorFactor:uP,DynamicCopyUsage:Wk,DynamicDrawUsage:Uk,DynamicReadUsage:Gk,EdgesGeometry:mB,EllipseCurve:Zv,EqualDepth:mP,EqualStencilFunc:Ik,EquirectangularReflectionMapping:ph,EquirectangularRefractionMapping:mh,Euler:df,EventDispatcher:fs,ExtrudeBufferGeometry:e8,ExtrudeGeometry:Jh,FileLoader:xi,Float16BufferAttribute:MO,Float32BufferAttribute:nt,Float64BufferAttribute:AO,FloatType:mr,Fog:Yv,FogExp2:Xv,FramebufferTexture:aG,FrontSide:to,Frustum:jv,GLBufferAttribute:S6,GLSL1:$k,GLSL3:x_,GreaterDepth:vP,GreaterEqualDepth:gP,GreaterEqualStencilFunc:Ok,GreaterStencilFunc:Fk,GridHelper:D6,Group:Lo,HalfFloatType:fu,HemisphereLight:RB,HemisphereLightHelper:B6,HemisphereLightProbe:qG,IcosahedronBufferGeometry:t8,IcosahedronGeometry:Kh,ImageBitmapLoader:LB,ImageLoader:Ch,ImageUtils:vS,ImmediateRenderObject:$6,IncrementStencilOp:Ek,IncrementWrapStencilOp:Tk,InstancedBufferAttribute:hu,InstancedBufferGeometry:$S,InstancedInterleavedBuffer:w6,InstancedMesh:lB,Int16BufferAttribute:SO,Int32BufferAttribute:bO,Int8BufferAttribute:xO,IntType:CP,InterleavedBuffer:Gh,InterleavedBufferAttribute:Qa,Interpolant:_f,InterpolateDiscrete:Zc,InterpolateLinear:du,InterpolateSmooth:Dg,InvertStencilOp:Pk,KeepStencilOp:Ig,KeyframeTrack:Fs,LOD:aB,LatheBufferGeometry:n8,LatheGeometry:vf,Layers:tu,LessDepth:pP,LessEqualDepth:uv,LessEqualStencilFunc:Lk,LessStencilFunc:Dk,Light:al,LightProbe:i0,Line:Ho,Line3:E6,LineBasicMaterial:Or,LineCurve:e0,LineCurve3:hB,LineDashedMaterial:bB,LineLoop:ES,LineSegments:ds,LinearEncoding:Fi,LinearFilter:Ht,LinearInterpolant:zS,LinearMipMapLinearFilter:wk,LinearMipMapNearestFilter:_k,LinearMipmapLinearFilter:ro,LinearMipmapNearestFilter:Hv,LinearSRGBColorSpace:Da,LinearToneMapping:wP,Loader:Ur,LoaderUtils:eo,LoadingManager:n0,LoopOnce:zP,LoopPingPong:HP,LoopRepeat:GP,LuminanceAlphaFormat:IP,LuminanceFormat:DP,MOUSE:pk,Material:Mn,MaterialLoader:s0,MathUtils:Uh,Matrix3:Ir,Matrix4:ht,MaxEquation:Qx,Mesh:Bn,MeshBasicMaterial:qr,MeshDepthMaterial:Jv,MeshDistanceMaterial:Kv,MeshLambertMaterial:OS,MeshMatcapMaterial:SB,MeshNormalMaterial:kS,MeshPhongMaterial:LS,MeshPhysicalMaterial:Xo,MeshStandardMaterial:_u,MeshToonMaterial:FS,MinEquation:Yx,MirroredRepeatWrapping:qc,MixOperation:xP,MultiplyBlending:Xx,MultiplyOperation:Oh,NearestFilter:on,NearestMipMapLinearFilter:xk,NearestMipMapNearestFilter:yk,NearestMipmapLinearFilter:vh,NearestMipmapNearestFilter:gh,NeverDepth:dP,NeverStencilFunc:Bk,NoBlending:vr,NoColorSpace:bk,NoToneMapping:Ps,NormalAnimationBlendMode:Vv,NormalBlending:ql,NotEqualDepth:yP,NotEqualStencilFunc:kk,NumberKeyframeTrack:tf,Object3D:Gt,ObjectLoader:XG,ObjectSpaceNormalMap:WP,OctahedronBufferGeometry:r8,OctahedronGeometry:yf,OneFactor:iP,OneMinusDstAlphaFactor:lP,OneMinusDstColorFactor:cP,OneMinusSrcAlphaFactor:cS,OneMinusSrcColorFactor:oP,OrthographicCamera:mf,PCFShadowMap:aS,PCFSoftShadowMap:lS,PMREMGenerator:w_,Path:bh,PerspectiveCamera:Vn,Plane:Ca,PlaneBufferGeometry:dv,PlaneGeometry:pf,PlaneHelper:U6,PointLight:WS,PointLightHelper:R6,Points:CS,PointsMaterial:qv,PolarGridHelper:I6,PolyhedronBufferGeometry:i8,PolyhedronGeometry:Ko,PositionalAudio:i6,PropertyBinding:Nt,PropertyMixer:kB,QuadraticBezierCurve:PS,QuadraticBezierCurve3:BS,Quaternion:ti,QuaternionKeyframeTrack:Za,QuaternionLinearInterpolant:CB,REVISION:il,RGBADepthPacking:mS,RGBAFormat:Qr,RGBAIntegerFormat:UP,RGBA_ASTC_10x10_Format:m_,RGBA_ASTC_10x5_Format:d_,RGBA_ASTC_10x6_Format:h_,RGBA_ASTC_10x8_Format:p_,RGBA_ASTC_12x10_Format:g_,RGBA_ASTC_12x12_Format:v_,RGBA_ASTC_4x4_Format:i_,RGBA_ASTC_5x4_Format:s_,RGBA_ASTC_5x5_Format:o_,RGBA_ASTC_6x5_Format:a_,RGBA_ASTC_6x6_Format:l_,RGBA_ASTC_8x5_Format:u_,RGBA_ASTC_8x6_Format:c_,RGBA_ASTC_8x8_Format:f_,RGBA_BPTC_Format:y_,RGBA_ETC2_EAC_Format:r_,RGBA_PVRTC_2BPPV1_Format:t_,RGBA_PVRTC_4BPPV1_Format:e_,RGBA_S3TC_DXT1_Format:Rg,RGBA_S3TC_DXT3_Format:Pg,RGBA_S3TC_DXT5_Format:Bg,RGBFormat:BP,RGB_ETC1_Format:NP,RGB_ETC2_Format:n_,RGB_PVRTC_2BPPV1_Format:Zx,RGB_PVRTC_4BPPV1_Format:qx,RGB_S3TC_DXT1_Format:Tg,RGFormat:kP,RGIntegerFormat:OP,RawShaderMaterial:wB,Ray:ff,Raycaster:OB,RectAreaLight:BB,RedFormat:LP,RedIntegerFormat:FP,ReinhardToneMapping:SP,RepeatWrapping:Xa,ReplaceStencilOp:Ak,ReverseSubtractEquation:nP,RingBufferGeometry:s8,RingGeometry:Xh,SRGBColorSpace:Xs,Scene:Sh,ShaderChunk:ut,ShaderLib:Cs,ShaderMaterial:Zn,ShadowMaterial:_B,Shape:ru,ShapeBufferGeometry:o8,ShapeGeometry:Yh,ShapePath:G6,ShapeUtils:Zs,ShortType:EP,Skeleton:Hh,SkeletonHelper:T6,SkinnedMesh:AS,Source:jl,Sphere:io,SphereBufferGeometry:a8,SphereGeometry:xf,Spherical:b6,SphericalHarmonics3:DB,SplineCurve:DS,SpotLight:VS,SpotLightHelper:C6,Sprite:oB,SpriteMaterial:MS,SrcAlphaFactor:uS,SrcAlphaSaturateFactor:fP,SrcColorFactor:sP,StaticCopyUsage:Vk,StaticDrawUsage:xh,StaticReadUsage:zk,StereoCamera:e6,StreamCopyUsage:jk,StreamDrawUsage:Nk,StreamReadUsage:Hk,StringKeyframeTrack:Su,SubtractEquation:tP,SubtractiveBlending:Kx,TOUCH:mk,TangentSpaceNormalMap:$o,TetrahedronBufferGeometry:l8,TetrahedronGeometry:Qh,Texture:un,TextureLoader:r0,TorusBufferGeometry:u8,TorusGeometry:qh,TorusKnotBufferGeometry:c8,TorusKnotGeometry:Zh,Triangle:ns,TriangleFanDrawMode:pS,TriangleStripDrawMode:VP,TrianglesDrawMode:Sk,TubeBufferGeometry:f8,TubeGeometry:ep,UVMapping:Gv,Uint16BufferAttribute:yS,Uint32BufferAttribute:xS,Uint8BufferAttribute:_O,Uint8ClampedBufferAttribute:wO,Uniform:et,UniformsGroup:_6,UniformsLib:Je,UniformsUtils:_S,UnsignedByteType:xr,UnsignedInt248Type:Ga,UnsignedIntType:Do,UnsignedShort4444Type:TP,UnsignedShort5551Type:RP,UnsignedShortType:dS,VSMShadowMap:Bc,Vector2:Ae,Vector3:J,Vector4:zt,VectorKeyframeTrack:nf,VideoTexture:oG,WebGL1Renderer:iB,WebGL3DRenderTarget:uO,WebGLArrayRenderTarget:lO,WebGLCubeRenderTarget:YP,WebGLMultipleRenderTargets:cO,WebGLMultisampleRenderTarget:NB,WebGLRenderTarget:dn,WebGLRenderer:bS,WebGLUtils:nB,WireframeGeometry:xB,WrapAroundEnding:yh,ZeroCurvatureEnding:Vl,ZeroFactor:rP,ZeroSlopeEnding:Wl,ZeroStencilOp:Mk,_SRGBAFormat:cv,sRGBEncoding:gt},Symbol.toStringTag,{value:"Module"}));var Vc={exports:{}},bu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */bu.ConcurrentRoot=1;bu.ContinuousEventPriority=4;bu.DefaultEventPriority=16;bu.DiscreteEventPriority=1;bu.IdleEventPriority=536870912;bu.LegacyRoot=0;(function(n){n.exports=bu})(Vc);function d8(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const p=e;e=c?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(e);function m(){const g=c(e);if(!f(p,g)){const y=p;u(p=g,y)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const h8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),wE=h8?N.exports.useEffect:N.exports.useLayoutEffect;function GB(n){const e=typeof n=="function"?d8(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=N.exports.useReducer(v=>v+1,0),o=e.getState(),a=N.exports.useRef(o),l=N.exports.useRef(r),u=N.exports.useRef(i),c=N.exports.useRef(!1),f=N.exports.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(p=r(o),m=!i(f.current,p)),wE(()=>{m&&(f.current=p),a.current=o,l.current=r,u.current=i,c.current=!1});const g=N.exports.useRef(o);wE(()=>{const v=()=>{try{const _=e.getState(),S=l.current(_);u.current(f.current,S)||(a.current=_,f.current=S,s())}catch{c.current=!0,s()}},x=e.subscribe(v);return e.getState()!==g.current&&v(),x},[]);const y=m?p:f.current;return N.exports.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var HB={exports:{}},m1={exports:{}},g1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function p8(){return SE||(SE=1,function(n){function e(U,O){var z=U.length;U.push(O);e:for(;0<z;){var W=z-1>>>1,q=U[W];if(0<i(q,O))U[W]=O,U[z]=q,z=W;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var O=U[0],z=U.pop();if(z!==O){U[0]=z;e:for(var W=0,q=U.length,oe=q>>>1;W<oe;){var ce=2*(W+1)-1,me=U[ce],re=ce+1,he=U[re];if(0>i(me,z))re<q&&0>i(he,me)?(U[W]=he,U[re]=z,W=re):(U[W]=me,U[ce]=z,W=ce);else if(re<q&&0>i(he,z))U[W]=he,U[re]=z,W=re;else break e}}return O}function i(U,O){var z=U.sortIndex-O.sortIndex;return z!==0?z:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var O=t(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=U)r(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function b(U){if(y=!1,S(U),!g)if(t(l)!==null)g=!0,$(C);else{var O=t(u);O!==null&&ne(b,O.startTime-U)}}function C(U,O){g=!1,y&&(y=!1,x(M),M=-1),m=!0;var z=p;try{for(S(O),f=t(l);f!==null&&(!(f.expirationTime>O)||U&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var q=W(f.expirationTime<=O);O=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&r(l),S(O)}else r(l);f=t(l)}if(f!==null)var oe=!0;else{var ce=t(u);ce!==null&&ne(b,ce.startTime-O),oe=!1}return oe}finally{f=null,p=z,m=!1}}var E=!1,P=null,M=-1,T=5,R=-1;function L(){return!(n.unstable_now()-R<T)}function I(){if(P!==null){var U=n.unstable_now();R=U;var O=!0;try{O=P(!0,U)}finally{O?H():(E=!1,P=null)}}else E=!1}var H;if(typeof _=="function")H=function(){_(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,X=G.port2;G.port1.onmessage=I,H=function(){X.postMessage(null)}}else H=function(){v(I,0)};function $(U){P=U,E||(E=!0,H())}function ne(U,O){M=v(function(){U(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(C))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return U()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=p;p=U;try{return O()}finally{p=z}},n.unstable_scheduleCallback=function(U,O,z){var W=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,U={id:c++,callback:O,priorityLevel:U,startTime:z,expirationTime:q,sortIndex:-1},z>W?(U.sortIndex=z,e(u,U),t(l)===null&&U===t(u)&&(y?(x(M),M=-1):y=!0,ne(b,z-W))):(U.sortIndex=q,e(l,U),g||m||(g=!0,$(C))),U},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(U){var O=p;return function(){var z=p;p=O;try{return U.apply(this,arguments)}finally{p=z}}}}(g1)),g1}var bE;function m8(){return bE||(bE=1,function(n){n.exports=p8()}(m1)),m1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8=function(e){var t={},r=N.exports,i=m8(),s=Object.assign;function o(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),C=Symbol.iterator;function E(d){return d===null||typeof d!="object"?null:(d=C&&d[C]||d["@@iterator"],typeof d=="function"?d:null)}function P(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case y:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return h=d.displayName||null,h!==null?h:P(d.type)||"Memo";case S:h=d._payload,d=d._init;try{return P(d(h))}catch{}}return null}function M(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function T(d){var h=d,w=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(w=h.return),d=h.return;while(d)}return h.tag===3?w:null}function R(d){if(T(d)!==d)throw Error(o(188))}function L(d){var h=d.alternate;if(!h){if(h=T(d),h===null)throw Error(o(188));return h!==d?null:d}for(var w=d,A=h;;){var B=w.return;if(B===null)break;var D=B.alternate;if(D===null){if(A=B.return,A!==null){w=A;continue}break}if(B.child===D.child){for(D=B.child;D;){if(D===w)return R(B),d;if(D===A)return R(B),h;D=D.sibling}throw Error(o(188))}if(w.return!==A.return)w=B,A=D;else{for(var Z=!1,ue=B.child;ue;){if(ue===w){Z=!0,w=B,A=D;break}if(ue===A){Z=!0,A=B,w=D;break}ue=ue.sibling}if(!Z){for(ue=D.child;ue;){if(ue===w){Z=!0,w=D,A=B;break}if(ue===A){Z=!0,A=D,w=B;break}ue=ue.sibling}if(!Z)throw Error(o(189))}}if(w.alternate!==A)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?d:h}function I(d){return d=L(d),d!==null?H(d):null}function H(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=H(d);if(h!==null)return h;d=d.sibling}return null}function G(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var h=G(d);if(h!==null)return h}d=d.sibling}return null}var X=Array.isArray,$=e.getPublicInstance,ne=e.getRootHostContext,U=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,W=e.createInstance,q=e.appendInitialChild,oe=e.finalizeInitialChildren,ce=e.prepareUpdate,me=e.shouldSetTextContent,re=e.createTextInstance,he=e.scheduleTimeout,ie=e.cancelTimeout,k=e.noTimeout,V=e.isPrimaryRenderer,K=e.supportsMutation,Y=e.supportsPersistence,ee=e.supportsHydration,le=e.getInstanceFromNode,we=e.preparePortalMount,Se=e.getCurrentEventPriority,Ue=e.detachDeletedInstance,xe=e.supportsMicrotasks,Re=e.scheduleMicrotask,Ie=e.supportsTestSelectors,ye=e.findFiberRoot,j=e.getBoundingRect,F=e.getTextContent,te=e.isHiddenSubtree,pe=e.matchAccessibilityRole,Ee=e.setFocusIfFocusable,Be=e.setupIntersectionObserver,De=e.appendChild,fe=e.appendChildToContainer,We=e.commitTextUpdate,Le=e.commitMount,He=e.commitUpdate,ke=e.insertBefore,Fe=e.insertInContainerBefore,Oe=e.removeChild,tt=e.removeChildFromContainer,se=e.resetTextContent,je=e.hideInstance,be=e.hideTextInstance,ze=e.unhideInstance,$e=e.unhideTextInstance,Et=e.clearContainer,Bt=e.cloneInstance,Jt=e.createContainerChildSet,It=e.appendChildToContainerChildSet,ot=e.finalizeContainerChildren,Kt=e.replaceContainerChildren,Yt=e.cloneHiddenInstance,Xt=e.cloneHiddenTextInstance,En=e.canHydrateInstance,zr=e.canHydrateTextInstance,Dn=e.canHydrateSuspenseInstance,gn=e.isSuspenseInstancePending,$n=e.isSuspenseInstanceFallback,Q=e.registerSuspenseInstanceRetry,ge=e.getNextHydratableSibling,Ce=e.getFirstHydratableChild,ve=e.getFirstHydratableChildWithinContainer,Pe=e.getFirstHydratableChildWithinSuspenseInstance,st=e.hydrateInstance,ft=e.hydrateTextInstance,bt=e.hydrateSuspenseInstance,pt=e.getNextHydratableInstanceAfterSuspenseInstance,Lt=e.commitHydratedContainer,Tt=e.commitHydratedSuspenseInstance,Ft=e.clearSuspenseBoundary,tn=e.clearSuspenseBoundaryFromContainer,oi=e.shouldDeleteUnhydratedTailInstances,Ui=e.didNotMatchHydratedContainerTextInstance,Ni=e.didNotMatchHydratedTextInstance,Ye;function Mt(d){if(Ye===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);Ye=h&&h[1]||""}return`
`+Ye+d}var zi=!1;function Qt(d,h){if(!d||zi)return"";zi=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ve){var A=Ve}Reflect.construct(d,[],h)}else{try{h.call()}catch(Ve){A=Ve}d.call(h.prototype)}else{try{throw Error()}catch(Ve){A=Ve}d()}}catch(Ve){if(Ve&&A&&typeof Ve.stack=="string"){for(var B=Ve.stack.split(`
`),D=A.stack.split(`
`),Z=B.length-1,ue=D.length-1;1<=Z&&0<=ue&&B[Z]!==D[ue];)ue--;for(;1<=Z&&0<=ue;Z--,ue--)if(B[Z]!==D[ue]){if(Z!==1||ue!==1)do if(Z--,ue--,0>ue||B[Z]!==D[ue]){var Te=`
`+B[Z].replace(" at new "," at ");return d.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",d.displayName)),Te}while(1<=Z&&0<=ue);break}}}finally{zi=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?Mt(d):""}var ur=Object.prototype.hasOwnProperty,_r=[],cr=-1;function fr(d){return{current:d}}function xt(d){0>cr||(d.current=_r[cr],_r[cr]=null,cr--)}function Rt(d,h){cr++,_r[cr]=d.current,d.current=h}var Gr={},Ut=fr(Gr),In=fr(!1),Hr=Gr;function wi(d,h){var w=d.type.contextTypes;if(!w)return Gr;var A=d.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===h)return A.__reactInternalMemoizedMaskedChildContext;var B={},D;for(D in w)B[D]=h[D];return A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=B),B}function Ln(d){return d=d.childContextTypes,d!=null}function qo(){xt(In),xt(Ut)}function Tu(d,h,w){if(Ut.current!==Gr)throw Error(o(168));Rt(Ut,h),Rt(In,w)}function Ru(d,h,w){var A=d.stateNode;if(h=h.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var B in A)if(!(B in h))throw Error(o(108,M(d)||"Unknown",B));return s({},w,A)}function Us(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Gr,Hr=Ut.current,Rt(Ut,d),Rt(In,In.current),!0}function up(d,h,w){var A=d.stateNode;if(!A)throw Error(o(169));w?(d=Ru(d,h,Hr),A.__reactInternalMemoizedMergedChildContext=d,xt(In),xt(Ut),Rt(Ut,d)):xt(In),Rt(In,w)}var wr=Math.clz32?Math.clz32:cp,Pu=Math.log,cl=Math.LN2;function cp(d){return d>>>=0,d===0?32:31-(Pu(d)/cl|0)|0}var so=64,oo=4194304;function ao(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function fl(d,h){var w=d.pendingLanes;if(w===0)return 0;var A=0,B=d.suspendedLanes,D=d.pingedLanes,Z=w&268435455;if(Z!==0){var ue=Z&~B;ue!==0?A=ao(ue):(D&=Z,D!==0&&(A=ao(D)))}else Z=w&~B,Z!==0?A=ao(Z):D!==0&&(A=ao(D));if(A===0)return 0;if(h!==0&&h!==A&&(h&B)===0&&(B=A&-A,D=h&-h,B>=D||B===16&&(D&4194240)!==0))return h;if((A&4)!==0&&(A|=w&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=A;0<h;)w=31-wr(h),B=1<<w,A|=d[w],h&=~B;return A}function fp(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(d,h){for(var w=d.suspendedLanes,A=d.pingedLanes,B=d.expirationTimes,D=d.pendingLanes;0<D;){var Z=31-wr(D),ue=1<<Z,Te=B[Z];Te===-1?((ue&w)===0||(ue&A)!==0)&&(B[Z]=fp(ue,h)):Te<=h&&(d.expiredLanes|=ue),D&=~ue}}function lo(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Bu(d){for(var h=[],w=0;31>w;w++)h.push(d);return h}function Ns(d,h,w){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-wr(h),d[h]=w}function Zo(d,h){var w=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var A=d.eventTimes;for(d=d.expirationTimes;0<w;){var B=31-wr(w),D=1<<B;h[B]=0,A[B]=-1,d[B]=-1,w&=~D}}function zs(d,h){var w=d.entangledLanes|=h;for(d=d.entanglements;w;){var A=31-wr(w),B=1<<A;B&h|d[A]&h&&(d[A]|=h),w&=~B}}var Dt=0;function Rf(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var uo=i.unstable_scheduleCallback,Du=i.unstable_cancelCallback,Pf=i.unstable_shouldYield,dp=i.unstable_requestPaint,hn=i.unstable_now,ea=i.unstable_ImmediatePriority,hp=i.unstable_UserBlockingPriority,Vr=i.unstable_NormalPriority,Bf=i.unstable_IdlePriority,ta=null,Si=null;function Df(d){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(ta,d,void 0,(d.current.flags&128)===128)}catch{}}function Iu(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var bi=typeof Object.is=="function"?Object.is:Iu,Wr=null,Gs=!1,Gi=!1;function If(d){Wr===null?Wr=[d]:Wr.push(d)}function Lf(d){Gs=!0,If(d)}function ai(){if(!Gi&&Wr!==null){Gi=!0;var d=0,h=Dt;try{var w=Wr;for(Dt=1;d<w.length;d++){var A=w[d];do A=A(!0);while(A!==null)}Wr=null,Gs=!1}catch(B){throw Wr!==null&&(Wr=Wr.slice(d+1)),uo(ea,ai),B}finally{Dt=h,Gi=!1}}return null}var dl=a.ReactCurrentBatchConfig;function hl(d,h){if(bi(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var w=Object.keys(d),A=Object.keys(h);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var B=w[A];if(!ur.call(h,B)||!bi(d[B],h[B]))return!1}return!0}function pl(d){switch(d.tag){case 5:return Mt(d.type);case 16:return Mt("Lazy");case 13:return Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 2:case 15:return d=Qt(d.type,!1),d;case 11:return d=Qt(d.type.render,!1),d;case 1:return d=Qt(d.type,!0),d;default:return""}}function Sr(d,h){if(d&&d.defaultProps){h=s({},h),d=d.defaultProps;for(var w in d)h[w]===void 0&&(h[w]=d[w]);return h}return h}var er=fr(null),Lu=null,gs=null,na=null;function Fu(){na=gs=Lu=null}function pp(d,h,w){V?(Rt(er,h._currentValue),h._currentValue=w):(Rt(er,h._currentValue2),h._currentValue2=w)}function Hs(d){var h=er.current;xt(er),V?d._currentValue=h:d._currentValue2=h}function Nn(d,h,w){for(;d!==null;){var A=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,A!==null&&(A.childLanes|=h)):A!==null&&(A.childLanes&h)!==h&&(A.childLanes|=h),d===w)break;d=d.return}}function tr(d,h){Lu=d,na=gs=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&h)!==0&&(Ei=!0),d.firstContext=null)}function nn(d){var h=V?d._currentValue:d._currentValue2;if(na!==d)if(d={context:d,memoizedValue:h,next:null},gs===null){if(Lu===null)throw Error(o(308));gs=d,Lu.dependencies={lanes:0,firstContext:d}}else gs=gs.next=d;return h}var Jn=null,vs=!1;function g0(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vb(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function co(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function ra(d,h){var w=d.updateQueue;w!==null&&(w=w.shared,zn!==null&&(d.mode&1)!==0&&(Pt&2)===0?(d=w.interleaved,d===null?(h.next=h,Jn===null?Jn=[w]:Jn.push(w)):(h.next=d.next,d.next=h),w.interleaved=h):(d=w.pending,d===null?h.next=h:(h.next=d.next,d.next=h),w.pending=h))}function mp(d,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var A=h.lanes;A&=d.pendingLanes,w|=A,h.lanes=w,zs(d,w)}}function yb(d,h){var w=d.updateQueue,A=d.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var B=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var Z={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?B=D=Z:D=D.next=Z,w=w.next}while(w!==null);D===null?B=D=h:D=D.next=h}else B=D=h;w={baseState:A.baseState,firstBaseUpdate:B,lastBaseUpdate:D,shared:A.shared,effects:A.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=h:d.next=h,w.lastBaseUpdate=h}function gp(d,h,w,A){var B=d.updateQueue;vs=!1;var D=B.firstBaseUpdate,Z=B.lastBaseUpdate,ue=B.shared.pending;if(ue!==null){B.shared.pending=null;var Te=ue,Ve=Te.next;Te.next=null,Z===null?D=Ve:Z.next=Ve,Z=Te;var qe=d.alternate;qe!==null&&(qe=qe.updateQueue,ue=qe.lastBaseUpdate,ue!==Z&&(ue===null?qe.firstBaseUpdate=Ve:ue.next=Ve,qe.lastBaseUpdate=Te))}if(D!==null){var _t=B.baseState;Z=0,qe=Ve=Te=null,ue=D;do{var lt=ue.lane,rn=ue.eventTime;if((A&lt)===lt){qe!==null&&(qe=qe.next={eventTime:rn,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var it=d,Er=ue;switch(lt=h,rn=w,Er.tag){case 1:if(it=Er.payload,typeof it=="function"){_t=it.call(rn,_t,lt);break e}_t=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=Er.payload,lt=typeof it=="function"?it.call(rn,_t,lt):it,lt==null)break e;_t=s({},_t,lt);break e;case 2:vs=!0}}ue.callback!==null&&ue.lane!==0&&(d.flags|=64,lt=B.effects,lt===null?B.effects=[ue]:lt.push(ue))}else rn={eventTime:rn,lane:lt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},qe===null?(Ve=qe=rn,Te=_t):qe=qe.next=rn,Z|=lt;if(ue=ue.next,ue===null){if(ue=B.shared.pending,ue===null)break;lt=ue,ue=lt.next,lt.next=null,B.lastBaseUpdate=lt,B.shared.pending=null}}while(1);if(qe===null&&(Te=_t),B.baseState=Te,B.firstBaseUpdate=Ve,B.lastBaseUpdate=qe,h=B.shared.interleaved,h!==null){B=h;do Z|=B.lane,B=B.next;while(B!==h)}else D===null&&(B.shared.lanes=0);Wu|=Z,d.lanes=Z,d.memoizedState=_t}}function xb(d,h,w){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var A=d[h],B=A.callback;if(B!==null){if(A.callback=null,A=w,typeof B!="function")throw Error(o(191,B));B.call(A)}}}var _b=new r.Component().refs;function v0(d,h,w,A){h=d.memoizedState,w=w(A,h),w=w==null?h:s({},h,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var vp={isMounted:function(d){return(d=d._reactInternals)?T(d)===d:!1},enqueueSetState:function(d,h,w){d=d._reactInternals;var A=$r(),B=oa(d),D=co(A,B);D.payload=h,w!=null&&(D.callback=w),ra(d,D),h=$i(d,B,A),h!==null&&mp(h,d,B)},enqueueReplaceState:function(d,h,w){d=d._reactInternals;var A=$r(),B=oa(d),D=co(A,B);D.tag=1,D.payload=h,w!=null&&(D.callback=w),ra(d,D),h=$i(d,B,A),h!==null&&mp(h,d,B)},enqueueForceUpdate:function(d,h){d=d._reactInternals;var w=$r(),A=oa(d),B=co(w,A);B.tag=2,h!=null&&(B.callback=h),ra(d,B),h=$i(d,A,w),h!==null&&mp(h,d,A)}};function wb(d,h,w,A,B,D,Z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(A,D,Z):h.prototype&&h.prototype.isPureReactComponent?!hl(w,A)||!hl(B,D):!0}function Sb(d,h,w){var A=!1,B=Gr,D=h.contextType;return typeof D=="object"&&D!==null?D=nn(D):(B=Ln(h)?Hr:Ut.current,A=h.contextTypes,D=(A=A!=null)?wi(d,B):Gr),h=new h(w,D),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=vp,d.stateNode=h,h._reactInternals=d,A&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=B,d.__reactInternalMemoizedMaskedChildContext=D),h}function bb(d,h,w,A){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,A),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,A),h.state!==d&&vp.enqueueReplaceState(h,h.state,null)}function y0(d,h,w,A){var B=d.stateNode;B.props=w,B.state=d.memoizedState,B.refs=_b,g0(d);var D=h.contextType;typeof D=="object"&&D!==null?B.context=nn(D):(D=Ln(h)?Hr:Ut.current,B.context=wi(d,D)),B.state=d.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(v0(d,h,D,w),B.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(h=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),h!==B.state&&vp.enqueueReplaceState(B,B.state,null),gp(d,w,B,A),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308)}var ku=[],Ou=0,yp=null,xp=0,Hi=[],Vi=0,ml=null,fo=1,ho="";function gl(d,h){ku[Ou++]=xp,ku[Ou++]=yp,yp=d,xp=h}function Mb(d,h,w){Hi[Vi++]=fo,Hi[Vi++]=ho,Hi[Vi++]=ml,ml=d;var A=fo;d=ho;var B=32-wr(A)-1;A&=~(1<<B),w+=1;var D=32-wr(h)+B;if(30<D){var Z=B-B%5;D=(A&(1<<Z)-1).toString(32),A>>=Z,B-=Z,fo=1<<32-wr(h)+B|w<<B|A,ho=D+d}else fo=1<<D|w<<B|A,ho=d}function x0(d){d.return!==null&&(gl(d,1),Mb(d,1,0))}function _0(d){for(;d===yp;)yp=ku[--Ou],ku[Ou]=null,xp=ku[--Ou],ku[Ou]=null;for(;d===ml;)ml=Hi[--Vi],Hi[Vi]=null,ho=Hi[--Vi],Hi[Vi]=null,fo=Hi[--Vi],Hi[Vi]=null}var Mi=null,Ai=null,pn=!1,Ff=!1,ys=null;function Ab(d,h){var w=Ji(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=d,h=d.deletions,h===null?(d.deletions=[w],d.flags|=16):h.push(w)}function Eb(d,h){switch(d.tag){case 5:return h=En(h,d.type,d.pendingProps),h!==null?(d.stateNode=h,Mi=d,Ai=Ce(h),!0):!1;case 6:return h=zr(h,d.pendingProps),h!==null?(d.stateNode=h,Mi=d,Ai=null,!0):!1;case 13:if(h=Dn(h),h!==null){var w=ml!==null?{id:fo,overflow:ho}:null;return d.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=Ji(18,null,null,0),w.stateNode=h,w.return=d,d.child=w,Mi=d,Ai=null,!0}return!1;default:return!1}}function w0(d){return(d.mode&1)!==0&&(d.flags&128)===0}function S0(d){if(pn){var h=Ai;if(h){var w=h;if(!Eb(d,h)){if(w0(d))throw Error(o(418));h=ge(w);var A=Mi;h&&Eb(d,h)?Ab(A,w):(d.flags=d.flags&-4097|2,pn=!1,Mi=d)}}else{if(w0(d))throw Error(o(418));d.flags=d.flags&-4097|2,pn=!1,Mi=d}}}function Cb(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Mi=d}function kf(d){if(!ee||d!==Mi)return!1;if(!pn)return Cb(d),pn=!0,!1;if(d.tag!==3&&(d.tag!==5||oi(d.type)&&!me(d.type,d.memoizedProps))){var h=Ai;if(h){if(w0(d)){for(d=Ai;d;)d=ge(d);throw Error(o(418))}for(;h;)Ab(d,h),h=ge(h)}}if(Cb(d),d.tag===13){if(!ee)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Ai=pt(d)}else Ai=Mi?ge(d.stateNode):null;return!0}function Uu(){ee&&(Ai=Mi=null,Ff=pn=!1)}function b0(d){ys===null?ys=[d]:ys.push(d)}function Of(d,h,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var A=w.stateNode}if(!A)throw Error(o(147,d));var B=A,D=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function(Z){var ue=B.refs;ue===_b&&(ue=B.refs={}),Z===null?delete ue[D]:ue[D]=Z},h._stringRef=D,h)}if(typeof d!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,d))}return d}function _p(d,h){throw d=Object.prototype.toString.call(h),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function Tb(d){var h=d._init;return h(d._payload)}function Rb(d){function h(_e,de){if(d){var Me=_e.deletions;Me===null?(_e.deletions=[de],_e.flags|=16):Me.push(de)}}function w(_e,de){if(!d)return null;for(;de!==null;)h(_e,de),de=de.sibling;return null}function A(_e,de){for(_e=new Map;de!==null;)de.key!==null?_e.set(de.key,de):_e.set(de.index,de),de=de.sibling;return _e}function B(_e,de){return _e=la(_e,de),_e.index=0,_e.sibling=null,_e}function D(_e,de,Me){return _e.index=Me,d?(Me=_e.alternate,Me!==null?(Me=Me.index,Me<de?(_e.flags|=2,de):Me):(_e.flags|=2,de)):(_e.flags|=1048576,de)}function Z(_e){return d&&_e.alternate===null&&(_e.flags|=2),_e}function ue(_e,de,Me,Xe){return de===null||de.tag!==6?(de=oy(Me,_e.mode,Xe),de.return=_e,de):(de=B(de,Me),de.return=_e,de)}function Te(_e,de,Me,Xe){var rt=Me.type;return rt===c?qe(_e,de,Me.props.children,Xe,Me.key):de!==null&&(de.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&Tb(rt)===de.type)?(Xe=B(de,Me.props),Xe.ref=Of(_e,de,Me),Xe.return=_e,Xe):(Xe=Qp(Me.type,Me.key,Me.props,null,_e.mode,Xe),Xe.ref=Of(_e,de,Me),Xe.return=_e,Xe)}function Ve(_e,de,Me,Xe){return de===null||de.tag!==4||de.stateNode.containerInfo!==Me.containerInfo||de.stateNode.implementation!==Me.implementation?(de=ay(Me,_e.mode,Xe),de.return=_e,de):(de=B(de,Me.children||[]),de.return=_e,de)}function qe(_e,de,Me,Xe,rt){return de===null||de.tag!==7?(de=bl(Me,_e.mode,Xe,rt),de.return=_e,de):(de=B(de,Me),de.return=_e,de)}function _t(_e,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number")return de=oy(""+de,_e.mode,Me),de.return=_e,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return Me=Qp(de.type,de.key,de.props,null,_e.mode,Me),Me.ref=Of(_e,null,de),Me.return=_e,Me;case u:return de=ay(de,_e.mode,Me),de.return=_e,de;case S:var Xe=de._init;return _t(_e,Xe(de._payload),Me)}if(X(de)||E(de))return de=bl(de,_e.mode,Me,null),de.return=_e,de;_p(_e,de)}return null}function lt(_e,de,Me,Xe){var rt=de!==null?de.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return rt!==null?null:ue(_e,de,""+Me,Xe);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:return Me.key===rt?Te(_e,de,Me,Xe):null;case u:return Me.key===rt?Ve(_e,de,Me,Xe):null;case S:return rt=Me._init,lt(_e,de,rt(Me._payload),Xe)}if(X(Me)||E(Me))return rt!==null?null:qe(_e,de,Me,Xe,null);_p(_e,Me)}return null}function rn(_e,de,Me,Xe,rt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return _e=_e.get(Me)||null,ue(de,_e,""+Xe,rt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return _e=_e.get(Xe.key===null?Me:Xe.key)||null,Te(de,_e,Xe,rt);case u:return _e=_e.get(Xe.key===null?Me:Xe.key)||null,Ve(de,_e,Xe,rt);case S:var Ct=Xe._init;return rn(_e,de,Me,Ct(Xe._payload),rt)}if(X(Xe)||E(Xe))return _e=_e.get(Me)||null,qe(de,_e,Xe,rt,null);_p(de,Xe)}return null}function it(_e,de,Me,Xe){for(var rt=null,Ct=null,wt=de,Wt=de=0,rr=null;wt!==null&&Wt<Me.length;Wt++){wt.index>Wt?(rr=wt,wt=null):rr=wt.sibling;var jt=lt(_e,wt,Me[Wt],Xe);if(jt===null){wt===null&&(wt=rr);break}d&&wt&&jt.alternate===null&&h(_e,wt),de=D(jt,de,Wt),Ct===null?rt=jt:Ct.sibling=jt,Ct=jt,wt=rr}if(Wt===Me.length)return w(_e,wt),pn&&gl(_e,Wt),rt;if(wt===null){for(;Wt<Me.length;Wt++)wt=_t(_e,Me[Wt],Xe),wt!==null&&(de=D(wt,de,Wt),Ct===null?rt=wt:Ct.sibling=wt,Ct=wt);return pn&&gl(_e,Wt),rt}for(wt=A(_e,wt);Wt<Me.length;Wt++)rr=rn(wt,_e,Wt,Me[Wt],Xe),rr!==null&&(d&&rr.alternate!==null&&wt.delete(rr.key===null?Wt:rr.key),de=D(rr,de,Wt),Ct===null?rt=rr:Ct.sibling=rr,Ct=rr);return d&&wt.forEach(function(ua){return h(_e,ua)}),pn&&gl(_e,Wt),rt}function Er(_e,de,Me,Xe){var rt=E(Me);if(typeof rt!="function")throw Error(o(150));if(Me=rt.call(Me),Me==null)throw Error(o(151));for(var Ct=rt=null,wt=de,Wt=de=0,rr=null,jt=Me.next();wt!==null&&!jt.done;Wt++,jt=Me.next()){wt.index>Wt?(rr=wt,wt=null):rr=wt.sibling;var ua=lt(_e,wt,jt.value,Xe);if(ua===null){wt===null&&(wt=rr);break}d&&wt&&ua.alternate===null&&h(_e,wt),de=D(ua,de,Wt),Ct===null?rt=ua:Ct.sibling=ua,Ct=ua,wt=rr}if(jt.done)return w(_e,wt),pn&&gl(_e,Wt),rt;if(wt===null){for(;!jt.done;Wt++,jt=Me.next())jt=_t(_e,jt.value,Xe),jt!==null&&(de=D(jt,de,Wt),Ct===null?rt=jt:Ct.sibling=jt,Ct=jt);return pn&&gl(_e,Wt),rt}for(wt=A(_e,wt);!jt.done;Wt++,jt=Me.next())jt=rn(wt,_e,Wt,jt.value,Xe),jt!==null&&(d&&jt.alternate!==null&&wt.delete(jt.key===null?Wt:jt.key),de=D(jt,de,Wt),Ct===null?rt=jt:Ct.sibling=jt,Ct=jt);return d&&wt.forEach(function(JL){return h(_e,JL)}),pn&&gl(_e,Wt),rt}function Ki(_e,de,Me,Xe){if(typeof Me=="object"&&Me!==null&&Me.type===c&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:e:{for(var rt=Me.key,Ct=de;Ct!==null;){if(Ct.key===rt){if(rt=Me.type,rt===c){if(Ct.tag===7){w(_e,Ct.sibling),de=B(Ct,Me.props.children),de.return=_e,_e=de;break e}}else if(Ct.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&Tb(rt)===Ct.type){w(_e,Ct.sibling),de=B(Ct,Me.props),de.ref=Of(_e,Ct,Me),de.return=_e,_e=de;break e}w(_e,Ct);break}else h(_e,Ct);Ct=Ct.sibling}Me.type===c?(de=bl(Me.props.children,_e.mode,Xe,Me.key),de.return=_e,_e=de):(Xe=Qp(Me.type,Me.key,Me.props,null,_e.mode,Xe),Xe.ref=Of(_e,de,Me),Xe.return=_e,_e=Xe)}return Z(_e);case u:e:{for(Ct=Me.key;de!==null;){if(de.key===Ct)if(de.tag===4&&de.stateNode.containerInfo===Me.containerInfo&&de.stateNode.implementation===Me.implementation){w(_e,de.sibling),de=B(de,Me.children||[]),de.return=_e,_e=de;break e}else{w(_e,de);break}else h(_e,de);de=de.sibling}de=ay(Me,_e.mode,Xe),de.return=_e,_e=de}return Z(_e);case S:return Ct=Me._init,Ki(_e,de,Ct(Me._payload),Xe)}if(X(Me))return it(_e,de,Me,Xe);if(E(Me))return Er(_e,de,Me,Xe);_p(_e,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,de!==null&&de.tag===6?(w(_e,de.sibling),de=B(de,Me),de.return=_e,_e=de):(w(_e,de),de=oy(Me,_e.mode,Xe),de.return=_e,_e=de),Z(_e)):w(_e,de)}return Ki}var Nu=Rb(!0),Pb=Rb(!1),Uf={},Wi=fr(Uf),Nf=fr(Uf),zu=fr(Uf);function Vs(d){if(d===Uf)throw Error(o(174));return d}function M0(d,h){Rt(zu,h),Rt(Nf,d),Rt(Wi,Uf),d=ne(h),xt(Wi),Rt(Wi,d)}function Gu(){xt(Wi),xt(Nf),xt(zu)}function Bb(d){var h=Vs(zu.current),w=Vs(Wi.current);h=U(w,d.type,h),w!==h&&(Rt(Nf,d),Rt(Wi,h))}function A0(d){Nf.current===d&&(xt(Wi),xt(Nf))}var vn=fr(0);function wp(d){for(var h=d;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||gn(w)||$n(w)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var E0=[];function C0(){for(var d=0;d<E0.length;d++){var h=E0[d];V?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}E0.length=0}var Sp=a.ReactCurrentDispatcher,ji=a.ReactCurrentBatchConfig,Hu=0,Cn=null,br=null,nr=null,bp=!1,zf=!1,Gf=0,yL=0;function Mr(){throw Error(o(321))}function T0(d,h){if(h===null)return!1;for(var w=0;w<h.length&&w<d.length;w++)if(!bi(d[w],h[w]))return!1;return!0}function R0(d,h,w,A,B,D){if(Hu=D,Cn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Sp.current=d===null||d.memoizedState===null?SL:bL,d=w(A,B),zf){D=0;do{if(zf=!1,Gf=0,25<=D)throw Error(o(301));D+=1,nr=br=null,h.updateQueue=null,Sp.current=ML,d=w(A,B)}while(zf)}if(Sp.current=Tp,h=br!==null&&br.next!==null,Hu=0,nr=br=Cn=null,bp=!1,h)throw Error(o(300));return d}function P0(){var d=Gf!==0;return Gf=0,d}function po(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?Cn.memoizedState=nr=d:nr=nr.next=d,nr}function Ws(){if(br===null){var d=Cn.alternate;d=d!==null?d.memoizedState:null}else d=br.next;var h=nr===null?Cn.memoizedState:nr.next;if(h!==null)nr=h,br=d;else{if(d===null)throw Error(o(310));br=d,d={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},nr===null?Cn.memoizedState=nr=d:nr=nr.next=d}return nr}function vl(d,h){return typeof h=="function"?h(d):h}function Mp(d){var h=Ws(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var A=br,B=A.baseQueue,D=w.pending;if(D!==null){if(B!==null){var Z=B.next;B.next=D.next,D.next=Z}A.baseQueue=B=D,w.pending=null}if(B!==null){D=B.next,A=A.baseState;var ue=Z=null,Te=null,Ve=D;do{var qe=Ve.lane;if((Hu&qe)===qe)Te!==null&&(Te=Te.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),A=Ve.hasEagerState?Ve.eagerState:d(A,Ve.action);else{var _t={lane:qe,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};Te===null?(ue=Te=_t,Z=A):Te=Te.next=_t,Cn.lanes|=qe,Wu|=qe}Ve=Ve.next}while(Ve!==null&&Ve!==D);Te===null?Z=A:Te.next=ue,bi(A,h.memoizedState)||(Ei=!0),h.memoizedState=A,h.baseState=Z,h.baseQueue=Te,w.lastRenderedState=A}if(d=w.interleaved,d!==null){B=d;do D=B.lane,Cn.lanes|=D,Wu|=D,B=B.next;while(B!==d)}else B===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function Ap(d){var h=Ws(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var A=w.dispatch,B=w.pending,D=h.memoizedState;if(B!==null){w.pending=null;var Z=B=B.next;do D=d(D,Z.action),Z=Z.next;while(Z!==B);bi(D,h.memoizedState)||(Ei=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),w.lastRenderedState=D}return[D,A]}function Db(){}function Ib(d,h){var w=Cn,A=Ws(),B=h(),D=!bi(A.memoizedState,B);if(D&&(A.memoizedState=B,Ei=!0),A=A.queue,Vf(kb.bind(null,w,A,d),[d]),A.getSnapshot!==h||D||nr!==null&&nr.memoizedState.tag&1){if(w.flags|=2048,Hf(9,Fb.bind(null,w,A,B,h),void 0,null),zn===null)throw Error(o(349));(Hu&30)!==0||Lb(w,h,B)}return B}function Lb(d,h,w){d.flags|=16384,d={getSnapshot:h,value:w},h=Cn.updateQueue,h===null?(h={lastEffect:null,stores:null},Cn.updateQueue=h,h.stores=[d]):(w=h.stores,w===null?h.stores=[d]:w.push(d))}function Fb(d,h,w,A){h.value=w,h.getSnapshot=A,Ob(h)&&$i(d,1,-1)}function kb(d,h,w){return w(function(){Ob(h)&&$i(d,1,-1)})}function Ob(d){var h=d.getSnapshot;d=d.value;try{var w=h();return!bi(d,w)}catch{return!0}}function B0(d){var h=po();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:d},h.queue=d,d=d.dispatch=wL.bind(null,Cn,d),[h.memoizedState,d]}function Hf(d,h,w,A){return d={tag:d,create:h,destroy:w,deps:A,next:null},h=Cn.updateQueue,h===null?(h={lastEffect:null,stores:null},Cn.updateQueue=h,h.lastEffect=d.next=d):(w=h.lastEffect,w===null?h.lastEffect=d.next=d:(A=w.next,w.next=d,d.next=A,h.lastEffect=d)),d}function Ub(){return Ws().memoizedState}function Ep(d,h,w,A){var B=po();Cn.flags|=d,B.memoizedState=Hf(1|h,w,void 0,A===void 0?null:A)}function Cp(d,h,w,A){var B=Ws();A=A===void 0?null:A;var D=void 0;if(br!==null){var Z=br.memoizedState;if(D=Z.destroy,A!==null&&T0(A,Z.deps)){B.memoizedState=Hf(h,w,D,A);return}}Cn.flags|=d,B.memoizedState=Hf(1|h,w,D,A)}function D0(d,h){return Ep(8390656,8,d,h)}function Vf(d,h){return Cp(2048,8,d,h)}function Nb(d,h){return Cp(4,2,d,h)}function zb(d,h){return Cp(4,4,d,h)}function Gb(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Hb(d,h,w){return w=w!=null?w.concat([d]):null,Cp(4,4,Gb.bind(null,h,d),w)}function I0(){}function Vb(d,h){var w=Ws();h=h===void 0?null:h;var A=w.memoizedState;return A!==null&&h!==null&&T0(h,A[1])?A[0]:(w.memoizedState=[d,h],d)}function Wb(d,h){var w=Ws();h=h===void 0?null:h;var A=w.memoizedState;return A!==null&&h!==null&&T0(h,A[1])?A[0]:(d=d(),w.memoizedState=[d,h],d)}function xL(d,h){var w=Dt;Dt=w!==0&&4>w?w:4,d(!0);var A=ji.transition;ji.transition={};try{d(!1),h()}finally{Dt=w,ji.transition=A}}function jb(){return Ws().memoizedState}function _L(d,h,w){var A=oa(d);w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},$b(d)?Jb(h,w):(Kb(d,h,w),w=$r(),d=$i(d,A,w),d!==null&&Xb(d,h,A))}function wL(d,h,w){var A=oa(d),B={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if($b(d))Jb(h,B);else{Kb(d,h,B);var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var Z=h.lastRenderedState,ue=D(Z,w);if(B.hasEagerState=!0,B.eagerState=ue,bi(ue,Z))return}catch{}finally{}w=$r(),d=$i(d,A,w),d!==null&&Xb(d,h,A)}}function $b(d){var h=d.alternate;return d===Cn||h!==null&&h===Cn}function Jb(d,h){zf=bp=!0;var w=d.pending;w===null?h.next=h:(h.next=w.next,w.next=h),d.pending=h}function Kb(d,h,w){zn!==null&&(d.mode&1)!==0&&(Pt&2)===0?(d=h.interleaved,d===null?(w.next=w,Jn===null?Jn=[h]:Jn.push(h)):(w.next=d.next,d.next=w),h.interleaved=w):(d=h.pending,d===null?w.next=w:(w.next=d.next,d.next=w),h.pending=w)}function Xb(d,h,w){if((w&4194240)!==0){var A=h.lanes;A&=d.pendingLanes,w|=A,h.lanes=w,zs(d,w)}}var Tp={readContext:nn,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},SL={readContext:nn,useCallback:function(d,h){return po().memoizedState=[d,h===void 0?null:h],d},useContext:nn,useEffect:D0,useImperativeHandle:function(d,h,w){return w=w!=null?w.concat([d]):null,Ep(4194308,4,Gb.bind(null,h,d),w)},useLayoutEffect:function(d,h){return Ep(4194308,4,d,h)},useInsertionEffect:function(d,h){return Ep(4,2,d,h)},useMemo:function(d,h){var w=po();return h=h===void 0?null:h,d=d(),w.memoizedState=[d,h],d},useReducer:function(d,h,w){var A=po();return h=w!==void 0?w(h):h,A.memoizedState=A.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},A.queue=d,d=d.dispatch=_L.bind(null,Cn,d),[A.memoizedState,d]},useRef:function(d){var h=po();return d={current:d},h.memoizedState=d},useState:B0,useDebugValue:I0,useDeferredValue:function(d){var h=B0(d),w=h[0],A=h[1];return D0(function(){var B=ji.transition;ji.transition={};try{A(d)}finally{ji.transition=B}},[d]),w},useTransition:function(){var d=B0(!1),h=d[0];return d=xL.bind(null,d[1]),po().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,w){var A=Cn,B=po();if(pn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=h(),zn===null)throw Error(o(349));(Hu&30)!==0||Lb(A,h,w)}B.memoizedState=w;var D={value:w,getSnapshot:h};return B.queue=D,D0(kb.bind(null,A,D,d),[d]),A.flags|=2048,Hf(9,Fb.bind(null,A,D,w,h),void 0,null),w},useId:function(){var d=po(),h=zn.identifierPrefix;if(pn){var w=ho,A=fo;w=(A&~(1<<32-wr(A)-1)).toString(32)+w,h=":"+h+"R"+w,w=Gf++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=yL++,h=":"+h+"r"+w.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},bL={readContext:nn,useCallback:Vb,useContext:nn,useEffect:Vf,useImperativeHandle:Hb,useInsertionEffect:Nb,useLayoutEffect:zb,useMemo:Wb,useReducer:Mp,useRef:Ub,useState:function(){return Mp(vl)},useDebugValue:I0,useDeferredValue:function(d){var h=Mp(vl),w=h[0],A=h[1];return Vf(function(){var B=ji.transition;ji.transition={};try{A(d)}finally{ji.transition=B}},[d]),w},useTransition:function(){var d=Mp(vl)[0],h=Ws().memoizedState;return[d,h]},useMutableSource:Db,useSyncExternalStore:Ib,useId:jb,unstable_isNewReconciler:!1},ML={readContext:nn,useCallback:Vb,useContext:nn,useEffect:Vf,useImperativeHandle:Hb,useInsertionEffect:Nb,useLayoutEffect:zb,useMemo:Wb,useReducer:Ap,useRef:Ub,useState:function(){return Ap(vl)},useDebugValue:I0,useDeferredValue:function(d){var h=Ap(vl),w=h[0],A=h[1];return Vf(function(){var B=ji.transition;ji.transition={};try{A(d)}finally{ji.transition=B}},[d]),w},useTransition:function(){var d=Ap(vl)[0],h=Ws().memoizedState;return[d,h]},useMutableSource:Db,useSyncExternalStore:Ib,useId:jb,unstable_isNewReconciler:!1};function L0(d,h){try{var w="",A=h;do w+=pl(A),A=A.return;while(A);var B=w}catch(D){B=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:h,stack:B}}function F0(d,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var AL=typeof WeakMap=="function"?WeakMap:Map;function Yb(d,h,w){w=co(-1,w),w.tag=3,w.payload={element:null};var A=h.value;return w.callback=function(){Wp||(Wp=!0,Z0=A),F0(d,h)},w}function Qb(d,h,w){w=co(-1,w),w.tag=3;var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var B=h.value;w.payload=function(){return A(B)},w.callback=function(){F0(d,h)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){F0(d,h),typeof A!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})}),w}function qb(d,h,w){var A=d.pingCache;if(A===null){A=d.pingCache=new AL;var B=new Set;A.set(h,B)}else B=A.get(h),B===void 0&&(B=new Set,A.set(h,B));B.has(w)||(B.add(w),d=NL.bind(null,d,h,w),h.then(d,d))}function Zb(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function e2(d,h,w,A,B){return(d.mode&1)===0?(d===h?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=co(-1,1),h.tag=2,ra(w,h))),w.lanes|=1),d):(d.flags|=65536,d.lanes=B,d)}function js(d){d.flags|=4}function t2(d,h){if(d!==null&&d.child===h.child)return!0;if((h.flags&16)!==0)return!1;for(d=h.child;d!==null;){if((d.flags&12854)!==0||(d.subtreeFlags&12854)!==0)return!1;d=d.sibling}return!0}var Wf,jf,Rp,Pp;if(K)Wf=function(d,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)q(d,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},jf=function(){},Rp=function(d,h,w,A,B){if(d=d.memoizedProps,d!==A){var D=h.stateNode,Z=Vs(Wi.current);w=ce(D,w,d,A,B,Z),(h.updateQueue=w)&&js(h)}},Pp=function(d,h,w,A){w!==A&&js(h)};else if(Y){Wf=function(d,h,w,A){for(var B=h.child;B!==null;){if(B.tag===5){var D=B.stateNode;w&&A&&(D=Yt(D,B.type,B.memoizedProps,B)),q(d,D)}else if(B.tag===6)D=B.stateNode,w&&A&&(D=Xt(D,B.memoizedProps,B)),q(d,D);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)D=B.child,D!==null&&(D.return=B),Wf(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===h)break;for(;B.sibling===null;){if(B.return===null||B.return===h)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var n2=function(d,h,w,A){for(var B=h.child;B!==null;){if(B.tag===5){var D=B.stateNode;w&&A&&(D=Yt(D,B.type,B.memoizedProps,B)),It(d,D)}else if(B.tag===6)D=B.stateNode,w&&A&&(D=Xt(D,B.memoizedProps,B)),It(d,D);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)D=B.child,D!==null&&(D.return=B),n2(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===h)break;for(;B.sibling===null;){if(B.return===null||B.return===h)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};jf=function(d,h){var w=h.stateNode;if(!t2(d,h)){d=w.containerInfo;var A=Jt(d);n2(A,h,!1,!1),w.pendingChildren=A,js(h),ot(d,A)}},Rp=function(d,h,w,A,B){var D=d.stateNode,Z=d.memoizedProps;if((d=t2(d,h))&&Z===A)h.stateNode=D;else{var ue=h.stateNode,Te=Vs(Wi.current),Ve=null;Z!==A&&(Ve=ce(ue,w,Z,A,B,Te)),d&&Ve===null?h.stateNode=D:(D=Bt(D,Ve,w,Z,A,h,d,ue),oe(D,w,A,B,Te)&&js(h),h.stateNode=D,d?js(h):Wf(D,h,!1,!1))}},Pp=function(d,h,w,A){w!==A?(d=Vs(zu.current),w=Vs(Wi.current),h.stateNode=re(A,d,w,h),js(h)):h.stateNode=d.stateNode}}else jf=function(){},Rp=function(){},Pp=function(){};function $f(d,h){if(!pn)switch(d.tailMode){case"hidden":h=d.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:A.sibling=null}}function Ar(d){var h=d.alternate!==null&&d.alternate.child===d.child,w=0,A=0;if(h)for(var B=d.child;B!==null;)w|=B.lanes|B.childLanes,A|=B.subtreeFlags&14680064,A|=B.flags&14680064,B.return=d,B=B.sibling;else for(B=d.child;B!==null;)w|=B.lanes|B.childLanes,A|=B.subtreeFlags,A|=B.flags,B.return=d,B=B.sibling;return d.subtreeFlags|=A,d.childLanes=w,h}function EL(d,h,w){var A=h.pendingProps;switch(_0(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(h),null;case 1:return Ln(h.type)&&qo(),Ar(h),null;case 3:return A=h.stateNode,Gu(),xt(In),xt(Ut),C0(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(d===null||d.child===null)&&(kf(h)?js(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ys!==null&&(ny(ys),ys=null))),jf(d,h),Ar(h),null;case 5:A0(h),w=Vs(zu.current);var B=h.type;if(d!==null&&h.stateNode!=null)Rp(d,h,B,A,w),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!A){if(h.stateNode===null)throw Error(o(166));return Ar(h),null}if(d=Vs(Wi.current),kf(h)){if(!ee)throw Error(o(175));d=st(h.stateNode,h.type,h.memoizedProps,w,d,h,!Ff),h.updateQueue=d,d!==null&&js(h)}else{var D=W(B,A,w,d,h);Wf(D,h,!1,!1),h.stateNode=D,oe(D,B,A,w,d)&&js(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Ar(h),null;case 6:if(d&&h.stateNode!=null)Pp(d,h,d.memoizedProps,A);else{if(typeof A!="string"&&h.stateNode===null)throw Error(o(166));if(d=Vs(zu.current),w=Vs(Wi.current),kf(h)){if(!ee)throw Error(o(176));if(d=h.stateNode,A=h.memoizedProps,(w=ft(d,A,h,!Ff))&&(B=Mi,B!==null))switch(D=(B.mode&1)!==0,B.tag){case 3:Ui(B.stateNode.containerInfo,d,A,D);break;case 5:Ni(B.type,B.memoizedProps,B.stateNode,d,A,D)}w&&js(h)}else h.stateNode=re(A,d,w,h)}return Ar(h),null;case 13:if(xt(vn),A=h.memoizedState,pn&&Ai!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(d=Ai;d;)d=ge(d);return Uu(),h.flags|=98560,h}if(A!==null&&A.dehydrated!==null){if(A=kf(h),d===null){if(!A)throw Error(o(318));if(!ee)throw Error(o(344));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));bt(d,h)}else Uu(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;return Ar(h),null}return ys!==null&&(ny(ys),ys=null),(h.flags&128)!==0?(h.lanes=w,h):(A=A!==null,w=!1,d===null?kf(h):w=d.memoizedState!==null,A&&!w&&(h.child.flags|=8192,(h.mode&1)!==0&&(d===null||(vn.current&1)!==0?Kn===0&&(Kn=3):iy())),h.updateQueue!==null&&(h.flags|=4),Ar(h),null);case 4:return Gu(),jf(d,h),d===null&&we(h.stateNode.containerInfo),Ar(h),null;case 10:return Hs(h.type._context),Ar(h),null;case 17:return Ln(h.type)&&qo(),Ar(h),null;case 19:if(xt(vn),B=h.memoizedState,B===null)return Ar(h),null;if(A=(h.flags&128)!==0,D=B.rendering,D===null)if(A)$f(B,!1);else{if(Kn!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(D=wp(d),D!==null){for(h.flags|=128,$f(B,!1),d=D.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),h.subtreeFlags=0,d=w,A=h.child;A!==null;)w=A,B=d,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=B,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,B=D.dependencies,w.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),A=A.sibling;return Rt(vn,vn.current&1|2),h.child}d=d.sibling}B.tail!==null&&hn()>q0&&(h.flags|=128,A=!0,$f(B,!1),h.lanes=4194304)}else{if(!A)if(d=wp(D),d!==null){if(h.flags|=128,A=!0,d=d.updateQueue,d!==null&&(h.updateQueue=d,h.flags|=4),$f(B,!0),B.tail===null&&B.tailMode==="hidden"&&!D.alternate&&!pn)return Ar(h),null}else 2*hn()-B.renderingStartTime>q0&&w!==1073741824&&(h.flags|=128,A=!0,$f(B,!1),h.lanes=4194304);B.isBackwards?(D.sibling=h.child,h.child=D):(d=B.last,d!==null?d.sibling=D:h.child=D,B.last=D)}return B.tail!==null?(h=B.tail,B.rendering=h,B.tail=h.sibling,B.renderingStartTime=hn(),h.sibling=null,d=vn.current,Rt(vn,A?d&1|2:d&1),h):(Ar(h),null);case 22:case 23:return ry(),A=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==A&&(h.flags|=8192),A&&(h.mode&1)!==0?(Ci&1073741824)!==0&&(Ar(h),K&&h.subtreeFlags&6&&(h.flags|=8192)):Ar(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var CL=a.ReactCurrentOwner,Ei=!1;function jr(d,h,w,A){h.child=d===null?Pb(h,null,w,A):Nu(h,d.child,w,A)}function r2(d,h,w,A,B){w=w.render;var D=h.ref;return tr(h,B),A=R0(d,h,w,A,D,B),w=P0(),d!==null&&!Ei?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~B,mo(d,h,B)):(pn&&w&&x0(h),h.flags|=1,jr(d,h,A,B),h.child)}function i2(d,h,w,A,B){if(d===null){var D=w.type;return typeof D=="function"&&!sy(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=D,s2(d,h,D,A,B)):(d=Qp(w.type,null,A,h,h.mode,B),d.ref=h.ref,d.return=h,h.child=d)}if(D=d.child,(d.lanes&B)===0){var Z=D.memoizedProps;if(w=w.compare,w=w!==null?w:hl,w(Z,A)&&d.ref===h.ref)return mo(d,h,B)}return h.flags|=1,d=la(D,A),d.ref=h.ref,d.return=h,h.child=d}function s2(d,h,w,A,B){if(d!==null&&hl(d.memoizedProps,A)&&d.ref===h.ref)if(Ei=!1,(d.lanes&B)!==0)(d.flags&131072)!==0&&(Ei=!0);else return h.lanes=d.lanes,mo(d,h,B);return k0(d,h,w,A,B)}function o2(d,h,w){var A=h.pendingProps,B=A.children,D=d!==null?d.memoizedState:null;if(A.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null},Rt(Vu,Ci),Ci|=w;else if((w&1073741824)!==0)h.memoizedState={baseLanes:0,cachePool:null},A=D!==null?D.baseLanes:w,Rt(Vu,Ci),Ci|=A;else return d=D!==null?D.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null},h.updateQueue=null,Rt(Vu,Ci),Ci|=d,null;else D!==null?(A=D.baseLanes|w,h.memoizedState=null):A=w,Rt(Vu,Ci),Ci|=A;return jr(d,h,B,w),h.child}function a2(d,h){var w=h.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function k0(d,h,w,A,B){var D=Ln(w)?Hr:Ut.current;return D=wi(h,D),tr(h,B),w=R0(d,h,w,A,D,B),A=P0(),d!==null&&!Ei?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~B,mo(d,h,B)):(pn&&A&&x0(h),h.flags|=1,jr(d,h,w,B),h.child)}function l2(d,h,w,A,B){if(Ln(w)){var D=!0;Us(h)}else D=!1;if(tr(h,B),h.stateNode===null)d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),Sb(h,w,A),y0(h,w,A,B),A=!0;else if(d===null){var Z=h.stateNode,ue=h.memoizedProps;Z.props=ue;var Te=Z.context,Ve=w.contextType;typeof Ve=="object"&&Ve!==null?Ve=nn(Ve):(Ve=Ln(w)?Hr:Ut.current,Ve=wi(h,Ve));var qe=w.getDerivedStateFromProps,_t=typeof qe=="function"||typeof Z.getSnapshotBeforeUpdate=="function";_t||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ue!==A||Te!==Ve)&&bb(h,Z,A,Ve),vs=!1;var lt=h.memoizedState;Z.state=lt,gp(h,A,Z,B),Te=h.memoizedState,ue!==A||lt!==Te||In.current||vs?(typeof qe=="function"&&(v0(h,w,qe,A),Te=h.memoizedState),(ue=vs||wb(h,w,ue,A,lt,Te,Ve))?(_t||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=A,h.memoizedState=Te),Z.props=A,Z.state=Te,Z.context=Ve,A=ue):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),A=!1)}else{Z=h.stateNode,vb(d,h),ue=h.memoizedProps,Ve=h.type===h.elementType?ue:Sr(h.type,ue),Z.props=Ve,_t=h.pendingProps,lt=Z.context,Te=w.contextType,typeof Te=="object"&&Te!==null?Te=nn(Te):(Te=Ln(w)?Hr:Ut.current,Te=wi(h,Te));var rn=w.getDerivedStateFromProps;(qe=typeof rn=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ue!==_t||lt!==Te)&&bb(h,Z,A,Te),vs=!1,lt=h.memoizedState,Z.state=lt,gp(h,A,Z,B);var it=h.memoizedState;ue!==_t||lt!==it||In.current||vs?(typeof rn=="function"&&(v0(h,w,rn,A),it=h.memoizedState),(Ve=vs||wb(h,w,Ve,A,lt,it,Te)||!1)?(qe||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(A,it,Te),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(A,it,Te)),typeof Z.componentDidUpdate=="function"&&(h.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ue===d.memoizedProps&&lt===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ue===d.memoizedProps&&lt===d.memoizedState||(h.flags|=1024),h.memoizedProps=A,h.memoizedState=it),Z.props=A,Z.state=it,Z.context=Te,A=Ve):(typeof Z.componentDidUpdate!="function"||ue===d.memoizedProps&&lt===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ue===d.memoizedProps&&lt===d.memoizedState||(h.flags|=1024),A=!1)}return O0(d,h,w,A,D,B)}function O0(d,h,w,A,B,D){a2(d,h);var Z=(h.flags&128)!==0;if(!A&&!Z)return B&&up(h,w,!1),mo(d,h,D);A=h.stateNode,CL.current=h;var ue=Z&&typeof w.getDerivedStateFromError!="function"?null:A.render();return h.flags|=1,d!==null&&Z?(h.child=Nu(h,d.child,null,D),h.child=Nu(h,null,ue,D)):jr(d,h,ue,D),h.memoizedState=A.state,B&&up(h,w,!0),h.child}function u2(d){var h=d.stateNode;h.pendingContext?Tu(d,h.pendingContext,h.pendingContext!==h.context):h.context&&Tu(d,h.context,!1),M0(d,h.containerInfo)}function c2(d,h,w,A,B){return Uu(),b0(B),h.flags|=256,jr(d,h,w,A),h.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Dp(d){return{baseLanes:d,cachePool:null}}function f2(d,h,w){var A=h.pendingProps,B=vn.current,D=!1,Z=(h.flags&128)!==0,ue;if((ue=Z)||(ue=d!==null&&d.memoizedState===null?!1:(B&2)!==0),ue?(D=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(B|=1),Rt(vn,B&1),d===null)return S0(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((h.mode&1)===0?h.lanes=1:$n(d)?h.lanes=8:h.lanes=1073741824,null):(B=A.children,d=A.fallback,D?(A=h.mode,D=h.child,B={mode:"hidden",children:B},(A&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=B):D=qp(B,A,0,null),d=bl(d,A,w,null),D.return=h,d.return=h,D.sibling=d,h.child=D,h.child.memoizedState=Dp(w),h.memoizedState=Bp,d):U0(h,B));if(B=d.memoizedState,B!==null){if(ue=B.dehydrated,ue!==null){if(Z)return h.flags&256?(h.flags&=-257,Ip(d,h,w,Error(o(422)))):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(D=A.fallback,B=h.mode,A=qp({mode:"visible",children:A.children},B,0,null),D=bl(D,B,w,null),D.flags|=2,A.return=h,D.return=h,A.sibling=D,h.child=A,(h.mode&1)!==0&&Nu(h,d.child,null,w),h.child.memoizedState=Dp(w),h.memoizedState=Bp,D);if((h.mode&1)===0)h=Ip(d,h,w,null);else if($n(ue))h=Ip(d,h,w,Error(o(419)));else if(A=(w&d.childLanes)!==0,Ei||A){if(A=zn,A!==null){switch(w&-w){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}A=(D&(A.suspendedLanes|w))!==0?0:D,A!==0&&A!==B.retryLane&&(B.retryLane=A,$i(d,A,-1))}iy(),h=Ip(d,h,w,Error(o(421)))}else gn(ue)?(h.flags|=128,h.child=d.child,h=zL.bind(null,d),Q(ue,h),h=null):(w=B.treeContext,ee&&(Ai=Pe(ue),Mi=h,pn=!0,ys=null,Ff=!1,w!==null&&(Hi[Vi++]=fo,Hi[Vi++]=ho,Hi[Vi++]=ml,fo=w.id,ho=w.overflow,ml=h)),h=U0(h,h.pendingProps.children),h.flags|=4096);return h}return D?(A=h2(d,h,A.children,A.fallback,w),D=h.child,B=d.child.memoizedState,D.memoizedState=B===null?Dp(w):{baseLanes:B.baseLanes|w,cachePool:null},D.childLanes=d.childLanes&~w,h.memoizedState=Bp,A):(w=d2(d,h,A.children,w),h.memoizedState=null,w)}return D?(A=h2(d,h,A.children,A.fallback,w),D=h.child,B=d.child.memoizedState,D.memoizedState=B===null?Dp(w):{baseLanes:B.baseLanes|w,cachePool:null},D.childLanes=d.childLanes&~w,h.memoizedState=Bp,A):(w=d2(d,h,A.children,w),h.memoizedState=null,w)}function U0(d,h){return h=qp({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function d2(d,h,w,A){var B=d.child;return d=B.sibling,w=la(B,{mode:"visible",children:w}),(h.mode&1)===0&&(w.lanes=A),w.return=h,w.sibling=null,d!==null&&(A=h.deletions,A===null?(h.deletions=[d],h.flags|=16):A.push(d)),h.child=w}function h2(d,h,w,A,B){var D=h.mode;d=d.child;var Z=d.sibling,ue={mode:"hidden",children:w};return(D&1)===0&&h.child!==d?(w=h.child,w.childLanes=0,w.pendingProps=ue,h.deletions=null):(w=la(d,ue),w.subtreeFlags=d.subtreeFlags&14680064),Z!==null?A=la(Z,A):(A=bl(A,D,B,null),A.flags|=2),A.return=h,w.return=h,w.sibling=A,h.child=w,A}function Ip(d,h,w,A){return A!==null&&b0(A),Nu(h,d.child,null,w),d=U0(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function p2(d,h,w){d.lanes|=h;var A=d.alternate;A!==null&&(A.lanes|=h),Nn(d.return,h,w)}function N0(d,h,w,A,B){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:B}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=A,D.tail=w,D.tailMode=B)}function m2(d,h,w){var A=h.pendingProps,B=A.revealOrder,D=A.tail;if(jr(d,h,A.children,w),A=vn.current,(A&2)!==0)A=A&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&p2(d,w,h);else if(d.tag===19)p2(d,w,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}A&=1}if(Rt(vn,A),(h.mode&1)===0)h.memoizedState=null;else switch(B){case"forwards":for(w=h.child,B=null;w!==null;)d=w.alternate,d!==null&&wp(d)===null&&(B=w),w=w.sibling;w=B,w===null?(B=h.child,h.child=null):(B=w.sibling,w.sibling=null),N0(h,!1,B,w,D);break;case"backwards":for(w=null,B=h.child,h.child=null;B!==null;){if(d=B.alternate,d!==null&&wp(d)===null){h.child=B;break}d=B.sibling,B.sibling=w,w=B,B=d}N0(h,!0,w,null,D);break;case"together":N0(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function mo(d,h,w){if(d!==null&&(h.dependencies=d.dependencies),Wu|=h.lanes,(w&h.childLanes)===0)return null;if(d!==null&&h.child!==d.child)throw Error(o(153));if(h.child!==null){for(d=h.child,w=la(d,d.pendingProps),h.child=w,w.return=h;d.sibling!==null;)d=d.sibling,w=w.sibling=la(d,d.pendingProps),w.return=h;w.sibling=null}return h.child}function TL(d,h,w){switch(h.tag){case 3:u2(h),Uu();break;case 5:Bb(h);break;case 1:Ln(h.type)&&Us(h);break;case 4:M0(h,h.stateNode.containerInfo);break;case 10:pp(h,h.type._context,h.memoizedProps.value);break;case 13:var A=h.memoizedState;if(A!==null)return A.dehydrated!==null?(Rt(vn,vn.current&1),h.flags|=128,null):(w&h.child.childLanes)!==0?f2(d,h,w):(Rt(vn,vn.current&1),d=mo(d,h,w),d!==null?d.sibling:null);Rt(vn,vn.current&1);break;case 19:if(A=(w&h.childLanes)!==0,(d.flags&128)!==0){if(A)return m2(d,h,w);h.flags|=128}var B=h.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Rt(vn,vn.current),A)break;return null;case 22:case 23:return h.lanes=0,o2(d,h,w)}return mo(d,h,w)}function RL(d,h){switch(_0(h),h.tag){case 1:return Ln(h.type)&&qo(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Gu(),xt(In),xt(Ut),C0(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 5:return A0(h),null;case 13:if(xt(vn),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Uu()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return xt(vn),null;case 4:return Gu(),null;case 10:return Hs(h.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var Lp=!1,yl=!1,PL=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Fp(d,h){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){ci(d,h,A)}else w.current=null}function z0(d,h,w){try{w()}catch(A){ci(d,h,A)}}var g2=!1;function BL(d,h){for(O(d.containerInfo),Ke=h;Ke!==null;)if(d=Ke,h=d.child,(d.subtreeFlags&1028)!==0&&h!==null)h.return=d,Ke=h;else for(;Ke!==null;){d=Ke;try{var w=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var A=w.memoizedProps,B=w.memoizedState,D=d.stateNode,Z=D.getSnapshotBeforeUpdate(d.elementType===d.type?A:Sr(d.type,A),B);D.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:K&&Et(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){ci(d,d.return,ue)}if(h=d.sibling,h!==null){h.return=d.return,Ke=h;break}Ke=d.return}return w=g2,g2=!1,w}function xl(d,h,w){var A=h.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var B=A=A.next;do{if((B.tag&d)===d){var D=B.destroy;B.destroy=void 0,D!==void 0&&z0(h,w,D)}B=B.next}while(B!==A)}}function Jf(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&d)===d){var A=w.create;w.destroy=A()}w=w.next}while(w!==h)}}function G0(d){var h=d.ref;if(h!==null){var w=d.stateNode;switch(d.tag){case 5:d=$(w);break;default:d=w}typeof h=="function"?h(d):h.current=d}}function v2(d,h,w){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(ta,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var A=d=d.next;do{var B=A,D=B.destroy;B=B.tag,D!==void 0&&((B&2)!==0||(B&4)!==0)&&z0(h,w,D),A=A.next}while(A!==d)}break;case 1:if(Fp(h,w),d=h.stateNode,typeof d.componentWillUnmount=="function")try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(Z){ci(h,w,Z)}break;case 5:Fp(h,w);break;case 4:K?b2(d,h,w):Y&&Y&&(h=h.stateNode.containerInfo,w=Jt(h),Kt(h,w))}}function y2(d,h,w){for(var A=h;;)if(v2(d,A,w),A.child===null||K&&A.tag===4){if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function x2(d){var h=d.alternate;h!==null&&(d.alternate=null,x2(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Ue(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function _2(d){return d.tag===5||d.tag===3||d.tag===4}function w2(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||_2(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function S2(d){if(K){e:{for(var h=d.return;h!==null;){if(_2(h))break e;h=h.return}throw Error(o(160))}var w=h;switch(w.tag){case 5:h=w.stateNode,w.flags&32&&(se(h),w.flags&=-33),w=w2(d),V0(d,w,h);break;case 3:case 4:h=w.stateNode.containerInfo,w=w2(d),H0(d,w,h);break;default:throw Error(o(161))}}}function H0(d,h,w){var A=d.tag;if(A===5||A===6)d=d.stateNode,h?Fe(w,d,h):fe(w,d);else if(A!==4&&(d=d.child,d!==null))for(H0(d,h,w),d=d.sibling;d!==null;)H0(d,h,w),d=d.sibling}function V0(d,h,w){var A=d.tag;if(A===5||A===6)d=d.stateNode,h?ke(w,d,h):De(w,d);else if(A!==4&&(d=d.child,d!==null))for(V0(d,h,w),d=d.sibling;d!==null;)V0(d,h,w),d=d.sibling}function b2(d,h,w){for(var A=h,B=!1,D,Z;;){if(!B){B=A.return;e:for(;;){if(B===null)throw Error(o(160));switch(D=B.stateNode,B.tag){case 5:Z=!1;break e;case 3:D=D.containerInfo,Z=!0;break e;case 4:D=D.containerInfo,Z=!0;break e}B=B.return}B=!0}if(A.tag===5||A.tag===6)y2(d,A,w),Z?tt(D,A.stateNode):Oe(D,A.stateNode);else if(A.tag===18)Z?tn(D,A.stateNode):Ft(D,A.stateNode);else if(A.tag===4){if(A.child!==null){D=A.stateNode.containerInfo,Z=!0,A.child.return=A,A=A.child;continue}}else if(v2(d,A,w),A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break;for(;A.sibling===null;){if(A.return===null||A.return===h)return;A=A.return,A.tag===4&&(B=!1)}A.sibling.return=A.return,A=A.sibling}}function W0(d,h){if(K){switch(h.tag){case 0:case 11:case 14:case 15:xl(3,h,h.return),Jf(3,h),xl(5,h,h.return);return;case 1:return;case 5:var w=h.stateNode;if(w!=null){var A=h.memoizedProps;d=d!==null?d.memoizedProps:A;var B=h.type,D=h.updateQueue;h.updateQueue=null,D!==null&&He(w,D,B,d,A,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));w=h.memoizedProps,We(h.stateNode,d!==null?d.memoizedProps:w,w);return;case 3:ee&&d!==null&&d.memoizedState.isDehydrated&&Lt(h.stateNode.containerInfo);return;case 12:return;case 13:kp(h);return;case 19:kp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:xl(3,h,h.return),Jf(3,h),xl(5,h,h.return);return;case 12:return;case 13:kp(h);return;case 19:kp(h);return;case 3:ee&&d!==null&&d.memoizedState.isDehydrated&&Lt(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Y){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Kt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function kp(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new PL),h.forEach(function(A){var B=GL.bind(null,d,A);w.has(A)||(w.add(A),A.then(B,B))})}}function DL(d,h){for(Ke=h;Ke!==null;){h=Ke;var w=h.deletions;if(w!==null)for(var A=0;A<w.length;A++){var B=w[A];try{var D=d;K?b2(D,B,h):y2(D,B,h);var Z=B.alternate;Z!==null&&(Z.return=null),B.return=null}catch(rt){ci(B,h,rt)}}if(w=h.child,(h.subtreeFlags&12854)!==0&&w!==null)w.return=h,Ke=w;else for(;Ke!==null;){h=Ke;try{var ue=h.flags;if(ue&32&&K&&se(h.stateNode),ue&512){var Te=h.alternate;if(Te!==null){var Ve=Te.ref;Ve!==null&&(typeof Ve=="function"?Ve(null):Ve.current=null)}}if(ue&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var qe=h.alternate;(qe===null||qe.memoizedState===null)&&(Q0=hn())}break;case 22:var _t=h.memoizedState!==null,lt=h.alternate,rn=lt!==null&&lt.memoizedState!==null;if(w=h,K){e:if(A=w,B=_t,D=null,K)for(var it=A;;){if(it.tag===5){if(D===null){D=it;var Er=it.stateNode;B?je(Er):ze(it.stateNode,it.memoizedProps)}}else if(it.tag===6){if(D===null){var Ki=it.stateNode;B?be(Ki):$e(Ki,it.memoizedProps)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===A)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===A)break;for(;it.sibling===null;){if(it.return===null||it.return===A)break e;D===it&&(D=null),it=it.return}D===it&&(D=null),it.sibling.return=it.return,it=it.sibling}}if(_t&&!rn&&(w.mode&1)!==0){Ke=w;for(var _e=w.child;_e!==null;){for(w=Ke=_e;Ke!==null;){A=Ke;var de=A.child;switch(A.tag){case 0:case 11:case 14:case 15:xl(4,A,A.return);break;case 1:Fp(A,A.return);var Me=A.stateNode;if(typeof Me.componentWillUnmount=="function"){var Xe=A.return;try{Me.props=A.memoizedProps,Me.state=A.memoizedState,Me.componentWillUnmount()}catch(rt){ci(A,Xe,rt)}}break;case 5:Fp(A,A.return);break;case 22:if(A.memoizedState!==null){E2(w);continue}}de!==null?(de.return=A,Ke=de):E2(w)}_e=_e.sibling}}}switch(ue&4102){case 2:S2(h),h.flags&=-3;break;case 6:S2(h),h.flags&=-3,W0(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,W0(h.alternate,h);break;case 4:W0(h.alternate,h)}}catch(rt){ci(h,h.return,rt)}if(w=h.sibling,w!==null){w.return=h.return,Ke=w;break}Ke=h.return}}}function IL(d,h,w){Ke=d,M2(d)}function M2(d,h,w){for(var A=(d.mode&1)!==0;Ke!==null;){var B=Ke,D=B.child;if(B.tag===22&&A){var Z=B.memoizedState!==null||Lp;if(!Z){var ue=B.alternate,Te=ue!==null&&ue.memoizedState!==null||yl;ue=Lp;var Ve=yl;if(Lp=Z,(yl=Te)&&!Ve)for(Ke=B;Ke!==null;)Z=Ke,Te=Z.child,Z.tag===22&&Z.memoizedState!==null?C2(B):Te!==null?(Te.return=Z,Ke=Te):C2(B);for(;D!==null;)Ke=D,M2(D),D=D.sibling;Ke=B,Lp=ue,yl=Ve}A2(d)}else(B.subtreeFlags&8772)!==0&&D!==null?(D.return=B,Ke=D):A2(d)}}function A2(d){for(;Ke!==null;){var h=Ke;if((h.flags&8772)!==0){var w=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:yl||Jf(5,h);break;case 1:var A=h.stateNode;if(h.flags&4&&!yl)if(w===null)A.componentDidMount();else{var B=h.elementType===h.type?w.memoizedProps:Sr(h.type,w.memoizedProps);A.componentDidUpdate(B,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&xb(h,D,A);break;case 3:var Z=h.updateQueue;if(Z!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=$(h.child.stateNode);break;case 1:w=h.child.stateNode}xb(h,Z,w)}break;case 5:var ue=h.stateNode;w===null&&h.flags&4&&Le(ue,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(ee&&h.memoizedState===null){var Te=h.alternate;if(Te!==null){var Ve=Te.memoizedState;if(Ve!==null){var qe=Ve.dehydrated;qe!==null&&Tt(qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}yl||h.flags&512&&G0(h)}catch(_t){ci(h,h.return,_t)}}if(h===d){Ke=null;break}if(w=h.sibling,w!==null){w.return=h.return,Ke=w;break}Ke=h.return}}function E2(d){for(;Ke!==null;){var h=Ke;if(h===d){Ke=null;break}var w=h.sibling;if(w!==null){w.return=h.return,Ke=w;break}Ke=h.return}}function C2(d){for(;Ke!==null;){var h=Ke;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{Jf(4,h)}catch(Te){ci(h,w,Te)}break;case 1:var A=h.stateNode;if(typeof A.componentDidMount=="function"){var B=h.return;try{A.componentDidMount()}catch(Te){ci(h,B,Te)}}var D=h.return;try{G0(h)}catch(Te){ci(h,D,Te)}break;case 5:var Z=h.return;try{G0(h)}catch(Te){ci(h,Z,Te)}}}catch(Te){ci(h,h.return,Te)}if(h===d){Ke=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,Ke=ue;break}Ke=h.return}}var Op=0,Up=1,Np=2,zp=3,Gp=4;if(typeof Symbol=="function"&&Symbol.for){var Kf=Symbol.for;Op=Kf("selector.component"),Up=Kf("selector.has_pseudo_class"),Np=Kf("selector.role"),zp=Kf("selector.test_id"),Gp=Kf("selector.text")}function j0(d){var h=le(d);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(d=ye(d),d===null)throw Error(o(362));return d.stateNode.current}function $0(d,h){switch(h.$$typeof){case Op:if(d.type===h.value)return!0;break;case Up:e:{h=h.value,d=[d,0];for(var w=0;w<d.length;){var A=d[w++],B=d[w++],D=h[B];if(A.tag!==5||!te(A)){for(;D!=null&&$0(A,D);)B++,D=h[B];if(B===h.length){h=!0;break e}else for(A=A.child;A!==null;)d.push(A,B),A=A.sibling}}h=!1}return h;case Np:if(d.tag===5&&pe(d.stateNode,h.value))return!0;break;case Gp:if((d.tag===5||d.tag===6)&&(d=F(d),d!==null&&0<=d.indexOf(h.value)))return!0;break;case zp:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function J0(d){switch(d.$$typeof){case Op:return"<"+(P(d.value)||"Unknown")+">";case Up:return":has("+(J0(d)||"")+")";case Np:return'[role="'+d.value+'"]';case Gp:return'"'+d.value+'"';case zp:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function T2(d,h){var w=[];d=[d,0];for(var A=0;A<d.length;){var B=d[A++],D=d[A++],Z=h[D];if(B.tag!==5||!te(B)){for(;Z!=null&&$0(B,Z);)D++,Z=h[D];if(D===h.length)w.push(B);else for(B=B.child;B!==null;)d.push(B,D),B=B.sibling}}return w}function K0(d,h){if(!Ie)throw Error(o(363));d=j0(d),d=T2(d,h),h=[],d=Array.from(d);for(var w=0;w<d.length;){var A=d[w++];if(A.tag===5)te(A)||h.push(A.stateNode);else for(A=A.child;A!==null;)d.push(A),A=A.sibling}return h}var LL=Math.ceil,Hp=a.ReactCurrentDispatcher,X0=a.ReactCurrentOwner,Fn=a.ReactCurrentBatchConfig,Pt=0,zn=null,Gn=null,dr=0,Ci=0,Vu=fr(0),Kn=0,Xf=null,Wu=0,Vp=0,Y0=0,Yf=null,li=null,Q0=0,q0=1/0;function ju(){q0=hn()+500}var Wp=!1,Z0=null,ia=null,jp=!1,sa=null,$p=0,Qf=0,ey=null,Jp=-1,Kp=0;function $r(){return(Pt&6)!==0?hn():Jp!==-1?Jp:Jp=hn()}function oa(d){return(d.mode&1)===0?1:(Pt&2)!==0&&dr!==0?dr&-dr:dl.transition!==null?(Kp===0&&(d=so,so<<=1,(so&4194240)===0&&(so=64),Kp=d),Kp):(d=Dt,d!==0?d:Se())}function $i(d,h,w){if(50<Qf)throw Qf=0,ey=null,Error(o(185));var A=Xp(d,h);return A===null?null:(Ns(A,h,w),((Pt&2)===0||A!==zn)&&(A===zn&&((Pt&2)===0&&(Vp|=h),Kn===4&&aa(A,dr)),ui(A,w),h===1&&Pt===0&&(d.mode&1)===0&&(ju(),Gs&&ai())),A)}function Xp(d,h){d.lanes|=h;var w=d.alternate;for(w!==null&&(w.lanes|=h),w=d,d=d.return;d!==null;)d.childLanes|=h,w=d.alternate,w!==null&&(w.childLanes|=h),w=d,d=d.return;return w.tag===3?w.stateNode:null}function ui(d,h){var w=d.callbackNode;Tf(d,h);var A=fl(d,d===zn?dr:0);if(A===0)w!==null&&Du(w),d.callbackNode=null,d.callbackPriority=0;else if(h=A&-A,d.callbackPriority!==h){if(w!=null&&Du(w),h===1)d.tag===0?Lf(P2.bind(null,d)):If(P2.bind(null,d)),xe?Re(function(){Pt===0&&ai()}):uo(ea,ai),w=null;else{switch(Rf(A)){case 1:w=ea;break;case 4:w=hp;break;case 16:w=Vr;break;case 536870912:w=Bf;break;default:w=Vr}w=N2(w,R2.bind(null,d))}d.callbackPriority=h,d.callbackNode=w}}function R2(d,h){if(Jp=-1,Kp=0,(Pt&6)!==0)throw Error(o(327));var w=d.callbackNode;if(Sl()&&d.callbackNode!==w)return null;var A=fl(d,d===zn?dr:0);if(A===0)return null;if((A&30)!==0||(A&d.expiredLanes)!==0||h)h=Yp(d,A);else{h=A;var B=Pt;Pt|=2;var D=I2();(zn!==d||dr!==h)&&(ju(),_l(d,h));do try{OL();break}catch(ue){D2(d,ue)}while(1);Fu(),Hp.current=D,Pt=B,Gn!==null?h=0:(zn=null,dr=0,h=Kn)}if(h!==0){if(h===2&&(B=lo(d),B!==0&&(A=B,h=ty(d,B))),h===1)throw w=Xf,_l(d,0),aa(d,A),ui(d,hn()),w;if(h===6)aa(d,A);else{if(B=d.current.alternate,(A&30)===0&&!FL(B)&&(h=Yp(d,A),h===2&&(D=lo(d),D!==0&&(A=D,h=ty(d,D))),h===1))throw w=Xf,_l(d,0),aa(d,A),ui(d,hn()),w;switch(d.finishedWork=B,d.finishedLanes=A,h){case 0:case 1:throw Error(o(345));case 2:wl(d,li);break;case 3:if(aa(d,A),(A&130023424)===A&&(h=Q0+500-hn(),10<h)){if(fl(d,0)!==0)break;if(B=d.suspendedLanes,(B&A)!==A){$r(),d.pingedLanes|=d.suspendedLanes&B;break}d.timeoutHandle=he(wl.bind(null,d,li),h);break}wl(d,li);break;case 4:if(aa(d,A),(A&4194240)===A)break;for(h=d.eventTimes,B=-1;0<A;){var Z=31-wr(A);D=1<<Z,Z=h[Z],Z>B&&(B=Z),A&=~D}if(A=B,A=hn()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*LL(A/1960))-A,10<A){d.timeoutHandle=he(wl.bind(null,d,li),A);break}wl(d,li);break;case 5:wl(d,li);break;default:throw Error(o(329))}}}return ui(d,hn()),d.callbackNode===w?R2.bind(null,d):null}function ty(d,h){var w=Yf;return d.current.memoizedState.isDehydrated&&(_l(d,h).flags|=256),d=Yp(d,h),d!==2&&(h=li,li=w,h!==null&&ny(h)),d}function ny(d){li===null?li=d:li.push.apply(li,d)}function FL(d){for(var h=d;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var B=w[A],D=B.getSnapshot;B=B.value;try{if(!bi(D(),B))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function aa(d,h){for(h&=~Y0,h&=~Vp,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var w=31-wr(h),A=1<<w;d[w]=-1,h&=~A}}function P2(d){if((Pt&6)!==0)throw Error(o(327));Sl();var h=fl(d,0);if((h&1)===0)return ui(d,hn()),null;var w=Yp(d,h);if(d.tag!==0&&w===2){var A=lo(d);A!==0&&(h=A,w=ty(d,A))}if(w===1)throw w=Xf,_l(d,0),aa(d,h),ui(d,hn()),w;if(w===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,wl(d,li),ui(d,hn()),null}function B2(d){sa!==null&&sa.tag===0&&(Pt&6)===0&&Sl();var h=Pt;Pt|=1;var w=Fn.transition,A=Dt;try{if(Fn.transition=null,Dt=1,d)return d()}finally{Dt=A,Fn.transition=w,Pt=h,(Pt&6)===0&&ai()}}function ry(){Ci=Vu.current,xt(Vu)}function _l(d,h){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==k&&(d.timeoutHandle=k,ie(w)),Gn!==null)for(w=Gn.return;w!==null;){var A=w;switch(_0(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&qo();break;case 3:Gu(),xt(In),xt(Ut),C0();break;case 5:A0(A);break;case 4:Gu();break;case 13:xt(vn);break;case 19:xt(vn);break;case 10:Hs(A.type._context);break;case 22:case 23:ry()}w=w.return}if(zn=d,Gn=d=la(d.current,null),dr=Ci=h,Kn=0,Xf=null,Y0=Vp=Wu=0,li=Yf=null,Jn!==null){for(h=0;h<Jn.length;h++)if(w=Jn[h],A=w.interleaved,A!==null){w.interleaved=null;var B=A.next,D=w.pending;if(D!==null){var Z=D.next;D.next=B,A.next=Z}w.pending=A}Jn=null}return d}function D2(d,h){do{var w=Gn;try{if(Fu(),Sp.current=Tp,bp){for(var A=Cn.memoizedState;A!==null;){var B=A.queue;B!==null&&(B.pending=null),A=A.next}bp=!1}if(Hu=0,nr=br=Cn=null,zf=!1,Gf=0,X0.current=null,w===null||w.return===null){Kn=1,Xf=h,Gn=null;break}e:{var D=d,Z=w.return,ue=w,Te=h;if(h=dr,ue.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Ve=Te,qe=ue,_t=qe.tag;if((qe.mode&1)===0&&(_t===0||_t===11||_t===15)){var lt=qe.alternate;lt?(qe.updateQueue=lt.updateQueue,qe.memoizedState=lt.memoizedState,qe.lanes=lt.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var rn=Zb(Z);if(rn!==null){rn.flags&=-257,e2(rn,Z,ue,D,h),rn.mode&1&&qb(D,Ve,h),h=rn,Te=Ve;var it=h.updateQueue;if(it===null){var Er=new Set;Er.add(Te),h.updateQueue=Er}else it.add(Te);break e}else{if((h&1)===0){qb(D,Ve,h),iy();break e}Te=Error(o(426))}}else if(pn&&ue.mode&1){var Ki=Zb(Z);if(Ki!==null){(Ki.flags&65536)===0&&(Ki.flags|=256),e2(Ki,Z,ue,D,h),b0(Te);break e}}D=Te,Kn!==4&&(Kn=2),Yf===null?Yf=[D]:Yf.push(D),Te=L0(Te,ue),ue=Z;do{switch(ue.tag){case 3:ue.flags|=65536,h&=-h,ue.lanes|=h;var _e=Yb(ue,Te,h);yb(ue,_e);break e;case 1:D=Te;var de=ue.type,Me=ue.stateNode;if((ue.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(ia===null||!ia.has(Me)))){ue.flags|=65536,h&=-h,ue.lanes|=h;var Xe=Qb(ue,D,h);yb(ue,Xe);break e}}ue=ue.return}while(ue!==null)}F2(w)}catch(rt){h=rt,Gn===w&&w!==null&&(Gn=w=w.return);continue}break}while(1)}function I2(){var d=Hp.current;return Hp.current=Tp,d===null?Tp:d}function iy(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),zn===null||(Wu&268435455)===0&&(Vp&268435455)===0||aa(zn,dr)}function Yp(d,h){var w=Pt;Pt|=2;var A=I2();zn===d&&dr===h||_l(d,h);do try{kL();break}catch(B){D2(d,B)}while(1);if(Fu(),Pt=w,Hp.current=A,Gn!==null)throw Error(o(261));return zn=null,dr=0,Kn}function kL(){for(;Gn!==null;)L2(Gn)}function OL(){for(;Gn!==null&&!Pf();)L2(Gn)}function L2(d){var h=U2(d.alternate,d,Ci);d.memoizedProps=d.pendingProps,h===null?F2(d):Gn=h,X0.current=null}function F2(d){var h=d;do{var w=h.alternate;if(d=h.return,(h.flags&32768)===0){if(w=EL(w,h,Ci),w!==null){Gn=w;return}}else{if(w=RL(w,h),w!==null){w.flags&=32767,Gn=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Kn=6,Gn=null;return}}if(h=h.sibling,h!==null){Gn=h;return}Gn=h=d}while(h!==null);Kn===0&&(Kn=5)}function wl(d,h){var w=Dt,A=Fn.transition;try{Fn.transition=null,Dt=1,UL(d,h,w)}finally{Fn.transition=A,Dt=w}return null}function UL(d,h,w){do Sl();while(sa!==null);if((Pt&6)!==0)throw Error(o(327));var A=d.finishedWork,B=d.finishedLanes;if(A===null)return null;if(d.finishedWork=null,d.finishedLanes=0,A===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var D=A.lanes|A.childLanes;if(Zo(d,D),d===zn&&(Gn=zn=null,dr=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||jp||(jp=!0,N2(Vr,function(){return Sl(),null})),D=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||D){D=Fn.transition,Fn.transition=null;var Z=Dt;Dt=1;var ue=Pt;Pt|=4,X0.current=null,BL(d,A),DL(d,A),z(d.containerInfo),d.current=A,IL(A),dp(),Pt=ue,Dt=Z,Fn.transition=D}else d.current=A;if(jp&&(jp=!1,sa=d,$p=B),D=d.pendingLanes,D===0&&(ia=null),Df(A.stateNode),ui(d,hn()),h!==null)for(w=d.onRecoverableError,A=0;A<h.length;A++)w(h[A]);if(Wp)throw Wp=!1,d=Z0,Z0=null,d;return($p&1)!==0&&d.tag!==0&&Sl(),D=d.pendingLanes,(D&1)!==0?d===ey?Qf++:(Qf=0,ey=d):Qf=0,ai(),null}function Sl(){if(sa!==null){var d=Rf($p),h=Fn.transition,w=Dt;try{if(Fn.transition=null,Dt=16>d?16:d,sa===null)var A=!1;else{if(d=sa,sa=null,$p=0,(Pt&6)!==0)throw Error(o(331));var B=Pt;for(Pt|=4,Ke=d.current;Ke!==null;){var D=Ke,Z=D.child;if((Ke.flags&16)!==0){var ue=D.deletions;if(ue!==null){for(var Te=0;Te<ue.length;Te++){var Ve=ue[Te];for(Ke=Ve;Ke!==null;){var qe=Ke;switch(qe.tag){case 0:case 11:case 15:xl(8,qe,D)}var _t=qe.child;if(_t!==null)_t.return=qe,Ke=_t;else for(;Ke!==null;){qe=Ke;var lt=qe.sibling,rn=qe.return;if(x2(qe),qe===Ve){Ke=null;break}if(lt!==null){lt.return=rn,Ke=lt;break}Ke=rn}}}var it=D.alternate;if(it!==null){var Er=it.child;if(Er!==null){it.child=null;do{var Ki=Er.sibling;Er.sibling=null,Er=Ki}while(Er!==null)}}Ke=D}}if((D.subtreeFlags&2064)!==0&&Z!==null)Z.return=D,Ke=Z;else e:for(;Ke!==null;){if(D=Ke,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:xl(9,D,D.return)}var _e=D.sibling;if(_e!==null){_e.return=D.return,Ke=_e;break e}Ke=D.return}}var de=d.current;for(Ke=de;Ke!==null;){Z=Ke;var Me=Z.child;if((Z.subtreeFlags&2064)!==0&&Me!==null)Me.return=Z,Ke=Me;else e:for(Z=de;Ke!==null;){if(ue=Ke,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Jf(9,ue)}}catch(rt){ci(ue,ue.return,rt)}if(ue===Z){Ke=null;break e}var Xe=ue.sibling;if(Xe!==null){Xe.return=ue.return,Ke=Xe;break e}Ke=ue.return}}if(Pt=B,ai(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(ta,d)}catch{}A=!0}return A}finally{Dt=w,Fn.transition=h}}return!1}function k2(d,h,w){h=L0(w,h),h=Yb(d,h,1),ra(d,h),h=$r(),d=Xp(d,1),d!==null&&(Ns(d,1,h),ui(d,h))}function ci(d,h,w){if(d.tag===3)k2(d,d,w);else for(;h!==null;){if(h.tag===3){k2(h,d,w);break}else if(h.tag===1){var A=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ia===null||!ia.has(A))){d=L0(w,d),d=Qb(h,d,1),ra(h,d),d=$r(),h=Xp(h,1),h!==null&&(Ns(h,1,d),ui(h,d));break}}h=h.return}}function NL(d,h,w){var A=d.pingCache;A!==null&&A.delete(h),h=$r(),d.pingedLanes|=d.suspendedLanes&w,zn===d&&(dr&w)===w&&(Kn===4||Kn===3&&(dr&130023424)===dr&&500>hn()-Q0?_l(d,0):Y0|=w),ui(d,h)}function O2(d,h){h===0&&((d.mode&1)===0?h=1:(h=oo,oo<<=1,(oo&130023424)===0&&(oo=4194304)));var w=$r();d=Xp(d,h),d!==null&&(Ns(d,h,w),ui(d,w))}function zL(d){var h=d.memoizedState,w=0;h!==null&&(w=h.retryLane),O2(d,w)}function GL(d,h){var w=0;switch(d.tag){case 13:var A=d.stateNode,B=d.memoizedState;B!==null&&(w=B.retryLane);break;case 19:A=d.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(h),O2(d,w)}var U2;U2=function(d,h,w){if(d!==null)if(d.memoizedProps!==h.pendingProps||In.current)Ei=!0;else{if((d.lanes&w)===0&&(h.flags&128)===0)return Ei=!1,TL(d,h,w);Ei=(d.flags&131072)!==0}else Ei=!1,pn&&(h.flags&1048576)!==0&&Mb(h,xp,h.index);switch(h.lanes=0,h.tag){case 2:var A=h.type;d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps;var B=wi(h,Ut.current);tr(h,w),B=R0(null,h,A,d,B,w);var D=P0();return h.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ln(A)?(D=!0,Us(h)):D=!1,h.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,g0(h),B.updater=vp,h.stateNode=B,B._reactInternals=h,y0(h,A,d,w),h=O0(null,h,A,!0,D,w)):(h.tag=0,pn&&D&&x0(h),jr(null,h,B,w),h=h.child),h;case 16:A=h.elementType;e:{switch(d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),d=h.pendingProps,B=A._init,A=B(A._payload),h.type=A,B=h.tag=VL(A),d=Sr(A,d),B){case 0:h=k0(null,h,A,d,w);break e;case 1:h=l2(null,h,A,d,w);break e;case 11:h=r2(null,h,A,d,w);break e;case 14:h=i2(null,h,A,Sr(A.type,d),w);break e}throw Error(o(306,A,""))}return h;case 0:return A=h.type,B=h.pendingProps,B=h.elementType===A?B:Sr(A,B),k0(d,h,A,B,w);case 1:return A=h.type,B=h.pendingProps,B=h.elementType===A?B:Sr(A,B),l2(d,h,A,B,w);case 3:e:{if(u2(h),d===null)throw Error(o(387));A=h.pendingProps,D=h.memoizedState,B=D.element,vb(d,h),gp(h,A,null,w);var Z=h.memoizedState;if(A=Z.element,ee&&D.isDehydrated)if(D={element:A,isDehydrated:!1,cache:Z.cache,transitions:Z.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){B=Error(o(423)),h=c2(d,h,A,w,B);break e}else if(A!==B){B=Error(o(424)),h=c2(d,h,A,w,B);break e}else for(ee&&(Ai=ve(h.stateNode.containerInfo),Mi=h,pn=!0,ys=null,Ff=!1),w=Pb(h,null,A,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Uu(),A===B){h=mo(d,h,w);break e}jr(d,h,A,w)}h=h.child}return h;case 5:return Bb(h),d===null&&S0(h),A=h.type,B=h.pendingProps,D=d!==null?d.memoizedProps:null,Z=B.children,me(A,B)?Z=null:D!==null&&me(A,D)&&(h.flags|=32),a2(d,h),jr(d,h,Z,w),h.child;case 6:return d===null&&S0(h),null;case 13:return f2(d,h,w);case 4:return M0(h,h.stateNode.containerInfo),A=h.pendingProps,d===null?h.child=Nu(h,null,A,w):jr(d,h,A,w),h.child;case 11:return A=h.type,B=h.pendingProps,B=h.elementType===A?B:Sr(A,B),r2(d,h,A,B,w);case 7:return jr(d,h,h.pendingProps,w),h.child;case 8:return jr(d,h,h.pendingProps.children,w),h.child;case 12:return jr(d,h,h.pendingProps.children,w),h.child;case 10:e:{if(A=h.type._context,B=h.pendingProps,D=h.memoizedProps,Z=B.value,pp(h,A,Z),D!==null)if(bi(D.value,Z)){if(D.children===B.children&&!In.current){h=mo(d,h,w);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var ue=D.dependencies;if(ue!==null){Z=D.child;for(var Te=ue.firstContext;Te!==null;){if(Te.context===A){if(D.tag===1){Te=co(-1,w&-w),Te.tag=2;var Ve=D.updateQueue;if(Ve!==null){Ve=Ve.shared;var qe=Ve.pending;qe===null?Te.next=Te:(Te.next=qe.next,qe.next=Te),Ve.pending=Te}}D.lanes|=w,Te=D.alternate,Te!==null&&(Te.lanes|=w),Nn(D.return,w,h),ue.lanes|=w;break}Te=Te.next}}else if(D.tag===10)Z=D.type===h.type?null:D.child;else if(D.tag===18){if(Z=D.return,Z===null)throw Error(o(341));Z.lanes|=w,ue=Z.alternate,ue!==null&&(ue.lanes|=w),Nn(Z,w,h),Z=D.sibling}else Z=D.child;if(Z!==null)Z.return=D;else for(Z=D;Z!==null;){if(Z===h){Z=null;break}if(D=Z.sibling,D!==null){D.return=Z.return,Z=D;break}Z=Z.return}D=Z}jr(d,h,B.children,w),h=h.child}return h;case 9:return B=h.type,A=h.pendingProps.children,tr(h,w),B=nn(B),A=A(B),h.flags|=1,jr(d,h,A,w),h.child;case 14:return A=h.type,B=Sr(A,h.pendingProps),B=Sr(A.type,B),i2(d,h,A,B,w);case 15:return s2(d,h,h.type,h.pendingProps,w);case 17:return A=h.type,B=h.pendingProps,B=h.elementType===A?B:Sr(A,B),d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Ln(A)?(d=!0,Us(h)):d=!1,tr(h,w),Sb(h,A,B),y0(h,A,B,w),O0(null,h,A,!0,d,w);case 19:return m2(d,h,w);case 22:return o2(d,h,w)}throw Error(o(156,h.tag))};function N2(d,h){return uo(d,h)}function HL(d,h,w,A){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(d,h,w,A){return new HL(d,h,w,A)}function sy(d){return d=d.prototype,!(!d||!d.isReactComponent)}function VL(d){if(typeof d=="function")return sy(d)?1:0;if(d!=null){if(d=d.$$typeof,d===y)return 11;if(d===_)return 14}return 2}function la(d,h){var w=d.alternate;return w===null?(w=Ji(d.tag,h,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=h,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,h=d.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function Qp(d,h,w,A,B,D){var Z=2;if(A=d,typeof d=="function")sy(d)&&(Z=1);else if(typeof d=="string")Z=5;else e:switch(d){case c:return bl(w.children,B,D,h);case f:Z=8,B|=8;break;case p:return d=Ji(12,w,h,B|2),d.elementType=p,d.lanes=D,d;case v:return d=Ji(13,w,h,B),d.elementType=v,d.lanes=D,d;case x:return d=Ji(19,w,h,B),d.elementType=x,d.lanes=D,d;case b:return qp(w,B,D,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:Z=10;break e;case g:Z=9;break e;case y:Z=11;break e;case _:Z=14;break e;case S:Z=16,A=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return h=Ji(Z,w,h,B),h.elementType=d,h.type=A,h.lanes=D,h}function bl(d,h,w,A){return d=Ji(7,d,A,h),d.lanes=w,d}function qp(d,h,w,A){return d=Ji(22,d,A,h),d.elementType=b,d.lanes=w,d.stateNode={},d}function oy(d,h,w){return d=Ji(6,d,null,h),d.lanes=w,d}function ay(d,h,w){return h=Ji(4,d.children!==null?d.children:[],d.key,h),h.lanes=w,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function WL(d,h,w,A,B){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=k,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=A,this.onRecoverableError=B,ee&&(this.mutableSourceEagerHydrationData=null)}function z2(d,h,w,A,B,D,Z,ue,Te){return d=new WL(d,h,w,ue,Te),h===1?(h=1,D===!0&&(h|=8)):h=0,D=Ji(3,null,null,h),d.current=D,D.stateNode=d,D.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null},g0(D),d}function G2(d){if(!d)return Gr;d=d._reactInternals;e:{if(T(d)!==d||d.tag!==1)throw Error(o(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ln(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(d.tag===1){var w=d.type;if(Ln(w))return Ru(d,w,h)}return h}function H2(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=I(h),d===null?null:d.stateNode}function V2(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<h?w:h}}function ly(d,h){V2(d,h),(d=d.alternate)&&V2(d,h)}function jL(d){return d=I(d),d===null?null:d.stateNode}function $L(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var h=$r();$i(d,134217728,h),ly(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var h=$r(),w=oa(d);$i(d,w,h),ly(d,w)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var w=ao(h.pendingLanes);w!==0&&(zs(h,w|1),ui(h,hn()),(Pt&6)===0&&(ju(),ai()))}break;case 13:var A=$r();B2(function(){return $i(d,1,A)}),ly(d,1)}},t.batchedUpdates=function(d,h){var w=Pt;Pt|=1;try{return d(h)}finally{Pt=w,Pt===0&&(ju(),Gs&&ai())}},t.createComponentSelector=function(d){return{$$typeof:Op,value:d}},t.createContainer=function(d,h,w,A,B,D,Z){return z2(d,h,!1,null,w,A,B,D,Z)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Up,value:d}},t.createHydrationContainer=function(d,h,w,A,B,D,Z,ue,Te){return d=z2(w,A,!0,d,B,D,Z,ue,Te),d.context=G2(null),w=d.current,A=$r(),B=oa(w),D=co(A,B),D.callback=h!=null?h:null,ra(w,D),d.current.lanes=B,Ns(d,B,A),ui(d,A),d},t.createPortal=function(d,h,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:d,containerInfo:h,implementation:w}},t.createRoleSelector=function(d){return{$$typeof:Np,value:d}},t.createTestNameSelector=function(d){return{$$typeof:zp,value:d}},t.createTextSelector=function(d){return{$$typeof:Gp,value:d}},t.deferredUpdates=function(d){var h=Dt,w=Fn.transition;try{return Fn.transition=null,Dt=16,d()}finally{Dt=h,Fn.transition=w}},t.discreteUpdates=function(d,h,w,A,B){var D=Dt,Z=Fn.transition;try{return Fn.transition=null,Dt=1,d(h,w,A,B)}finally{Dt=D,Fn.transition=Z,Pt===0&&ju()}},t.findAllNodes=K0,t.findBoundingRects=function(d,h){if(!Ie)throw Error(o(363));h=K0(d,h),d=[];for(var w=0;w<h.length;w++)d.push(j(h[w]));for(h=d.length-1;0<h;h--){w=d[h];for(var A=w.x,B=A+w.width,D=w.y,Z=D+w.height,ue=h-1;0<=ue;ue--)if(h!==ue){var Te=d[ue],Ve=Te.x,qe=Ve+Te.width,_t=Te.y,lt=_t+Te.height;if(A>=Ve&&D>=_t&&B<=qe&&Z<=lt){d.splice(h,1);break}else if(A!==Ve||w.width!==Te.width||lt<D||_t>Z){if(!(D!==_t||w.height!==Te.height||qe<A||Ve>B)){Ve>A&&(Te.width+=Ve-A,Te.x=A),qe<B&&(Te.width=B-Ve),d.splice(h,1);break}}else{_t>D&&(Te.height+=_t-D,Te.y=D),lt<Z&&(Te.height=Z-_t),d.splice(h,1);break}}}return d},t.findHostInstance=H2,t.findHostInstanceWithNoPortals=function(d){return d=L(d),d=d!==null?G(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return H2(d)},t.flushControlled=function(d){var h=Pt;Pt|=1;var w=Fn.transition,A=Dt;try{Fn.transition=null,Dt=1,d()}finally{Dt=A,Fn.transition=w,Pt=h,Pt===0&&(ju(),ai())}},t.flushPassiveEffects=Sl,t.flushSync=B2,t.focusWithin=function(d,h){if(!Ie)throw Error(o(363));for(d=j0(d),h=T2(d,h),h=Array.from(h),d=0;d<h.length;){var w=h[d++];if(!te(w)){if(w.tag===5&&Ee(w.stateNode))return!0;for(w=w.child;w!==null;)h.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(d,h){if(!Ie)throw Error(o(363));var w=0,A=[];d=[j0(d),0];for(var B=0;B<d.length;){var D=d[B++],Z=d[B++],ue=h[Z];if((D.tag!==5||!te(D))&&($0(D,ue)&&(A.push(J0(ue)),Z++,Z>w&&(w=Z)),Z<h.length))for(D=D.child;D!==null;)d.push(D,Z),D=D.sibling}if(w<h.length){for(d=[];w<h.length;w++)d.push(J0(h[w]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return $(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:jL,findFiberByHostInstance:d.findFiberByHostInstance||$L,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)d=!0;else{try{ta=h.inject(d),Si=h}catch{}d=!!h.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,h,w,A){if(!Ie)throw Error(o(363));d=K0(d,h);var B=Be(d,w,A).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(d,h){var w=h._getVersion;w=w(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,w]:d.mutableSourceEagerHydrationData.push(h,w)},t.runWithPriority=function(d,h){var w=Dt;try{return Dt=d,h()}finally{Dt=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,h,w,A){var B=h.current,D=$r(),Z=oa(B);return w=G2(w),h.context===null?h.context=w:h.pendingContext=w,h=co(D,Z),h.payload={element:d},A=A===void 0?null:A,A!==null&&(h.callback=A),ra(B,h),d=$i(B,Z,D),d!==null&&mp(d,B,Z),Z},t};(function(n){n.exports=g8})(HB);const v8=cw(HB.exports);var T_={exports:{}},VB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,O){var z=U.length;U.push(O);e:for(;0<z;){var W=z-1>>>1,q=U[W];if(0<i(q,O))U[W]=O,U[z]=q,z=W;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var O=U[0],z=U.pop();if(z!==O){U[0]=z;e:for(var W=0,q=U.length,oe=q>>>1;W<oe;){var ce=2*(W+1)-1,me=U[ce],re=ce+1,he=U[re];if(0>i(me,z))re<q&&0>i(he,me)?(U[W]=he,U[re]=z,W=re):(U[W]=me,U[ce]=z,W=ce);else if(re<q&&0>i(he,z))U[W]=he,U[re]=z,W=re;else break e}}return O}function i(U,O){var z=U.sortIndex-O.sortIndex;return z!==0?z:U.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,p=3,m=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var O=t(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=U)r(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function b(U){if(y=!1,S(U),!g)if(t(l)!==null)g=!0,$(C);else{var O=t(u);O!==null&&ne(b,O.startTime-U)}}function C(U,O){g=!1,y&&(y=!1,x(M),M=-1),m=!0;var z=p;try{for(S(O),f=t(l);f!==null&&(!(f.expirationTime>O)||U&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var q=W(f.expirationTime<=O);O=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&r(l),S(O)}else r(l);f=t(l)}if(f!==null)var oe=!0;else{var ce=t(u);ce!==null&&ne(b,ce.startTime-O),oe=!1}return oe}finally{f=null,p=z,m=!1}}var E=!1,P=null,M=-1,T=5,R=-1;function L(){return!(n.unstable_now()-R<T)}function I(){if(P!==null){var U=n.unstable_now();R=U;var O=!0;try{O=P(!0,U)}finally{O?H():(E=!1,P=null)}}else E=!1}var H;if(typeof _=="function")H=function(){_(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,X=G.port2;G.port1.onmessage=I,H=function(){X.postMessage(null)}}else H=function(){v(I,0)};function $(U){P=U,E||(E=!0,H())}function ne(U,O){M=v(function(){U(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,$(C))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return U()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=p;p=U;try{return O()}finally{p=z}},n.unstable_scheduleCallback=function(U,O,z){var W=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,U={id:c++,callback:O,priorityLevel:U,startTime:z,expirationTime:q,sortIndex:-1},z>W?(U.sortIndex=z,e(u,U),t(l)===null&&U===t(u)&&(y?(x(M),M=-1):y=!0,ne(b,z-W))):(U.sortIndex=q,e(l,U),g||m||(g=!0,$(C))),U},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(U){var O=p;return function(){var z=p;p=O;try{return U.apply(this,arguments)}finally{p=z}}}})(VB);(function(n){n.exports=VB})(T_);function WB(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}const To=[];function jB(n,e,t=!1,r={}){for(const s of To)if(WB(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,promise:n(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=To.indexOf(i);s!==-1&&To.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(To.push(i),!t)throw i.promise}const $B=(n,e,t)=>jB(n,e,!1,t),y8=(n,e,t)=>void jB(n,e,!0,t),x8=n=>{if(n===void 0||n.length===0)To.splice(0,To.length);else{const e=To.find(t=>WB(n,t.keys,t.equal));if(e){const t=To.indexOf(e);t!==-1&&To.splice(t,1)}}};var o0={exports:{}},a0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8=N.exports,w8=Symbol.for("react.element"),S8=Symbol.for("react.fragment"),b8=Object.prototype.hasOwnProperty,M8=_8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A8={key:!0,ref:!0,__self:!0,__source:!0};function JB(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)b8.call(e,r)&&!A8.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w8,type:n,key:s,ref:o,props:i,_owner:M8.current}}a0.Fragment=S8;a0.jsx=JB;a0.jsxs=JB;(function(n){n.exports=a0})(o0);const ll=o0.exports.Fragment,ae=o0.exports.jsx,at=o0.exports.jsxs;var ME,AE;const KB=n=>n&&n.isOrthographicCamera,E8=n=>n&&n.hasOwnProperty("current"),tp=typeof window<"u"&&((ME=window.document)!=null&&ME.createElement||((AE=window.navigator)==null?void 0:AE.product)==="ReactNative")?N.exports.useLayoutEffect:N.exports.useEffect;function XB(n){const e=N.exports.useRef(n);return tp(()=>void(e.current=n),[n]),e}function C8({set:n}){return tp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class YB extends N.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}YB.getDerivedStateFromError=()=>({error:!0});const QB="__default",T8=n=>n&&!!n.memoized&&!!n.changes;function qB(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const pd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Pn={obj:n=>n===Object(n)&&!Pn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Pn.str(n)||Pn.num(n))return n===e;const s=Pn.obj(n);if(s&&r==="reference")return n===e;const o=Pn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in i?e:n)if(n[a]!==e[a])return!1;if(Pn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function R8(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function P8(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function vc(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function R_(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const EE=/-\d+$/;function v1(n,e,t){if(Pn.str(t)){if(EE.test(t)){const s=t.replace(EE,""),{target:o,key:a}=R_(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=R_(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function CE(n,e,t){var r,i;if(Pn.str(t)){const{target:s,key:o}=R_(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function ZB(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const f=(c=n==null?void 0:n.__r3f)!=null?c:{},p=Object.entries(i),m=[];if(u){const y=Object.keys(l);for(let v=0;v<y.length;v++)i.hasOwnProperty(y[v])||p.unshift([y[v],QB+"remove"])}p.forEach(([y,v])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&y==="object"||Pn.equ(v,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,v,!0,[]]);let _=[];y.includes("-")&&(_=y.split("-")),m.push([y,v,!1,_])});const g={...i};return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function y1(n,e){var t,r;const i=(t=n.__r3f)!=null?t:{},s=i.root,o=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:a,changes:l}=T8(e)?e:ZB(n,e),u=i.eventCount;if(n.__r3f&&(n.__r3f.memoizedProps=a),l.forEach(([c,f,p,m])=>{let g=n,y=g[c];if(m.length&&(y=m.reduce((_,S)=>_[S],n),!(y&&y.set))){const[_,...S]=m.reverse();g=S.reverse().reduce((b,C)=>b[C],n),c=_}if(f===QB+"remove")if(y&&y.constructor){var v;f=new y.constructor(...(v=a.args)!=null?v:[])}else if(g.constructor){var x;const _=new g.constructor(...(x=g.__r3f.memoizedProps.args)!=null?x:[]);f=_[y],_.dispose&&_.dispose()}else f=0;if(p)f?i.handlers[c]=f:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;else if(y&&y.set&&(y.copy||y instanceof tu)){if(Array.isArray(f))y.fromArray?y.fromArray(f):y.set(...f);else if(y.copy&&f&&f.constructor&&y.constructor.name===f.constructor.name)y.copy(f);else if(f!==void 0){const _=y instanceof Ge;!_&&y.setScalar?y.setScalar(f):y instanceof tu&&f instanceof tu?y.mask=f.mask:y.set(f),!("ColorManagement"in Th)&&!o.linear&&_&&y.convertSRGBToLinear()}}else g[c]=f,!o.linear&&g[c]instanceof un&&(g[c].encoding=gt);yc(n)}),i.parent&&o.internal&&n.raycast&&u!==i.eventCount){const c=o.internal.interaction.indexOf(n);c>-1&&o.internal.interaction.splice(c,1),i.eventCount&&o.internal.interaction.push(n)}return l.length&&n.parent&&P_(n),n}function yc(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function P_(n){n.onUpdate==null||n.onUpdate(n)}function B8(n,e){n.manual||(KB(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function D8(n,e,t){const r=t.pop(),i=t.reduce((s,o)=>s[o],n);return i[r]=e}function x1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function I8(){var n,e;switch((n=window)==null||(e=n.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Vc.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Vc.exports.ContinuousEventPriority;default:return Vc.exports.DefaultEventPriority}}function eD(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function L8(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{eD(t.capturedMap,e,r,i)})}function F8(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,p=[],m=u?u(c.internal.interaction):c.internal.interaction;m.forEach(v=>{const x=pd(v);x&&(x.raycaster.camera=void 0)}),c.previousRoot||c.events.compute==null||c.events.compute(l,c);let g=m.flatMap(v=>{const x=pd(v);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var _;x.events.compute==null||x.events.compute(l,x,(_=x.previousRoot)==null?void 0:_.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(v,!0):[]}).sort((v,x)=>{const _=pd(v.object),S=pd(x.object);return!_||!S?0:S.events.priority-_.events.priority||v.distance-x.distance}).filter(v=>{const x=x1(v);return f.has(x)?!1:(f.add(x),!0)});c.events.filter&&(g=c.events.filter(g,c));for(const v of g){let x=v.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&p.push({...v,eventObject:x}),x=x.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let v of c.internal.capturedMap.get(l.pointerId).values())p.push(v.intersection);return p}function i(l,u,c,f){if(l.length){const p={stopped:!1};for(const m of l){const g=pd(m.object);if(g){const{raycaster:y,pointer:v,camera:x,internal:_}=g,S=new J(v.x,v.y,0).unproject(x),b=T=>{var R,L;return(R=(L=_.capturedMap.get(T))==null?void 0:L.has(m.eventObject))!=null?R:!1},C=T=>{const R={intersection:m,target:u.target};_.capturedMap.has(T)?_.capturedMap.get(T).set(m.eventObject,R):_.capturedMap.set(T,new Map([[m.eventObject,R]])),u.target.setPointerCapture(T)},E=T=>{const R=_.capturedMap.get(T);R&&eD(_.capturedMap,m.eventObject,R,T)};let P={};for(let T in u){let R=u[T];typeof R!="function"&&(P[T]=R)}let M={...m,...P,pointer:v,intersections:l,stopped:p.stopped,delta:c,unprojectedPoint:S,ray:y.ray,camera:x,stopPropagation:()=>{const T="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!T||T.has(m.eventObject))&&(M.stopped=p.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(R=>R.eventObject===m.eventObject))){const R=l.slice(0,l.indexOf(m));s([...R,m])}},target:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:E},currentTarget:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:E},nativeEvent:u};if(f(M),p.stopped===!0)break}}}return l}function s(l){const{internal:u}=n.getState();Array.from(u.hovered.values()).forEach(c=>{if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const p=c.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(x1(c)),p!=null&&p.eventCount){const g={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}})}const o=l=>{switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&!c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))}}return u=>{const{onPointerMissed:c,internal:f}=n.getState();f.lastEvent.current=u;const p=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(u,p?t:void 0),v=m?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=y.map(x=>x.eventObject)),m&&!y.length&&v<=2&&(a(u,f.interaction),c&&c(u)),p&&s(y),i(y,u,v,x=>{const _=x.eventObject,S=_.__r3f,b=S==null?void 0:S.handlers;if(!!(S!=null&&S.eventCount))if(p){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const C=x1(x),E=f.hovered.get(C);E?E.stopped&&x.stopPropagation():(f.hovered.set(C,x),b.onPointerOver==null||b.onPointerOver(x),b.onPointerEnter==null||b.onPointerEnter(x))}b.onPointerMove==null||b.onPointerMove(x)}else{const C=b[l];C?(!m||f.initialHits.includes(_))&&(a(u,f.interaction.filter(E=>!f.initialHits.includes(E))),C(x)):m&&f.initialHits.includes(_)&&a(u,f.interaction.filter(E=>!f.initialHits.includes(E)))}})}};function a(l,u){u.forEach(c=>{var f;return(f=c.__r3f)==null||f.handlers.onPointerMissed==null?void 0:f.handlers.onPointerMissed(l)})}return{handlePointer:o}}let B_={},l0=n=>void(B_={...B_,...n});function k8(n,e){function t(c,{args:f=[],attach:p,...m},g){let y=`${c[0].toUpperCase()}${c.slice(1)}`,v;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=m.object;v=vc(x,{type:c,root:g,attach:p,primitive:!0})}else{const x=B_[y];if(!x)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=vc(new x(...f),{type:c,root:g,attach:p,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v instanceof vt?v.__r3f.attach="geometry":v instanceof Mn&&(v.__r3f.attach="material")),y!=="inject"&&y1(v,m),v}function r(c,f){let p=!1;if(f){var m,g;(m=f.__r3f)!=null&&m.attach?v1(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),p=!0),p||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||vc(f,{}),f.__r3f.parent=c,P_(f),yc(f)}}function i(c,f,p){let m=!1;if(f){var g,y;if((g=f.__r3f)!=null&&g.attach)v1(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const v=c.children.filter(_=>_!==f),x=v.indexOf(p);c.children=[...v.slice(0,x),f,...v.slice(x)],m=!0}m||(y=c.__r3f)==null||y.objects.push(f),f.__r3f||vc(f,{}),f.__r3f.parent=c,P_(f),yc(f)}}function s(c,f,p=!1){c&&[...c].forEach(m=>o(f,m,p))}function o(c,f,p){if(f){var m,g,y;if(f.__r3f&&(f.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(b=>b!==f)),(g=f.__r3f)!=null&&g.attach)CE(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var v;c.remove(f),(v=f.__r3f)!=null&&v.root&&L8(f.__r3f.root,f)}const _=(y=f.__r3f)==null?void 0:y.primitive,S=p===void 0?f.dispose!==null&&!_:p;if(!_){var x;s((x=f.__r3f)==null?void 0:x.objects,f,S),s(f.children,f,S)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,_||delete f.__r3f),S&&f.dispose&&f.type!=="Scene"&&T_.exports.unstable_scheduleCallback(T_.exports.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),yc(c)}}function a(c,f,p,m){var g;const y=(g=c.__r3f)==null?void 0:g.parent;if(!y)return;const v=t(f,p,c.__r3f.root);if(c.children){for(const x of c.children)x.__r3f&&r(v,x);c.children=c.children.filter(x=>!x.__r3f)}c.__r3f.objects.forEach(x=>r(v,x)),c.__r3f.objects=[],o(y,c),r(y,v),v.raycast&&v.__r3f.eventCount&&v.__r3f.root.getState().internal.interaction.push(v),[m,m.alternate].forEach(x=>{x!==null&&(x.stateNode=v,x.ref&&(typeof x.ref=="function"?x.ref(v):x.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:v8({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const p=c.getState().scene;!p.__r3f||(p.__r3f.root=c,r(p,f))},removeChildFromContainer:(c,f)=>{!f||o(c.getState().scene,f)},insertInContainerBefore:(c,f,p)=>{if(!f||!p)return;const m=c.getState().scene;!m.__r3f||i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;const p=(f=c==null?void 0:c.__r3f)!=null?f:{};return Boolean(p.handlers)},prepareUpdate(c,f,p,m){if(c.__r3f.primitive&&m.object&&m.object!==c)return[!0];{const{args:g=[],children:y,...v}=m,{args:x=[],children:_,...S}=p;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((C,E)=>C!==x[E]))return[!0];const b=ZB(c,v,S,!0);return b.changes.length?[!1,b]:null}},commitUpdate(c,[f,p],m,g,y,v){f?a(c,m,y,v):y1(c,p)},commitMount(c,f,p,m){var g;const y=(g=c.__r3f)!=null?g:{};c.raycast&&y.handlers&&y.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>vc(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:p,parent:m}=(f=c.__r3f)!=null?f:{};p&&m&&CE(m,c,p),c.isObject3D&&(c.visible=!1),yc(c)},unhideInstance(c,f){var p;const{attach:m,parent:g}=(p=c.__r3f)!=null?p:{};m&&g&&v1(g,c,m),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),yc(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Vc.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Pn.fun(performance.now)?performance.now:Pn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Pn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Pn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:y1}}const tD=n=>!!(n!=null&&n.render),nD=N.exports.createContext(null),O8=(n,e)=>{const t=GB((a,l)=>{const u=new J,c=new J,f=new J;function p(x=l().camera,_=c,S=l().size){const{width:b,height:C,top:E,left:P}=S,M=b/C;_ instanceof J?f.copy(_):f.set(..._);const T=x.getWorldPosition(u).distanceTo(f);if(KB(x))return{width:b/x.zoom,height:C/x.zoom,top:E,left:P,factor:1,distance:T,aspect:M};{const R=x.fov*Math.PI/180,L=2*Math.tan(R/2)*T,I=L*(b/C);return{width:I,height:L,top:E,left:P,factor:b/I,distance:T,aspect:M}}}let m;const g=x=>a(_=>({performance:{..._.performance,current:x}})),y=new Ae;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,_)=>e(x,_,l()),legacy:!1,linear:!1,flat:!1,scene:vc(new Sh),controls:null,clock:new KS,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();m&&clearTimeout(m),x.performance.current!==x.performance.min&&g(x.performance.min),m=setTimeout(()=>g(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:x=>a(_=>({..._,events:{..._.events,...x}})),setSize:(x,_,S,b,C)=>{const E=l().camera,P={width:x,height:_,top:b||0,left:C||0,updateStyle:S};a(M=>({size:P,viewport:{...M.viewport,...p(E,c,P)}}))},setDpr:x=>a(_=>{const S=qB(x);return{viewport:{..._.viewport,dpr:S,initialDpr:_.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,x!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,_,S)=>{const b=l().internal;return b.priority=b.priority+(_>0?1:0),b.subscribers.push({ref:x,priority:_,store:S}),b.subscribers=b.subscribers.sort((C,E)=>C.priority-E.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(_>0?1:0),C.subscribers=C.subscribers.filter(E=>E.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();(l!==i||u.dpr!==s)&&(i=l,s=u.dpr,B8(a,l),c.setPixelRatio(u.dpr),c.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,f(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let rg,U8=new Set,N8=new Set,z8=new Set;function _1(n,e){!n.size||n.forEach(({callback:t})=>t(e))}function md(n,e){switch(n){case"before":return _1(U8,e);case"after":return _1(N8,e);case"tail":return _1(z8,e)}}let w1,S1;function b1(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),w1=e.internal.subscribers,rg=0;rg<w1.length;rg++)S1=w1[rg],S1.ref.current(S1.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function G8(n){let e=!1,t,r,i;function s(l){if(r=requestAnimationFrame(s),e=!0,t=0,md("before",l),n.forEach(u=>{var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=b1(l,i))}),md("after",l),t===0)return md("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(f=>o(f.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,f){u&&md("before",l),c?b1(l,c,f):n.forEach(p=>b1(l,p.store.getState())),u&&md("after",l)}return{loop:s,invalidate:o,advance:a}}function rD(){const n=N.exports.useContext(nD);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Va(n=t=>t,e){return rD()(n,e)}function Mu(n,e=0){const t=rD(),r=t.getState().internal.subscribe,i=XB(n);return tp(()=>r(i,e,t),[e,r,t]),null}function iD(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,R8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function ul(n,e,t,r){const i=Array.isArray(e)?e:[e],s=$B(iD(t,r),[n,...i],{equal:Pn.equ});return Array.isArray(e)?s:s[0]}ul.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return y8(iD(t),[n,...r])};ul.clear=function(n,e){const t=Array.isArray(e)?e:[e];return x8([n,...t])};const sf=new Map,{invalidate:TE,advance:RE}=G8(sf),{reconciler:hv,applyProps:ig}=k8(sf,I8),fc={objects:"shallow",strict:!1},H8=(n,e)=>{const t=typeof n=="function"?n(e):n;return tD(t)?t:new bS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function V8(n){return n instanceof HTMLCanvasElement}function W8(n,e){if(e)return e;if(V8(n)&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}return{width:0,height:0,top:0,left:0}}function j8(n){const e=sf.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||O8(TE,RE),o=t||hv.createContainer(s,Vc.exports.ConcurrentRoot,null,!1,null,"",i,null);e||sf.set(n,{fiber:o,store:s});let a,l=!1;return{configure(u={}){let{gl:c,size:f,events:p,onCreated:m,shadows:g=!1,linear:y=!1,flat:v=!1,legacy:x=!1,orthographic:_=!1,frameloop:S="always",dpr:b=[1,2],performance:C,raycaster:E,camera:P,onPointerMissed:M}=u,T=s.getState(),R=T.gl;T.gl||T.set({gl:R=H8(c,n)});let L=T.raycaster;L||T.set({raycaster:L=new OB});const{params:I,...H}=E||{};if(Pn.equ(H,L,fc)||ig(L,{...H}),Pn.equ(I,L.params,fc)||ig(L,{params:{...L.params,...I}}),!T.camera){const ne=P instanceof hf,U=ne?P:_?new mf(0,0,0,0,.1,1e3):new Vn(75,0,.1,1e3);ne||(U.position.z=5,P&&ig(U,P),P!=null&&P.rotation||U.lookAt(0,0,0)),T.set({camera:U})}if(!T.xr){const ne=(z,W)=>{const q=s.getState();q.frameloop!=="never"&&RE(z,!0,q,W)},U=()=>{const z=s.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?ne:null),z.gl.xr.isPresenting||TE(z)},O={connect(){const z=s.getState().gl;z.xr.addEventListener("sessionstart",U),z.xr.addEventListener("sessionend",U)},disconnect(){const z=s.getState().gl;z.xr.removeEventListener("sessionstart",U),z.xr.removeEventListener("sessionend",U)}};R.xr&&O.connect(),T.set({xr:O})}if(R.shadowMap){const ne=Pn.boo(g);if(ne&&R.shadowMap.enabled!==g||!Pn.equ(g,R.shadowMap,fc)){const U=R.shadowMap.enabled;R.shadowMap.enabled=!!g,ne?R.shadowMap.type=lS:Object.assign(R.shadowMap,g),U!==R.shadowMap.enabled&&(R.shadowMap.needsUpdate=!0)}}"ColorManagement"in Th&&D8(Th,x,["ColorManagement","legacyMode"]);const G=y?Fi:gt,X=v?Ps:fS;R.outputEncoding!==G&&(R.outputEncoding=G),R.toneMapping!==X&&(R.toneMapping=X),T.legacy!==x&&T.set(()=>({legacy:x})),T.linear!==y&&T.set(()=>({linear:y})),T.flat!==v&&T.set(()=>({flat:v})),c&&!Pn.fun(c)&&!tD(c)&&!Pn.equ(c,R,fc)&&ig(R,c),p&&!T.events.handlers&&T.set({events:p(s)}),b&&T.viewport.dpr!==qB(b)&&T.setDpr(b);const $=W8(n,f);return Pn.equ($,T.size,fc)||T.setSize($.width,$.height,$.updateStyle,$.top,$.left),T.frameloop!==S&&T.setFrameloop(S),T.onPointerMissed||T.set({onPointerMissed:M}),C&&!Pn.equ(C,T.performance,fc)&&T.set(ne=>({performance:{...ne.performance,...C}})),a=m,l=!0,this},render(u){return l||this.configure(),hv.updateContainer(ae($8,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){sD(n)}}}function $8({store:n,children:e,onCreated:t,rootElement:r}){return tp(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),N.exports.createElement(nD.Provider,{value:n},e)}function sD(n,e){const t=sf.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),hv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),P8(i),sf.delete(n),e&&e(n)}catch{}},500)})}}hv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.exports.version});function D_(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var c=t&&!r;return r||(r=setTimeout(l,e)),c&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}D_.debounce=D_;var PE=D_;function J8(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=N.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=N.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=N.exports.useRef(!1);N.exports.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,g]=N.exports.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:S,top:b,width:C,height:E,bottom:P,right:M,x:T,y:R}=l.current.element.getBoundingClientRect(),L={left:S,top:b,width:C,height:E,bottom:P,right:M,x:T,y:R};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),f.current&&!Q8(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[_,c?PE(_,c):_,u?PE(_,u):_]},[a,i,u,c]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){!l.current.element||(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",g,{capture:!0,passive:!0})))}const x=_=>{!_||_===l.current.element||(y(),l.current.element=_,l.current.scrollContainers=oD(_),v())};return X8(g,Boolean(t)),K8(m),N.exports.useEffect(()=>{y(),v()},[t,g,m]),N.exports.useEffect(()=>y,[]),[x,o,p]}function K8(n){N.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function X8(n,e){N.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function oD(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...oD(n.parentElement)]}const Y8=["x","y","top","bottom","left","right","width","height"],Q8=(n,e)=>Y8.every(t=>n[t]===e[t]),M1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function q8(n){const{handlePointer:e}=F8(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(M1).reduce((t,r)=>({...t,[r]:e(r)}),{}),connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=M1[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=M1[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Z8=N.exports.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=q8,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:x,camera:_,onPointerMissed:S,onCreated:b,...C},E){N.exports.useMemo(()=>l0(Th),[]);const[P,M]=J8({scroll:!0,debounce:{scroll:50,resize:0},...r}),T=N.exports.useRef(null),R=N.exports.useRef(null),[L,I]=N.exports.useState(null);N.exports.useImperativeHandle(E,()=>T.current);const H=XB(S),[G,X]=N.exports.useState(!1),[$,ne]=N.exports.useState(!1);if(G)throw G;if($)throw $;const U=N.exports.useRef(null);return M.width>0&&M.height>0&&L&&(U.current||(U.current=j8(L)),U.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:v,raycaster:x,camera:_,size:M,onPointerMissed:(...z)=>H.current==null?void 0:H.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(a?E8(a)?a.current:a:R.current),l&&z.setEvents({compute:(W,q)=>{const oe=W[l+"X"],ce=W[l+"Y"];q.pointer.set(oe/q.size.width*2-1,-(ce/q.size.height)*2+1),q.raycaster.setFromCamera(q.pointer,q.camera)}}),b==null||b(z)}}),U.current.render(ae(YB,{set:ne,children:ae(N.exports.Suspense,{fallback:ae(C8,{set:X}),children:e})}))),tp(()=>{I(T.current)},[]),N.exports.useEffect(()=>{if(L)return()=>sD(L)},[L]),ae("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...i},...C,children:ae("div",{ref:P,style:{width:"100%",height:"100%"},children:ae("canvas",{ref:T,style:{display:"block"},children:t})})})});function aD(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function eH(n,e,t){return Math.max(e,Math.min(n,t))}const Lr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function BE(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function DE(n,e,t,r=.15){return r===0?eH(n,e,t):n<e?-BE(e-n,t-e,r)+e:n>t?+BE(n-t,t-e,r)+t:n}function tH(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[DE(e,s,o,r),DE(t,a,l,i)]}function fi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(t),!0).forEach(function(r){fi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const lD={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function LE(n){return n?n[0].toUpperCase()+n.slice(1):""}const nH=["enter","leave"];function rH(n=!1,e){return n&&!nH.includes(e)}function iH(n,e="",t=!1){const r=lD[n],i=r&&r[e]||e;return"on"+LE(n)+LE(i)+(rH(t,i)?"Capture":"")}const sH=["gotpointercapture","lostpointercapture"];function oH(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=sH.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function aH(n,e=""){const t=lD[n],r=t&&t[e]||e;return n+r}function u0(n){return"touches"in n}function uD(n){return u0(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function lH(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function uH(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function cD(n){return u0(n)?uH(n)[0]:n}function cH(n){return lH(n).map(e=>e.identifier)}function A1(n){const e=cD(n);return u0(n)?e.identifier:e.pointerId}function FE(n){const e=cD(n);return[e.clientX,e.clientY]}function fH(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function pv(n,...e){return typeof n=="function"?n(...e):n}function dH(){}function hH(...n){return n.length===0?dH:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function kE(n,e){return Object.assign({},e,n||{})}const pH=32;class mH{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?pv(r.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,fH(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const E=t._delta.map(Math.abs);Lr.addTo(t._distance,E)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:c,values:f}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&f[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&f[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[E,P]=f;p[0]=c[0]!==!1?E-c[0]:0,p[1]=c[1]!==!1?P-c[1]:0}else p[0]=c[0]!==!1?o-c[0]:0,p[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=pv(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[y,v]=t.offset,[[x,_],[S,b]]=t._bounds;t.overflow=[y<x?-1:y>_?1:0,v<S?-1:v>b?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const C=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=tH(t._bounds,t.offset,C),t.delta=Lr.sub(t.offset,m),this.computeMovement(),g&&(!t.last||s>pH)){t.delta=Lr.sub(t.offset,m);const E=t.delta.map(Math.abs);Lr.addTo(t.distance,E),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[E[0]/s,E[1]/s])}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Sn(Sn(Sn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gH([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class vH extends mH{constructor(...e){super(...e),fi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Lr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Lr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[uD(e)]:r.axisThreshold;t.axis=gH(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const yH=n=>n,OE=.15,fD={enabled(n=!0){return n},eventOptions(n,e,t){return Sn(Sn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[OE,OE];case!1:return[0,0];default:return Lr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Lr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||yH},threshold(n){return Lr.toVector(n,0)}},xH=0,np=Sn(Sn({},fD),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=xH){return n},bounds(n={}){if(typeof n=="function")return s=>np.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),sg=10,UE={ArrowRight:(n=1)=>[sg*n,0],ArrowLeft:(n=1)=>[-sg*n,0],ArrowUp:(n=1)=>[0,-sg*n],ArrowDown:(n=1)=>[0,sg*n]};class _H extends vH{constructor(...e){super(...e),fi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=np.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=A1(e),r._pointerActive=!0,this.computeValues(FE(e)),this.computeInitial(),t.preventScrollAxis&&uD(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const i=A1(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=FE(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Lr.sub(s,t._values),this.computeValues(s)),Lr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=A1(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t.direction,[u,c]=t.velocity,[f,p]=t.movement,[m,g]=r.swipe.velocity,[y,v]=r.swipe.distance,x=r.swipe.duration;t.elapsedTime<x&&(Math.abs(u)>m&&Math.abs(f)>y&&(t.swipe[0]=a),Math.abs(c)>g&&Math.abs(p)>v&&(t.swipe[1]=l))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,wH(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=UE[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(i),r._keyboardActive=!0,Lr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in UE&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function wH(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const rp=typeof window<"u"&&window.document&&window.document.createElement;function SH(){return rp&&"ontouchstart"in window}function NE(){return SH()||rp&&window.navigator.maxTouchPoints>1}function bH(){return rp&&"onpointerdown"in window}function MH(){return rp&&"exitPointerLock"in window.document}function AH(){try{return"constructor"in GestureEvent}catch{return!1}}const ts={isBrowser:rp,gesture:AH(),touch:NE(),touchscreen:NE(),pointer:bH(),pointerLock:MH()},EH=250,CH=180,TH=.5,RH=50,PH=250,zE={mouse:0,touch:0,pen:8},BH=Sn(Sn({},np),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&ts.pointerLock,ts.touch&&t?"touch":this.pointerLock?"mouse":ts.pointer&&!i?"pointer":ts.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?EH:void 0,!(!ts.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1}={}}){return this.pointerButtons=r,!this.pointerLock&&this.device==="pointer"&&t},keys(n=!0){return n},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Lr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=TH,distance:e=RH,duration:t=PH}={}){return{velocity:this.transform(Lr.toVector(n)),distance:this.transform(Lr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return CH;case!1:return 0;default:return n}},axisThreshold(n){return n?Sn(Sn({},zE),n):zE}});Sn(Sn({},fD),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!ts.touch&&ts.gesture)return"gesture";if(ts.touch&&r)return"touch";if(ts.touchscreen){if(ts.pointer)return"pointer";if(ts.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=kE(pv(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=kE(pv(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Lr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n}});Sn(Sn({},np),{},{mouseOnly:(n=!0)=>n});Sn(Sn({},np),{},{mouseOnly:(n=!0)=>n});const dD=new Map,I_=new Map;function DH(n){dD.set(n.key,n.engine),I_.set(n.key,n.resolver)}const IH={key:"drag",engine:_H,resolver:BH};function LH(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function FH(n,e){if(n==null)return{};var t=LH(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}const kH={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ts.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},OH=["target","eventOptions","window","enabled","transform"];function kg(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=kg(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function UH(n,e){const t=n,{target:r,eventOptions:i,window:s,enabled:o,transform:a}=t,l=FH(t,OH),u={shared:kg({target:r,eventOptions:i,window:s,enabled:o,transform:a},kH)};if(e){const c=I_.get(e);u[e]=kg(Sn({shared:u.shared},l),c)}else for(const c in l){const f=I_.get(c);f&&(u[c]=kg(Sn({shared:u.shared},l[c]),f))}return u}class hD{constructor(e,t){fi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=aH(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Sn(Sn({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class NH{constructor(){fi(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class zH{constructor(e){fi(this,"gestures",new Set),fi(this,"_targetEventStore",new hD(this)),fi(this,"gestureEventStores",{}),fi(this,"gestureTimeoutStores",{}),fi(this,"handlers",{}),fi(this,"config",{}),fi(this,"pointerIds",new Set),fi(this,"touchIds",new Set),fi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),GH(this,e)}setEventIds(e){if(u0(e))return this.touchIds=new Set(cH(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=UH(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=GE(r,a.eventOptions,!!i);if(a.enabled){const u=dD.get(o);new u(this,e,o).bind(l)}}const s=GE(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Sn(Sn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=hH(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=oH(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function dc(n,e){n.gestures.add(e),n.gestureEventStores[e]=new hD(n,e),n.gestureTimeoutStores[e]=new NH}function GH(n,e){e.drag&&dc(n,"drag"),e.wheel&&dc(n,"wheel"),e.scroll&&dc(n,"scroll"),e.move&&dc(n,"move"),e.pinch&&dc(n,"pinch"),e.hover&&dc(n,"hover")}const GE=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(u=o.passive)!==null&&u!==void 0?u:e.passive;let p=a?r:iH(r,i,c);t&&f&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function HH(n,e={},t,r){const i=At.useMemo(()=>new zH(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),At.useEffect(i.effect.bind(i)),At.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function VH(n,e){return DH(IH),HH({drag:n},e||{},"drag")}let gd;function WH(){if(gd!==void 0)return gd;try{var n;let e;const t=document.createElement("canvas");return gd=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),gd}catch{return gd=!1}}class QS extends Ur{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new KH(t)}),this.register(function(t){return new e9(t)}),this.register(function(t){return new t9(t)}),this.register(function(t){return new XH(t)}),this.register(function(t){return new YH(t)}),this.register(function(t){return new QH(t)}),this.register(function(t){return new qH(t)}),this.register(function(t){return new ZH(t)}),this.register(function(t){return new $H(t)}),this.register(function(t){return new n9(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=eo.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new xi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=e;else if(eo.decodeText(new Uint8Array(e,0,4))===pD){try{o[Ot.KHR_BINARY_GLTF]=new r9(e)}catch(f){i&&i(f);return}s=o[Ot.KHR_BINARY_GLTF].content}else s=eo.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new m9(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const f=this.pluginCallbacks[c](u);a[f.name]=f,o[f.name]=!0}if(l.extensionsUsed)for(let c=0;c<l.extensionsUsed.length;++c){const f=l.extensionsUsed[c],p=l.extensionsRequired||[];switch(f){case Ot.KHR_MATERIALS_UNLIT:o[f]=new JH;break;case Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new o9;break;case Ot.KHR_DRACO_MESH_COMPRESSION:o[f]=new i9(l,this.dracoLoader);break;case Ot.KHR_TEXTURE_TRANSFORM:o[f]=new s9;break;case Ot.KHR_MESH_QUANTIZATION:o[f]=new a9;break;default:p.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function jH(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ot={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class $H{constructor(e){this.parser=e,this.name=Ot.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new Ge(16777215);l.color!==void 0&&c.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new jS(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new WS(c),u.distance=f;break;case"spot":u=new VS(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class JH{constructor(){this.name=Ot.KHR_MATERIALS_UNLIT}getMaterialType(){return qr}extendParams(e,t,r){const i=[];e.color=new Ge(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(i)}}class KH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ae(a,a)}return Promise.all(s)}}class XH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ge(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class YH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class QH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ge(a[0],a[1],a[2]),Promise.all(s)}}class qH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class ZH{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ge(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(l){l.encoding=gt})),Promise.all(s)}}class e9{constructor(e){this.parser=e,this.name=Ot.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=r.images[s.source],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class t9{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,a,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class n9{constructor(e){this.name=Ot.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,p=new ArrayBuffer(c*f),m=new Uint8Array(a[0],l,u);return o.decodeGltfBuffer(new Uint8Array(p),c,f,m,i.mode,i.filter),p})}else return null}}const pD="glTF",vd=12,HE={JSON:1313821514,BIN:5130562};class r9{constructor(e){this.name=Ot.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,vd);if(this.header={magic:eo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==pD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-vd,i=new DataView(e,vd);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===HE.JSON){const l=new Uint8Array(e,vd+s,o);this.content=eo.decodeText(l)}else if(a===HE.BIN){const l=vd+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class i9{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ot.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const f=F_[c]||c.toLowerCase();a[f]=o[c]}for(const c in e.attributes){const f=F_[c]||c.toLowerCase();if(o[c]!==void 0){const p=r.accessors[e.attributes[c]],m=Rh[p.componentType];u[f]=m,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(f){i.decodeDracoFile(c,function(p){for(const m in p.attributes){const g=p.attributes[m],y=l[m];y!==void 0&&(g.normalized=y)}f(p)},a,u)})})}}class s9{constructor(){this.name=Ot.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class L_ extends _u{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Ge().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const u in a)l.uniforms[u]=a[u];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class o9{constructor(){this.name=Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return L_}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Ge(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new Ge(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Ge(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new L_(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=$o,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class a9{constructor(){this.name=Ot.KHR_MESH_QUANTIZATION}}class mu extends _f{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}}mu.prototype.beforeStart_=mu.prototype.copySampleValue_;mu.prototype.afterEnd_=mu.prototype.copySampleValue_;mu.prototype.interpolate_=function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,u=r-e,c=(t-e)/u,f=c*c,p=f*c,m=n*l,g=m-l,y=-2*p+3*f,v=p-f,x=1-y,_=v-f+c;for(let S=0;S!==o;S++){const b=s[g+S+o],C=s[g+S+a]*u,E=s[m+S+o],P=s[m+S]*u;i[S]=x*b+_*C+y*E+v*P}return i};const l9=new ti;class u9 extends mu{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return l9.fromArray(s).normalize().toArray(s),s}}const So={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Rh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},VE={9728:on,9729:Ht,9984:gh,9985:Hv,9986:vh,9987:ro},WE={33071:Qn,33648:qc,10497:Xa},jE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},c9={CUBICSPLINE:void 0,LINEAR:du,STEP:Zc},E1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function f9(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new _u({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:to})),n.DefaultMaterial}function yd(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function kl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function d9(n,e,t){let r=!1,i=!1;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(n);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];if(r){const c=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;s.push(c)}if(i){const c=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;o.push(c)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const l=a[0],u=a[1];return r&&(n.morphAttributes.position=l),i&&(n.morphAttributes.normal=u),n.morphTargetsRelative=!0,n})}function h9(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function p9(n){const e=n.extensions&&n.extensions[Ot.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+$E(e.attributes):t=n.indices+":"+$E(n.attributes)+":"+n.mode,t}function $E(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function k_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class m9{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new jH,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap<"u"&&/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new LB(this.options.manager):this.textureLoader=new r0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};yd(s,a,i),kl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ot.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(eo.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=jE[i.type],u=Rh[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let y,v;if(m&&m!==f){const x=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let S=t.cache.get(_);S||(y=new u(a,x*m,i.count*m/c),S=new Gh(y,m/c),t.cache.add(_,S)),v=new Qa(S,l,p%m/c,g)}else a===null?y=new u(i.count*l):y=new u(a,p,i.count*l),v=new St(y,l,g);if(i.sparse!==void 0){const x=jE.SCALAR,_=Rh[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,C=new _(o[1],S,i.sparse.count*x),E=new u(o[2],b,i.sparse.count*l);a!==null&&(v=new St(v.array.slice(),v.itemSize,v.normalized));for(let P=0,M=C.length;P<M;P++){const T=C[P];if(v.setX(T,E[P*l]),l>=2&&v.setY(T,E[P*l+1]),l>=3&&v.setZ(T,E[P*l+2]),l>=4&&v.setW(T,E[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e],s=t.images[i.source];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=this.options,a=s.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=self.URL||self.webkitURL;let c=t.uri||"",f=!1;if(t.bufferView!==void 0)c=i.getDependency("bufferView",t.bufferView).then(function(m){f=!0;const g=new Blob([m],{type:t.mimeType});return c=u.createObjectURL(g),c});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(m){return new Promise(function(g,y){let v=g;r.isImageBitmapLoader===!0&&(v=function(x){const _=new un(x);_.needsUpdate=!0,g(_)}),r.load(eo.resolveURL(m,o.path),v,void 0,y)})}).then(function(m){f===!0&&u.revokeObjectURL(c),m.flipY=!1,a.name&&(m.name=a.name);const y=(s.samplers||{})[a.sampler]||{};return m.magFilter=VE[y.magFilter]||Ht,m.minFilter=VE[y.minFilter]||ro,m.wrapS=WE[y.wrapS]||Xa,m.wrapT=WE[y.wrapT]||Xa,i.associations.set(m,{textures:e}),m}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null});return this.textureCache[l]=p,p}assignTexture(e,t,r){const i=this;return this.getDependency("texture",r.index).then(function(s){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[Ot.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[Ot.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=i.associations.get(s);s=i.extensions[Ot.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),i.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new qv,Mn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Or,Mn.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return _u}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=i[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else if(l[Ot.KHR_MATERIALS_UNLIT]){const f=i[Ot.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ge(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",f.baseColorTexture)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Dr);const c=s.alphaMode||E1.OPAQUE;if(c===E1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===E1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==qr&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ae(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==qr&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==qr&&(a.emissive=new Ge().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==qr&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(u).then(function(){let f;return o===L_?f=i[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):f=new o(a),s.name&&(f.name=s.name),f.map&&(f.map.encoding=gt),f.emissiveMap&&(f.emissiveMap.encoding=gt),kl(f,s),t.associations.set(f,{materials:e}),s.extensions&&yd(i,f,s),f})}createUniqueName(e){const t=Nt.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Ot.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return JE(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=p9(u),f=i[c];if(f)o.push(f.promise);else{let p;u.extensions&&u.extensions[Ot.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=JE(new vt,u,t),i[c]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?f9(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let m=0,g=c.length;m<g;m++){const y=c[m],v=o[m];let x;const _=u[m];if(v.mode===So.TRIANGLES||v.mode===So.TRIANGLE_STRIP||v.mode===So.TRIANGLE_FAN||v.mode===void 0)x=s.isSkinnedMesh===!0?new AS(y,_):new Bn(y,_),x.isSkinnedMesh===!0&&!x.geometry.attributes.skinWeight.normalized&&x.normalizeSkinWeights(),v.mode===So.TRIANGLE_STRIP?x.geometry=KE(x.geometry,VP):v.mode===So.TRIANGLE_FAN&&(x.geometry=KE(x.geometry,pS));else if(v.mode===So.LINES)x=new ds(y,_);else if(v.mode===So.LINE_STRIP)x=new Ho(y,_);else if(v.mode===So.LINE_LOOP)x=new ES(y,_);else if(v.mode===So.POINTS)x=new CS(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(x.geometry.morphAttributes).length>0&&h9(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),kl(x,s),v.extensions&&yd(i,x,v),t.assignFinalMaterial(x),f.push(x)}for(let m=0,g=f.length;m<g;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return f[0];const p=new Lo;t.associations.set(p,{meshes:e});for(let m=0,g=f.length;m<g;m++)p.add(f[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Vn(Uh.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new mf(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),kl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let u=0,c=r.channels.length;u<c;u++){const f=r.channels[u],p=r.samplers[f.sampler],m=f.target,g=m.node!==void 0?m.node:m.id,y=r.parameters!==void 0?r.parameters[p.input]:p.input,v=r.parameters!==void 0?r.parameters[p.output]:p.output;i.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",y)),o.push(this.getDependency("accessor",v)),a.push(p),l.push(m)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],p=u[2],m=u[3],g=u[4],y=[];for(let x=0,_=c.length;x<_;x++){const S=c[x],b=f[x],C=p[x],E=m[x],P=g[x];if(S===void 0)continue;S.updateMatrix(),S.matrixAutoUpdate=!0;let M;switch(xa[P.path]){case xa.weights:M=tf;break;case xa.rotation:M=Za;break;case xa.position:case xa.scale:default:M=nf;break}const T=S.name?S.name:S.uuid,R=E.interpolation!==void 0?c9[E.interpolation]:du,L=[];xa[P.path]===xa.weights?S.traverse(function(H){H.morphTargetInfluences&&L.push(H.name?H.name:H.uuid)}):L.push(T);let I=C.array;if(C.normalized){const H=k_(I.constructor),G=new Float32Array(I.length);for(let X=0,$=I.length;X<$;X++)G[X]=I[X]*H;I=G}for(let H=0,G=L.length;H<G;H++){const X=new M(L[H]+"."+xa[P.path],b.array,I,R);E.interpolation==="CUBICSPLINE"&&(X.createInterpolant=function(ne){const U=this instanceof Za?u9:mu;return new U(this.times,this.values,this.getValueSize()/3,ne)},X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(X)}}const v=r.name?r.name:"animation_"+e;return new rf(v,void 0,y)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Qv:a.length>1?l=new Lo:a.length===1?l=a[0]:l=new Gt,l!==a[0])for(let u=0,c=a.length;u<c;u++)l.add(a[u]);if(s.name&&(l.userData.name=s.name,l.name=o),kl(l,s),s.extensions&&yd(r,l,s),s.matrix!==void 0){const u=new ht;u.fromArray(s.matrix),l.applyMatrix4(u)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new Lo;i.name&&(o.name=s.createUniqueName(i.name)),kl(o,i),i.extensions&&yd(r,o,i);const a=i.nodes||[],l=[];for(let u=0,c=a.length;u<c;u++)l.push(mD(a[u],o,t,s));return Promise.all(l).then(function(){const u=c=>{const f=new Map;for(const[p,m]of s.associations)(p instanceof Mn||p instanceof un)&&f.set(p,m);return c.traverse(p=>{const m=s.associations.get(p);m!=null&&f.set(p,m)}),f};return s.associations=u(o),o})}}function mD(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const l=[];for(let u=0,c=o.joints.length;u<c;u++)l.push(r.getDependency("node",o.joints[u]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const u=[],c=[];for(let f=0,p=a.length;f<p;f++){const m=a[f];if(m){u.push(m);const g=new ht;o.inverseBindMatrices!==void 0&&g.fromArray(o.inverseBindMatrices.array,f*16),c.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}l.bind(new Hh(u,c),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let l=0,u=a.length;l<u;l++){const c=a[l];o.push(mD(c,s,t,r))}}return Promise.all(o)})}function g9(n,e,t){const r=e.attributes,i=new Jo;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new J(l[0],l[1],l[2]),new J(u[0],u[1],u[2])),a.normalized){const c=k_(Rh[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new J,l=new J;for(let u=0,c=s.length;u<c;u++){const f=s[u];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const y=k_(Rh[p.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new io;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function JE(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=F_[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return kl(n,e),g9(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?d9(n,e.targets,t):n})}function KE(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===pS)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}const C1=new WeakMap;class v9 extends Ur{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new xi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(C1.has(e)){const l=C1.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),C1.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new vt;e.index&&t.setIndex(new St(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new St(o,a))}return t}_loadLibrary(e,t){const r=new xi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=y9.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function y9(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(f,p,m,u),y=g.attributes.map(v=>v.array.buffer);g.index&&y.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},y)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const y={index:null,attributes:[]};for(const v in c){const x=self[f[v]];let _,S;if(u.useUniqueIDs)S=c[v],_=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[c[v]]),S===-1)continue;_=a.GetAttribute(p,S)}y.attributes.push(i(o,a,p,v,x,_))}return g===o.TRIANGULAR_MESH&&(y.index=r(o,a,p)),o.destroy(p),y}function r(o,a,l){const c=l.num_faces()*3,f=c*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,c).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,u,c,f){const p=f.num_components(),g=l.num_points()*p,y=g*c.BYTES_PER_ELEMENT,v=s(o,c),x=o._malloc(y);a.GetAttributeDataArrayForAllPoints(l,f,v,y,x);const _=new c(o.HEAPF32.buffer,x,g).slice();return o._free(x),{name:u,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let og;const T1=()=>{if(og)return og;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const y=f.charCodeAt(g);p[g]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let m=0;for(let g=0;g<f.length;++g)p[m++]=p[g]<60?r[p[g]]:(p[g]-60)*64+p[++g];return p.buffer.slice(0,m)}function l(f,p,m,g,y,v){const x=s.exports.sbrk,_=m+3&-4,S=x(_*g),b=x(y.length),C=new Uint8Array(s.exports.memory.buffer);C.set(y,b);const E=f(S,m,g,b,y.length);if(E===0&&v&&v(S,_,g),p.set(C.subarray(S,S+m*g)),x(S-x(0)),E!==0)throw new Error(`Malformed buffer data: ${E}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return og={ready:o,supported:!0,decodeVertexBuffer(f,p,m,g,y){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,g,s.exports[u[y]])},decodeIndexBuffer(f,p,m,g){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,g)},decodeIndexSequence(f,p,m,g){l(s.exports.meshopt_decodeIndexSequence,f,p,m,g)},decodeGltfBuffer(f,p,m,g,y,v){l(s.exports[c[y]],f,p,m,g,s.exports[u[v]])}},og};function ip(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}function qS(){var n=0,e=[],t,r=0,i=0;function s(x,_){var S=qS();function b(){var C=n>0?x:_;if(y(C))try{var E=C(t);E===S&&g();var P=p(E);P?P.call(E,S.resolve,S.reject):S.resolve(E)}catch(M){S.reject(M)}else S[n>0?"resolve":"reject"](t)}return e.push(b),n&&u(),S}var o=m(function(x){i||l(1,x)}),a=m(function(x){i||l(-1,x)});function l(x,_){i++;var S=0;try{_===v&&g();var b=x>0&&p(_);b?b.call(_,m(function(C){S++,l(1,C)}),m(function(C){S++,l(-1,C)})):(n=x,t=_,u())}catch(C){!n&&!S&&l(-1,C)}}function u(){r||(setTimeout(c,0),r=1)}function c(){var x=e;r=0,e=[],x.forEach(f)}function f(x){x()}function p(x){var _=x&&(y(x)||typeof x=="object")&&x.then;return y(_)&&_}function m(x){var _=0;return function(){for(var S=[],b=arguments.length;b--;)S[b]=arguments[b];_++||x.apply(this,S)}}function g(){throw new TypeError("Chaining cycle detected")}var y=function(x){return typeof x=="function"},v={then:s,resolve:o,reject:a};return v}function gD(){var n,e,t=new Promise(function(r,i){n=r,e=i});return{then:t.then.bind(t),resolve:n,reject:e}}qS.all=gD.all=function(n){var e=0,t=[],r=Vo();return n.length===0?r.resolve([]):n.forEach(function(i,s){var o=Vo();o.resolve(i),o.then(function(a){e++,t[s]=a,e===n.length&&r.resolve(t)},r.reject)}),r};var Vo=typeof Promise=="function"?gD:qS;function x9(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!n[o])try{l=l.map(function(p){return p&&p.isWorkerModule&&(e(p,function(m){if(m instanceof Error)throw m}),p=n[p.id].value),p}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:c},s(f)}catch(p){p&&p.noLog||console.error(p),s(p)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(f){return s(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){s(f)}function c(f){try{var p=n[a].getTransferables&&n[a].getTransferables(f);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),s(f,p)}catch(m){console.error(m),s(m)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function _9(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Vo.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var vD=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return vD=function(){return n},n},w9=0,S9=0,R1=!1,Wd=Object.create(null),jd=Object.create(null),O_=Object.create(null);function wf(n){if((!n||typeof n.init!="function")&&!R1)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!vD())return _9(n);i==null&&(i="#default");var s="workerModule"+ ++w9,o=n.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(R1=!0,u=wf({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Og(u)+`
)}`}),R1=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!a){a=XE(i,"registerModule",l.workerModuleData);var f=function(){a=null,jd[i].delete(f)};(jd[i]||(jd[i]=new Set)).add(f)}return a.then(function(p){var m=p.isCallable;if(m)return XE(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Og(t),getTransferables:r&&Og(r)},l}function b9(n){jd[n]&&jd[n].forEach(function(e){e()}),Wd[n]&&(Wd[n].terminate(),delete Wd[n])}function Og(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function M9(n){var e=Wd[n];if(!e){var t=Og(x9);e=Wd[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=O_[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete O_[s],o(i)}}return e}function XE(n,e,t){var r=Vo(),i=++S9;return O_[i]=function(s){s.success?r.resolve(s.result):r.reject(new Error("Error in worker "+e+" call: "+s.error))},M9(n).postMessage({messageId:i,action:e,data:t}),r}var A9=wf({name:"Thenable",dependencies:[Vo],init:function(n){return n}});function yD(){var n=function(e){function t(O,z,W,q,oe,ce,me,re){var he=1-me;re.x=he*he*O+2*he*me*W+me*me*oe,re.y=he*he*z+2*he*me*q+me*me*ce}function r(O,z,W,q,oe,ce,me,re,he,ie){var k=1-he;ie.x=k*k*k*O+3*k*k*he*W+3*k*he*he*oe+he*he*he*me,ie.y=k*k*k*z+3*k*k*he*q+3*k*he*he*ce+he*he*he*re}function i(O,z){for(var W=/([MLQCZ])([^MLQCZ]*)/g,q,oe,ce,me,re;q=W.exec(O);){var he=q[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ie){return parseFloat(ie)});switch(q[1]){case"M":me=oe=he[0],re=ce=he[1];break;case"L":(he[0]!==me||he[1]!==re)&&z("L",me,re,me=he[0],re=he[1]);break;case"Q":{z("Q",me,re,me=he[2],re=he[3],he[0],he[1]);break}case"C":{z("C",me,re,me=he[4],re=he[5],he[0],he[1],he[2],he[3]);break}case"Z":(me!==oe||re!==ce)&&z("L",me,re,oe,ce);break}}}function s(O,z,W){W===void 0&&(W=16);var q={x:0,y:0};i(O,function(oe,ce,me,re,he,ie,k,V,K){switch(oe){case"L":z(ce,me,re,he);break;case"Q":{for(var Y=ce,ee=me,le=1;le<W;le++)t(ce,me,ie,k,re,he,le/(W-1),q),z(Y,ee,q.x,q.y),Y=q.x,ee=q.y;break}case"C":{for(var we=ce,Se=me,Ue=1;Ue<W;Ue++)r(ce,me,ie,k,V,K,re,he,Ue/(W-1),q),z(we,Se,q.x,q.y),we=q.x,Se=q.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(O,z){var W=O.getContext?O.getContext("webgl",u):O,q=l.get(W);if(!q){let we=function(ye){var j=ce[ye];if(!j&&(j=ce[ye]=W.getExtension(ye),!j))throw new Error(ye+" not supported");return j},Se=function(ye,j){var F=W.createShader(j);return W.shaderSource(F,ye),W.compileShader(F),F},Ue=function(ye,j,F,te){if(!me[ye]){var pe={},Ee={},Be=W.createProgram();W.attachShader(Be,Se(j,W.VERTEX_SHADER)),W.attachShader(Be,Se(F,W.FRAGMENT_SHADER)),W.linkProgram(Be),me[ye]={program:Be,transaction:function(fe){W.useProgram(Be),fe({setUniform:function(Le,He){for(var ke=[],Fe=arguments.length-2;Fe-- >0;)ke[Fe]=arguments[Fe+2];var Oe=Ee[He]||(Ee[He]=W.getUniformLocation(Be,He));W["uniform"+Le].apply(W,[Oe].concat(ke))},setAttribute:function(Le,He,ke,Fe,Oe){var tt=pe[Le];tt||(tt=pe[Le]={buf:W.createBuffer(),loc:W.getAttribLocation(Be,Le),data:null}),W.bindBuffer(W.ARRAY_BUFFER,tt.buf),W.vertexAttribPointer(tt.loc,He,W.FLOAT,!1,0,0),W.enableVertexAttribArray(tt.loc),oe?W.vertexAttribDivisor(tt.loc,Fe):we("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(tt.loc,Fe),Oe!==tt.data&&(W.bufferData(W.ARRAY_BUFFER,Oe,ke),tt.data=Oe)}})}}}me[ye].transaction(te)},xe=function(ye,j){he++;try{W.activeTexture(W.TEXTURE0+he);var F=re[ye];F||(F=re[ye]=W.createTexture(),W.bindTexture(W.TEXTURE_2D,F),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST)),W.bindTexture(W.TEXTURE_2D,F),j(F,he)}finally{he--}},Re=function(ye,j,F){var te=W.createFramebuffer();ie.push(te),W.bindFramebuffer(W.FRAMEBUFFER,te),W.activeTexture(W.TEXTURE0+j),W.bindTexture(W.TEXTURE_2D,ye),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,ye,0);try{F(te)}finally{W.deleteFramebuffer(te),W.bindFramebuffer(W.FRAMEBUFFER,ie[--ie.length-1]||null)}},Ie=function(){ce={},me={},re={},he=-1,ie.length=0};var k=we,le=Se,V=Ue,K=xe,Y=Re,ee=Ie,oe=typeof WebGL2RenderingContext<"u"&&W instanceof WebGL2RenderingContext,ce={},me={},re={},he=-1,ie=[];W.canvas.addEventListener("webglcontextlost",function(ye){Ie(),ye.preventDefault()},!1),l.set(W,q={gl:W,isWebGL2:oe,getExtension:we,withProgram:Ue,withTexture:xe,withTextureFramebuffer:Re,handleContextLoss:Ie})}z(q)}function f(O,z,W,q,oe,ce,me,re){me===void 0&&(me=15),re===void 0&&(re=null),c(O,function(he){var ie=he.gl,k=he.withProgram,V=he.withTexture;V("copy",function(K,Y){ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,oe,ce,0,ie.RGBA,ie.UNSIGNED_BYTE,z),k("copy",o,a,function(ee){var le=ee.setUniform,we=ee.setAttribute;we("aUV",2,ie.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),le("1i","image",Y),ie.bindFramebuffer(ie.FRAMEBUFFER,re||null),ie.disable(ie.BLEND),ie.colorMask(me&8,me&4,me&2,me&1),ie.viewport(W,q,oe,ce),ie.scissor(W,q,oe,ce),ie.drawArrays(ie.TRIANGLES,0,3)})})})}function p(O,z,W){var q=O.width,oe=O.height;c(O,function(ce){var me=ce.gl,re=new Uint8Array(q*oe*4);me.readPixels(0,0,q,oe,me.RGBA,me.UNSIGNED_BYTE,re),O.width=z,O.height=W,f(me,re,0,0,q,oe)})}var m=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:p});function g(O,z,W,q,oe,ce){ce===void 0&&(ce=1);var me=new Uint8Array(O*z),re=q[2]-q[0],he=q[3]-q[1],ie=[];s(W,function(we,Se,Ue,xe){ie.push({x1:we,y1:Se,x2:Ue,y2:xe,minX:Math.min(we,Ue),minY:Math.min(Se,xe),maxX:Math.max(we,Ue),maxY:Math.max(Se,xe)})}),ie.sort(function(we,Se){return we.maxX-Se.maxX});for(var k=0;k<O;k++)for(var V=0;V<z;V++){var K=ee(q[0]+re*(k+.5)/O,q[1]+he*(V+.5)/z),Y=Math.pow(1-Math.abs(K)/oe,ce)/2;K<0&&(Y=1-Y),Y=Math.max(0,Math.min(255,Math.round(Y*255))),me[V*O+k]=Y}return me;function ee(we,Se){for(var Ue=1/0,xe=1/0,Re=ie.length;Re--;){var Ie=ie[Re];if(Ie.maxX+xe<=we)break;if(we+xe>Ie.minX&&Se-xe<Ie.maxY&&Se+xe>Ie.minY){var ye=x(we,Se,Ie.x1,Ie.y1,Ie.x2,Ie.y2);ye<Ue&&(Ue=ye,xe=Math.sqrt(Ue))}}return le(we,Se)&&(xe=-xe),xe}function le(we,Se){for(var Ue=0,xe=ie.length;xe--;){var Re=ie[xe];if(Re.maxX<=we)break;var Ie=Re.y1>Se!=Re.y2>Se&&we<(Re.x2-Re.x1)*(Se-Re.y1)/(Re.y2-Re.y1)+Re.x1;Ie&&(Ue+=Re.y1<Re.y2?1:-1)}return Ue!==0}}function y(O,z,W,q,oe,ce,me,re,he,ie){ce===void 0&&(ce=1),re===void 0&&(re=0),he===void 0&&(he=0),ie===void 0&&(ie=0),v(O,z,W,q,oe,ce,me,null,re,he,ie)}function v(O,z,W,q,oe,ce,me,re,he,ie,k){ce===void 0&&(ce=1),he===void 0&&(he=0),ie===void 0&&(ie=0),k===void 0&&(k=0);for(var V=g(O,z,W,q,oe,ce),K=new Uint8Array(V.length*4),Y=0;Y<V.length;Y++)K[Y*4+k]=V[Y];f(me,K,he,ie,O,z,1<<3-k,re)}function x(O,z,W,q,oe,ce){var me=oe-W,re=ce-q,he=me*me+re*re,ie=he?Math.max(0,Math.min(1,((O-W)*me+(z-q)*re)/he)):0,k=O-(W+ie*me),V=z-(q+ie*re);return k*k+V*V}var _=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:y,generateIntoFramebuffer:v}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),P=null,M=!1,T={},R=new WeakMap;function L(O){if(!M&&!X(O))throw new Error("WebGL generation not supported")}function I(O,z,W,q,oe,ce,me){if(ce===void 0&&(ce=1),me===void 0&&(me=null),!me&&(me=P,!me)){var re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!re)throw new Error("OffscreenCanvas or DOM canvas not supported");me=P=re.getContext("webgl",{depth:!1})}L(me);var he=new Uint8Array(O*z*4);c(me,function(K){var Y=K.gl,ee=K.withTexture,le=K.withTextureFramebuffer;ee("readable",function(we,Se){Y.texImage2D(Y.TEXTURE_2D,0,Y.RGBA,O,z,0,Y.RGBA,Y.UNSIGNED_BYTE,null),le(we,Se,function(Ue){G(O,z,W,q,oe,ce,Y,Ue,0,0,0),Y.readPixels(0,0,O,z,Y.RGBA,Y.UNSIGNED_BYTE,he)})})});for(var ie=new Uint8Array(O*z),k=0,V=0;k<he.length;k+=4)ie[V++]=he[k];return ie}function H(O,z,W,q,oe,ce,me,re,he,ie){ce===void 0&&(ce=1),re===void 0&&(re=0),he===void 0&&(he=0),ie===void 0&&(ie=0),G(O,z,W,q,oe,ce,me,null,re,he,ie)}function G(O,z,W,q,oe,ce,me,re,he,ie,k){ce===void 0&&(ce=1),he===void 0&&(he=0),ie===void 0&&(ie=0),k===void 0&&(k=0),L(me);var V=[];s(W,function(K,Y,ee,le){V.push(K,Y,ee,le)}),V=new Float32Array(V),c(me,function(K){var Y=K.gl,ee=K.isWebGL2,le=K.getExtension,we=K.withProgram,Se=K.withTexture,Ue=K.withTextureFramebuffer,xe=K.handleContextLoss;if(Se("rawDistances",function(Re,Ie){(O!==Re._lastWidth||z!==Re._lastHeight)&&Y.texImage2D(Y.TEXTURE_2D,0,Y.RGBA,Re._lastWidth=O,Re._lastHeight=z,0,Y.RGBA,Y.UNSIGNED_BYTE,null),we("main",S,b,function(ye){var j=ye.setAttribute,F=ye.setUniform,te=!ee&&le("ANGLE_instanced_arrays"),pe=!ee&&le("EXT_blend_minmax");j("aUV",2,Y.STATIC_DRAW,0,E),j("aLineSegment",4,Y.DYNAMIC_DRAW,1,V),F.apply(void 0,["4f","uGlyphBounds"].concat(q)),F("1f","uMaxDistance",oe),F("1f","uExponent",ce),Ue(Re,Ie,function(Ee){Y.enable(Y.BLEND),Y.colorMask(!0,!0,!0,!0),Y.viewport(0,0,O,z),Y.scissor(0,0,O,z),Y.blendFunc(Y.ONE,Y.ONE),Y.blendEquationSeparate(Y.FUNC_ADD,ee?Y.MAX:pe.MAX_EXT),Y.clear(Y.COLOR_BUFFER_BIT),ee?Y.drawArraysInstanced(Y.TRIANGLES,0,3,V.length/4):te.drawArraysInstancedANGLE(Y.TRIANGLES,0,3,V.length/4)})}),we("post",o,C,function(ye){ye.setAttribute("aUV",2,Y.STATIC_DRAW,0,E),ye.setUniform("1i","tex",Ie),Y.bindFramebuffer(Y.FRAMEBUFFER,re),Y.disable(Y.BLEND),Y.colorMask(k===0,k===1,k===2,k===3),Y.viewport(he,ie,O,z),Y.scissor(he,ie,O,z),Y.drawArrays(Y.TRIANGLES,0,3)})}),Y.isContextLost())throw xe(),new Error("webgl context lost")})}function X(O){var z=!O||O===P?T:O.canvas||O,W=R.get(z);if(W===void 0){M=!0;var q=null;try{var oe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ce=I(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);W=ce&&oe.length===ce.length&&ce.every(function(me,re){return me===oe[re]}),W||(q="bad trial run results",console.info(oe,ce))}catch(me){W=!1,q=me.message}q&&console.warn("WebGL SDF generation not supported:",q),M=!1,R.set(z,W)}return W}var $=Object.freeze({__proto__:null,generate:I,generateIntoCanvas:H,generateIntoFramebuffer:G,isSupported:X});function ne(O,z,W,q,oe,ce){oe===void 0&&(oe=Math.max(q[2]-q[0],q[3]-q[1])/2),ce===void 0&&(ce=1);try{return I.apply($,arguments)}catch(me){return console.info("WebGL SDF generation failed, falling back to JS",me),g.apply(_,arguments)}}function U(O,z,W,q,oe,ce,me,re,he,ie){oe===void 0&&(oe=Math.max(q[2]-q[0],q[3]-q[1])/2),ce===void 0&&(ce=1),re===void 0&&(re=0),he===void 0&&(he=0),ie===void 0&&(ie=0);try{return H.apply($,arguments)}catch(k){return console.info("WebGL SDF generation failed, falling back to JS",k),y.apply(_,arguments)}}return e.forEachPathCommand=i,e.generate=ne,e.generateIntoCanvas=U,e.javascript=_,e.pathToLineSegments=s,e.webgl=$,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function E9(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(xe,Re){r[xe]=1<<Re+1,i[r[xe]]=xe}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function f(){if(!c){c=new Map;var xe=function(Ie){if(t.hasOwnProperty(Ie)){var ye=0;t[Ie].split(",").forEach(function(j){var F=j.split("+"),te=F[0],pe=F[1];te=parseInt(te,36),pe=pe?parseInt(pe,36):0,c.set(ye+=te,r[Ie]);for(var Ee=0;Ee<pe;Ee++)c.set(++ye,r[Ie])})}};for(var Re in t)xe(Re)}}function p(xe){return f(),c.get(xe.codePointAt(0))||r.L}function m(xe){return i[p(xe)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function y(xe,Re){var Ie=36,ye=0,j=new Map,F=Re&&new Map,te;return xe.split(",").forEach(function pe(Ee){if(Ee.indexOf("+")!==-1)for(var Be=+Ee;Be--;)pe(te);else{te=Ee;var De=Ee.split(">"),fe=De[0],We=De[1];fe=String.fromCodePoint(ye+=parseInt(fe,Ie)),We=String.fromCodePoint(ye+=parseInt(We,Ie)),j.set(fe,We),Re&&F.set(We,fe)}}),{map:j,reverseMap:F}}var v,x,_;function S(){if(!v){var xe=y(g.pairs,!0),Re=xe.map,Ie=xe.reverseMap;v=Re,x=Ie,_=y(g.canonical,!1).map}}function b(xe){return S(),v.get(xe)||null}function C(xe){return S(),x.get(xe)||null}function E(xe){return S(),_.get(xe)||null}var P=r.L,M=r.R,T=r.EN,R=r.ES,L=r.ET,I=r.AN,H=r.CS,G=r.B,X=r.S,$=r.ON,ne=r.BN,U=r.NSM,O=r.AL,z=r.LRO,W=r.RLO,q=r.LRE,oe=r.RLE,ce=r.PDF,me=r.LRI,re=r.RLI,he=r.FSI,ie=r.PDI;function k(xe,Re){for(var Ie=125,ye=new Uint32Array(xe.length),j=0;j<xe.length;j++)ye[j]=p(xe[j]);var F=new Map;function te(Nn,tr){var nn=ye[Nn];ye[Nn]=tr,F.set(nn,F.get(nn)-1),nn&a&&F.set(a,F.get(a)-1),F.set(tr,(F.get(tr)||0)+1),tr&a&&F.set(a,(F.get(a)||0)+1)}for(var pe=new Uint8Array(xe.length),Ee=new Map,Be=[],De=null,fe=0;fe<xe.length;fe++)De||Be.push(De={start:fe,end:xe.length-1,level:Re==="rtl"?1:Re==="ltr"?0:Fu(fe,!1)}),ye[fe]&G&&(De.end=fe,De=null);for(var We=oe|q|W|z|s|ie|ce|G,Le=function(Nn){return Nn+(Nn&1?1:2)},He=function(Nn){return Nn+(Nn&1?2:1)},ke=0;ke<Be.length;ke++){De=Be[ke];var Fe=[{_level:De.level,_override:0,_isolate:0}],Oe=void 0,tt=0,se=0,je=0;F.clear();for(var be=De.start;be<=De.end;be++){var ze=ye[be];if(Oe=Fe[Fe.length-1],F.set(ze,(F.get(ze)||0)+1),ze&a&&F.set(a,(F.get(a)||0)+1),ze&We)if(ze&(oe|q)){pe[be]=Oe._level;var $e=(ze===oe?He:Le)(Oe._level);$e<=Ie&&!tt&&!se?Fe.push({_level:$e,_override:0,_isolate:0}):tt||se++}else if(ze&(W|z)){pe[be]=Oe._level;var Et=(ze===W?He:Le)(Oe._level);Et<=Ie&&!tt&&!se?Fe.push({_level:Et,_override:ze&W?M:P,_isolate:0}):tt||se++}else if(ze&s){ze&he&&(ze=Fu(be+1,!0)===1?re:me),pe[be]=Oe._level,Oe._override&&te(be,Oe._override);var Bt=(ze===re?He:Le)(Oe._level);Bt<=Ie&&tt===0&&se===0?(je++,Fe.push({_level:Bt,_override:0,_isolate:1,_isolInitIndex:be})):tt++}else if(ze&ie){if(tt>0)tt--;else if(je>0){for(se=0;!Fe[Fe.length-1]._isolate;)Fe.pop();var Jt=Fe[Fe.length-1]._isolInitIndex;Jt!=null&&(Ee.set(Jt,be),Ee.set(be,Jt)),Fe.pop(),je--}Oe=Fe[Fe.length-1],pe[be]=Oe._level,Oe._override&&te(be,Oe._override)}else ze&ce?(tt===0&&(se>0?se--:!Oe._isolate&&Fe.length>1&&(Fe.pop(),Oe=Fe[Fe.length-1])),pe[be]=Oe._level):ze&G&&(pe[be]=De.level);else pe[be]=Oe._level,Oe._override&&ze!==ne&&te(be,Oe._override)}for(var It=[],ot=null,Kt=De.start;Kt<=De.end;Kt++){var Yt=ye[Kt];if(!(Yt&l)){var Xt=pe[Kt],En=Yt&s,zr=Yt===ie;ot&&Xt===ot._level?(ot._end=Kt,ot._endsWithIsolInit=En):It.push(ot={_start:Kt,_end:Kt,_level:Xt,_startsWithPDI:zr,_endsWithIsolInit:En})}}for(var Dn=[],gn=0;gn<It.length;gn++){var $n=It[gn];if(!$n._startsWithPDI||$n._startsWithPDI&&!Ee.has($n._start)){for(var Q=[ot=$n],ge=void 0;ot&&ot._endsWithIsolInit&&(ge=Ee.get(ot._end))!=null;)for(var Ce=gn+1;Ce<It.length;Ce++)if(It[Ce]._start===ge){Q.push(ot=It[Ce]);break}for(var ve=[],Pe=0;Pe<Q.length;Pe++)for(var st=Q[Pe],ft=st._start;ft<=st._end;ft++)ve.push(ft);for(var bt=pe[ve[0]],pt=De.level,Lt=ve[0]-1;Lt>=0;Lt--)if(!(ye[Lt]&l)){pt=pe[Lt];break}var Tt=ve[ve.length-1],Ft=pe[Tt],tn=De.level;if(!(ye[Tt]&s)){for(var oi=Tt+1;oi<=De.end;oi++)if(!(ye[oi]&l)){tn=pe[oi];break}}Dn.push({_seqIndices:ve,_sosType:Math.max(pt,bt)%2?M:P,_eosType:Math.max(tn,Ft)%2?M:P})}}for(var Ui=0;Ui<Dn.length;Ui++){var Ni=Dn[Ui],Ye=Ni._seqIndices,Mt=Ni._sosType,zi=Ni._eosType;if(F.get(U))for(var Qt=0;Qt<Ye.length;Qt++){var ur=Ye[Qt];if(ye[ur]&U){for(var _r=Mt,cr=Qt-1;cr>=0;cr--)if(!(ye[Ye[cr]]&l)){_r=ye[Ye[cr]];break}te(ur,_r&(s|ie)?$:_r)}}if(F.get(T))for(var fr=0;fr<Ye.length;fr++){var xt=Ye[fr];if(ye[xt]&T)for(var Rt=fr-1;Rt>=-1;Rt--){var Gr=Rt===-1?Mt:ye[Ye[Rt]];if(Gr&o){Gr===O&&te(xt,I);break}}}if(F.get(O))for(var Ut=0;Ut<Ye.length;Ut++){var In=Ye[Ut];ye[In]&O&&te(In,M)}if(F.get(R)||F.get(H))for(var Hr=1;Hr<Ye.length-1;Hr++){var wi=Ye[Hr];if(ye[wi]&(R|H)){for(var Ln=0,qo=0,Tu=Hr-1;Tu>=0&&(Ln=ye[Ye[Tu]],!!(Ln&l));Tu--);for(var Ru=Hr+1;Ru<Ye.length&&(qo=ye[Ye[Ru]],!!(qo&l));Ru++);Ln===qo&&(ye[wi]===R?Ln===T:Ln&(T|I))&&te(wi,Ln)}}if(F.get(T))for(var Us=0;Us<Ye.length;Us++){var up=Ye[Us];if(ye[up]&T){for(var wr=Us-1;wr>=0&&ye[Ye[wr]]&(L|l);wr--)te(Ye[wr],T);for(var Pu=Us+1;Pu<Ye.length&&ye[Ye[Pu]]&(L|l);Pu++)te(Ye[Pu],T)}}if(F.get(L)||F.get(R)||F.get(H))for(var cl=0;cl<Ye.length;cl++){var cp=Ye[cl];if(ye[cp]&(L|R|H)){te(cp,$);for(var so=cl-1;so>=0&&ye[Ye[so]]&l;so--)te(Ye[so],$);for(var oo=cl+1;oo<Ye.length&&ye[Ye[oo]]&l;oo++)te(Ye[oo],$)}}if(F.get(T))for(var ao=0,fl=Mt;ao<Ye.length;ao++){var fp=Ye[ao],Tf=ye[fp];Tf&T?fl===P&&te(fp,P):Tf&o&&(fl=Tf)}if(F.get(a)){var lo=M|T|I,Bu=lo|P,Ns=[];{for(var Zo=[],zs=0;zs<Ye.length;zs++)if(ye[Ye[zs]]&a){var Dt=xe[Ye[zs]],Rf=void 0;if(b(Dt)!==null)if(Zo.length<63)Zo.push({char:Dt,seqIndex:zs});else break;else if((Rf=C(Dt))!==null)for(var uo=Zo.length-1;uo>=0;uo--){var Du=Zo[uo].char;if(Du===Rf||Du===C(E(Dt))||b(E(Du))===Dt){Ns.push([Zo[uo].seqIndex,zs]),Zo.length=uo;break}}}Ns.sort(function(Nn,tr){return Nn[0]-tr[0]})}for(var Pf=0;Pf<Ns.length;Pf++){for(var dp=Ns[Pf],hn=dp[0],ea=dp[1],hp=!1,Vr=0,Bf=hn+1;Bf<ea;Bf++){var ta=Ye[Bf];if(ye[ta]&Bu){hp=!0;var Si=ye[ta]&lo?M:P;if(Si===Hs(ta)){Vr=Si;break}}}if(hp&&!Vr){Vr=Mt;for(var Df=hn-1;Df>=0;Df--){var Iu=Ye[Df];if(ye[Iu]&Bu){var bi=ye[Iu]&lo?M:P;bi!==Hs(Iu)?Vr=bi:Vr=Hs(Iu);break}}}if(Vr){if(ye[Ye[hn]]=ye[Ye[ea]]=Vr,Vr!==Hs(Ye[hn])){for(var Wr=hn+1;Wr<Ye.length;Wr++)if(!(ye[Ye[Wr]]&l)){p(xe[Ye[Wr]])&U&&(ye[Ye[Wr]]=Vr);break}}if(Vr!==Hs(Ye[ea])){for(var Gs=ea+1;Gs<Ye.length;Gs++)if(!(ye[Ye[Gs]]&l)){p(xe[Ye[Gs]])&U&&(ye[Ye[Gs]]=Vr);break}}}}for(var Gi=0;Gi<Ye.length;Gi++)if(ye[Ye[Gi]]&a){for(var If=Gi,Lf=Gi,ai=Mt,dl=Gi-1;dl>=0;dl--)if(ye[Ye[dl]]&l)If=dl;else{ai=ye[Ye[dl]]&lo?M:P;break}for(var hl=zi,pl=Gi+1;pl<Ye.length;pl++)if(ye[Ye[pl]]&(a|l))Lf=pl;else{hl=ye[Ye[pl]]&lo?M:P;break}for(var Sr=If;Sr<=Lf;Sr++)ye[Ye[Sr]]=ai===hl?ai:Hs(Ye[Sr]);Gi=Lf}}}for(var er=De.start;er<=De.end;er++){var Lu=pe[er],gs=ye[er];if(Lu&1?gs&(P|T|I)&&pe[er]++:gs&M?pe[er]++:gs&(I|T)&&(pe[er]+=2),gs&l&&(pe[er]=er===0?De.level:pe[er-1]),er===De.end||p(xe[er])&(X|G))for(var na=er;na>=0&&p(xe[na])&u;na--)pe[na]=De.level}}return{levels:pe,paragraphs:Be};function Fu(Nn,tr){for(var nn=Nn;nn<xe.length;nn++){var Jn=ye[nn];if(Jn&(M|O))return 1;if(Jn&(G|P)||tr&&Jn===ie)return 0;if(Jn&s){var vs=pp(nn);nn=vs===-1?xe.length:vs}}return 0}function pp(Nn){for(var tr=1,nn=Nn+1;nn<xe.length;nn++){var Jn=ye[nn];if(Jn&G)break;if(Jn&ie){if(--tr===0)return nn}else Jn&s&&tr++}return-1}function Hs(Nn){return pe[Nn]&1?M:P}}var V="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",K;function Y(){if(!K){var xe=y(V,!0),Re=xe.map,Ie=xe.reverseMap;Ie.forEach(function(ye,j){Re.set(j,ye)}),K=Re}}function ee(xe){return Y(),K.get(xe)||null}function le(xe,Re,Ie,ye){var j=xe.length;Ie=Math.max(0,Ie==null?0:+Ie),ye=Math.min(j-1,ye==null?j-1:+ye);for(var F=new Map,te=Ie;te<=ye;te++)if(Re[te]&1){var pe=ee(xe[te]);pe!==null&&F.set(te,pe)}return F}function we(xe,Re,Ie,ye){var j=xe.length;Ie=Math.max(0,Ie==null?0:+Ie),ye=Math.min(j-1,ye==null?j-1:+ye);var F=[];return Re.paragraphs.forEach(function(te){var pe=Math.max(Ie,te.start),Ee=Math.min(ye,te.end);if(pe<Ee){for(var Be=Re.levels.slice(pe,Ee+1),De=Ee;De>=pe&&p(xe[De])&u;De--)Be[De]=te.level;for(var fe=te.level,We=1/0,Le=0;Le<Be.length;Le++){var He=Be[Le];He>fe&&(fe=He),He<We&&(We=He|1)}for(var ke=fe;ke>=We;ke--)for(var Fe=0;Fe<Be.length;Fe++)if(Be[Fe]>=ke){for(var Oe=Fe;Fe+1<Be.length&&Be[Fe+1]>=ke;)Fe++;Fe>Oe&&F.push([Oe+Ie,Fe+Ie])}}}),F}function Se(xe,Re,Ie,ye){var j=Ue(xe,Re,Ie,ye),F=[].concat(xe);return j.forEach(function(te,pe){F[pe]=(Re.levels[te]&1?ee(xe[te]):null)||xe[te]}),F.join("")}function Ue(xe,Re,Ie,ye){for(var j=we(xe,Re,Ie,ye),F=[],te=0;te<xe.length;te++)F[te]=te;return j.forEach(function(pe){for(var Ee=pe[0],Be=pe[1],De=F.slice(Ee,Be+1),fe=De.length;fe--;)F[Be-fe]=De[fe]}),F}return e.closingToOpeningBracket=C,e.getBidiCharType=p,e.getBidiCharTypeName=m,e.getCanonicalBracket=E,e.getEmbeddingLevels=k,e.getMirroredCharacter=ee,e.getMirroredCharactersMap=le,e.getReorderSegments=we,e.getReorderedIndices=Ue,e.getReorderedString=Se,e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const xD=/\bvoid\s+main\s*\(\s*\)\s*{/g;function U_(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=ut[i];return s?U_(s):r}return n.replace(e,t)}const hr=[];for(let n=0;n<256;n++)hr[n]=(n<16?"0":"")+n.toString(16);function C9(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(hr[n&255]+hr[n>>8&255]+hr[n>>16&255]+hr[n>>24&255]+"-"+hr[e&255]+hr[e>>8&255]+"-"+hr[e>>16&15|64]+hr[e>>24&255]+"-"+hr[t&63|128]+hr[t>>8&255]+"-"+hr[t>>16&255]+hr[t>>24&255]+hr[r&255]+hr[r>>8&255]+hr[r>>16&255]+hr[r>>24&255]).toUpperCase()}const Dl=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)r.hasOwnProperty(i)&&(n[i]=r[i])}return n},T9=Date.now(),YE=new WeakMap,QE=new Map;let R9=1e10;function N_(n,e){const t=I9(e);let r=YE.get(n);if(r||YE.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u){n.onBeforeCompile.call(this,u);const c=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let f=QE[c];if(!f){const p=P9(u,e,t);f=QE[c]=p}u.vertexShader=f.vertexShader,u.fragmentShader=f.fragmentShader,Dl(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-T9}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:n}),Object.defineProperty(c,"id",{value:R9++}),c.uuid=C9(),c.uniforms=Dl({},u.uniforms,e.uniforms),c.defines=Dl({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",c.extensions=Dl({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Dl(this.extensions,u.extensions),Dl(this.defines,u.defines),Dl(this.uniforms,_S.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=N_(n.isDerivedMaterial?n.getDepthMaterial():new Jv({depthPacking:mS}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=N_(n.isDerivedMaterial?n.getDistanceMaterial():new Kv,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function P9({vertexShader:n,fragmentShader:e},t,r){let{vertexDefs:i,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:f,customRewriter:p,timeUniform:m}=t;if(i=i||"",s=s||"",o=o||"",l=l||"",u=u||"",c=c||"",(a||p)&&(n=U_(n)),(f||p)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=U_(e)),p){let g=p({vertexShader:n,fragmentShader:e});n=g.vertexShader,e=g.fragmentShader}if(f){let g=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(g.push(y),"")),c=`${f}
${g.join(`
`)}
${c}`}if(m){const g=`
uniform float ${m};
`;i=g+i,l=g+l}return a&&(n=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${n}
`,i=`${i}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,n=n.replace(/\b(position|normal|uv)\b/g,(g,y,v,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,v))?y:`troika_${y}_${r}`)),n=qE(n,r,i,s,o),e=qE(e,r,l,u,c),{vertexShader:n,fragmentShader:e}}function qE(n,e,t,r,i){return(r||i||t)&&(n=n.replace(xD,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function B9(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let D9=0;const ZE=new Map;function I9(n){const e=JSON.stringify(n,B9);let t=ZE.get(e);return t==null&&ZE.set(e,t=++D9),t}function L9(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(x,_){function S(){const b=C=>{console.error(`Failure loading font ${x}${x===r?"":"; trying fallback"}`,C),x!==r&&(x=r,S())};try{const C=new XMLHttpRequest;C.open("get",x,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)b(new Error(C.statusText));else if(C.status>0)try{const E=n(C.response);_(E)}catch(E){b(E)}},C.onerror=b,C.send()}catch(C){b(C)}}S()}function u(x,_){x||(x=r);let S=i[x];S?S.pending?S.pending.push(_):_(S):(i[x]={pending:[_]},l(x,b=>{let C=i[x].pending;i[x]=b,C.forEach(E=>E(b))}))}function c({text:x="",font:_=r,sdfGlyphSize:S=64,fontSize:b=1,letterSpacing:C=0,lineHeight:E="normal",maxWidth:P=s,direction:M,textAlign:T="left",textIndent:R=0,whiteSpace:L="normal",overflowWrap:I="normal",anchorX:H=0,anchorY:G=0,includeCaretPositions:X=!1,chunkedBoundsSize:$=8192,colorRanges:ne=null},U,O=!1){const z=g(),W={fontLoad:0,typesetting:0};x.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),x=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),b=+b,C=+C,P=+P,E=E||"normal",R=+R,u(_,q=>{const oe=isFinite(P);let ce=null,me=null,re=null,he=null,ie=null,k=null,V=null,K=0,Y=0,ee=L!=="nowrap";const{ascender:le,descender:we,unitsPerEm:Se}=q;W.fontLoad=g()-z;const Ue=g(),xe=b/Se;E==="normal"&&(E=(le-we)/Se),E=E*b;const Re=(E-(le-we)*xe)/2,Ie=-(le*xe+Re),ye=Math.min(E,(le-we)*xe),j=(le+we)/2*xe-ye/2;let F=R,te=new y;const pe=[te];q.forEachGlyph(x,b,C,(De,fe,We)=>{const Le=x.charAt(We),He=De.advanceWidth*xe,ke=te.count;let Fe;if("isEmpty"in De||(De.isWhitespace=!!Le&&/\s/.test(Le),De.canBreakAfter=!!Le&&a.test(Le),De.isEmpty=De.xMin===De.xMax||De.yMin===De.yMax||o.test(Le)),!De.isWhitespace&&!De.isEmpty&&Y++,ee&&oe&&!De.isWhitespace&&fe+He+F>P&&ke){if(te.glyphAt(ke-1).glyphObj.canBreakAfter)Fe=new y,F=-fe;else for(let tt=ke;tt--;)if(tt===0&&I==="break-word"){Fe=new y,F=-fe;break}else if(te.glyphAt(tt).glyphObj.canBreakAfter){Fe=te.splitAt(tt+1);const se=Fe.glyphAt(0).x;F-=se;for(let je=Fe.count;je--;)Fe.glyphAt(je).x-=se;break}Fe&&(te.isSoftWrapped=!0,te=Fe,pe.push(te),K=P)}let Oe=te.glyphAt(te.count);Oe.glyphObj=De,Oe.x=fe+F,Oe.width=He,Oe.charIndex=We,Le===`
`&&(te=new y,pe.push(te),F=-(fe+He+C*b)+R)}),pe.forEach(De=>{for(let fe=De.count;fe--;){let{glyphObj:We,x:Le,width:He}=De.glyphAt(fe);if(!We.isWhitespace){De.width=Le+He,De.width>K&&(K=De.width);return}}});let Ee=0,Be=0;if(H&&(typeof H=="number"?Ee=-H:typeof H=="string"&&(Ee=-K*(H==="left"?0:H==="center"?.5:H==="right"?1:p(H)))),G){if(typeof G=="number")Be=-G;else if(typeof G=="string"){let De=pe.length*E;Be=G==="top"?0:G==="top-baseline"?-Ie:G==="middle"?De/2:G==="bottom"?De:G==="bottom-baseline"?De-Re+we*xe:p(G)*De}}if(!O){const De=e.getEmbeddingLevels(x,M);ce=new Uint16Array(Y),me=new Float32Array(Y*2),re={},k=[s,s,-s,-s],V=[];let fe=Ie;X&&(ie=new Float32Array(x.length*3)),ne&&(he=new Uint8Array(Y*3));let We=0,Le=-1,He=-1,ke,Fe;if(pe.forEach((Oe,tt)=>{let{count:se,width:je}=Oe;if(se>0){let be=0;for(let It=se;It--&&Oe.glyphAt(It).glyphObj.isWhitespace;)be++;let ze=0,$e=0;if(T==="center")ze=(K-je)/2;else if(T==="right")ze=K-je;else if(T==="justify"&&Oe.isSoftWrapped){let It=0;for(let ot=se-be;ot--;)Oe.glyphAt(ot).glyphObj.isWhitespace&&It++;$e=(K-je)/It}if($e||ze){let It=0;for(let ot=0;ot<se;ot++){let Kt=Oe.glyphAt(ot);const Yt=Kt.glyphObj;Kt.x+=ze+It,$e!==0&&Yt.isWhitespace&&ot<se-be&&(It+=$e,Kt.width+=$e)}}const Et=e.getReorderSegments(x,De,Oe.glyphAt(0).charIndex,Oe.glyphAt(Oe.count-1).charIndex);for(let It=0;It<Et.length;It++){const[ot,Kt]=Et[It];let Yt=1/0,Xt=-1/0;for(let En=0;En<se;En++)if(Oe.glyphAt(En).charIndex>=ot){let zr=En,Dn=En;for(;Dn<se;Dn++){let gn=Oe.glyphAt(Dn);if(gn.charIndex>Kt)break;Dn<se-be&&(Yt=Math.min(Yt,gn.x),Xt=Math.max(Xt,gn.x+gn.width))}for(let gn=zr;gn<Dn;gn++){const $n=Oe.glyphAt(gn);$n.x=Xt-($n.x+$n.width-Yt)}break}}let Bt;const Jt=It=>Bt=It;for(let It=0;It<se;It++){let ot=Oe.glyphAt(It);Bt=ot.glyphObj;const Kt=Bt.index,Yt=De.levels[ot.charIndex]&1;if(Yt){const Xt=e.getMirroredCharacter(x[ot.charIndex]);Xt&&q.forEachGlyph(Xt,0,0,Jt)}if(X){const{charIndex:Xt}=ot,En=ot.x+Ee,zr=ot.x+ot.width+Ee;ie[Xt*3]=Yt?zr:En,ie[Xt*3+1]=Yt?En:zr,ie[Xt*3+2]=fe+j+Be;const Dn=Xt-Le;Dn>1&&m(ie,Le,Dn),Le=Xt}if(ne){const{charIndex:Xt}=ot;for(;Xt>He;)He++,ne.hasOwnProperty(He)&&(Fe=ne[He])}if(!Bt.isWhitespace&&!Bt.isEmpty){const Xt=We++;re[Kt]||(re[Kt]={path:Bt.path,pathBounds:[Bt.xMin,Bt.yMin,Bt.xMax,Bt.yMax]});const En=ot.x+Ee,zr=fe+Be;me[Xt*2]=En,me[Xt*2+1]=zr;const Dn=En+Bt.xMin*xe,gn=zr+Bt.yMin*xe,$n=En+Bt.xMax*xe,Q=zr+Bt.yMax*xe;Dn<k[0]&&(k[0]=Dn),gn<k[1]&&(k[1]=gn),$n>k[2]&&(k[2]=$n),Q>k[3]&&(k[3]=Q),Xt%$===0&&(ke={start:Xt,end:Xt,rect:[s,s,-s,-s]},V.push(ke)),ke.end++;const ge=ke.rect;if(Dn<ge[0]&&(ge[0]=Dn),gn<ge[1]&&(ge[1]=gn),$n>ge[2]&&(ge[2]=$n),Q>ge[3]&&(ge[3]=Q),ce[Xt]=Kt,ne){const Ce=Xt*3;he[Ce]=Fe>>16&255,he[Ce+1]=Fe>>8&255,he[Ce+2]=Fe&255}}}}fe-=E}),ie){const Oe=x.length-Le;Oe>1&&m(ie,Le,Oe)}}W.typesetting=g()-Ue,U({glyphIds:ce,glyphPositions:me,glyphData:re,caretPositions:ie,caretHeight:ye,glyphColors:he,chunkedBounds:V,fontSize:b,unitsPerEm:Se,ascender:le*xe,descender:we*xe,lineHeight:E,topBaseline:Ie,blockBounds:[Ee,Be-pe.length*E,Ee+K,Be],visibleBounds:k,timings:W})})}function f(x,_){c(x,S=>{const[b,C,E,P]=S.blockBounds;_({width:E-b,height:P-C})},{metricsOnly:!0})}function p(x){let _=x.match(/^([\d.]+)%$/),S=_?parseFloat(_[1]):NaN;return isNaN(S)?0:S/100}function m(x,_,S){const b=x[_*3],C=x[_*3+1],E=x[_*3+2],P=(C-b)/S;for(let M=0;M<S;M++){const T=(_+M)*3;x[T]=b+P*M,x[T+1]=b+P*(M+1),x[T+2]=E}}function g(){return(self.performance||Date).now()}function y(){this.data=[]}const v=["glyphObj","x","width","charIndex"];return y.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/v.length)},glyphAt(x){let _=y.flyweight;return _.data=this.data,_.index=x,_},splitAt(x){let _=new y;return _.data=this.data.splice(x*v.length),_}},y.flyweight=v.reduce((x,_,S,b)=>(Object.defineProperty(x,_,{get(){return this.data[this.index*v.length+S]},set(C){this.data[this.index*v.length+S]=C}}),x),{data:null,index:0}),{typeset:c,measure:f,loadFont:u}}const Jl=()=>(self.performance||Date).now(),c0=yD();let eC;function F9(n,e,t,r,i,s,o,a,l,u,c=!0){return c?k9(n,e,t,r,i,s,o,a,l,u).then(null,f=>(eC||(console.warn("WebGL SDF generation failed, falling back to JS",f),eC=!0),tC(n,e,t,r,i,s,o,a,l,u))):tC(n,e,t,r,i,s,o,a,l,u)}const k9=function(){const n=[];let t=0;function r(){const i=Jl();for(;n.length&&Jl()-i<5;)n.shift()();t=n.length?setTimeout(r,0):0}return(...i)=>{const s=Vo();return n.push(()=>{const o=Jl();try{c0.webgl.generateIntoCanvas(...i),s.resolve({timing:Jl()-o})}catch(a){s.reject(a)}}),t||(t=setTimeout(r,0)),s}}(),tC=function(){const t={};let r=0;return function(i,s,o,a,l,u,c,f,p,m){const g="TroikaTextSDFGenerator_JS_"+r++%4;let y=t[g];return y||(y=t[g]={workerModule:wf({name:g,workerId:g,dependencies:[yD,Jl],init(v,x){const _=v().javascript.generate;return function(...S){const b=x();return{textureData:_(...S),timing:x()-b}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(i,s,o,a,l,u).then(({textureData:v,timing:x})=>{const _=Jl(),S=new Uint8Array(v.length*4);for(let b=0;b<v.length;b++)S[b*4+m]=v[b];return c0.webglUtils.renderImageData(c,S,f,p,i,s,1<<3-m),x+=Jl()-_,--y.requests===0&&(y.idleTimer=setTimeout(()=>{b9(g)},2e3)),{timing:x}})}}();function O9(n){n._warm||(c0.webgl.isSupported(n),n._warm=!0)}const U9=c0.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function N9(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var f=s.readUint(o,a);a+=4,u.push(e._readFont(o,f))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:a},f={},p=0;p<l;p++){var m=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var g=o.readUint(i,s);s+=4;var y=o.readUint(i,s);s+=4,f[m]={offset:g,length:y}}for(p=0;p<u.length;p++){var v=u[p];f[v]&&(c[v.trim()]=e[v.trim()].parse(i,f[v].offset,f[v].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var f=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var p=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,f==s)return p}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},f=s;u.readFixed(i,s),s+=4;var p=u.readUshort(i,s);s+=2;var m=u.readUshort(i,s);s+=2;var g=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,f+p),c.featureList=e._lctf.readFeatureList(i,f+m),c.lookupList=e._lctf.readLookupList(i,f+g,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var p=a.readUshort(i,s);s+=2;var m=e._lctf.readLookupTable(i,l+p,o);u.push(m)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var f=u.ltype,p=0;p<c;p++){var m=a.readUshort(i,s);s+=2;var g=o(i,f,l+m,u);u.tabs.push(g)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++)a.push(u+f),a.push(u+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var p=o.readUshort(i,s);for(s+=2,f=0;f<p;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var p=o.readUshort(i,s);s+=2;var m=e._lctf.readFeatureTable(i,a+p);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var p=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+p)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var p=o.readASCII(i,s,4);s+=4;var m=o.readUshort(i,s);s+=2,l[p.trim()]=e._lctf.readLangSysTable(i,a+m)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var p=[];for(c=0;c<f.length-1;c++)p.push(e.CFF.readDict(i,s+f[c],s+f[c+1]));s+=f[f.length-1];var m=p[0],g=[];s=e.CFF.readIndex(i,s,g);var y=[];for(c=0;c<g.length-1;c++)y.push(a.readASCII(i,s+g[c],g[c+1]-g[c]));if(s+=g[g.length-1],e.CFF.readSubrs(i,s,m),m.CharStrings){s=m.CharStrings,g=[],s=e.CFF.readIndex(i,s,g);var v=[];for(c=0;c<g.length-1;c++)v.push(a.readBytes(i,s+g[c],g[c+1]-g[c]));m.CharStrings=v}if(m.ROS){s=m.FDArray;var x=[];for(s=e.CFF.readIndex(i,s,x),m.FDArray=[],c=0;c<x.length-1;c++){var _=e.CFF.readDict(i,s+x[c],s+x[c+1]);e.CFF._readFDict(i,_,y),m.FDArray.push(_)}s+=x[x.length-1],s=m.FDSelect,m.FDSelect=[];var S=i[s];if(s++,S!=3)throw S;var b=a.readUshort(i,s);for(s+=2,c=0;c<b+1;c++)m.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,y),m},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var p=0;for(u==1?(p=i[s],s++):(p=a.readUshort(i,s),s+=2),c=0;c<=p;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,f=null,p=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(p=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(p=l-139,c=1),247<=l&&l<=250&&(p=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(p=256*-(l-251)-u-108,c=2),l==255&&(p=a.readInt(i,s+1)/65535,c=5),o.val=p!=null?p:"o"+f,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var p=1,m=null,g=null;c<=20&&(m=c,p=1),c==12&&(m=100*c+f,p=2),c!=19&&c!=20||(m=c,p=2),21<=c&&c<=27&&(m=c,p=1),c==28&&(g=l.readShort(i,s+1),p=3),29<=c&&c<=31&&(m=c,p=1),32<=c&&c<=246&&(g=c-139,p=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,p=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,p=2),c==255&&(g=l.readInt(i,s+1)/65535,p=5),u.push(g!=null?g:"o"+m),s+=p}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var p=1,m=null,g=null;if(c==28&&(g=a.readShort(i,s+1),p=3),c==29&&(g=a.readInt(i,s+1),p=5),32<=c&&c<=246&&(g=c-139,p=1),247<=c&&c<=250&&(g=256*(c-247)+f+108,p=2),251<=c&&c<=254&&(g=256*-(c-251)-f-108,p=2),c==255)throw g=a.readInt(i,s+1)/65535,p=5,"unknown number";if(c==30){var y=[];for(p=1;;){var v=i[s+p];p++;var x=v>>4,_=15&v;if(x!=15&&y.push(x),_!=15&&y.push(_),_==15)break}for(var S="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<y.length;C++)S+=b[y[C]];g=parseFloat(S)}c<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],p=1,c==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],p=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(g),s+=p}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var p=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var g=a.readUint(i,s);s+=4;var y="p"+p+"e"+m,v=c.indexOf(g);if(v==-1){var x;v=l.tables.length,c.push(g);var _=a.readUshort(i,g);_==0?x=e.cmap.parse0(i,g):_==4?x=e.cmap.parse4(i,g):_==6?x=e.cmap.parse6(i,g):_==12?x=e.cmap.parse12(i,g):console.debug("unknown format: "+_,p,m,g),l.tables.push(x)}if(l[y]!=null)throw"multiple tables for one platform+encoding";l[y]=v}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var f=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var p=0;p<f;p++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,f=o.readUint(i,c+0),p=o.readUint(i,c+4),m=o.readUint(i,c+8);a.groups.push([f,p,m])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;u.instructions=o.readBytes(a,l,f),l+=f;var p=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<p;c++){var m=a[l];if(l++,u.flags.push(m),(8&m)!=0){var g=a[l];l++;for(var y=0;y<g;y++)u.flags.push(m),c++}}for(u.xs=[],c=0;c<p;c++){var v=(2&u.flags[c])!=0,x=(16&u.flags[c])!=0;v?(u.xs.push(x?a[l]:-a[l]),l++):x?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<p;c++)v=(4&u.flags[c])!=0,x=(32&u.flags[c])!=0,v?(u.ys.push(x?a[l]:-a[l]),l++):x?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var _=0,S=0;for(c=0;c<p;c++)_+=u.xs[c],S+=u.ys[c],u.xs[c]=_,u.ys[c]=S}else{var b;u.parts=[];do{b=o.readUshort(a,l),l+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(C),C.glyphIndex=o.readUshort(a,l),l+=2,1&b){var E=o.readShort(a,l);l+=2;var P=o.readShort(a,l);l+=2}else E=o.readInt8(a,l),l++,P=o.readInt8(a,l),l++;2&b?(C.m.tx=E,C.m.ty=P):(C.p1=E,C.p2=P),8&b?(C.m.a=C.m.d=o.readF2dot14(a,l),l+=2):64&b?(C.m.a=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2):128&b&&(C.m.a=o.readF2dot14(a,l),l+=2,C.m.b=o.readF2dot14(a,l),l+=2,C.m.c=o.readF2dot14(a,l),l+=2,C.m.d=o.readF2dot14(a,l),l+=2)}while(32&b);if(256&b){var M=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<M;c++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&c.fmt==1){var p=l.readUshort(i,o);o+=2;var m=e._lctf.numOfOnes(p);p!=0&&(c.pos=e.GPOS.readValueRecord(i,o,p))}else if(s==2&&c.fmt>=1&&c.fmt<=2){p=l.readUshort(i,o),o+=2;var g=l.readUshort(i,o);o+=2,m=e._lctf.numOfOnes(p);var y=e._lctf.numOfOnes(g);if(c.fmt==1){c.pairsets=[];var v=l.readUshort(i,o);o+=2;for(var x=0;x<v;x++){var _=u+l.readUshort(i,o);o+=2;var S=l.readUshort(i,_);_+=2;for(var b=[],C=0;C<S;C++){var E=l.readUshort(i,_);_+=2,p!=0&&(I=e.GPOS.readValueRecord(i,_,p),_+=2*m),g!=0&&(H=e.GPOS.readValueRecord(i,_,g),_+=2*y),b.push({gid2:E,val1:I,val2:H})}c.pairsets.push(b)}}if(c.fmt==2){var P=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);o+=2;var T=l.readUshort(i,o);o+=2;var R=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+P),c.classDef2=e._lctf.readClassDef(i,u+M),c.matrix=[],x=0;x<T;x++){var L=[];for(C=0;C<R;C++){var I=null,H=null;p!=0&&(I=e.GPOS.readValueRecord(i,o,p),o+=2*m),g!=0&&(H=e.GPOS.readValueRecord(i,o,g),o+=2*y),L.push({val1:I,val2:H})}c.matrix.push(L)}}}else{if(s==9&&c.fmt==1){var G=l.readUshort(i,o);o+=2;var X=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=G;else if(a.ltype!=G)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+X)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var p=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,p),o+=2*c.newg.length}}else if(s==4){c.vals=[],p=l.readUshort(i,o),o+=2;for(var m=0;m<p;m++){var g=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+g))}}else if(s==5&&c.fmt==2){if(c.fmt==2){var y=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+y),c.scset=[];var v=l.readUshort(i,o);for(o+=2,m=0;m<v;m++){var x=l.readUshort(i,o);o+=2,c.scset.push(x==0?null:e.GSUB.readSubClassSet(i,u+x))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(m=0;m<3;m++){p=l.readUshort(i,o),o+=2;for(var _=[],S=0;S<p;S++)_.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*S)));o+=2*p,m==0&&(c.backCvg=_),m==1&&(c.inptCvg=_),m==2&&(c.ahedCvg=_)}p=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,p)}}else{if(s==7&&c.fmt==1){var b=l.readUshort(i,o);o+=2;var C=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=b;else if(a.ltype!=b)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+C)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,p=0;p<a.maxp.numGlyphs;p++)p<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},p=0;p<c;p++){s+=2,o=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var g=m>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,s),s+=4;var p=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,s);s+=2;var p=a.readUshort(i,s);s+=2;var m=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(p),g.vals.push(m),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(c==0)for(var p=0;p<f;p++)u.push(l.readUshort(i,s+(p<<1))<<1);if(c==1)for(p=0;p<f;p++)u.push(l.readUint(i,s+(p<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=s+=2,m=0;m<u;m++){var g=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var S=a.readUshort(i,s);s+=2;var b,C=f[x],E=p+12*u+S;if(g==0)b=a.readUnicode(i,E,_/2);else if(g==3&&y==0)b=a.readUnicode(i,E,_/2);else if(y==0)b=a.readASCII(i,E,_);else if(y==1)b=a.readUnicode(i,E,_/2);else if(y==3)b=a.readUnicode(i,E,_/2);else{if(g!=1)throw"unknown encoding "+y+", platformID: "+g;b=a.readASCII(i,E,_),console.debug("reading unknown MAC encoding "+y+" as ASCII")}var P="p"+g+","+v.toString(16);l[P]==null&&(l[P]={}),l[P][C!==void 0?C:x]=b,l[P]._lang=v}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){c=M;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,f=u==l?a:u+1,p=1&i.flags[u],m=1&i.flags[c],g=1&i.flags[f],y=i.xs[u],v=i.ys[u];if(u==a)if(p){if(!m){e.U.P.moveTo(s,y,v);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else m?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+y)/2,(i.ys[c]+v)/2);p?m&&e.U.P.lineTo(s,y,v):g?e.U.P.qcurveTo(s,y,v,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,y,v,(y+i.xs[f])/2,(v+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var p=l.crds[f],m=l.crds[f+1];o.crds.push(p*c.a+m*c.b+c.tx),o.crds.push(p*c.c+m*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=0,l=!1;if(i.GPOS)for(var u=i.GPOS,c=u.lookupList,f=u.featureList,p=[],m=0;m<f.length;m++){var g=f[m];if(g.tag=="kern"){l=!0;for(var y=0;y<g.tab.length;y++)if(!p[g.tab[y]]){p[g.tab[y]]=!0;for(var v=c[g.tab[y]],x=0;x<v.tabs.length;x++)if(v.tabs[x]!=null){var _,S=v.tabs[x];if((!S.coverage||(_=e._lctf.coverageIndex(S.coverage,s))!=-1)&&v.ltype!=1){if(v.ltype==2){var b;if(S.fmt==1){var C=S.pairsets[_];for(m=0;m<C.length;m++)C[m].gid2==o&&(b=C[m])}else if(S.fmt==2){var E=e.U._getGlyphClass(s,S.classDef1),P=e.U._getGlyphClass(o,S.classDef2);b=S.matrix[E][P]}b&&b.val1&&b.val1[2]&&(a+=b.val1[2]),b&&b.val2&&b.val2[0]&&(a+=b.val2[0])}}}}}}if(i.kern&&!l){var M=i.kern.glyph1.indexOf(s);if(M!=-1){var T=i.kern.rval[M].glyph2.indexOf(o);T!=-1&&(a+=i.kern.rval[M].vals[T])}}return a},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,f=o.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[c];else if(o.ltype==4)for(var p=f.vals[c],m=0;m<p.length;m++){var g=p[m],y=g.chain.length;if(!(y>l)){for(var v=!0,x=0,_=0;_<y;_++){for(;i[s+x+(1+_)]==-1;)x++;g.chain[_]!=i[s+x+(1+_)]&&(v=!1)}if(v){for(i[s]=g.nglyph,_=0;_<y+x;_++)i[s+_+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var S=e._lctf.getInterval(f.cDef,i[s]),b=f.cDef[S+2],C=f.scset[b],E=0;E<C.length;E++){var P=C[E],M=P.input;if(!(M.length>l)){for(v=!0,_=0;_<M.length;_++){var T=e._lctf.getInterval(f.cDef,i[s+1+_]);if(S==-1&&f.cDef[T+2]!=M[_]){v=!1;break}}if(v){var R=P.substLookupRecords;for(m=0;m<R.length;m+=2)R[m],R[m+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var L=f.lookupRec;for(E=0;E<L.length;E+=2){S=L[E];var I=a[L[E+1]];e.U._applySubs(i,s+S,I,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,p=e.U.glyphToPath(i,c),m=0;m<p.crds.length;m+=2)a.crds.push(p.crds[m]+l),a.crds.push(p.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<p.cmds.length;m++)a.cmds.push(p.cmds[m]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,f=s.haveWidth,p=s.width,m=s.open,g=0,y=s.x,v=s.y,x=0,_=0,S=0,b=0,C=0,E=0,P=0,M=0,T=0,R=0,L={val:0,size:0};g<i.length;){e.CFF.getCharString(i,g,L);var I=L.val;if(g+=L.size,I=="o1"||I=="o18")u.length%2!=0&&!f&&(p=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(I=="o3"||I=="o23")u.length%2!=0&&!f&&(p=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(I=="o4")u.length>1&&!f&&(p=u.shift()+a.nominalWidthX,f=!0),m&&e.U.P.closePath(l),v+=u.pop(),e.U.P.moveTo(l,y,v),m=!0;else if(I=="o5")for(;u.length>0;)y+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,y,v);else if(I=="o6"||I=="o7")for(var H=u.length,G=I=="o6",X=0;X<H;X++){var $=u.shift();G?y+=$:v+=$,G=!G,e.U.P.lineTo(l,y,v)}else if(I=="o8"||I=="o24"){H=u.length;for(var ne=0;ne+6<=H;)x=y+u.shift(),_=v+u.shift(),S=x+u.shift(),b=_+u.shift(),y=S+u.shift(),v=b+u.shift(),e.U.P.curveTo(l,x,_,S,b,y,v),ne+=6;I=="o24"&&(y+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,y,v))}else{if(I=="o11")break;if(I=="o1234"||I=="o1235"||I=="o1236"||I=="o1237")I=="o1234"&&(_=v,S=(x=y+u.shift())+u.shift(),R=b=_+u.shift(),E=b,M=v,y=(P=(C=(T=S+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,x,_,S,b,T,R),e.U.P.curveTo(l,C,E,P,M,y,v)),I=="o1235"&&(x=y+u.shift(),_=v+u.shift(),S=x+u.shift(),b=_+u.shift(),T=S+u.shift(),R=b+u.shift(),C=T+u.shift(),E=R+u.shift(),P=C+u.shift(),M=E+u.shift(),y=P+u.shift(),v=M+u.shift(),u.shift(),e.U.P.curveTo(l,x,_,S,b,T,R),e.U.P.curveTo(l,C,E,P,M,y,v)),I=="o1236"&&(x=y+u.shift(),_=v+u.shift(),S=x+u.shift(),R=b=_+u.shift(),E=b,P=(C=(T=S+u.shift())+u.shift())+u.shift(),M=E+u.shift(),y=P+u.shift(),e.U.P.curveTo(l,x,_,S,b,T,R),e.U.P.curveTo(l,C,E,P,M,y,v)),I=="o1237"&&(x=y+u.shift(),_=v+u.shift(),S=x+u.shift(),b=_+u.shift(),T=S+u.shift(),R=b+u.shift(),C=T+u.shift(),E=R+u.shift(),P=C+u.shift(),M=E+u.shift(),Math.abs(P-y)>Math.abs(M-v)?y=P+u.shift():v=M+u.shift(),e.U.P.curveTo(l,x,_,S,b,T,R),e.U.P.curveTo(l,C,E,P,M,y,v));else if(I=="o14"){if(u.length>0&&!f&&(p=u.shift()+o.nominalWidthX,f=!0),u.length==4){var U=u.shift(),O=u.shift(),z=u.shift(),W=u.shift(),q=e.CFF.glyphBySE(o,z),oe=e.CFF.glyphBySE(o,W);e.U._drawCFF(o.CharStrings[q],s,o,a,l),s.x=U,s.y=O,e.U._drawCFF(o.CharStrings[oe],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(I=="o19"||I=="o20")u.length%2!=0&&!f&&(p=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,g+=c+7>>3;else if(I=="o21")u.length>2&&!f&&(p=u.shift()+a.nominalWidthX,f=!0),v+=u.pop(),y+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,y,v),m=!0;else if(I=="o22")u.length>1&&!f&&(p=u.shift()+a.nominalWidthX,f=!0),y+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,y,v),m=!0;else if(I=="o25"){for(;u.length>6;)y+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,y,v);x=y+u.shift(),_=v+u.shift(),S=x+u.shift(),b=_+u.shift(),y=S+u.shift(),v=b+u.shift(),e.U.P.curveTo(l,x,_,S,b,y,v)}else if(I=="o26")for(u.length%2&&(y+=u.shift());u.length>0;)x=y,_=v+u.shift(),y=S=x+u.shift(),v=(b=_+u.shift())+u.shift(),e.U.P.curveTo(l,x,_,S,b,y,v);else if(I=="o27")for(u.length%2&&(v+=u.shift());u.length>0;)_=v,S=(x=y+u.shift())+u.shift(),b=_+u.shift(),y=S+u.shift(),v=b,e.U.P.curveTo(l,x,_,S,b,y,v);else if(I=="o10"||I=="o29"){var ce=I=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var me=u.pop(),re=ce.Subrs[me+ce.Bias];s.x=y,s.y=v,s.nStems=c,s.haveWidth=f,s.width=p,s.open=m,e.U._drawCFF(re,s,o,a,l),y=s.x,v=s.y,c=s.nStems,f=s.haveWidth,p=s.width,m=s.open}}else if(I=="o30"||I=="o31"){var he=u.length,ie=(ne=0,I=="o31");for(ne+=he-(H=-3&he);ne<H;)ie?(_=v,S=(x=y+u.shift())+u.shift(),v=(b=_+u.shift())+u.shift(),H-ne==5?(y=S+u.shift(),ne++):y=S,ie=!1):(x=y,_=v+u.shift(),S=x+u.shift(),b=_+u.shift(),y=S+u.shift(),H-ne==5?(v=b+u.shift(),ne++):v=b,ie=!0),e.U.P.curveTo(l,x,_,S,b,y,v),ne+=4}else{if((I+"").charAt(0)=="o")throw console.debug("Unknown operation: "+I,i),I;u.push(I)}}}s.x=y,s.y=v,s.nStems=c,s.haveWidth=f,s.width=p,s.open=m};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function z9(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(I,H){for(var G=new t(31),X=0;X<31;++X)G[X]=H+=1<<I[X-1];var $=new r(G[30]);for(X=1;X<30;++X)for(var ne=G[X];ne<G[X+1];++ne)$[ne]=ne-G[X]<<5|X;return[G,$]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=a(s,0)[0],p=new t(32768),m=0;m<32768;++m){var g=(43690&m)>>>1|(21845&m)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,p[m]=((65280&g)>>>8|(255&g)<<8)>>>1}var y=function(I,H,G){for(var X=I.length,$=0,ne=new t(H);$<X;++$)++ne[I[$]-1];var U,O=new t(H);for($=0;$<H;++$)O[$]=O[$-1]+ne[$-1]<<1;if(G){U=new t(1<<H);var z=15-H;for($=0;$<X;++$)if(I[$])for(var W=$<<4|I[$],q=H-I[$],oe=O[I[$]-1]++<<q,ce=oe|(1<<q)-1;oe<=ce;++oe)U[p[oe]>>>z]=W}else for(U=new t(X),$=0;$<X;++$)I[$]&&(U[$]=p[O[I[$]-1]++]>>>15-I[$]);return U},v=new e(288);for(m=0;m<144;++m)v[m]=8;for(m=144;m<256;++m)v[m]=9;for(m=256;m<280;++m)v[m]=7;for(m=280;m<288;++m)v[m]=8;var x=new e(32);for(m=0;m<32;++m)x[m]=5;var _=y(v,9,1),S=y(x,5,1),b=function(I){for(var H=I[0],G=1;G<I.length;++G)I[G]>H&&(H=I[G]);return H},C=function(I,H,G){var X=H/8|0;return(I[X]|I[X+1]<<8)>>(7&H)&G},E=function(I,H){var G=H/8|0;return(I[G]|I[G+1]<<8|I[G+2]<<16)>>(7&H)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(I,H,G){var X=new Error(H||P[I]);if(X.code=I,Error.captureStackTrace&&Error.captureStackTrace(X,M),!G)throw X;return X},T=function(I,H,G){var X=I.length;if(!X||G&&!G.l&&X<5)return H||new e(0);var $=!H||G,ne=!G||G.i;G||(G={}),H||(H=new e(3*X));var U,O=function(Oe){var tt=H.length;if(Oe>tt){var se=new e(Math.max(2*tt,Oe));se.set(H),H=se}},z=G.f||0,W=G.p||0,q=G.b||0,oe=G.l,ce=G.d,me=G.m,re=G.n,he=8*X;do{if(!oe){G.f=z=C(I,W,1);var ie=C(I,W+1,3);if(W+=3,!ie){var k=I[(Ie=((U=W)/8|0)+(7&U&&1)+4)-4]|I[Ie-3]<<8,V=Ie+k;if(V>X){ne&&M(0);break}$&&O(q+k),H.set(I.subarray(Ie,V),q),G.b=q+=k,G.p=W=8*V;continue}if(ie==1)oe=_,ce=S,me=9,re=5;else if(ie==2){var K=C(I,W,31)+257,Y=C(I,W+10,15)+4,ee=K+C(I,W+5,31)+1;W+=14;for(var le=new e(ee),we=new e(19),Se=0;Se<Y;++Se)we[o[Se]]=C(I,W+3*Se,7);W+=3*Y;var Ue=b(we),xe=(1<<Ue)-1,Re=y(we,Ue,1);for(Se=0;Se<ee;){var Ie,ye=Re[C(I,W,xe)];if(W+=15&ye,(Ie=ye>>>4)<16)le[Se++]=Ie;else{var j=0,F=0;for(Ie==16?(F=3+C(I,W,3),W+=2,j=le[Se-1]):Ie==17?(F=3+C(I,W,7),W+=3):Ie==18&&(F=11+C(I,W,127),W+=7);F--;)le[Se++]=j}}var te=le.subarray(0,K),pe=le.subarray(K);me=b(te),re=b(pe),oe=y(te,me,1),ce=y(pe,re,1)}else M(1);if(W>he){ne&&M(0);break}}$&&O(q+131072);for(var Ee=(1<<me)-1,Be=(1<<re)-1,De=W;;De=W){var fe=(j=oe[E(I,W)&Ee])>>>4;if((W+=15&j)>he){ne&&M(0);break}if(j||M(2),fe<256)H[q++]=fe;else{if(fe==256){De=W,oe=null;break}var We=fe-254;if(fe>264){var Le=i[Se=fe-257];We=C(I,W,(1<<Le)-1)+u[Se],W+=Le}var He=ce[E(I,W)&Be],ke=He>>>4;if(He||M(3),W+=15&He,pe=f[ke],ke>3&&(Le=s[ke],pe+=E(I,W)&(1<<Le)-1,W+=Le),W>he){ne&&M(0);break}$&&O(q+131072);for(var Fe=q+We;q<Fe;q+=4)H[q]=H[q-pe],H[q+1]=H[q+1-pe],H[q+2]=H[q+2-pe],H[q+3]=H[q+3-pe];q=Fe}}G.l=oe,G.p=De,G.b=q,oe&&(z=1,G.m=me,G.d=ce,G.n=re)}while(!z);return q==H.length?H:function(Oe,tt,se){(tt==null||tt<0)&&(tt=0),(se==null||se>Oe.length)&&(se=Oe.length);var je=new(Oe instanceof t?t:Oe instanceof r?r:e)(se-tt);return je.set(Oe.subarray(tt,se)),je}(H,0,q)},R=new e(0),L=typeof TextDecoder<"u"&&new TextDecoder;try{L.decode(R,{stream:!0})}catch{}return n.convert_streams=function(I){var H=new DataView(I),G=0;function X(){var K=H.getUint16(G);return G+=2,K}function $(){var K=H.getUint32(G);return G+=4,K}function ne(K){k.setUint16(V,K),V+=2}function U(K){k.setUint32(V,K),V+=4}for(var O={signature:$(),flavor:$(),length:$(),numTables:X(),reserved:X(),totalSfntSize:$(),majorVersion:X(),minorVersion:X(),metaOffset:$(),metaLength:$(),metaOrigLength:$(),privOffset:$(),privLength:$()},z=0;Math.pow(2,z)<=O.numTables;)z++;z--;for(var W=16*Math.pow(2,z),q=16*O.numTables-W,oe=12,ce=[],me=0;me<O.numTables;me++)ce.push({tag:$(),offset:$(),compLength:$(),origLength:$(),origChecksum:$()}),oe+=16;var re,he=new Uint8Array(12+16*ce.length+ce.reduce(function(K,Y){return K+Y.origLength+4},0)),ie=he.buffer,k=new DataView(ie),V=0;return U(O.flavor),ne(O.numTables),ne(W),ne(z),ne(q),ce.forEach(function(K){U(K.tag),U(K.origChecksum),U(oe),U(K.origLength),K.outOffset=oe,(oe+=K.origLength)%4!=0&&(oe+=4-oe%4)}),ce.forEach(function(K){var Y,ee=I.slice(K.offset,K.offset+K.compLength);if(K.compLength!=K.origLength){var le=new Uint8Array(K.origLength);Y=new Uint8Array(ee,2),T(Y,le)}else le=new Uint8Array(ee);he.set(le,K.outOffset);var we=0;(oe=K.outOffset+K.origLength)%4!=0&&(we=4-oe%4),he.set(new Uint8Array(we).buffer,K.outOffset+K.origLength),re=oe+we}),ie.slice(0,re)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function G9(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function f(b){if(!c){const C={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let E in r){let P=0;r[E].split(",").forEach(M=>{let[T,R]=M.split("+");T=parseInt(T,36),R=R?parseInt(R,36):0,c.set(P+=T,C[E]);for(let L=R;L--;)c.set(++P,C[E])})}}return c.get(b)||u}const p=1,m=2,g=3,y=4,v=[null,"isol","init","fina","medi"];function x(b){const C=new Uint8Array(b.length);let E=u,P=p,M=-1;for(let T=0;T<b.length;T++){const R=b.codePointAt(T);let L=f(R)|0,I=p;L&a||(E&(i|o|l)?L&(s|o|l)?(I=g,(P===p||P===g)&&C[M]++):L&(i|u)&&(P===m||P===y)&&C[M]--:E&(s|u)&&(P===m||P===y)&&C[M]--,P=C[T]=I,E=L,M=T,R>65535&&T++)}return C}function _(b,C){const E=[];for(let M=0;M<C.length;M++){const T=C.codePointAt(M);T>65535&&M++,E.push(n.U.codeToGlyph(b,T))}const P=b.GSUB;if(P){const{lookupList:M,featureList:T}=P;let R;const L=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,I=[];T.forEach(H=>{if(L.test(H.tag))for(let G=0;G<H.tab.length;G++){if(I[H.tab[G]])continue;I[H.tab[G]]=!0;const X=M[H.tab[G]],$=/^(isol|init|fina|medi)$/.test(H.tag);$&&!R&&(R=x(C));for(let ne=0;ne<E.length;ne++)(!R||!$||v[R[ne]]===H.tag)&&n.U._applySubs(E,ne,X,M)}})}return E}function S(b){const C=Object.create(null),E={unitsPerEm:b.head.unitsPerEm,ascender:b.hhea.ascender,descender:b.hhea.descender,forEachGlyph(P,M,T,R){let L=0;const I=1/E.unitsPerEm*M,H=_(b,P);let G=0,X=-1;return H.forEach(($,ne)=>{if($!==-1){let U=C[$];if(!U){const{cmds:O,crds:z}=n.U.glyphToPath(b,$);let W="",q=0;for(let he=0,ie=O.length;he<ie;he++){const k=t[O[he]];W+=O[he];for(let V=1;V<=k;V++)W+=(V>1?",":"")+z[q++]}let oe,ce,me,re;if(z.length){oe=ce=1/0,me=re=-1/0;for(let he=0,ie=z.length;he<ie;he+=2){let k=z[he],V=z[he+1];k<oe&&(oe=k),V<ce&&(ce=V),k>me&&(me=k),V>re&&(re=V)}}else oe=me=ce=re=0;U=C[$]={index:$,advanceWidth:b.hmtx.aWidth[$],xMin:oe,yMin:ce,xMax:me,yMax:re,path:W,pathCommandCount:O.length}}X!==-1&&(L+=n.U.getPairAdjustment(b,X,$)*I),R.call(null,U,L,G),U.advanceWidth&&(L+=U.advanceWidth*I),T&&(L+=T*M),X=$}G+=P.codePointAt(G)>65535?2:1}),L}};return E}return function(C){const E=new Uint8Array(C,0,4),P=n._bin.readASCII(E,0,4);if(P==="wOFF")C=e(C);else if(P==="wOF2")throw new Error("woff2 fonts not supported");return S(n.parse(C)[0])}}const H9=wf({name:"Typr Font Parser",dependencies:[N9,z9,G9],init(n,e,t){const r=n(),i=e();return t(r,i)}}),Fc={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},V9=new Ge;function hc(){return(self.performance||Date).now()}const nC=Object.create(null);function _D(n,e){n=$9({},n);const t=hc();if(n.font=J9(n.font||Fc.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Fc.sdfGlyphSize,n.colorRanges!=null){let f={};for(let p in n.colorRanges)if(n.colorRanges.hasOwnProperty(p)){let m=n.colorRanges[p];typeof m!="number"&&(m=V9.set(m).getHex()),f[p]=m}n.colorRanges=f}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=Fc,{sdfGlyphSize:s}=n,o=r/s*4;let a=nC[s];if(!a){const f=document.createElement("canvas");f.width=r,f.height=s*256/o,a=nC[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new un(f,void 0,void 0,void 0,Ht,Ht),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,W9(a)}const{sdfTexture:l,sdfCanvas:u}=a;let c=a.glyphsByFont.get(n.font);c||a.glyphsByFont.set(n.font,c=new Map),X9(n).then(f=>{const{glyphIds:p,glyphPositions:m,fontSize:g,unitsPerEm:y,timings:v}=f,x=[],_=new Float32Array(p.length*4),S=g/y;let b=0,C=0;const E=hc();p.forEach((L,I)=>{let H=c.get(L);if(!H){const{path:ne,pathBounds:U}=f.glyphData[L],O=Math.max(U[2]-U[0],U[3]-U[1])/s*(Fc.sdfMargin*s+.5),z=a.glyphCount++,W=[U[0]-O,U[1]-O,U[2]+O,U[3]+O];c.set(L,H={path:ne,atlasIndex:z,sdfViewBox:W}),x.push(H)}const{sdfViewBox:G}=H,X=m[C++],$=m[C++];_[b++]=X+G[0]*S,_[b++]=$+G[1]*S,_[b++]=X+G[2]*S,_[b++]=$+G[3]*S,p[I]=H.atlasIndex}),v.quads=(v.quads||0)+(hc()-E);const P=hc();v.sdf={};const M=u.height,T=Math.ceil(a.glyphCount/o),R=Math.pow(2,Math.ceil(Math.log2(T*s)));R>M&&(console.info(`Increasing SDF texture size ${M}->${R}`),U9(u,r,R),l.dispose()),Vo.all(x.map(L=>wD(L,a,n.gpuAccelerateSDF).then(({timing:I})=>{v.sdf[L.atlasIndex]=I}))).then(()=>{x.length&&!a.contextLost&&(SD(a),l.needsUpdate=!0),v.sdfTotal=hc()-P,v.total=hc()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:_,glyphAtlasIndices:p,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),f.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[L,I,H,G]=f.blockBounds;return[H-L,G-I]}}))})}),Vo.all([]).then(()=>{a.contextLost||O9(u)})}function wD({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Fc,u=Math.max(t[2]-t[0],t[3]-t[1]),c=Math.floor(e/4),f=c%(a/r)*r,p=Math.floor(c/(a/r))*r,m=e%4;return F9(r,r,n,t,u,l,i,f,p,m,o)}function W9(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(wD(s,n,!0))})}),Vo.all(r).then(()=>{SD(n),n.sdfTexture.needsUpdate=!0})})}function j9({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;_D({font:n,sdfGlyphSize:t,text:i},r)}function $9(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let ag;function J9(n){return ag||(ag=typeof document>"u"?{}:document.createElement("a")),ag.href=n,ag.href}function SD(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const K9=wf({name:"Typesetter",dependencies:[Fc,H9,L9,E9],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),X9=wf({name:"Typesetter",dependencies:[K9,A9],init(n,e){return function(t){const r=new e;return n.typeset(t,r.resolve),r}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),Y9=(()=>{const n={};function e(l){let u=n[l];if(!u){const c=new dv(1,1,l,l),f=c.clone(),p=c.attributes,m=f.attributes,g=new vt,y=p.uv.count;for(let v=0;v<y;v++)m.position.array[v*3]*=-1,m.normal.array[v*3+2]*=-1;["position","normal","uv"].forEach(v=>{g.setAttribute(v,new nt([...p[v].array,...m[v].array],p[v].itemSize))}),g.setIndex([...c.index.array,...f.index.array.map(v=>v+y)]),g.translate(.5,.5,0),u=n[l]=g}return u}const t="aTroikaGlyphBounds",r="aTroikaGlyphIndex",i="aTroikaGlyphColor";class s extends $S{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new io,this.boundingBox=new Jo}computeBoundingSphere(){}computeBoundingBox(){}setSide(u){const c=this.getIndex().count;this.setDrawRange(u===ar?c/2:0,u===Dr?c:c/2)}set detail(u){if(u!==this._detail){this._detail=u,(typeof u!="number"||u<1)&&(u=1);let c=e(u);["position","normal","uv"].forEach(f=>{this.attributes[f]=c.attributes[f].clone()}),this.setIndex(c.getIndex().clone())}}get detail(){return this._detail}set curveRadius(u){u!==this._curveRadius&&(this._curveRadius=u,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(u,c,f,p,m){o(this,t,u,4),o(this,r,c,1),o(this,i,m,3),this._blockBounds=f,this._chunkedBounds=p,a(this,c.length),this._updateBounds()}_updateBounds(){const u=this._blockBounds;if(u){const{curveRadius:c,boundingBox:f}=this;if(c){const{PI:p,floor:m,min:g,max:y,sin:v,cos:x}=Math,_=p/2,S=p*2,b=Math.abs(c),C=u[0]/b,E=u[2]/b,P=m((C+_)/S)!==m((E+_)/S)?-b:g(v(C)*b,v(E)*b),M=m((C-_)/S)!==m((E-_)/S)?b:y(v(C)*b,v(E)*b),T=m((C+p)/S)!==m((E+p)/S)?b*2:y(b-x(C)*b,b-x(E)*b);f.min.set(P,u[1],c<0?-T:0),f.max.set(M,u[3],c<0?0:T)}else f.min.set(u[0],u[1],0),f.max.set(u[2],u[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(u){let c=this.getAttribute(r).count,f=this._chunkedBounds;if(f)for(let p=f.length;p--;){c=f[p].end;let m=f[p].rect;if(m[1]<u.w&&m[3]>u.y&&m[0]<u.z&&m[2]>u.x)break}a(this,c)}}s.prototype.setAttribute||(s.prototype.setAttribute=function(l,u){return this.attributes[l]=u,this});function o(l,u,c,f){const p=l.getAttribute(u);c?p&&p.array.length===c.length?(p.array.set(c),p.needsUpdate=!0):(l.setAttribute(u,new hu(c,f)),delete l._maxInstanceCount,l.dispose()):p&&l.deleteAttribute(u)}function a(l,u){l[l.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=u}return s})(),Q9=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,q9=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Z9=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,eV=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function tV(n){const e=N_(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ae},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new zt(0,0,0,0)},uTroikaClipRect:{value:new zt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ae},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ge},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ir},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Q9,vertexTransform:q9,fragmentDefs:Z9,fragmentColorTransform:eV,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(xD,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const nV=(()=>{const n=new qr({color:16777215,side:Dr,transparent:!0}),e=8421504,t=new ht,r=new J,i=new J,s=[],o=new J,a="+x+y";function l(x){return Array.isArray(x)?x[0]:x}let u=()=>{const x=new Bn(new dv(1,1),n);return u=()=>x,x},c=()=>{const x=new Bn(new dv(1,1,32,1),n);return c=()=>x,x};const f={type:"syncstart"},p={type:"synccomplete"},m=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],g=m.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class y extends Bn{constructor(){const _=new Y9;super(_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=a,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(_){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(_):(this._isSyncing=!0,this.dispatchEvent(f),_D({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},S=>{this._isSyncing=!1,this._textRenderInfo=S,this.geometry.updateGlyphs(S.glyphBounds,S.glyphAtlasIndices,S.blockBounds,S.chunkedBounds,S.glyphColors);const b=this._queuedSyncs;b&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{b.forEach(C=>C&&C())})),this.dispatchEvent(p),_&&_()})))}onBeforeRender(_,S,b,C,E,P){this.sync(),E.isTroikaTextMaterial&&this._prepareForRender(E),E._hadOwnSide=E.hasOwnProperty("side"),this.geometry.setSide(E._actualSide=E.side),E.side=to}onAfterRender(_,S,b,C,E,P){E._hadOwnSide?E.side=E._actualSide:delete E.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let _=this._derivedMaterial;const S=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=n.clone());if((!_||_.baseMaterial!==S)&&(_=this._derivedMaterial=tV(S),S.addEventListener("dispose",function b(){S.removeEventListener("dispose",b),_.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let b=_._outlineMtl;return b||(b=_._outlineMtl=Object.create(_,{id:{value:_.id+.1}}),b.isTextOutlineMaterial=!0,b.depthWrite=!1,b.map=null,_.addEventListener("dispose",function C(){_.removeEventListener("dispose",C),b.dispose()})),[b,_]}else return _}set material(_){_&&_.isTroikaTextMaterial?(this._derivedMaterial=_,this._baseMaterial=_.baseMaterial):this._baseMaterial=_}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(_){this.geometry.detail=_}get curveRadius(){return this.geometry.curveRadius}set curveRadius(_){this.geometry.curveRadius=_}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(_){const S=_.isTextOutlineMaterial,b=_.uniforms,C=this.textRenderInfo;if(C){const{sdfTexture:M,blockBounds:T}=C;b.uTroikaSDFTexture.value=M,b.uTroikaSDFTextureSize.value.set(M.image.width,M.image.height),b.uTroikaSDFGlyphSize.value=C.sdfGlyphSize,b.uTroikaSDFExponent.value=C.sdfExponent,b.uTroikaTotalBounds.value.fromArray(T),b.uTroikaUseGlyphColors.value=!S&&!!C.glyphColors;let R=0,L=0,I=0,H,G,X,$=0,ne=0;if(S){let{outlineWidth:O,outlineOffsetX:z,outlineOffsetY:W,outlineBlur:q,outlineOpacity:oe}=this;R=this._parsePercent(O)||0,L=Math.max(0,this._parsePercent(q)||0),H=oe,$=this._parsePercent(z)||0,ne=this._parsePercent(W)||0}else I=Math.max(0,this._parsePercent(this.strokeWidth)||0),I&&(X=this.strokeColor,b.uTroikaStrokeColor.value.set(X==null?e:X),G=this.strokeOpacity,G==null&&(G=1)),H=this.fillOpacity;b.uTroikaDistanceOffset.value=R,b.uTroikaPositionOffset.value.set($,ne),b.uTroikaBlurRadius.value=L,b.uTroikaStrokeWidth.value=I,b.uTroikaStrokeOpacity.value=G,b.uTroikaFillOpacity.value=H==null?1:H,b.uTroikaCurveRadius.value=this.curveRadius||0;let U=this.clipRect;if(U&&Array.isArray(U)&&U.length===4)b.uTroikaClipRect.value.fromArray(U);else{const O=(this.fontSize||.1)*100;b.uTroikaClipRect.value.set(T[0]-O,T[1]-O,T[2]+O,T[3]+O)}this.geometry.applyClipRect(b.uTroikaClipRect.value)}b.uTroikaSDFDebug.value=!!this.debugSDF,_.polygonOffset=!!this.depthOffset,_.polygonOffsetFactor=_.polygonOffsetUnits=this.depthOffset||0;const E=S?this.outlineColor||0:this.color;if(E==null)delete _.color;else{const M=_.hasOwnProperty("color")?_.color:_.color=new Ge;(E!==M._input||typeof E=="object")&&M.set(M._input=E)}let P=this.orientation||a;if(P!==_._orientation){let M=b.uTroikaOrient.value;P=P.replace(/[^-+xyz]/g,"");let T=P!==a&&P.match(/^([-+])([xyz])([-+])([xyz])$/);if(T){let[,R,L,I,H]=T;r.set(0,0,0)[L]=R==="-"?1:-1,i.set(0,0,0)[H]=I==="-"?-1:1,t.lookAt(o,r.cross(i),i),M.setFromMatrix4(t)}else M.identity();_._orientation=P}}_parsePercent(_){if(typeof _=="string"){let S=_.match(/^(-?[\d.]+)%$/),b=S?parseFloat(S[1]):NaN;_=(isNaN(b)?0:b/100)*this.fontSize}return _}localPositionToTextCoords(_,S=new Ae){S.copy(_);const b=this.curveRadius;return b&&(S.x=Math.atan2(_.x,Math.abs(b)-Math.abs(_.z))*Math.abs(b)),S}worldPositionToTextCoords(_,S=new Ae){return r.copy(_),this.localPositionToTextCoords(this.worldToLocal(r),S)}raycast(_,S){const{textRenderInfo:b,curveRadius:C}=this;if(b){const E=b.blockBounds,P=C?c():u(),M=P.geometry,{position:T,uv:R}=M.attributes;for(let L=0;L<R.count;L++){let I=E[0]+R.getX(L)*(E[2]-E[0]);const H=E[1]+R.getY(L)*(E[3]-E[1]);let G=0;C&&(G=C-Math.cos(I/C)*C,I=Math.sin(I/C)*C),T.setXYZ(L,I,H,G)}M.boundingSphere=this.geometry.boundingSphere,M.boundingBox=this.geometry.boundingBox,P.matrixWorld=this.matrixWorld,P.material.side=this.material.side,s.length=0,P.raycast(_,s);for(let L=0;L<s.length;L++)s[L].object=this,S.push(s[L])}}copy(_){const S=this.geometry;return super.copy(_),this.geometry=S,g.forEach(b=>{this[b]=_[b]}),this}clone(){return new this.constructor().copy(this)}}m.forEach(x=>{const _="_private_"+x;Object.defineProperty(y.prototype,x,{get(){return this[_]},set(S){S!==this[_]&&(this[_]=S,this._needsSync=!0)}})});let v=!1;return Object.defineProperty(y.prototype,"anchor",{get(){return this._deprecated_anchor},set(x){this._deprecated_anchor=x,v||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),v=!0),Array.isArray(x)?(this.anchorX=`${(+x[0]||0)*100}%`,this.anchorY=`${(+x[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),y})(),bD=N.exports.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,children:r,characters:i,onSync:s,...o},a)=>{const l=Va(({invalidate:p})=>p),[u]=N.exports.useState(()=>new nV),[c,f]=N.exports.useMemo(()=>{const p=[];let m="";return N.exports.Children.forEach(r,g=>{typeof g=="string"||typeof g=="number"?m+=g:p.push(g)}),[p,m]},[r]);return $B(()=>new Promise(p=>j9({font:t,characters:i},p)),["troika-text",t,i]),N.exports.useLayoutEffect(()=>void u.sync(()=>{l(),s&&s(u)})),N.exports.useEffect(()=>()=>u.dispose(),[u]),ae("primitive",{object:u,ref:a,font:t,text:f,anchorX:n,anchorY:e,...o,children:c})});function rV(n,e){const t=new ht,r=new ff,i=new io,s=new J,o=this.geometry;if(i.copy(o.boundingSphere),i.applyMatrix4(this.matrixWorld),n.ray.intersectSphere(i,s)===!1)return;t.copy(this.matrixWorld).invert(),r.copy(n.ray).applyMatrix4(t);const a=new J,l=new J,u=new J,c=this instanceof ds?2:1,f=o.index,p=o.attributes;if(f!==null){const m=f.array,g=p.position.array,y=p.width.array;for(let v=0,x=m.length-1;v<x;v+=c){const _=m[v],S=m[v+1];a.fromArray(g,3*_),l.fromArray(g,3*S);const b=y[Math.floor(v/3)]!=null?y[Math.floor(v/3)]:1,C=n.params.Line.threshold+this.material.lineWidth*b/2,E=C*C;if(r.distanceSqToSegment(a,l,s,u)>E)continue;s.applyMatrix4(this.matrixWorld);const P=n.ray.origin.distanceTo(s);P<n.near||P>n.far||(e.push({distance:P,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}),v=x)}}}function P1(n,e,t,r,i){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,i&&e+i):n.slice(e,i&&e+i):n,t.set)t.set(n,r);else for(s=0;s<n.length;s++)t[s+r]=n[s];return t}class iV extends vt{constructor(){super(),this.type="MeshLine",this.isMeshLine=!0,this.positions=[],this.raycast=rV,this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new ht,Object.defineProperties(this,{geometry:{enumerable:!0,get(){return this}},geom:{enumerable:!0,get(){return this._geom},set(e){this.setGeometry(e,this.widthCallback)}},points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setGeometry(e,t){this._geometry=e,e instanceof vt?this.setPoints(e.getAttribute("position").array,t):this.setPoints(e,t)}setPoints(e,t){if(e instanceof Float32Array||e instanceof Array){if(this._points=e,this.widthCallback=t,this.positions=[],this.counters=[],e.length&&e[0]instanceof J)for(var r=0;r<e.length;r++){const s=e[r];var i=r/e.length;this.positions.push(s.x,s.y,s.z),this.positions.push(s.x,s.y,s.z),this.counters.push(i),this.counters.push(i)}else for(r=0;r<e.length;r+=3)i=r/e.length,this.positions.push(e[r],e[r+1],e[r+2]),this.positions.push(e[r],e[r+1],e[r+2]),this.counters.push(i),this.counters.push(i);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")}compareV3(e,t){const r=6*e,i=6*t;return this.positions[r]===this.positions[i]&&this.positions[r+1]===this.positions[i+1]&&this.positions[r+2]===this.positions[i+2]}copyV3(e){const t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;let t,r;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],r=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);for(let i=0;i<e;i++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(i/(e-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(i/(e-1),0),this.uvs.push(i/(e-1),1),i<e-1){r=this.copyV3(i),this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);const s=2*i;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}i>0&&(r=this.copyV3(i),this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]))}r=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new St(new Float32Array(this.positions),3),previous:new St(new Float32Array(this.previous),3),next:new St(new Float32Array(this.next),3),side:new St(new Float32Array(this.side),1),width:new St(new Float32Array(this.width),1),uv:new St(new Float32Array(this.uvs),2),index:new St(new Uint16Array(this.indices_array),1),counters:new St(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:r}){const i=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=i.length;P1(i,0,s,0,a),P1(i,6,i,0,a-6),i[a-6]=e,i[a-5]=t,i[a-4]=r,i[a-3]=e,i[a-2]=t,i[a-1]=r,P1(i,6,o,0,a-6),o[a-6]=e,o[a-5]=t,o[a-4]=r,o[a-3]=e,o[a-2]=t,o[a-1]=r,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}ut.meshline_vert=["","#include <common>","",ut.logdepthbuf_pars_vertex,ut.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","	 vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",ut.logdepthbuf_vertex,ut.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",ut.fog_vertex,"}"].join(`
`),ut.meshline_frag=["",ut.fog_pars_fragment,ut.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",ut.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",ut.fog_fragment,"}"].join(`
`);class sV extends Zn{constructor(e){super({uniforms:Object.assign({},Je.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new Ge(16777215)},opacity:{value:1},resolution:{value:new Ae(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new Ae(1,1)}}),vertexShader:ut.meshline_vert,fragmentShader:ut.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const MD={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},oV=(n,e=1)=>(n.set(n.subarray(e)),n.fill(-1/0,-e),n);function aV(n,e){const{length:t,local:r,decay:i,interval:s,stride:o}={...MD,...e},a=N.exports.useRef(),[l]=N.exports.useState(()=>new J);N.exports.useLayoutEffect(()=>{n&&(a.current=Float32Array.from({length:t*10*3},(f,p)=>n.position.getComponent(p%3)))},[t,n]);const u=N.exports.useRef(new J),c=N.exports.useRef(0);return Mu(()=>{if(!!n&&!!a.current){if(c.current===0){let f;r?f=n.position:(n.getWorldPosition(l),f=l);const p=1*i;for(let m=0;m<p;m++)f.distanceTo(u.current)<o||(oV(a.current,3),a.current.set(f.toArray(),a.current.length-3));u.current.copy(f)}c.current++,c.current=c.current%s}}),a}const lV=N.exports.forwardRef((n,e)=>{const{children:t}=n,{width:r,length:i,decay:s,local:o,stride:a,interval:l}={...MD,...n},{color:u="hotpink",attenuation:c,target:f}=n,p=Va(S=>S.size),m=N.exports.useRef(null),[g,y]=N.exports.useState(null),v=aV(g,{length:i,decay:s,local:o,stride:a,interval:l});N.exports.useEffect(()=>{const S=(f==null?void 0:f.current)||m.current.children.find(b=>b instanceof Gt);S&&y(S)},[v,f]);const x=N.exports.useMemo(()=>new iV,[]),_=N.exports.useMemo(()=>{var S;const b=new sV({lineWidth:.1*r,color:u,sizeAttenuation:1,resolution:new Ae(p.width,p.height)});let C;if(t)if(Array.isArray(t))C=t.find(E=>{const P=E;return typeof P.type=="string"&&P.type==="meshLineMaterial"});else{const E=t;typeof E.type=="string"&&E.type==="meshLineMaterial"&&(C=E)}return typeof((S=C)==null?void 0:S.props)=="object"&&b.setValues(C.props),b},[r,u,p,t]);return N.exports.useEffect(()=>{_.uniforms.resolution.value.set(p.width,p.height)},[p]),Mu(()=>{!v.current||x.setPoints(v.current,c)}),at("group",{children:[ae("mesh",{ref:e,geometry:x,material:_}),ae("group",{ref:m,children:t})]})}),uV=N.exports.forwardRef(({makeDefault:n,...e},t)=>{const r=Va(({set:a})=>a),i=Va(({camera:a})=>a),s=Va(({size:a})=>a),o=N.exports.useRef(null);return N.exports.useLayoutEffect(()=>{e.manual||(o.current.aspect=s.width/s.height)},[s,e]),N.exports.useLayoutEffect(()=>{o.current.updateProjectionMatrix()}),N.exports.useLayoutEffect(()=>{if(n){const a=i;return r(()=>({camera:o.current})),()=>r(()=>({camera:a}))}},[o,n,r]),ae("perspectiveCamera",{ref:aD([o,t]),...e})});let lg=null;function AD(n,e,t){return r=>{t&&t(r),n&&(lg||(lg=new v9),lg.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),r.setDRACOLoader(lg)),e&&r.setMeshoptDecoder(typeof T1=="function"?T1():T1)}}function sp(n,e=!0,t=!0,r){return ul(QS,n,AD(e,t,r))}sp.preload=(n,e=!0,t=!0,r)=>ul.preload(QS,n,AD(e,t,r));sp.clear=n=>ul.clear(QS,n);function cV(n){const e=n+"Geometry";return N.exports.forwardRef(({args:t,children:r,...i},s)=>at("mesh",{ref:s,...i,children:[ae(e,{attach:"geometry",args:t}),r]}))}const fV=cV("sphere"),dV=N.exports.forwardRef(({children:n,speed:e=1,rotationIntensity:t=1,floatIntensity:r=1,floatingRange:i=[-.1,.1],...s},o)=>{const a=N.exports.useRef(null),l=N.exports.useRef(Math.random()*1e4);return Mu(u=>{var c,f;const p=l.current+u.clock.getElapsedTime();a.current.rotation.x=Math.cos(p/4*e)/8*t,a.current.rotation.y=Math.sin(p/4*e)/8*t,a.current.rotation.z=Math.sin(p/4*e)/20*t;let m=Math.sin(p/4*e)/10;m=Uh.mapLinear(m,-.1,.1,(c=i==null?void 0:i[0])!==null&&c!==void 0?c:-.1,(f=i==null?void 0:i[1])!==null&&f!==void 0?f:.1),a.current.position.y=m*r}),ae("group",{...s,children:ae("group",{ref:aD([a,o]),children:n})})});var yt={exports:{}},hV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pV=hV,mV=pV;function ED(){}function CD(){}CD.resetWarningCache=ED;var gV=function(){function n(r,i,s,o,a,l){if(l!==mV){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:CD,resetWarningCache:ED};return t.PropTypes=t,t};yt.exports=gV();/**
 * postprocessing v6.28.7 build Wed Aug 31 2022
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2022 Raoul van Rüschen
 * @license Zlib
 */var vV=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,ZS="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",yV=class extends Zn{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{THREE_REVISION:il.replace(/\D+/g,""),MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new et(null),luminanceBuffer1:new et(null),minLuminance:new et(.01),deltaTime:new et(0),tau:new et(1)},extensions:{shaderTextureLOD:!0},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:vV,vertexShader:ZS}),this.toneMapped=!1}set luminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}setLuminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}set luminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}setLuminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}set mipLevel1x1(n){this.defines.MIP_LEVEL_1X1=n.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(n){this.mipLevel1x1=n}set deltaTime(n){this.uniforms.deltaTime.value=n}setDeltaTime(n){this.uniforms.deltaTime.value=n}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(n){this.uniforms.minLuminance.value=n}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(n){this.uniforms.minLuminance.value=n}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(n){this.uniforms.tau.value=n}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(n){this.uniforms.tau.value=n}},mt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Wa={NONE:0,DEPTH:1,CONVOLUTION:2},$t={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},eb={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},xV={SCALE_UP:"lut.scaleup"},bo={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},ug={DEFAULT:0,ESKIL:1},_V=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,wV="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",SV=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],bV=class extends Zn{constructor(n=new zt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new et(null),texelSize:new et(new zt),scale:new et(1),kernel:new et(0)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:_V,vertexShader:wV}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=eb.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return SV[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},MV=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,TD=class extends Zn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new et(null),opacity:new et(1)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:MV,vertexShader:ZS}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},AV=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec2 uvs[4];uvs[0]=vUv0;uvs[1]=vUv1;uvs[2]=vUv2;uvs[3]=vUv3;vec3 n=texture2D(normalBuffer,uvs[index]).rgb;
#else
vec3 n=vec3(0.0);
#endif
gl_FragColor=vec4(n,d[index]);}`,EV="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",CV=class extends Zn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new et(null),normalBuffer:new et(null),texelSize:new et(new Ae)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:AV,vertexShader:EV}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=sl){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},TV=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,RV="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",PV=class extends Zn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new et(null),texelSize:new et(new Ae)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:TV,vertexShader:RV}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},BV=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,DV="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",IV=class extends Zn{constructor(n,e,t,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:il.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new et(null),depthBuffer:new et(null),resolution:new et(new Ae),texelSize:new et(new Ae),cameraNear:new et(.3),cameraFar:new et(1e3),aspect:new et(1),time:new et(0)},blending:vr,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.adoptCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=sl){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,r,i,s;return this.fragmentShader=BV.replace($t.FRAGMENT_HEAD,(e=n.get($t.FRAGMENT_HEAD))!=null?e:"").replace($t.FRAGMENT_MAIN_UV,(t=n.get($t.FRAGMENT_MAIN_UV))!=null?t:"").replace($t.FRAGMENT_MAIN_IMAGE,(r=n.get($t.FRAGMENT_MAIN_IMAGE))!=null?r:""),this.vertexShader=DV.replace($t.VERTEX_HEAD,(i=n.get($t.VERTEX_HEAD))!=null?i:"").replace($t.VERTEX_MAIN_SUPPORT,(s=n.get($t.VERTEX_MAIN_SUPPORT))!=null?s:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Vn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return $t}},LV=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,FV=class extends Zn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:il.replace(/\D+/g,"")},uniforms:{inputBuffer:new et(null),threshold:new et(0),smoothing:new et(1),range:new et(null)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:LV,vertexShader:ZS}),this.toneMapped=!1,this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},kV=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,OV="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",UV=class extends Zn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new et(null),supportBuffer:new et(null),texelSize:new et(new Ae),radius:new et(.85)},blending:vr,depthWrite:!1,depthTest:!1,fragmentShader:kV,vertexShader:OV}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},NV=new hf,_a=null;function zV(){if(_a===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);_a=new vt,_a.setAttribute!==void 0?(_a.setAttribute("position",new St(n,3)),_a.setAttribute("uv",new St(e,2))):(_a.addAttribute("position",new St(n,3)),_a.addAttribute("uv",new St(e,2)))}return _a}var _i=class{constructor(n="Pass",e=new Sh,t=NV){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Bn(zV(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new Sh),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=sl){}render(n,e,t,r,i){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof dn||e instanceof Mn||e instanceof un||e instanceof _i)&&this[n].dispose()}}},RD=class extends _i{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new TD,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new dn(1,1,{minFilter:Ht,magFilter:Ht,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,i){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==xr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===gt&&(this.renderTarget.texture.encoding=gt))}},GV=class extends _i{constructor(n,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new yV,this.needsSwap=!1,this.renderTargetPrevious=new dn(1,1,{minFilter:on,magFilter:on,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const r=this.fullscreenMaterial;r.luminanceBuffer0=this.renderTargetPrevious.texture,r.luminanceBuffer1=n,r.minLuminance=e,r.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new RD(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(n){this.fullscreenMaterial.mipLevel1x1=n}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(n){this.fullscreenMaterial.adaptationRate=n}render(n,e,t,r,i){this.fullscreenMaterial.deltaTime=r,n.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),n.render(this.scene,this.camera),this.copyPass.render(n,this.renderTargetAdapted)}},HV=class extends _i{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,i){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},B1=new Ge,PD=class extends _i{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,u=o>=0;l?(B1.copy(n.getClearColor(B1)),n.setClearColor(s,u?o:a)):u&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(B1,a):u&&n.setClearAlpha(a)}},wa=-1,Fr=class extends fs{constructor(n,e=wa,t=wa,r=1){super(),this.resizable=n,this.baseSize=new Ae(1,1),this.preferredSize=new Ae(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Ae,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==wa?t.width=e.width:e.height!==wa?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==wa?t.height=e.height:e.width!==wa?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(wa),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.getBaseWidth(),n.getBaseHeight()),this.preferredSize.set(n.getPreferredWidth(),n.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return wa}},D1=!1,rC=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Dr:t=this.materialsFlatShadedDoubleSide;break;case ar:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Dr:t=this.materialsDoubleSide;break;case ar:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=to;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=ar,r}),this.materialsDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=Dr,r}),this.materialsFlatShaded=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=ar,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=Dr,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,D1){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=i}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return D1}static set workaroundEnabled(n){D1=n}},BD=class extends _i{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new PD,this.overrideMaterialManager=t===null?null:new rC(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new rC(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,c=n.shadowMap.autoUpdate,f=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=c}},VV=class extends _i{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Fr.AUTO_SIZE,height:r=Fr.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new CV;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new dn(1,1,{minFilter:on,magFilter:on,depthBuffer:!1,type:mr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new Fr(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=sl){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,i){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.fullscreenMaterial.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){if(!n.capabilities.isWebGL2)throw new Error("The DepthDownsamplingPass requires WebGL 2")}};function iC(n,e,t){for(const r of e){const i="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,i))}}function WV(n,e,t){var r,i,s,o,a;let l=e.getFragmentShader(),u=e.getVertexShader();const c=l!==void 0&&/mainImage/.test(l),f=l!==void 0&&/mainUv/.test(l);if(t.attributes|=e.getAttributes(),l===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(f&&(t.attributes&Wa.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!c&&!f)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const p=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=t.shaderParts;let g=(r=m.get($t.FRAGMENT_HEAD))!=null?r:"",y=(i=m.get($t.FRAGMENT_MAIN_UV))!=null?i:"",v=(s=m.get($t.FRAGMENT_MAIN_IMAGE))!=null?s:"",x=(o=m.get($t.VERTEX_HEAD))!=null?o:"",_=(a=m.get($t.VERTEX_MAIN_SUPPORT))!=null?a:"";const S=new Set,b=new Set;if(f&&(y+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),u!==null&&/mainSupport/.test(u)){const P=/mainSupport *\([\w\s]*?uv\s*?\)/.test(u);_+=`	${n}MainSupport(`,_+=P?`vUv);
`:`);
`;for(const M of u.matchAll(/(?:varying\s+\w+\s+(\w*))/g))t.varyings.add(M[1]),S.add(M[1]),b.add(M[1]);for(const M of u.matchAll(p))b.add(M[1])}for(const P of l.matchAll(p))b.add(P[1]);for(const P of e.defines.keys())b.add(P.replace(/\([\w\s,]*\)/g,""));for(const P of e.uniforms.keys())b.add(P);b.delete("while"),b.delete("for"),b.delete("if"),e.uniforms.forEach((P,M)=>t.uniforms.set(n+M.charAt(0).toUpperCase()+M.slice(1),P)),e.defines.forEach((P,M)=>t.defines.set(n+M.charAt(0).toUpperCase()+M.slice(1),P));const C=new Map([["fragment",l],["vertex",u]]);iC(n,b,t.defines),iC(n,b,C),l=C.get("fragment"),u=C.get("vertex");const E=e.blendMode;if(t.blendModes.set(E.blendFunction,E),c){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(v+=e.inputColorSpace===gt?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;v+=`${n}MainImage(color0, UV, `,(t.attributes&Wa.DEPTH)!==0&&P.test(l)&&(v+="depth, ",t.readDepth=!0),v+=`color1);
	`;const M=n+"BlendOpacity";t.uniforms.set(M,E.opacity),v+=`color0 = blend${E.blendFunction}(color0, color1, ${M});

	`,g+=`uniform float ${M};

`}if(g+=l+`
`,u!==null&&(x+=u+`
`),m.set($t.FRAGMENT_HEAD,g),m.set($t.FRAGMENT_MAIN_UV,y),m.set($t.FRAGMENT_MAIN_IMAGE,v),m.set($t.VERTEX_HEAD,x),m.set($t.VERTEX_MAIN_SUPPORT,_),e.extensions!==null)for(const P of e.extensions)t.extensions.add(P)}}var jV=class extends _i{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new IV(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new ZV;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===mt.DST)n.attributes|=o.getAttributes()&Wa.DEPTH;else{if((n.attributes&o.getAttributes()&Wa.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${o.name})`);WV("e"+e++,o,n)}let t=n.shaderParts.get($t.FRAGMENT_HEAD),r=n.shaderParts.get($t.FRAGMENT_MAIN_IMAGE),i=n.shaderParts.get($t.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;(n.attributes&Wa.DEPTH)!==0?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===gt&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set($t.FRAGMENT_HEAD,t),n.shaderParts.set($t.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set($t.FRAGMENT_MAIN_UV,i),n.shaderParts.forEach((o,a,l)=>l.set(a,o==null?void 0:o.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=sl){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,i){for(const s of this.effects)s.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==xr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},$V=class extends _i{constructor({kernelSize:n=eb.MEDIUM,resolutionScale:e=.5,width:t=Fr.AUTO_SIZE,height:r=Fr.AUTO_SIZE,resolutionX:i=t,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new dn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Fr(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this.blurMaterial=new bV,this.copyMaterial=new TD}getResolution(){return this.resolution}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let f=e;this.fullscreenMaterial=u;for(let p=0,m=c.length;p<m;++p){const g=(p&1)===0?a:l;u.kernel=c[p],u.inputBuffer=f.texture,n.setRenderTarget(g),n.render(s,o),f=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,i=t.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==xr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===gt&&(this.renderTargetA.texture.encoding=gt,this.renderTargetB.texture.encoding=gt))}static get AUTO_SIZE(){return Fr.AUTO_SIZE}},DD=class extends _i{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:r=1,width:i=Fr.AUTO_SIZE,height:s=Fr.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new FV(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new dn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Fr(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==xr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},JV=class extends _i{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new PD(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,i){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,f=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,c,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},KV=class extends _i{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new dn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new PV,this.upsamplingMaterial=new UV,this.resolution=new Ae}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose();for(let t=0;t<n;++t){const r=e.clone();r.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let t=1,r=n-1;t<r;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let f=e;this.fullscreenMaterial=a;for(let p=0,m=u.length;p<m;++p){const g=u[p];a.setSize(f.width,f.height),a.inputBuffer=f.texture,n.setRenderTarget(g),n.render(s,o),f=g}this.fullscreenMaterial=l;for(let p=c.length-1;p>=0;--p){const m=c[p];l.setSize(f.width,f.height),l.inputBuffer=f.texture,l.supportBuffer=u[p].texture,n.setRenderTarget(m),n.render(s,o),f=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let r=t.width,i=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(n,e,t){if(t!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=t;if(t!==xr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n.outputEncoding===gt)for(const i of r)i.texture.encoding=gt}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},XV=class extends _i{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:i=Fr.AUTO_SIZE,height:s=Fr.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new BD(n,e,new kS);const l=this.renderPass;l.setBackgroundDisabled(!0),l.setShadowMapDisabled(!0);const u=l.getClearPass();u.setOverrideClearColor(new Ge(7829503)),u.setOverrideClearAlpha(1),this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new dn(1,1,{minFilter:on,magFilter:on}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new Fr(this,o,a,r);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},I1=1/1e3,YV=1e3,QV=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(n){return this.fixedDeltaEnabled=n,this}isAutoResetEnabled(n){return this.autoReset}setAutoResetEnabled(n){return typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=n),this}getDelta(){return this.delta*I1}getFixedDelta(){return this.fixedDelta*I1}setFixedDelta(n){return this.fixedDelta=n*YV,this}getElapsed(){return this.elapsed*I1}getTimescale(){return this.timescale}setTimescale(n){return this.timescale=n,this}update(n){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},qV=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new RD,this.depthTexture=null,this.passes=[],this.timer=new QV,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Ae),t=n.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===xr&&n.outputEncoding===gt&&(this.inputBuffer.texture.encoding=gt,this.outputBuffer.texture.encoding=gt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(n,t,r)}}replaceRenderer(n,e=!0){const t=this.renderer,r=t.domElement.parentNode;return this.setRenderer(n),e&&r!==null&&(r.removeChild(t.domElement),r.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new SS;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Ya,n.type=Ga):n.type=Do,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,r){const i=this.renderer,s=i===null?new Ae:i.getDrawingBufferSize(new Ae),o={minFilter:Ht,magFilter:Ht,stencilBuffer:e,depthBuffer:n,type:t};let a;return r>0?(a=Number(il.replace(/\D+/g,""))<138?new NB(s.width,s.height,o):new dn(s.width,s.height,o),a.ignoreDepthForMultisampleCopy=!1,a.samples=r):a=new dn(s.width,s.height,o),t===xr&&i!==null&&i.outputEncoding===gt&&(a.texture.encoding=gt),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(n,e){const t=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new Ae),s=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(r),n.setSize(i.width,i.height),n.initialize(r,s,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(a,l)=>a||l.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,s=!1,o,a,l;n===void 0&&(n=this.timer.update().getDelta());for(const u of this.passes)u.enabled&&(u.render(e,r,i,n,s),u.needsSwap&&(s&&(t.renderToScreen=u.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,r,i,n,s),a.setFunc(o.EQUAL,1,4294967295)),l=r,r=i,i=l),u instanceof JV?s=!0:u instanceof HV&&(s=!1))}setSize(n,e,t){const r=this.renderer;if(n===void 0||e===void 0){const s=r.getSize(new Ae);n=s.width,e=s.height}r.setSize(n,e,t);const i=r.getDrawingBufferSize(new Ae);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(const s of this.passes)s.setSize(i.width,i.height)}reset(){const n=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(n)}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},ZV=class{constructor(){this.shaderParts=new Map([[$t.FRAGMENT_HEAD,null],[$t.FRAGMENT_MAIN_UV,null],[$t.FRAGMENT_MAIN_IMAGE,null],[$t.VERTEX_HEAD,null],[$t.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Wa.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Fi}},eW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",tW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",nW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",rW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",iW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",sW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",oW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",aW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",lW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",uW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",cW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",fW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",dW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",hW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",pW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",mW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",gW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",vW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",yW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",xW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",_W="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",wW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",SW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",bW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",MW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",AW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",EW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",CW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",TW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",RW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",PW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",BW="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",DW=new Map([[mt.ADD,eW],[mt.ALPHA,tW],[mt.AVERAGE,nW],[mt.COLOR,rW],[mt.COLOR_BURN,iW],[mt.COLOR_DODGE,sW],[mt.DARKEN,oW],[mt.DIFFERENCE,aW],[mt.DIVIDE,lW],[mt.DST,null],[mt.EXCLUSION,uW],[mt.HARD_LIGHT,cW],[mt.HARD_MIX,fW],[mt.HUE,dW],[mt.INVERT,hW],[mt.INVERT_RGB,pW],[mt.LIGHTEN,mW],[mt.LINEAR_BURN,gW],[mt.LINEAR_DODGE,vW],[mt.LINEAR_LIGHT,yW],[mt.LUMINOSITY,xW],[mt.MULTIPLY,_W],[mt.NEGATION,wW],[mt.NORMAL,SW],[mt.OVERLAY,bW],[mt.PIN_LIGHT,MW],[mt.REFLECT,AW],[mt.SATURATION,EW],[mt.SCREEN,CW],[mt.SOFT_LIGHT,TW],[mt.SRC,RW],[mt.SUBTRACT,PW],[mt.VIVID_LIGHT,BW]]),IW=class extends fs{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new et(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return DW.get(this.blendFunction)}},hs=class extends fs{constructor(n,e,{attributes:t=Wa.NONE,blendFunction:r=mt.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new IW(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Fi,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=sl){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof dn||e instanceof Mn||e instanceof un||e instanceof _i)&&this[n].dispose()}}},LW=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,FW=class extends hs{constructor({blendFunction:n=mt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=eb.LARGE,resolutionScale:l=.5,width:u=Fr.AUTO_SIZE,height:c=Fr.AUTO_SIZE,resolutionX:f=u,resolutionY:p=c}={}){super("BloomEffect",LW,{blendFunction:n,uniforms:new Map([["map",new et(null)],["intensity",new et(i)]])}),this.renderTarget=new dn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new $V({kernelSize:a}),this.luminancePass=new DD({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new KV,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new Fr(this,f,p,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,i.renderTarget):this.blurPass.render(n,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,r)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===gt&&(this.renderTarget.texture.encoding=gt))}},kW="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",OW=class extends hs{constructor({blendFunction:n=mt.SRC,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",kW,{blendFunction:n,uniforms:new Map([["brightness",new et(e)],["contrast",new et(t)]])}),this.inputColorSpace=gt}get brightness(){return this.uniforms.get("brightness").value}set brightness(n){this.uniforms.get("brightness").value=n}getBrightness(n){return this.brightness}setBrightness(n){this.brightness=n}get contrast(){return this.uniforms.get("contrast").value}set contrast(n){this.uniforms.get("contrast").value=n}getContrast(n){return this.contrast}setContrast(n){this.contrast=n}},UW="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",NW=class extends hs{constructor({blendFunction:n,bits:e=16}={}){super("ColorDepthEffect",UW,{blendFunction:n,uniforms:new Map([["factor",new et(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(n){this.bits=n,this.uniforms.get("factor").value=Math.pow(2,n/3)}getBitDepth(){return this.bitDepth}setBitDepth(n){this.bitDepth=n}},zW=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,GW=class extends hs{constructor({blendFunction:n=mt.SRC,inverted:e=!1}={}){super("DepthEffect",zW,{blendFunction:n,attributes:Wa.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(n){this.inverted!==n&&(n?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(n){this.inverted=n}},HW="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",VW=class extends hs{constructor({blendFunction:n,angle:e=Math.PI*.5,scale:t=1}={}){super("DotScreenEffect",HW,{blendFunction:n,uniforms:new Map([["angle",new et(new Ae)],["scale",new et(t)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(n){this.uniforms.get("angle").value.set(Math.sin(n),Math.cos(n))}getAngle(){return this.angle}setAngle(n){this.angle=n}get scale(){return this.uniforms.get("scale").value}set scale(n){this.uniforms.get("scale").value=n}};new J;new ht;var WW="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",jW=class extends hs{constructor({blendFunction:n=mt.SRC,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",WW,{blendFunction:n,uniforms:new Map([["hue",new et(new J)],["saturation",new et(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(n){this.uniforms.get("saturation").value=n}getSaturation(){return this.saturation}setSaturation(n){this.saturation=n}get hue(){const n=this.uniforms.get("hue").value;return Math.acos((n.x*3-1)/2)}set hue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(n){this.hue=n}};function sC(n,e,t){const r=document.createElement("canvas"),i=r.getContext("2d");if(r.width=n,r.height=e,t instanceof Image)i.drawImage(t,0,0);else{const s=i.createImageData(n,e);s.data.set(t),i.putImageData(s,0,0)}return r}var ID=class{constructor(n=0,e=0,t=null){this.width=n,this.height=e,this.data=t}toCanvas(){return typeof document>"u"?null:sC(this.width,this.height,this.data)}static from(n){const{width:e,height:t}=n;let r;if(n instanceof Image){const i=sC(e,t,n);i!==null&&(r=i.getContext("2d").getImageData(0,0,e,t).data)}else r=n.data;return new ID(e,t,r)}},$W=`"use strict";(()=>{var O=Math.pow;var _={SCALE_UP:"lut.scaleup"};var k=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function j(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=k[0];P[0]=s,P[1]=F,P[2]=f;let o=k[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(O(r,3)*4),y=t instanceof Uint8Array?255:1,h=O(r,2),A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;j(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case _.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,oC=new Ge,Ug=class extends zB{constructor(n,e){super(n,e,e,e),this.type=mr,this.format=Qr,this.encoding=Fi,this.minFilter=Ht,this.magFilter=Ht,this.wrapS=Qn,this.wrapT=Qn,this.wrapR=Qn,this.unpackAlignment=1,this.needsUpdate=!0,this.domainMin=new J(0,0,0),this.domainMax=new J(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(n,e=!0){const t=this.image;let r;return n<=t.width?r=Promise.reject(new Error("The target size must be greater than the current size")):r=new Promise((i,s)=>{const o=URL.createObjectURL(new Blob([$W],{type:"text/javascript"})),a=new Worker(o);a.addEventListener("error",u=>s(u.error)),a.addEventListener("message",u=>{const c=new Ug(u.data,n);c.encoding=this.encoding,c.type=this.type,c.name=this.name,URL.revokeObjectURL(o),i(c)});const l=e?[t.data.buffer]:[];a.postMessage({operation:xV.SCALE_UP,data:t.data,size:n},l)}),r}applyLUT(n){const e=this.image,t=n.image,r=Math.min(e.width,e.height,e.depth),i=Math.min(t.width,t.height,t.depth);if(r!==i)console.error("Size mismatch");else if(n.type!==mr||this.type!==mr)console.error("Both LUTs must be FloatType textures");else if(n.format!==Qr||this.format!==Qr)console.error("Both LUTs must be RGBA textures");else{const s=e.data,o=t.data,a=r,l=a**2,u=a-1;for(let c=0,f=a**3;c<f;++c){const p=c*4,m=s[p+0]*u,g=s[p+1]*u,y=s[p+2]*u,v=Math.round(m+g*a+y*l)*4;s[p+0]=o[v+0],s[p+1]=o[v+1],s[p+2]=o[v+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===mr){const n=this.image.data,e=new Uint8Array(n.length);for(let t=0,r=n.length;t<r;++t)e[t]=n[t]*255+.5;this.image.data=e,this.type=xr,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===xr){const n=this.image.data,e=new Float32Array(n.length);for(let t=0,r=n.length;t<r;++t)e[t]=n[t]/255;this.image.data=e,this.type=mr,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const n=this.image.data;if(this.type===mr){for(let e=0,t=n.length;e<t;e+=4)oC.fromArray(n,e).convertLinearToSRGB().toArray(n,e);this.encoding=gt,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const n=this.image.data;if(this.type===mr){for(let e=0,t=n.length;e<t;e+=4)oC.fromArray(n,e).convertSRGBToLinear().toArray(n,e);this.encoding=Fi,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const n=this.image.width,e=this.image.height*this.image.depth,t=new nu(this.image.data,n,e);return t.name=this.name,t.type=this.type,t.format=this.format,t.encoding=this.encoding,t.minFilter=Ht,t.magFilter=Ht,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.generateMipmaps=!1,t.needsUpdate=!0,t}static from(n){const e=n.image,{width:t,height:r}=e,i=Math.min(t,r);let s;if(e instanceof Image){const l=ID.from(e).data;if(t>r){s=new Uint8Array(l.length);for(let u=0;u<i;++u)for(let c=0;c<i;++c)for(let f=0;f<i;++f){const p=(f+u*i+c*i*i)*4,m=(f+c*i+u*i*i)*4;s[m+0]=l[p+0],s[m+1]=l[p+1],s[m+2]=l[p+2],s[m+3]=l[p+3]}}else s=new Uint8Array(l.buffer)}else s=e.data.slice();const o=new Ug(s,i);return o.encoding=n.encoding,o.type=n.type,o.name=n.name,o}static createNeutral(n){const e=new Float32Array(n**3*4),t=n**2,r=1/(n-1);for(let s=0;s<n;++s)for(let o=0;o<n;++o)for(let a=0;a<n;++a){const l=(s+o*n+a*t)*4;e[l+0]=s*r,e[l+1]=o*r,e[l+2]=a*r,e[l+3]=1}const i=new Ug(e,n);return i.name="neutral",i}},JW=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,KW=class extends hs{constructor({blendFunction:n=mt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",JW,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},XW=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,YW=class extends hs{constructor({blendFunction:n=mt.OVERLAY,density:e=1.25,scrollSpeed:t=0}={}){super("ScanlineEffect",XW,{blendFunction:n,uniforms:new Map([["count",new et(0)],["scrollSpeed",new et(0)]])}),this.resolution=new Ae,this.d=e,this.scrollSpeed=t}get density(){return this.d}set density(n){this.d=n,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(n){this.density=n}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(n){this.uniforms.get("scrollSpeed").value=n,n===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},QW="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",qW="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",ZW=Math.PI*.5,xd=new J,aC=new J,e7=class extends hs{constructor(n,e=new J,{speed:t=2,maxRadius:r=1,waveSize:i=.2,amplitude:s=.05}={}){super("ShockWaveEffect",QW,{vertexShader:qW,uniforms:new Map([["active",new et(!1)],["center",new et(new Ae(.5,.5))],["cameraDistance",new et(1)],["size",new et(1)],["radius",new et(-i)],["maxRadius",new et(r)],["waveSize",new et(i)],["amplitude",new et(s)]])}),this.position=e,this.speed=t,this.camera=n,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(n){this.uniforms.get("amplitude").value=n}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(n){this.uniforms.get("waveSize").value=n}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(n){this.uniforms.get("maxRadius").value=n}get epicenter(){return this.position}set epicenter(n){this.position=n}getPosition(){return this.position}setPosition(n){this.position=n}getSpeed(){return this.speed}setSpeed(n){this.speed=n}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(n,e,t){const r=this.position,i=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;i.getWorldDirection(xd),aC.copy(i.position).sub(r),o.value=xd.angleTo(aC)>ZW,o.value&&(s.get("cameraDistance").value=i.position.distanceTo(r),xd.copy(r).project(i),this.screenPosition.set((xd.x+1)*.5,(xd.y+1)*.5)),this.time+=t*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},t7="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",n7=class extends hs{constructor({blendFunction:n,intensity:e=1}={}){super("SepiaEffect",t7,{blendFunction:n,uniforms:new Map([["weightsR",new et(new J(.393,.769,.189))],["weightsG",new et(new J(.349,.686,.168))],["weightsB",new et(new J(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(n){this.blendMode.opacity.value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},r7=`#include <tonemapping_pars_fragment>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,i7=class extends hs{constructor({blendFunction:n=mt.SRC,adaptive:e=!0,mode:t=e?bo.REINHARD2_ADAPTIVE:bo.REINHARD2,resolution:r=256,maxLuminance:i=16,whitePoint:s=i,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",r7,{blendFunction:n,uniforms:new Map([["luminanceBuffer",new et(null)],["maxLuminance",new et(i)],["whitePoint",new et(s)],["middleGrey",new et(o)],["averageLuminance",new et(l)]])}),this.renderTargetLuminance=new dn(1,1,{minFilter:ro,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new DD({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new GV(this.luminancePass.texture,{minLuminance:a,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=r,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(n){if(this.mode!==n){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",n.toFixed(0)),n){case bo.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case bo.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case bo.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=n===bo.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(n){this.mode=n}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(n){this.uniforms.get("whitePoint").value=n}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(n){this.uniforms.get("middleGrey").value=n}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(n){this.uniforms.get("averageLuminance").value=n}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(n){const e=Math.max(0,Math.ceil(Math.log2(n))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(n){this.resolution=n}get adaptive(){return this.mode===bo.REINHARD2_ADAPTIVE}set adaptive(n){this.mode=n?bo.REINHARD2_ADAPTIVE:bo.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(n){this.adaptiveLuminanceMaterial.adaptationRate=n}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(n){console.warn(this.name,"distinction was removed.")}update(n,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(n,e),this.adaptiveLuminancePass.render(n,null,null,t))}initialize(n,e,t){this.adaptiveLuminancePass.initialize(n,e,t)}},s7=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,o7=class extends hs{constructor({blendFunction:n,technique:e=ug.DEFAULT,eskil:t=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",s7,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new et(r)],["darkness",new et(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===ug.ESKIL}set eskil(n){this.technique=n?ug.ESKIL:ug.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}},a7=class extends Ur{load(n,e=()=>{},t=()=>{},r=null){const i=this.manager,s=new n0,o=new xi(s);return o.setPath(this.path),o.setResponseType("text"),new Promise((a,l)=>{s.onError=u=>{i.itemError(u),r!==null?(r(`Failed to load ${u}`),a()):l(`Failed to load ${u}`)},i.itemStart(n),o.load(n,u=>{try{const c=this.parse(u);i.itemEnd(n),e(c),a(c)}catch(c){console.error(c),s.onError(n)}},t)})}parse(n){const e=/TITLE +"([^"]*)"/,t=/LUT_3D_SIZE +(\d+)/,r=/DOMAIN_MIN +([\d.]+) +([\d.]+) +([\d.]+)/,i=/DOMAIN_MAX +([\d.]+) +([\d.]+) +([\d.]+)/,s=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let o=e.exec(n);const a=o!==null?o[1]:null;if(o=t.exec(n),o===null)throw new Error("Missing LUT_3D_SIZE information");const l=Number(o[1]),u=new Float32Array(l**3*4),c=new J(0,0,0),f=new J(1,1,1);if(o=r.exec(n),o!==null&&c.set(Number(o[1]),Number(o[2]),Number(o[3])),o=i.exec(n),o!==null&&f.set(Number(o[1]),Number(o[2]),Number(o[3])),c.x>f.x||c.y>f.y||c.z>f.z)throw c.set(0,0,0),f.set(1,1,1),new Error("Invalid input domain");let p=0;for(;(o=s.exec(n))!==null;)u[p++]=Number(o[1]),u[p++]=Number(o[2]),u[p++]=Number(o[3]),u[p++]=1;const m=new Ug(u,l);return m.domainMin.copy(c),m.domainMax.copy(f),a!==null&&(m.name=a),m}};const ps=function(n,e){return e===void 0&&(e=mt.NORMAL),N.exports.forwardRef(function(r,i){let{blendFunction:s,opacity:o,...a}=r;const l=Va(c=>c.invalidate),u=N.exports.useMemo(()=>new n(a),[a]);return N.exports.useLayoutEffect(()=>{u.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(u.blendMode.opacity.value=o),l()},[s,u.blendMode,o]),ae("primitive",{ref:i,object:u,dispose:null})})},l7=ps(FW,mt.ADD);ps(OW);ps(NW);ps(GW);const u7=N.exports.createContext(null),c7=At.memo(N.exports.forwardRef((n,e)=>{let{children:t,camera:r,scene:i,resolutionScale:s,enabled:o=!0,renderPriority:a=1,autoClear:l=!0,depthBuffer:u,disableNormalPass:c,stencilBuffer:f,multisampling:p=8,frameBufferType:m=fu}=n;const{gl:g,scene:y,camera:v,size:x}=Va();i=i||y,r=r||v;const[_,S,b]=N.exports.useMemo(()=>{const P=WH(),M=new qV(g,{depthBuffer:u,stencilBuffer:f,multisampling:p>0&&P?p:0,frameBufferType:m});M.addPass(new BD(i,r));let T=null,R=null;return c||(R=new XV(i,r),R.enabled=!1,M.addPass(R),s!==void 0&&P&&(T=new VV({normalBuffer:R.texture,resolutionScale:s}),T.enabled=!1,M.addPass(T))),[M,R,T]},[r,g,u,f,p,m,i,c,s]);N.exports.useEffect(()=>_==null?void 0:_.setSize(x.width,x.height),[_,x]),Mu((P,M)=>{o&&(g.autoClear=l,_.render(M))},o?a:0);const C=N.exports.useRef(null);N.exports.useLayoutEffect(()=>{let P;return C.current&&C.current.__r3f&&_&&(P=new jV(r,...C.current.__r3f.objects),P.renderToScreen=!0,_.addPass(P),S&&(S.enabled=!0),b&&(b.enabled=!0)),()=>{P&&(_==null||_.removePass(P)),S&&(S.enabled=!1),b&&(b.enabled=!1)}},[_,t,r,S,b]);const E=N.exports.useMemo(()=>({composer:_,normalPass:S,downSamplingPass:b,resolutionScale:s,camera:r,scene:i}),[_,S,b,s,r,i]);return N.exports.useImperativeHandle(e,()=>_,[_]),ae(u7.Provider,{value:E,children:ae("group",{ref:C,children:t})})}));ps(VW);ps(jW);ps(KW,mt.COLOR_DODGE);const LD=N.exports.createContext(null);function f7(n){let{children:e,enabled:t=!0}=n;const[r,i]=N.exports.useState([]),s=N.exports.useMemo(()=>({selected:r,select:i,enabled:t}),[r,i,t]);return At.createElement(LD.Provider,{value:s},e)}function d7(n){let{enabled:e=!1,children:t,...r}=n;const i=N.exports.useRef(null),s=N.exports.useContext(LD);return N.exports.useEffect(()=>{if(s&&e){let o=!1;const a=[];if(i.current.traverse(l=>{l.type==="Mesh"&&a.push(l),s.selected.indexOf(l)===-1&&(o=!0)}),o)return s.select(l=>[...l,...a]),()=>{s.select(l=>l.filter(u=>!a.includes(u)))}}},[e,t]),ae("group",{ref:i,...r,children:t})}ps(YW,mt.OVERLAY);ps(n7);ps(i7);ps(o7);ps(e7);var FD=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],h7=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],kD=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],p7=FD,m7=p7.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),z_=kD;z_=z_.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)});var g7=z_.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),v7=C7,y7=FD,lC=h7,x7=kD,_7=m7,w7=g7,bs=999,uC=9999,L1=0,F1=1,cC=2,fC=3,dC=4,_d=5,S7=6,b7=7,M7=8,hC=9,A7=10,pC=11,E7=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function C7(n){var e=0,t=0,r=bs,i,s,o=[],a=[],l=1,u=0,c=0,f=!1,p=!1,m="",g;n=n||{};var y=x7,v=y7;n.version==="300 es"&&(y=w7,v=_7);for(var x={},_={},e=0;e<y.length;e++)x[y[e]]=!0;for(var e=0;e<v.length;e++)_[v[e]]=!0;return function(ne){return a=[],ne!==null?b(ne):C()};function S(ne){ne.length&&a.push({type:E7[r],data:ne,position:c,line:l,column:u})}function b(ne){e=0,ne.toString&&(ne=ne.toString()),m+=ne.replace(/\r\n/g,`
`),g=m.length;for(var U;i=m[e],e<g;){switch(U=e,r){case L1:e=R();break;case F1:e=T();break;case cC:e=M();break;case fC:e=L();break;case dC:e=G();break;case pC:e=H();break;case _d:e=X();break;case uC:e=$();break;case hC:e=P();break;case bs:e=E();break}if(U!==e)switch(m[U]){case`
`:u=0,++l;break;default:++u;break}}return t+=e,m=m.slice(e),a}function C(ne){return o.length&&S(o.join("")),r=A7,S("(eof)"),a}function E(){return o=o.length?[]:o,s==="/"&&i==="*"?(c=t+e-1,r=L1,s=i,e+1):s==="/"&&i==="/"?(c=t+e-1,r=F1,s=i,e+1):i==="#"?(r=cC,c=t+e,e):/\s/.test(i)?(r=hC,c=t+e,e):(f=/\d/.test(i),p=/[^\w_]/.test(i),c=t+e,r=f?dC:p?fC:uC,e)}function P(){return/[^\s]/g.test(i)?(S(o.join("")),r=bs,e):(o.push(i),s=i,e+1)}function M(){return(i==="\r"||i===`
`)&&s!=="\\"?(S(o.join("")),r=bs,e):(o.push(i),s=i,e+1)}function T(){return M()}function R(){return i==="/"&&s==="*"?(o.push(i),S(o.join("")),r=bs,e+1):(o.push(i),s=i,e+1)}function L(){if(s==="."&&/\d/.test(i))return r=_d,e;if(s==="/"&&i==="*")return r=L1,e;if(s==="/"&&i==="/")return r=F1,e;if(i==="."&&o.length){for(;I(o););return r=_d,e}if(i===";"||i===")"||i==="("){if(o.length)for(;I(o););return S(i),r=bs,e+1}var ne=o.length===2&&i!=="=";if(/[\w_\d\s]/.test(i)||ne){for(;I(o););return r=bs,e}return o.push(i),s=i,e+1}function I(ne){var U=0,O,z;do{if(O=lC.indexOf(ne.slice(0,ne.length+U).join("")),z=lC[O],O===-1){if(U--+ne.length>0)continue;z=ne.slice(0,1).join("")}return S(z),c+=z.length,o=o.slice(z.length),o.length}while(1)}function H(){return/[^a-fA-F0-9]/.test(i)?(S(o.join("")),r=bs,e):(o.push(i),s=i,e+1)}function G(){return i==="."||/[eE]/.test(i)?(o.push(i),r=_d,s=i,e+1):i==="x"&&o.length===1&&o[0]==="0"?(r=pC,o.push(i),s=i,e+1):/[^\d]/.test(i)?(S(o.join("")),r=bs,e):(o.push(i),s=i,e+1)}function X(){return i==="f"&&(o.push(i),s=i,e+=1),/[eE]/.test(i)||(i==="-"||i==="+")&&/[eE]/.test(s)?(o.push(i),s=i,e+1):/[^\d]/.test(i)?(S(o.join("")),r=bs,e):(o.push(i),s=i,e+1)}function $(){if(/[^\d\w_]/.test(i)){var ne=o.join("");return _[ne]?r=M7:x[ne]?r=b7:r=S7,S(o.join("")),r=bs,e}return o.push(i),s=i,e+1}}var T7=v7,G_=R7;function R7(n,e){var t=T7(e),r=[];return r=r.concat(t(n)),r=r.concat(t(null)),r}var k1,mC;function P7(){if(mC)return k1;mC=1,k1=n;function n(e){for(var t=!1,r=0,i=0;i<e.length;i++)switch(t=t||e[i].type==="keyword"&&e[i].data==="for",e[i].data){case"(":e[i].depth=t?r++:r;break;case"{":e[i].depth=t?r:r++,t=!1;break;case"}":e[i].depth=--r;break;default:e[i].depth=r}for(var i=0;i<e.length;i++){var s=e[i],o=i+1;if(!(s.type!=="ident"&&s.type!=="keyword")&&(a(),e[o].type==="ident"&&(a(),o++,e[o].data==="("))){for(;e[o]&&e[o].data!==";"&&e[o].data!=="{";)e[o++].depth++;e[o]&&e[o].data==="{"&&e[o].depth++}}return e;function a(){for(;e[o]&&(e[o].type==="whitespace"||e[o].data==="["||e[o].data==="]"||e[o].data==="integer");)o++}}return k1}var O1,gC;function B7(){if(gC)return O1;gC=1,O1=n;function n(e){var t=[0],r=t[0],i=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var s=0;s<e.length;s++){var o=e[s],a=o.depth;a>i?t.push(++r):a<i&&t.splice(-1,1),o.scope=t[t.length-1],o.stack=t.slice(),i=o.depth}return e}return O1}var U1,vC;function D7(){if(vC)return U1;vC=1,U1=n;function n(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.property=!1,r.type==="ident"){for(var i=t;e[--i]&&e[i].type==="whitespace";);!e[i]||e[i].type==="operator"&&e[i].data==="."&&(r.property=!0)}}return e}return U1}var N1,yC;function I7(){return yC||(yC=1,N1={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}),N1}var z1,xC;function L7(){return xC||(xC=1,z1={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}),z1}var G1,_C;function F7(){if(_C)return G1;_C=1;var n=I7(),e=L7();G1=t;function t(r){for(var i=0,s=0;s<r.length;s++){var o=r[s],a=o.type;o.assignment=!1,o.declaration=!1,!(a!=="ident"&&a!=="builtin")&&(i=s+1,c(),r[i].type==="operator"&&(!n[r[i].data]||(o.assignment=!0)))}for(var s=0;s<r.length;s++){var l=r[s],a=l.type,u=l.data;if(l.declaration=!1,a==="keyword"){if(e[u])continue}else if(a!=="ident")continue;if(i=s+1,f(),r[i].type==="ident"){if(r[i++].declaration=!0,f(),r[i].data==="("){for(i++,c();r[i]&&r[i].data!==")"&&!(r[i].type!=="keyword"&&r[i].type!=="ident");)i++,c(),r[i].type==="ident"&&(r[i++].declaration=!0,c(),f(),c(),r[i].data===","&&(i++,c()));s=i;continue}for(;r[i]&&r[i].data!==";";)r[i].data===","?(i++,c(),(r[i].declaration=r[i].type==="ident")&&i++):(c(),p(),c(),i++);s=i}}for(var s=0;s<r.length;s++){var o=r[s];if(o.type==="keyword"&&o.data==="struct"&&(i=s+1,c(),r[i].type==="ident"&&(i++,c(),r[i++].data==="{"))){for(c();r[i].type==="ident"||r[i].type==="keyword";){do i++,c(),r[i].structMember=!0,r[i].declaration=!1,i++,f();while(r[i].data===",");r[i].data===";"&&i++,c()}if(i++,c(),r[i].type==="ident")for(r[i].declaration=!0,c();r[++i].data===",";)c(),i++,c(),r[i].type==="ident"&&(r[i].declaration=!0),c()}}return r;function c(m){for(;r[i]&&r[i].type==="whitespace";)i++}function f(){for(;r[i]&&(r[i].type==="integer"||r[i].data==="["||r[i].data==="]"||r[i].type==="whitespace");)i++}function p(){if(!!r[i]&&r[i].data==="("){var m=0;do{if(r[i].data===";")break;r[i].data==="("&&m++,r[i].data===")"&&m--}while(m&&r[++i])}}}return G1}var wC=k7;function k7(n,e){P7()(n),B7()(n),D7()(n),F7()(n);for(var t=U7(n),r=e||O7(),i={},s=0;s<n.length;s++){var o=n[s],a=o.stack,l=o.data;if(o.descoped=!1,o.type==="ident"&&!o.property&&!o.structMember){for(var u=!1,c=a.length-1;c>=0;c--){var f=t[a[c]];if(!!f&&!!f[l]){if(u=!0,c)break;o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data}}u||(o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data)}}return n}function O7(){var n=0;return function(t){return t+"_"+(n++).toString(36)}}function U7(n){for(var e={},t=0;t<n.length;t++){var r=n[t];r.declaration&&(e[r.scope]=e[r.scope]||{},e[r.scope][r.data]=r)}return e}var $d=N7;function N7(n){for(var e=[],t=0;t<n.length;t++)n[t].type!=="eof"&&e.push(n[t].data);return e.join("")}var H_=z7;function z7(n){var e=null,t=null,r=0,i=0,s=0,o=0,a=0,l=[],u,c,f;for(u=0,c;u<n.length;u++)if(f=n[u],f.data==="{"){if(r&&r++||(c=m(u,Sa(")"),Sa()),c<0)||(o=c,c=m(c,Sa("("),Sa(")")),c<0)||(a=c,c=m(c,wd),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,wd),c<0))continue;r=1,i=u,e=n[c].data,s=c;var p=m(c,wd);switch(n[p]&&n[p].data){case"lowp":case"highp":case"mediump":s=p}}else if(r&&f.data==="}"){if(--r)continue;l.push({name:t,type:e,body:[i+1,u],args:[a,o+1],outer:[s,u+1]})}for(u=0;u<n.length;u++)if(f=n[u],f.data===";"){if(c=m(u,Sa(")"),Sa()),c<0||(o=c,c=m(c,Sa("("),Sa(")")),c<0)||(a=c,c=m(c,wd),c<0)||n[c].type!=="ident"||(t=n[c].data,c=m(c,wd),c<0)||n[c].type==="operator"||n[c].data==="return")continue;e=n[c].data,l.push({name:t,type:e,body:!1,args:[a,o+1],outer:[c,u+1]})}return l.sort(function(g,y){return g.outer[0]-y.outer[0]});function m(g,y,v){for(var x=g-1;x>=0;x--){if(y(n[x]))return x;if(v&&v(n[x]))return-1}return-1}}function Sa(n){return function(e){return e.type==="operator"&&(!n||e.data===n)}}function wd(n){return n.type!=="whitespace"}function Pd(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OD={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var f=typeof Pd=="function"&&Pd;if(!c&&f)return f(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}c=i[u]={exports:{}},r[u][0].call(c.exports,function(p){var m=r[u][1][p];return o(m||p)},c,c.exports,t,r,i,s)}return i[u].exports}for(var a=typeof Pd=="function"&&Pd,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){var g=t("crypto");function y(E,P){P=_(E,P);var M;return(M=P.algorithm!=="passthrough"?g.createHash(P.algorithm):new C).write===void 0&&(M.write=M.update,M.end=M.update),b(P,M).dispatch(E),M.update||M.end(""),M.digest?M.digest(P.encoding==="buffer"?void 0:P.encoding):(E=M.read(),P.encoding!=="buffer"?E.toString(P.encoding):E)}(i=r.exports=y).sha1=function(E){return y(E)},i.keys=function(E){return y(E,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(E){return y(E,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(E){return y(E,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var v=g.getHashes?g.getHashes().slice():["sha1","md5"],x=(v.push("passthrough"),["buffer","hex","binary","base64"]);function _(E,P){var M={};if(M.algorithm=(P=P||{}).algorithm||"sha1",M.encoding=P.encoding||"hex",M.excludeValues=!!P.excludeValues,M.algorithm=M.algorithm.toLowerCase(),M.encoding=M.encoding.toLowerCase(),M.ignoreUnknown=P.ignoreUnknown===!0,M.respectType=P.respectType!==!1,M.respectFunctionNames=P.respectFunctionNames!==!1,M.respectFunctionProperties=P.respectFunctionProperties!==!1,M.unorderedArrays=P.unorderedArrays===!0,M.unorderedSets=P.unorderedSets!==!1,M.unorderedObjects=P.unorderedObjects!==!1,M.replacer=P.replacer||void 0,M.excludeKeys=P.excludeKeys||void 0,E===void 0)throw new Error("Object argument required.");for(var T=0;T<v.length;++T)v[T].toLowerCase()===M.algorithm.toLowerCase()&&(M.algorithm=v[T]);if(v.indexOf(M.algorithm)===-1)throw new Error('Algorithm "'+M.algorithm+'"  not supported. supported values: '+v.join(", "));if(x.indexOf(M.encoding)===-1&&M.algorithm!=="passthrough")throw new Error('Encoding "'+M.encoding+'"  not supported. supported values: '+x.join(", "));return M}function S(E){if(typeof E=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(E))!=null}function b(E,P,M){M=M||[];function T(R){return P.update?P.update(R,"utf8"):P.write(R,"utf8")}return{dispatch:function(R){return this["_"+((R=E.replacer?E.replacer(R):R)===null?"null":typeof R)](R)},_object:function(R){var L,I=Object.prototype.toString.call(R),H=/\[object (.*)\]/i.exec(I);if(H=(H=H?H[1]:"unknown:["+I+"]").toLowerCase(),0<=(I=M.indexOf(R)))return this.dispatch("[CIRCULAR:"+I+"]");if(M.push(R),a!==void 0&&a.isBuffer&&a.isBuffer(R))return T("buffer:"),T(R);if(H==="object"||H==="function"||H==="asyncfunction")return I=Object.keys(R),E.unorderedObjects&&(I=I.sort()),E.respectType===!1||S(R)||I.splice(0,0,"prototype","__proto__","constructor"),E.excludeKeys&&(I=I.filter(function(G){return!E.excludeKeys(G)})),T("object:"+I.length+":"),L=this,I.forEach(function(G){L.dispatch(G),T(":"),E.excludeValues||L.dispatch(R[G]),T(",")});if(!this["_"+H]){if(E.ignoreUnknown)return T("["+H+"]");throw new Error('Unknown object type "'+H+'"')}this["_"+H](R)},_array:function(R,G){G=G!==void 0?G:E.unorderedArrays!==!1;var I=this;if(T("array:"+R.length+":"),!G||R.length<=1)return R.forEach(function(X){return I.dispatch(X)});var H=[],G=R.map(function(X){var $=new C,ne=M.slice();return b(E,$,ne).dispatch(X),H=H.concat(ne.slice(M.length)),$.read().toString()});return M=M.concat(H),G.sort(),this._array(G,!1)},_date:function(R){return T("date:"+R.toJSON())},_symbol:function(R){return T("symbol:"+R.toString())},_error:function(R){return T("error:"+R.toString())},_boolean:function(R){return T("bool:"+R.toString())},_string:function(R){T("string:"+R.length+":"),T(R.toString())},_function:function(R){T("fn:"),S(R)?this.dispatch("[native]"):this.dispatch(R.toString()),E.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(R.name)),E.respectFunctionProperties&&this._object(R)},_number:function(R){return T("number:"+R.toString())},_xml:function(R){return T("xml:"+R.toString())},_null:function(){return T("Null")},_undefined:function(){return T("Undefined")},_regexp:function(R){return T("regex:"+R.toString())},_uint8array:function(R){return T("uint8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint8clampedarray:function(R){return T("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(R))},_int8array:function(R){return T("int8array:"),this.dispatch(Array.prototype.slice.call(R))},_uint16array:function(R){return T("uint16array:"),this.dispatch(Array.prototype.slice.call(R))},_int16array:function(R){return T("int16array:"),this.dispatch(Array.prototype.slice.call(R))},_uint32array:function(R){return T("uint32array:"),this.dispatch(Array.prototype.slice.call(R))},_int32array:function(R){return T("int32array:"),this.dispatch(Array.prototype.slice.call(R))},_float32array:function(R){return T("float32array:"),this.dispatch(Array.prototype.slice.call(R))},_float64array:function(R){return T("float64array:"),this.dispatch(Array.prototype.slice.call(R))},_arraybuffer:function(R){return T("arraybuffer:"),this.dispatch(new Uint8Array(R))},_url:function(R){return T("url:"+R.toString())},_map:function(R){return T("map:"),R=Array.from(R),this._array(R,E.unorderedSets!==!1)},_set:function(R){return T("set:"),R=Array.from(R),this._array(R,E.unorderedSets!==!1)},_file:function(R){return T("file:"),this.dispatch([R.name,R.size,R.type,R.lastModfied])},_blob:function(){if(E.ignoreUnknown)return T("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return T("domwindow")},_bigint:function(R){return T("bigint:"+R.toString())},_process:function(){return T("process")},_timer:function(){return T("timer")},_pipe:function(){return T("pipe")},_tcp:function(){return T("tcp")},_udp:function(){return T("udp")},_tty:function(){return T("tty")},_statwatcher:function(){return T("statwatcher")},_securecontext:function(){return T("securecontext")},_connection:function(){return T("connection")},_zlib:function(){return T("zlib")},_context:function(){return T("context")},_nodescript:function(){return T("nodescript")},_httpparser:function(){return T("httpparser")},_dataview:function(){return T("dataview")},_signal:function(){return T("signal")},_fsevent:function(){return T("fsevent")},_tlswrap:function(){return T("tlswrap")}}}function C(){return{buf:"",write:function(E){this.buf+=E},end:function(E){this.buf+=E},read:function(){return this.buf}}}i.writeToStream=function(E,P,M){return M===void 0&&(M=P,P={}),b(P=_(E,P),M).dispatch(E)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){(function(g){var y=typeof Uint8Array<"u"?Uint8Array:Array,v="+".charCodeAt(0),x="/".charCodeAt(0),_="0".charCodeAt(0),S="a".charCodeAt(0),b="A".charCodeAt(0),C="-".charCodeAt(0),E="_".charCodeAt(0);function P(M){return M=M.charCodeAt(0),M===v||M===C?62:M===x||M===E?63:M<_?-1:M<_+10?M-_+26+26:M<b+26?M-b:M<S+26?M-S+26:void 0}g.toByteArray=function(M){var T,R;if(0<M.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var L=M.length,L=M.charAt(L-2)==="="?2:M.charAt(L-1)==="="?1:0,I=new y(3*M.length/4-L),H=0<L?M.length-4:M.length,G=0;function X($){I[G++]=$}for(T=0;T<H;T+=4,0)X((16711680&(R=P(M.charAt(T))<<18|P(M.charAt(T+1))<<12|P(M.charAt(T+2))<<6|P(M.charAt(T+3))))>>16),X((65280&R)>>8),X(255&R);return L==2?X(255&(R=P(M.charAt(T))<<2|P(M.charAt(T+1))>>4)):L==1&&(X((R=P(M.charAt(T))<<10|P(M.charAt(T+1))<<4|P(M.charAt(T+2))>>2)>>8&255),X(255&R)),I},g.fromByteArray=function(M){var T,R,L,I,H=M.length%3,G="";function X($){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($)}for(T=0,L=M.length-H;T<L;T+=3)R=(M[T]<<16)+(M[T+1]<<8)+M[T+2],G+=X((I=R)>>18&63)+X(I>>12&63)+X(I>>6&63)+X(63&I);switch(H){case 1:G=(G+=X((R=M[M.length-1])>>2))+X(R<<4&63)+"==";break;case 2:G=(G=(G+=X((R=(M[M.length-2]<<8)+M[M.length-1])>>10))+X(R>>4&63))+X(R<<2&63)+"="}return G}})(i===void 0?this.base64js={}:i)}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(t,r,i){(function(s,o,v,l,u,c,f,p,m){var g=t("base64-js"),y=t("ieee754");function v(k,V,K){if(!(this instanceof v))return new v(k,V,K);var Y,ee,le,we,Se=typeof k;if(V==="base64"&&Se=="string")for(k=(we=k).trim?we.trim():we.replace(/^\s+|\s+$/g,"");k.length%4!=0;)k+="=";if(Se=="number")Y=U(k);else if(Se=="string")Y=v.byteLength(k,V);else{if(Se!="object")throw new Error("First argument needs to be a number, array or string.");Y=U(k.length)}if(v._useTypedArrays?ee=v._augment(new Uint8Array(Y)):((ee=this).length=Y,ee._isBuffer=!0),v._useTypedArrays&&typeof k.byteLength=="number")ee._set(k);else if(O(we=k)||v.isBuffer(we)||we&&typeof we=="object"&&typeof we.length=="number")for(le=0;le<Y;le++)v.isBuffer(k)?ee[le]=k.readUInt8(le):ee[le]=k[le];else if(Se=="string")ee.write(k,0,V);else if(Se=="number"&&!v._useTypedArrays&&!K)for(le=0;le<Y;le++)ee[le]=0;return ee}function x(k,V,K,Y){return v._charsWritten=oe(function(ee){for(var le=[],we=0;we<ee.length;we++)le.push(255&ee.charCodeAt(we));return le}(V),k,K,Y)}function _(k,V,K,Y){return v._charsWritten=oe(function(ee){for(var le,we,Se=[],Ue=0;Ue<ee.length;Ue++)we=ee.charCodeAt(Ue),le=we>>8,we=we%256,Se.push(we),Se.push(le);return Se}(V),k,K,Y)}function S(k,V,K){var Y="";K=Math.min(k.length,K);for(var ee=V;ee<K;ee++)Y+=String.fromCharCode(k[ee]);return Y}function b(k,V,K,le){le||(ie(typeof K=="boolean","missing or invalid endian"),ie(V!=null,"missing offset"),ie(V+1<k.length,"Trying to read beyond buffer length"));var ee,le=k.length;if(!(le<=V))return K?(ee=k[V],V+1<le&&(ee|=k[V+1]<<8)):(ee=k[V]<<8,V+1<le&&(ee|=k[V+1])),ee}function C(k,V,K,le){le||(ie(typeof K=="boolean","missing or invalid endian"),ie(V!=null,"missing offset"),ie(V+3<k.length,"Trying to read beyond buffer length"));var ee,le=k.length;if(!(le<=V))return K?(V+2<le&&(ee=k[V+2]<<16),V+1<le&&(ee|=k[V+1]<<8),ee|=k[V],V+3<le&&(ee+=k[V+3]<<24>>>0)):(V+1<le&&(ee=k[V+1]<<16),V+2<le&&(ee|=k[V+2]<<8),V+3<le&&(ee|=k[V+3]),ee+=k[V]<<24>>>0),ee}function E(k,V,K,Y){if(Y||(ie(typeof K=="boolean","missing or invalid endian"),ie(V!=null,"missing offset"),ie(V+1<k.length,"Trying to read beyond buffer length")),!(k.length<=V))return Y=b(k,V,K,!0),32768&Y?-1*(65535-Y+1):Y}function P(k,V,K,Y){if(Y||(ie(typeof K=="boolean","missing or invalid endian"),ie(V!=null,"missing offset"),ie(V+3<k.length,"Trying to read beyond buffer length")),!(k.length<=V))return Y=C(k,V,K,!0),2147483648&Y?-1*(4294967295-Y+1):Y}function M(k,V,K,Y){return Y||(ie(typeof K=="boolean","missing or invalid endian"),ie(V+3<k.length,"Trying to read beyond buffer length")),y.read(k,V,K,23,4)}function T(k,V,K,Y){return Y||(ie(typeof K=="boolean","missing or invalid endian"),ie(V+7<k.length,"Trying to read beyond buffer length")),y.read(k,V,K,52,8)}function R(k,V,K,Y,ee){if(ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+1<k.length,"trying to write beyond buffer length"),me(V,65535)),ee=k.length,!(ee<=K))for(var le=0,we=Math.min(ee-K,2);le<we;le++)k[K+le]=(V&255<<8*(Y?le:1-le))>>>8*(Y?le:1-le)}function L(k,V,K,Y,ee){if(ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+3<k.length,"trying to write beyond buffer length"),me(V,4294967295)),ee=k.length,!(ee<=K))for(var le=0,we=Math.min(ee-K,4);le<we;le++)k[K+le]=V>>>8*(Y?le:3-le)&255}function I(k,V,K,Y,ee){ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+1<k.length,"Trying to write beyond buffer length"),re(V,32767,-32768)),k.length<=K||R(k,0<=V?V:65535+V+1,K,Y,ee)}function H(k,V,K,Y,ee){ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+3<k.length,"Trying to write beyond buffer length"),re(V,2147483647,-2147483648)),k.length<=K||L(k,0<=V?V:4294967295+V+1,K,Y,ee)}function G(k,V,K,Y,ee){ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+3<k.length,"Trying to write beyond buffer length"),he(V,34028234663852886e22,-34028234663852886e22)),k.length<=K||y.write(k,V,K,Y,23,4)}function X(k,V,K,Y,ee){ee||(ie(V!=null,"missing value"),ie(typeof Y=="boolean","missing or invalid endian"),ie(K!=null,"missing offset"),ie(K+7<k.length,"Trying to write beyond buffer length"),he(V,17976931348623157e292,-17976931348623157e292)),k.length<=K||y.write(k,V,K,Y,52,8)}i.Buffer=v,i.SlowBuffer=v,i.INSPECT_MAX_BYTES=50,v.poolSize=8192,v._useTypedArrays=function(){try{var k=new ArrayBuffer(0),V=new Uint8Array(k);return V.foo=function(){return 42},V.foo()===42&&typeof V.subarray=="function"}catch{return!1}}(),v.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.isBuffer=function(k){return!(k==null||!k._isBuffer)},v.byteLength=function(k,V){var K;switch(k+="",V||"utf8"){case"hex":K=k.length/2;break;case"utf8":case"utf-8":K=W(k).length;break;case"ascii":case"binary":case"raw":K=k.length;break;case"base64":K=q(k).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":K=2*k.length;break;default:throw new Error("Unknown encoding")}return K},v.concat=function(k,V){if(ie(O(k),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),k.length===0)return new v(0);if(k.length===1)return k[0];if(typeof V!="number")for(ee=V=0;ee<k.length;ee++)V+=k[ee].length;for(var K=new v(V),Y=0,ee=0;ee<k.length;ee++){var le=k[ee];le.copy(K,Y),Y+=le.length}return K},v.prototype.write=function(k,V,K,Y){isFinite(V)?isFinite(K)||(Y=K,K=void 0):(Ue=Y,Y=V,V=K,K=Ue),V=Number(V)||0;var ee,le,we,Se,Ue=this.length-V;switch((!K||Ue<(K=Number(K)))&&(K=Ue),Y=String(Y||"utf8").toLowerCase()){case"hex":ee=function(xe,Re,Ie,ye){Ie=Number(Ie)||0;var j=xe.length-Ie;(!ye||j<(ye=Number(ye)))&&(ye=j),ie((j=Re.length)%2==0,"Invalid hex string"),j/2<ye&&(ye=j/2);for(var F=0;F<ye;F++){var te=parseInt(Re.substr(2*F,2),16);ie(!isNaN(te),"Invalid hex string"),xe[Ie+F]=te}return v._charsWritten=2*F,F}(this,k,V,K);break;case"utf8":case"utf-8":le=this,we=V,Se=K,ee=v._charsWritten=oe(W(k),le,we,Se);break;case"ascii":case"binary":ee=x(this,k,V,K);break;case"base64":le=this,we=V,Se=K,ee=v._charsWritten=oe(q(k),le,we,Se);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ee=_(this,k,V,K);break;default:throw new Error("Unknown encoding")}return ee},v.prototype.toString=function(k,V,K){var Y,ee,le,we,Se=this;if(k=String(k||"utf8").toLowerCase(),V=Number(V)||0,(K=K!==void 0?Number(K):Se.length)===V)return"";switch(k){case"hex":Y=function(Ue,xe,Re){var Ie=Ue.length;(!xe||xe<0)&&(xe=0),(!Re||Re<0||Ie<Re)&&(Re=Ie);for(var ye="",j=xe;j<Re;j++)ye+=z(Ue[j]);return ye}(Se,V,K);break;case"utf8":case"utf-8":Y=function(Ue,xe,Re){var Ie="",ye="";Re=Math.min(Ue.length,Re);for(var j=xe;j<Re;j++)Ue[j]<=127?(Ie+=ce(ye)+String.fromCharCode(Ue[j]),ye=""):ye+="%"+Ue[j].toString(16);return Ie+ce(ye)}(Se,V,K);break;case"ascii":case"binary":Y=S(Se,V,K);break;case"base64":ee=Se,we=K,Y=(le=V)===0&&we===ee.length?g.fromByteArray(ee):g.fromByteArray(ee.slice(le,we));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Y=function(Ue,xe,Re){for(var Ie=Ue.slice(xe,Re),ye="",j=0;j<Ie.length;j+=2)ye+=String.fromCharCode(Ie[j]+256*Ie[j+1]);return ye}(Se,V,K);break;default:throw new Error("Unknown encoding")}return Y},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.copy=function(k,V,K,Y){if(V=V||0,(Y=Y||Y===0?Y:this.length)!==(K=K||0)&&k.length!==0&&this.length!==0){ie(K<=Y,"sourceEnd < sourceStart"),ie(0<=V&&V<k.length,"targetStart out of bounds"),ie(0<=K&&K<this.length,"sourceStart out of bounds"),ie(0<=Y&&Y<=this.length,"sourceEnd out of bounds"),Y>this.length&&(Y=this.length);var ee=(Y=k.length-V<Y-K?k.length-V+K:Y)-K;if(ee<100||!v._useTypedArrays)for(var le=0;le<ee;le++)k[le+V]=this[le+K];else k._set(this.subarray(K,K+ee),V)}},v.prototype.slice=function(k,V){var K=this.length;if(k=ne(k,K,0),V=ne(V,K,K),v._useTypedArrays)return v._augment(this.subarray(k,V));for(var Y=V-k,ee=new v(Y,void 0,!0),le=0;le<Y;le++)ee[le]=this[le+k];return ee},v.prototype.get=function(k){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(k)},v.prototype.set=function(k,V){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(k,V)},v.prototype.readUInt8=function(k,V){if(V||(ie(k!=null,"missing offset"),ie(k<this.length,"Trying to read beyond buffer length")),!(k>=this.length))return this[k]},v.prototype.readUInt16LE=function(k,V){return b(this,k,!0,V)},v.prototype.readUInt16BE=function(k,V){return b(this,k,!1,V)},v.prototype.readUInt32LE=function(k,V){return C(this,k,!0,V)},v.prototype.readUInt32BE=function(k,V){return C(this,k,!1,V)},v.prototype.readInt8=function(k,V){if(V||(ie(k!=null,"missing offset"),ie(k<this.length,"Trying to read beyond buffer length")),!(k>=this.length))return 128&this[k]?-1*(255-this[k]+1):this[k]},v.prototype.readInt16LE=function(k,V){return E(this,k,!0,V)},v.prototype.readInt16BE=function(k,V){return E(this,k,!1,V)},v.prototype.readInt32LE=function(k,V){return P(this,k,!0,V)},v.prototype.readInt32BE=function(k,V){return P(this,k,!1,V)},v.prototype.readFloatLE=function(k,V){return M(this,k,!0,V)},v.prototype.readFloatBE=function(k,V){return M(this,k,!1,V)},v.prototype.readDoubleLE=function(k,V){return T(this,k,!0,V)},v.prototype.readDoubleBE=function(k,V){return T(this,k,!1,V)},v.prototype.writeUInt8=function(k,V,K){K||(ie(k!=null,"missing value"),ie(V!=null,"missing offset"),ie(V<this.length,"trying to write beyond buffer length"),me(k,255)),V>=this.length||(this[V]=k)},v.prototype.writeUInt16LE=function(k,V,K){R(this,k,V,!0,K)},v.prototype.writeUInt16BE=function(k,V,K){R(this,k,V,!1,K)},v.prototype.writeUInt32LE=function(k,V,K){L(this,k,V,!0,K)},v.prototype.writeUInt32BE=function(k,V,K){L(this,k,V,!1,K)},v.prototype.writeInt8=function(k,V,K){K||(ie(k!=null,"missing value"),ie(V!=null,"missing offset"),ie(V<this.length,"Trying to write beyond buffer length"),re(k,127,-128)),V>=this.length||(0<=k?this.writeUInt8(k,V,K):this.writeUInt8(255+k+1,V,K))},v.prototype.writeInt16LE=function(k,V,K){I(this,k,V,!0,K)},v.prototype.writeInt16BE=function(k,V,K){I(this,k,V,!1,K)},v.prototype.writeInt32LE=function(k,V,K){H(this,k,V,!0,K)},v.prototype.writeInt32BE=function(k,V,K){H(this,k,V,!1,K)},v.prototype.writeFloatLE=function(k,V,K){G(this,k,V,!0,K)},v.prototype.writeFloatBE=function(k,V,K){G(this,k,V,!1,K)},v.prototype.writeDoubleLE=function(k,V,K){X(this,k,V,!0,K)},v.prototype.writeDoubleBE=function(k,V,K){X(this,k,V,!1,K)},v.prototype.fill=function(k,V,K){if(V=V||0,K=K||this.length,ie(typeof(k=typeof(k=k||0)=="string"?k.charCodeAt(0):k)=="number"&&!isNaN(k),"value is not a number"),ie(V<=K,"end < start"),K!==V&&this.length!==0){ie(0<=V&&V<this.length,"start out of bounds"),ie(0<=K&&K<=this.length,"end out of bounds");for(var Y=V;Y<K;Y++)this[Y]=k}},v.prototype.inspect=function(){for(var k=[],V=this.length,K=0;K<V;K++)if(k[K]=z(this[K]),K===i.INSPECT_MAX_BYTES){k[K+1]="...";break}return"<Buffer "+k.join(" ")+">"},v.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(v._useTypedArrays)return new v(this).buffer;for(var k=new Uint8Array(this.length),V=0,K=k.length;V<K;V+=1)k[V]=this[V];return k.buffer};var $=v.prototype;function ne(k,V,K){return typeof k!="number"?K:V<=(k=~~k)?V:0<=k||0<=(k+=V)?k:0}function U(k){return(k=~~Math.ceil(+k))<0?0:k}function O(k){return(Array.isArray||function(V){return Object.prototype.toString.call(V)==="[object Array]"})(k)}function z(k){return k<16?"0"+k.toString(16):k.toString(16)}function W(k){for(var V=[],K=0;K<k.length;K++){var Y=k.charCodeAt(K);if(Y<=127)V.push(k.charCodeAt(K));else for(var ee=K,le=(55296<=Y&&Y<=57343&&K++,encodeURIComponent(k.slice(ee,K+1)).substr(1).split("%")),we=0;we<le.length;we++)V.push(parseInt(le[we],16))}return V}function q(k){return g.toByteArray(k)}function oe(k,V,K,Y){for(var ee=0;ee<Y&&!(ee+K>=V.length||ee>=k.length);ee++)V[ee+K]=k[ee];return ee}function ce(k){try{return decodeURIComponent(k)}catch{return String.fromCharCode(65533)}}function me(k,V){ie(typeof k=="number","cannot write a non-number as a number"),ie(0<=k,"specified a negative value for writing an unsigned value"),ie(k<=V,"value is larger than maximum value for type"),ie(Math.floor(k)===k,"value has a fractional component")}function re(k,V,K){ie(typeof k=="number","cannot write a non-number as a number"),ie(k<=V,"value larger than maximum allowed value"),ie(K<=k,"value smaller than minimum allowed value"),ie(Math.floor(k)===k,"value has a fractional component")}function he(k,V,K){ie(typeof k=="number","cannot write a non-number as a number"),ie(k<=V,"value larger than maximum allowed value"),ie(K<=k,"value smaller than minimum allowed value")}function ie(k,V){if(!k)throw new Error(V||"Failed assertion")}v._augment=function(k){return k._isBuffer=!0,k._get=k.get,k._set=k.set,k.get=$.get,k.set=$.set,k.write=$.write,k.toString=$.toString,k.toLocaleString=$.toString,k.toJSON=$.toJSON,k.copy=$.copy,k.slice=$.slice,k.readUInt8=$.readUInt8,k.readUInt16LE=$.readUInt16LE,k.readUInt16BE=$.readUInt16BE,k.readUInt32LE=$.readUInt32LE,k.readUInt32BE=$.readUInt32BE,k.readInt8=$.readInt8,k.readInt16LE=$.readInt16LE,k.readInt16BE=$.readInt16BE,k.readInt32LE=$.readInt32LE,k.readInt32BE=$.readInt32BE,k.readFloatLE=$.readFloatLE,k.readFloatBE=$.readFloatBE,k.readDoubleLE=$.readDoubleLE,k.readDoubleBE=$.readDoubleBE,k.writeUInt8=$.writeUInt8,k.writeUInt16LE=$.writeUInt16LE,k.writeUInt16BE=$.writeUInt16BE,k.writeUInt32LE=$.writeUInt32LE,k.writeUInt32BE=$.writeUInt32BE,k.writeInt8=$.writeInt8,k.writeInt16LE=$.writeInt16LE,k.writeInt16BE=$.writeInt16BE,k.writeInt32LE=$.writeInt32LE,k.writeInt32BE=$.writeInt32BE,k.writeFloatLE=$.writeFloatLE,k.writeFloatBE=$.writeFloatBE,k.writeDoubleLE=$.writeDoubleLE,k.writeDoubleBE=$.writeDoubleBE,k.fill=$.fill,k.inspect=$.inspect,k.toArrayBuffer=$.toArrayBuffer,k}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(t,r,i){(function(s,o,g,l,u,c,f,p,m){var g=t("buffer").Buffer,y=4,v=new g(y);v.fill(0),r.exports={hash:function(x,_,S,b){for(var C=_(function(R,L){R.length%y!=0&&(I=R.length+(y-R.length%y),R=g.concat([R,v],I));for(var I,H=[],G=L?R.readInt32BE:R.readInt32LE,X=0;X<R.length;X+=y)H.push(G.call(R,X));return H}(x=g.isBuffer(x)?x:new g(x),b),8*x.length),_=b,E=new g(S),P=_?E.writeInt32BE:E.writeInt32LE,M=0;M<C.length;M++)P.call(E,C[M],4*M,!0);return E}}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(t,r,i){(function(s,o,g,l,u,c,f,p,m){var g=t("buffer").Buffer,y=t("./sha"),v=t("./sha256"),x=t("./rng"),_={sha1:y,sha256:v,md5:t("./md5")},S=64,b=new g(S);function C(R,L){var I=_[R=R||"sha1"],H=[];return I||E("algorithm:",R,"is not yet supported"),{update:function(G){return g.isBuffer(G)||(G=new g(G)),H.push(G),G.length,this},digest:function(G){var X=g.concat(H),X=L?function($,ne,U){g.isBuffer(ne)||(ne=new g(ne)),g.isBuffer(U)||(U=new g(U)),ne.length>S?ne=$(ne):ne.length<S&&(ne=g.concat([ne,b],S));for(var O=new g(S),z=new g(S),W=0;W<S;W++)O[W]=54^ne[W],z[W]=92^ne[W];return U=$(g.concat([O,U])),$(g.concat([z,U]))}(I,L,X):I(X);return H=null,G?X.toString(G):X}}}function E(){var R=[].slice.call(arguments).join(" ");throw new Error([R,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}b.fill(0),i.createHash=function(R){return C(R)},i.createHmac=C,i.randomBytes=function(R,L){if(!L||!L.call)return new g(x(R));try{L.call(this,void 0,new g(x(R)))}catch(I){L(I)}};var P,M=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],T=function(R){i[R]=function(){E("sorry,",R,"is not implemented yet")}};for(P in M)T(M[P])}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){var g=t("./helpers");function y(E,P){E[P>>5]|=128<<P%32,E[14+(P+64>>>9<<4)]=P;for(var M=1732584193,T=-271733879,R=-1732584194,L=271733878,I=0;I<E.length;I+=16){var H=M,G=T,X=R,$=L,M=x(M,T,R,L,E[I+0],7,-680876936),L=x(L,M,T,R,E[I+1],12,-389564586),R=x(R,L,M,T,E[I+2],17,606105819),T=x(T,R,L,M,E[I+3],22,-1044525330);M=x(M,T,R,L,E[I+4],7,-176418897),L=x(L,M,T,R,E[I+5],12,1200080426),R=x(R,L,M,T,E[I+6],17,-1473231341),T=x(T,R,L,M,E[I+7],22,-45705983),M=x(M,T,R,L,E[I+8],7,1770035416),L=x(L,M,T,R,E[I+9],12,-1958414417),R=x(R,L,M,T,E[I+10],17,-42063),T=x(T,R,L,M,E[I+11],22,-1990404162),M=x(M,T,R,L,E[I+12],7,1804603682),L=x(L,M,T,R,E[I+13],12,-40341101),R=x(R,L,M,T,E[I+14],17,-1502002290),M=_(M,T=x(T,R,L,M,E[I+15],22,1236535329),R,L,E[I+1],5,-165796510),L=_(L,M,T,R,E[I+6],9,-1069501632),R=_(R,L,M,T,E[I+11],14,643717713),T=_(T,R,L,M,E[I+0],20,-373897302),M=_(M,T,R,L,E[I+5],5,-701558691),L=_(L,M,T,R,E[I+10],9,38016083),R=_(R,L,M,T,E[I+15],14,-660478335),T=_(T,R,L,M,E[I+4],20,-405537848),M=_(M,T,R,L,E[I+9],5,568446438),L=_(L,M,T,R,E[I+14],9,-1019803690),R=_(R,L,M,T,E[I+3],14,-187363961),T=_(T,R,L,M,E[I+8],20,1163531501),M=_(M,T,R,L,E[I+13],5,-1444681467),L=_(L,M,T,R,E[I+2],9,-51403784),R=_(R,L,M,T,E[I+7],14,1735328473),M=S(M,T=_(T,R,L,M,E[I+12],20,-1926607734),R,L,E[I+5],4,-378558),L=S(L,M,T,R,E[I+8],11,-2022574463),R=S(R,L,M,T,E[I+11],16,1839030562),T=S(T,R,L,M,E[I+14],23,-35309556),M=S(M,T,R,L,E[I+1],4,-1530992060),L=S(L,M,T,R,E[I+4],11,1272893353),R=S(R,L,M,T,E[I+7],16,-155497632),T=S(T,R,L,M,E[I+10],23,-1094730640),M=S(M,T,R,L,E[I+13],4,681279174),L=S(L,M,T,R,E[I+0],11,-358537222),R=S(R,L,M,T,E[I+3],16,-722521979),T=S(T,R,L,M,E[I+6],23,76029189),M=S(M,T,R,L,E[I+9],4,-640364487),L=S(L,M,T,R,E[I+12],11,-421815835),R=S(R,L,M,T,E[I+15],16,530742520),M=b(M,T=S(T,R,L,M,E[I+2],23,-995338651),R,L,E[I+0],6,-198630844),L=b(L,M,T,R,E[I+7],10,1126891415),R=b(R,L,M,T,E[I+14],15,-1416354905),T=b(T,R,L,M,E[I+5],21,-57434055),M=b(M,T,R,L,E[I+12],6,1700485571),L=b(L,M,T,R,E[I+3],10,-1894986606),R=b(R,L,M,T,E[I+10],15,-1051523),T=b(T,R,L,M,E[I+1],21,-2054922799),M=b(M,T,R,L,E[I+8],6,1873313359),L=b(L,M,T,R,E[I+15],10,-30611744),R=b(R,L,M,T,E[I+6],15,-1560198380),T=b(T,R,L,M,E[I+13],21,1309151649),M=b(M,T,R,L,E[I+4],6,-145523070),L=b(L,M,T,R,E[I+11],10,-1120210379),R=b(R,L,M,T,E[I+2],15,718787259),T=b(T,R,L,M,E[I+9],21,-343485551),M=C(M,H),T=C(T,G),R=C(R,X),L=C(L,$)}return Array(M,T,R,L)}function v(E,P,M,T,R,L){return C((P=C(C(P,E),C(T,L)))<<R|P>>>32-R,M)}function x(E,P,M,T,R,L,I){return v(P&M|~P&T,E,P,R,L,I)}function _(E,P,M,T,R,L,I){return v(P&T|M&~T,E,P,R,L,I)}function S(E,P,M,T,R,L,I){return v(P^M^T,E,P,R,L,I)}function b(E,P,M,T,R,L,I){return v(M^(P|~T),E,P,R,L,I)}function C(E,P){var M=(65535&E)+(65535&P);return(E>>16)+(P>>16)+(M>>16)<<16|65535&M}r.exports=function(E){return g.hash(E,y,16)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){r.exports=function(g){for(var y,v=new Array(g),x=0;x<g;x++)(3&x)==0&&(y=4294967296*Math.random()),v[x]=y>>>((3&x)<<3)&255;return v}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){var g=t("./helpers");function y(_,S){_[S>>5]|=128<<24-S%32,_[15+(S+64>>9<<4)]=S;for(var b,C,E,P=Array(80),M=1732584193,T=-271733879,R=-1732584194,L=271733878,I=-1009589776,H=0;H<_.length;H+=16){for(var G=M,X=T,$=R,ne=L,U=I,O=0;O<80;O++){P[O]=O<16?_[H+O]:x(P[O-3]^P[O-8]^P[O-14]^P[O-16],1);var z=v(v(x(M,5),(z=T,C=R,E=L,(b=O)<20?z&C|~z&E:!(b<40)&&b<60?z&C|z&E|C&E:z^C^E)),v(v(I,P[O]),(b=O)<20?1518500249:b<40?1859775393:b<60?-1894007588:-899497514)),I=L,L=R,R=x(T,30),T=M,M=z}M=v(M,G),T=v(T,X),R=v(R,$),L=v(L,ne),I=v(I,U)}return Array(M,T,R,L,I)}function v(_,S){var b=(65535&_)+(65535&S);return(_>>16)+(S>>16)+(b>>16)<<16|65535&b}function x(_,S){return _<<S|_>>>32-S}r.exports=function(_){return g.hash(_,y,20,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){function g(S,b){var C=(65535&S)+(65535&b);return(S>>16)+(b>>16)+(C>>16)<<16|65535&C}function y(S,b){var C,E=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),P=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),M=new Array(64);S[b>>5]|=128<<24-b%32,S[15+(b+64>>9<<4)]=b;for(var T,R,L=0;L<S.length;L+=16){for(var I=P[0],H=P[1],G=P[2],X=P[3],$=P[4],ne=P[5],U=P[6],O=P[7],z=0;z<64;z++)M[z]=z<16?S[z+L]:g(g(g((R=M[z-2],x(R,17)^x(R,19)^_(R,10)),M[z-7]),(R=M[z-15],x(R,7)^x(R,18)^_(R,3))),M[z-16]),C=g(g(g(g(O,x(R=$,6)^x(R,11)^x(R,25)),$&ne^~$&U),E[z]),M[z]),T=g(x(T=I,2)^x(T,13)^x(T,22),I&H^I&G^H&G),O=U,U=ne,ne=$,$=g(X,C),X=G,G=H,H=I,I=g(C,T);P[0]=g(I,P[0]),P[1]=g(H,P[1]),P[2]=g(G,P[2]),P[3]=g(X,P[3]),P[4]=g($,P[4]),P[5]=g(ne,P[5]),P[6]=g(U,P[6]),P[7]=g(O,P[7])}return P}var v=t("./helpers"),x=function(S,b){return S>>>b|S<<32-b},_=function(S,b){return S>>>b};r.exports=function(S){return v.hash(S,y,32,!0)}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){i.read=function(g,y,v,x,L){var S,b,C=8*L-x-1,E=(1<<C)-1,P=E>>1,M=-7,T=v?L-1:0,R=v?-1:1,L=g[y+T];for(T+=R,S=L&(1<<-M)-1,L>>=-M,M+=C;0<M;S=256*S+g[y+T],T+=R,M-=8);for(b=S&(1<<-M)-1,S>>=-M,M+=x;0<M;b=256*b+g[y+T],T+=R,M-=8);if(S===0)S=1-P;else{if(S===E)return b?NaN:1/0*(L?-1:1);b+=Math.pow(2,x),S-=P}return(L?-1:1)*b*Math.pow(2,S-x)},i.write=function(g,y,v,x,_,I){var b,C,E=8*I-_-1,P=(1<<E)-1,M=P>>1,T=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=x?0:I-1,L=x?1:-1,I=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(C=isNaN(y)?1:0,b=P):(b=Math.floor(Math.log(y)/Math.LN2),y*(x=Math.pow(2,-b))<1&&(b--,x*=2),2<=(y+=1<=b+M?T/x:T*Math.pow(2,1-M))*x&&(b++,x/=2),P<=b+M?(C=0,b=P):1<=b+M?(C=(y*x-1)*Math.pow(2,_),b+=M):(C=y*Math.pow(2,M-1)*Math.pow(2,_),b=0));8<=_;g[v+R]=255&C,R+=L,C/=256,_-=8);for(b=b<<_|C,E+=_;0<E;g[v+R]=255&b,R+=L,b/=256,E-=8);g[v+R-L]|=128*I}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(t,r,i){(function(s,o,a,l,u,c,f,p,m){var g,y,v;function x(){}(s=r.exports={}).nextTick=(y=typeof window<"u"&&window.setImmediate,v=typeof window<"u"&&window.postMessage&&window.addEventListener,y?function(_){return window.setImmediate(_)}:v?(g=[],window.addEventListener("message",function(_){var S=_.source;S!==window&&S!==null||_.data!=="process-tick"||(_.stopPropagation(),0<g.length&&g.shift()())},!0),function(_){g.push(_),window.postMessage("process-tick","*")}):function(_){setTimeout(_,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.binding=function(_){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(_){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(OD);const G7=OD.exports;var an={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive"};const H7={[`${an.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${an.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${an.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${an.position};
  `},[`${an.positionRaw}`]:{"#include <begin_vertex>":`
    vec4 csm_positionUnprojected = ${an.positionRaw};
    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;
    #endif
    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;
    vec3 transformed = csm_positionUnprojected.xyz;
  `},[`${an.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${an.pointSize};
    `},[`${an.diffuseColor}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${an.diffuseColor};
  `},[`${an.fragColor}`]:{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = ${an.fragColor};
  `},[`${an.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${an.emissive};
    `},[`${an.roughness}`]:{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = ${an.roughness};
    `},[`${an.metalness}`]:{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = ${an.metalness};
    `}},V7={[`${an.position}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( ${an.position}, 1.0 );
  `},[`${an.positionRaw}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = ${an.position};
  `},[`${an.diffuseColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${an.diffuseColor};
  `},[`${an.fragColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${an.fragColor};
  `}},W7=`

#ifdef IS_VERTEX
    vec3 csm_Position = position;
    vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
    vec3 csm_Normal = normal;
#else
    #if defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL
        vec4 csm_DiffuseColor = vec4(1., 0., 1., 1.);
        vec4 csm_FragColor = vec4(1., 0., 1., 1.);
    #else
        #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
            vec3 csm_Emissive = emissive;
            float csm_Roughness = roughness;
            float csm_Metalness = metalness;
        #endif
        
        #ifdef USE_MAP
            vec4 _csm_sampledDiffuseColor = texture2D(map, vUv);

            #ifdef DECODE_VIDEO_TEXTURE
            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)
            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);
            #endif

            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
        #else
            vec4 csm_DiffuseColor = vec4(diffuse, opacity);
            vec4 csm_FragColor = vec4(diffuse, opacity);
        #endif
    #endif
#endif
`,j7=(n,e,t)=>n.split(e).join(t),$7=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},J7=(n,e)=>new RegExp(`\\b${$7(e)}\\b`).test(n);function K7(n){try{new n}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}class X7 extends Mn{constructor({baseMaterial:e,fragmentShader:t,vertexShader:r,uniforms:i,patchMap:s,cacheKey:o,...a}){let l;if(K7(e)?l=new e(a):(l=e,Object.assign(l,a)),l.type==="RawShaderMaterial")throw new Error("CustomShaderMaterial does not support RawShaderMaterial");super(),this.uniforms=i||{},this._customPatchMap=s||{},this._fs=t||"",this._vs=r||"",this._cacheKey=o,this._base=e,this._type=l.type,this._instanceID=Uh.generateUUID();for(const u in l){let c=u;u.startsWith("_")&&(c=u.split("_")[1]),this[c]===void 0&&(this[c]=0),this[c]=l[c]}this.update({fragmentShader:t,vertexShader:r,uniforms:i,cacheKey:o})}update(e){const t=(e==null?void 0:e.uniforms)||{},r=(e==null?void 0:e.fragmentShader)||this._fs,i=(e==null?void 0:e.vertexShader)||this._vs,s=Object.values(t).reduce((o,{value:a})=>o+JSON.stringify(a),"");this.uuid=(e==null||e.cacheKey==null?void 0:e.cacheKey())||G7([r,i,s,this._instanceID]),this.generateMaterial({fragmentShader:r,vertexShader:i,uniforms:t})}clone(){const e=new this.constructor({baseMaterial:this._base,fragmentShader:this._fs,vertexShader:this._vs,patchMap:this._customPatchMap,uniforms:this.uniforms,cacheKey:this._cacheKey});for(const t in this)t!=="uuid"&&(e[t]=this[t]);return e}generateMaterial({fragmentShader:e,vertexShader:t,uniforms:r}){const i=this.parseShader(e),s=this.parseShader(t);this.uniforms=r||{},this.customProgramCacheKey=()=>this.uuid,this.onBeforeCompile=o=>{if(i){const a=this.patchShader(i,o.fragmentShader);o.fragmentShader=this.getMaterialDefine()+a}if(s){const a=this.patchShader(s,o.vertexShader);o.vertexShader=`#define IS_VERTEX;
`+a,o.vertexShader=this.getMaterialDefine()+o.vertexShader}o.uniforms={...o.uniforms,...this.uniforms},this.uniforms=o.uniforms},this.needsUpdate=!0}getMaterialDefine(){return`#define IS_${this._type.toUpperCase()};
`}getPatchMapForMaterial(){switch(this._type){case"ShaderMaterial":return V7;default:return H7}}patchShader(e,t){let r=t;const i={...this.getPatchMapForMaterial(),...this._customPatchMap};return Object.keys(i).forEach(s=>{Object.keys(i[s]).forEach(o=>{J7(e.main,s)&&(r=j7(r,o,i[s][o]))})}),r=r.replace("void main() {",`
          ${e.header}
          void main() {
            ${W7}
            ${e.main}
          `),r=e.defines+r,r}parseShader(e){if(!e)return;const t=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),r=G_(t),i=H_(r),s=i.map(l=>l.name).indexOf("main"),o=$d(r.slice(0,s>=0?i[s].outer[0]:void 0)),a=s>=0?this.getShaderFromIndex(r,i[s].body):"";return{defines:"",header:o,main:a}}getShaderFromIndex(e,t){return $d(e.slice(t[0],t[1]))}}function Y7(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}const UD=N.exports.forwardRef((n,e)=>{const{children:t,...r}=n;return N.exports.Children.toArray(t).some(SC)?N.exports.createElement(N.exports.Fragment,null,N.exports.Children.map(t,i=>SC(i)?N.exports.createElement(V_,jn({},r,{ref:e}),i.props.children):i)):N.exports.createElement(V_,jn({},r,{ref:e}),t)});UD.displayName="Slot";const V_=N.exports.forwardRef((n,e)=>{const{children:t,...r}=n;return N.exports.isValidElement(t)?N.exports.cloneElement(t,{...q7(r,t.props),ref:Y7(e,t.ref)}):N.exports.Children.count(t)>1?N.exports.Children.only(null):null});V_.displayName="SlotClone";const Q7=({children:n})=>N.exports.createElement(N.exports.Fragment,null,n);function SC(n){return N.exports.isValidElement(n)&&n.type===Q7}function q7(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const Z7=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:N.exports.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?UD:e;return N.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),N.exports.createElement(o,jn({},s,{ref:r}))})}),{}),ej=Boolean(globalThis==null?void 0:globalThis.document)?N.exports.useLayoutEffect:()=>{},tj=N.exports.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=N.exports.useState({});return ej(()=>{l({})},[]),a?oS.createPortal(N.exports.createElement(Z7.div,jn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),nj=tj;var bC=Object.prototype.hasOwnProperty;function Ph(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Ph(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(bC.call(n,t)&&++r&&!bC.call(e,t)||!(t in e)||!Ph(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}var f0=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};f0.prototype._test=function(e){var t=this.fn;try{Wc(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Wc(this.modifiers.slice(),t,this)(e)}catch{return!1}};f0.prototype._check=function(e){try{Wc(this.modifiers.slice(),this.fn,this)(e)}catch{if(Wc(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Wc(this.modifiers.slice(),this.fn,this)(e))throw null};f0.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){zD(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function ND(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function Wc(n,e,t){if(n.length){var r=n.shift(),i=Wc(n,e,t);return r.perform(i,t)}else return ND(e)}function zD(n,e,t){if(n.length){var r=n.shift(),i=zD(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(ND(e,"async")(s))}}var rj=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},tb=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),no=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};no.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new f0(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};no.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new rj(t,e.simple,e.async)),this};no.prototype._clone=function(){return new no(this.chain.slice(),this.nextRuleModifiers.slice())};no.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};no.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new tb(r,e,i))}}),t};no.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new tb(t,e,r)}})};no.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){GD(e,t.chain.slice(),r,i)})};function GD(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){GD(n,e,t,r)},function(s){r(new tb(i,n,s))})}else t(n)}var MC=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function ij(n,e){return e===void 0&&(e=!1),{simple:function(t){return MC(t,e)||n.check(t)===void 0},async:function(t){return MC(t,e)||n.testAsync(t)}}}function pi(){return typeof Proxy<"u"?HD(new no):W_(new no)}var Bh={};pi.extend=function(n){Object.assign(Bh,n)};pi.clearCustomRules=function(){Bh={}};function HD(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=HD(n._clone());if(r in mv)return i._applyModifier(mv[r],r);if(r in Bh)return i._applyRule(Bh[r],r);if(r in j_)return i._applyRule(j_[r],r)}})}function W_(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=W_(s._clone()),c=u._applyRule(i[o],o).apply(void 0,a);return c}}),s},t=e(j_,n),r=e(Bh,t);return Object.keys(mv).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=W_(r._clone());return s._applyModifier(mv[i],i)}})}),r}var mv={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return cg(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(cg(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&cg(e).every(n)}},async:function(n){return function(e){return Promise.all(cg(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return AC(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return AC(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function AC(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function cg(n){return typeof n=="string"?n.split(""):n}var j_={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||sj;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return pc("string")},boolean:function(){return pc("boolean")},undefined:function(){return pc("undefined")},null:function(){return pc("null")},array:function(){return pc("array")},object:function(){return pc("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return oj(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:ij};function pc(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function sj(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function oj(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var Zt="colors",Kr="sizes",Ze="space",aj={gap:Ze,gridGap:Ze,columnGap:Ze,gridColumnGap:Ze,rowGap:Ze,gridRowGap:Ze,inset:Ze,insetBlock:Ze,insetBlockEnd:Ze,insetBlockStart:Ze,insetInline:Ze,insetInlineEnd:Ze,insetInlineStart:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,marginBlock:Ze,marginBlockEnd:Ze,marginBlockStart:Ze,marginInline:Ze,marginInlineEnd:Ze,marginInlineStart:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,paddingBlock:Ze,paddingBlockEnd:Ze,paddingBlockStart:Ze,paddingInline:Ze,paddingInlineEnd:Ze,paddingInlineStart:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,scrollMargin:Ze,scrollMarginTop:Ze,scrollMarginRight:Ze,scrollMarginBottom:Ze,scrollMarginLeft:Ze,scrollMarginX:Ze,scrollMarginY:Ze,scrollMarginBlock:Ze,scrollMarginBlockEnd:Ze,scrollMarginBlockStart:Ze,scrollMarginInline:Ze,scrollMarginInlineEnd:Ze,scrollMarginInlineStart:Ze,scrollPadding:Ze,scrollPaddingTop:Ze,scrollPaddingRight:Ze,scrollPaddingBottom:Ze,scrollPaddingLeft:Ze,scrollPaddingX:Ze,scrollPaddingY:Ze,scrollPaddingBlock:Ze,scrollPaddingBlockEnd:Ze,scrollPaddingBlockStart:Ze,scrollPaddingInline:Ze,scrollPaddingInlineEnd:Ze,scrollPaddingInlineStart:Ze,fontSize:"fontSizes",background:Zt,backgroundColor:Zt,backgroundImage:Zt,borderImage:Zt,border:Zt,borderBlock:Zt,borderBlockEnd:Zt,borderBlockStart:Zt,borderBottom:Zt,borderBottomColor:Zt,borderColor:Zt,borderInline:Zt,borderInlineEnd:Zt,borderInlineStart:Zt,borderLeft:Zt,borderLeftColor:Zt,borderRight:Zt,borderRightColor:Zt,borderTop:Zt,borderTopColor:Zt,caretColor:Zt,color:Zt,columnRuleColor:Zt,fill:Zt,outline:Zt,outlineColor:Zt,stroke:Zt,textDecorationColor:Zt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Kr,minBlockSize:Kr,maxBlockSize:Kr,inlineSize:Kr,minInlineSize:Kr,maxInlineSize:Kr,width:Kr,minWidth:Kr,maxWidth:Kr,height:Kr,minHeight:Kr,maxHeight:Kr,flexBasis:Kr,gridTemplateColumns:Kr,gridTemplateRows:Kr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},lj=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Sf=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,lj))(e);return i in n?n[i]:n[i]=t(e,...r)}},iu=Symbol.for("sxs.internal"),nb=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),EC=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:uj}=Object.prototype,$_=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),cj=/\s+(?![^()]*\))/,mc=n=>e=>n(...typeof e=="string"?String(e).split(cj):[e]),CC={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:mc((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:mc((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:mc((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:mc((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:mc((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:mc((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},H1=/([\d.]+)([^]*)/,fj=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,dj=(n,e)=>n in hj&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${$_(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${$_(n)}:${r}fit-content`)+s):String(e),hj={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Wo=n=>n?n+"-":"",VD=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Wo(e)+(a.includes("$")?"":Wo(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),pj=/\s*,\s*(?![^()]*\))/,mj=Object.prototype.toString,kc=(n,e,t,r,i)=>{let s,o,a;const l=(u,c,f)=>{let p,m;const g=y=>{for(p in y){const _=p.charCodeAt(0)===64,S=_&&Array.isArray(y[p])?y[p]:[y[p]];for(m of S){const b=/[A-Z]/.test(x=p)?x:x.replace(/-[^]/g,E=>E[1].toUpperCase()),C=typeof m=="object"&&m&&m.toString===mj&&(!r.utils[b]||!c.length);if(b in r.utils&&!C){const E=r.utils[b];if(E!==o){o=E,g(E(m)),o=null;continue}}else if(b in CC){const E=CC[b];if(E!==a){a=E,g(E(m)),a=null;continue}}if(_&&(v=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=v.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(E,P,M,T,R,L)=>{const I=H1.test(P),H=.0625*(I?-1:1),[G,X]=I?[T,P]:[P,T];return"("+(M[0]==="="?"":M[0]===">"===I?"max-":"min-")+G+":"+(M[0]!=="="&&M.length===1?X.replace(H1,($,ne,U)=>Number(ne)+H*(M===">"?1:-1)+U):X)+(R?") and ("+(R[0]===">"?"min-":"max-")+G+":"+(R.length===1?L.replace(H1,($,ne,U)=>Number(ne)+H*(R===">"?-1:1)+U):L):"")+")"})),C){const E=_?f.concat(p):[...f],P=_?[...c]:fj(c,p.split(pj));s!==void 0&&i(TC(...s)),s=void 0,l(m,P,E)}else s===void 0&&(s=[[],c,f]),p=_||p.charCodeAt(0)!==36?p:`--${Wo(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=C?m:typeof m=="number"?m&&b in gj?String(m)+"px":String(m):VD(dj(b,m==null?"":m),r.prefix,r.themeMap[b]),s[0].push(`${_?`${p} `:`${$_(p)}:`}${m}`)}}var v,x};g(u),s!==void 0&&i(TC(...s)),s=void 0};l(n,e,t)},TC=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,gj={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},RC=n=>String.fromCharCode(n+(n>25?39:97)),su=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=RC(t%52)+r;return RC(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Bd=["themed","global","styled","onevar","resonevar","allvar","inline"],vj=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},yj=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(n).styleSheets||[];for(const a of i)if(vj(a)){for(let l=0,u=a.cssRules;u[l];++l){const c=Object(u[l]);if(c.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:p}=c;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),g=Bd[m[0]];g&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[g]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Bd.length-1;a>=0;--a){const l=Bd[a];if(!o[l]){const u=Bd[a+1],c=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",c),s.insertRule(`--sxs{--sxs:${a}}`,c),o[l]={group:s.cssRules[c+1],index:c,cache:new Set([a])}}xj(o[l])}};return r(),e},xj=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Sd=Symbol(),_j=Sf(),PC=(n,e)=>_j(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[iu]){r.type==null&&(r.type=i[iu].type);for(const s of i[iu].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(wj(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Sj(n,r,e)}),wj=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${Wo(i.prefix)}c-${su(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){c=l,f=p,uj.call(c,f)||(l[p]="undefined");const m=n[p];for(const g in m){const y={[p]:String(g)};String(g)==="undefined"&&u.push(p);const v=m[g],x=[y,v,!EC(v)];o.push(x)}}var c,f;if(typeof e=="object"&&e)for(const p of e){let{css:m,...g}=p;m=typeof m=="object"&&m||{};for(const v in g)g[v]=String(g[v]);const y=[g,m,!EC(m)];a.push(y)}return[s,r,o,a,l,u]},Sj=(n,e,t)=>{const[r,i,s,o]=bj(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function p(){for(let m=0;m<p[Sd].length;m++){const[g,y]=p[Sd][m];f.rules[g].apply(y)}return p[Sd]=[],null}return p[Sd]=[],p.rules={},Bd.forEach(m=>p.rules[m]={apply:g=>p[Sd].push([m,g])}),p})(t):null,l=(a||t).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||Mj;const{css:p,...m}=f,g={};for(const x in s)if(delete m[x],x in f){let _=f[x];typeof _=="object"&&_?g[x]={"@initial":s[x],..._}:(_=String(_),g[x]=_!=="undefined"||o.has(x)?_:s[x])}else g[x]=s[x];const y=new Set([...i]);for(const[x,_,S,b]of e.composers){t.rules.styled.cache.has(x)||(t.rules.styled.cache.add(x),kc(_,[`.${x}`],[],n,P=>{l.styled.apply(P)}));const C=BC(S,g,n.media),E=BC(b,g,n.media,!0);for(const P of C)if(P!==void 0)for(const[M,T,R]of P){const L=`${x}-${su(T)}-${M}`;y.add(L);const I=(R?t.rules.resonevar:t.rules.onevar).cache,H=R?l.resonevar:l.onevar;I.has(L)||(I.add(L),kc(T,[`.${L}`],[],n,G=>{H.apply(G)}))}for(const P of E)if(P!==void 0)for(const[M,T]of P){const R=`${x}-${su(T)}-${M}`;y.add(R),t.rules.allvar.cache.has(R)||(t.rules.allvar.cache.add(R),kc(T,[`.${R}`],[],n,L=>{l.allvar.apply(L)}))}}if(typeof p=="object"&&p){const x=`${r}-i${su(p)}-css`;y.add(x),t.rules.inline.cache.has(x)||(t.rules.inline.cache.add(x),kc(p,[`.${x}`],[],n,_=>{l.inline.apply(_)}))}for(const x of String(f.className||"").trim().split(/\s+/))x&&y.add(x);const v=m.className=[...y].join(" ");return{type:e.type,className:v,selector:u,props:m,toString:()=>v,deferredInjector:a}};return nb(c,{className:r,selector:u,[iu]:e,toString:()=>(t.rules.styled.cache.has(r)||c(),r)})},bj=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(i)]},BC=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,u=0,c=!1;for(l in s){const f=s[l];let p=e[l];if(p!==f){if(typeof p!="object"||!p)continue e;{let m,g,y=0;for(const v in p){if(f===String(p[v])){if(v!=="@initial"){const x=v.slice(1);(g=g||[]).push(x in t?t[x]:v.replace(/^@media ?/,"")),c=!0}u+=y,m=!0}++y}if(g&&g.length&&(o={["@media "+g.join(", ")]:o}),!m)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,c])}return i},Mj={},Aj=Sf(),Ej=(n,e)=>Aj(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=su(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}kc(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return nb(r,{toString:r})}),Cj=Sf(),Tj=(n,e)=>Cj(n,()=>t=>{const r=`${Wo(n.prefix)}k-${su(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];kc(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return nb(i,{get name(){return i()},toString:i})}),Rj=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Wo(this.prefix)+Wo(this.scale)+this.token}toString(){return this.computedValue}},Pj=Sf(),Bj=(n,e)=>Pj(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${Wo(n.prefix)}t-${su(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const c=`--${Wo(n.prefix)}${l}-${u}`,f=VD(String(r[l][u]),n.prefix,l);s[l][u]=new Rj(u,f,l,n.prefix),o.push(`${c}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),Dj=Sf(),Ij=Sf(),Lj=n=>{const e=(t=>{let r=!1;const i=Dj(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},c={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...aj},utils:typeof s.utils=="object"&&s.utils||{}},f=yj(l),p={css:PC(c,f),globalCss:Ej(c,f),keyframes:Tj(c,f),createTheme:Bj(c,f),reset(){f.reset(),p.theme.toString()},theme:{},sheet:f,config:c,prefix:o,getCssText:f.toString,toString:f.toString};return String(p.theme=p.createTheme(u)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>Ij(t,()=>{const i=PC(t,r);return(...s)=>{const o=i(...s),a=o[iu].type,l=At.forwardRef((u,c)=>{const f=u&&u.as||a,{props:p,deferredInjector:m}=o(u);return delete p.as,p.ref=c,m?At.createElement(At.Fragment,null,At.createElement(f,p),At.createElement(m,null)):At.createElement(f,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[iu]=o[iu],l}}))(e),e};const Fj=Boolean(globalThis==null?void 0:globalThis.document)?N.exports.useLayoutEffect:()=>{},kj=fF["useId".toString()]||(()=>{});let Oj=0;function Uj(n){const[e,t]=N.exports.useState(kj());return Fj(()=>{n||t(r=>r!=null?r:String(Oj++))},[n]),n||(e?`radix-${e}`:"")}function WD(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}function rb(...n){return N.exports.useCallback(WD(...n),n)}const jD=N.exports.forwardRef((n,e)=>{const{children:t,...r}=n;return N.exports.Children.toArray(t).some(DC)?N.exports.createElement(N.exports.Fragment,null,N.exports.Children.map(t,i=>DC(i)?N.exports.createElement(J_,jn({},r,{ref:e}),i.props.children):i)):N.exports.createElement(J_,jn({},r,{ref:e}),t)});jD.displayName="Slot";const J_=N.exports.forwardRef((n,e)=>{const{children:t,...r}=n;return N.exports.isValidElement(t)?N.exports.cloneElement(t,{...Nj(r,t.props),ref:WD(e,t.ref)}):N.exports.Children.count(t)>1?N.exports.Children.only(null):null});J_.displayName="SlotClone";const $D=({children:n})=>N.exports.createElement(N.exports.Fragment,null,n);function DC(n){return N.exports.isValidElement(n)&&n.type===$D}function Nj(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?t[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const bf=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((n,e)=>({...n,[e]:N.exports.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?jD:e;return N.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),t.as&&console.error(zj),N.exports.createElement(o,jn({},s,{ref:r}))})}),{}),zj="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Gj=N.exports.forwardRef((n,e)=>N.exports.createElement(bf.span,jn({},n,{ref:e,style:{...n.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),Hj=Gj,Vj=Boolean(globalThis==null?void 0:globalThis.document)?N.exports.useLayoutEffect:()=>{},Wj=N.exports.forwardRef((n,e)=>{var t,r;const{containerRef:i,style:s,...o}=n,a=(t=i==null?void 0:i.current)!==null&&t!==void 0?t:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=N.exports.useState({});return Vj(()=>{l({})},[]),a?oS.createPortal(N.exports.createElement(bf.div,jn({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),jj=N.exports.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return N.exports.createElement(bf.svg,jn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:N.exports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$j=jj;function IC(n){const[e,t]=N.exports.useState(void 0);return N.exports.useEffect(()=>{if(n){const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else{const l=n.getBoundingClientRect();o=l.width,a=l.height}t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>{t(void 0),r.unobserve(n)}}},[n]),e}function Jj(n,e){const t=Ol.get(n);return t===void 0?(Ol.set(n,{rect:{},callbacks:[e]}),Ol.size===1&&(K_=requestAnimationFrame(JD))):(t.callbacks.push(e),e(n.getBoundingClientRect())),()=>{const r=Ol.get(n);if(r===void 0)return;const i=r.callbacks.indexOf(e);i>-1&&r.callbacks.splice(i,1),r.callbacks.length===0&&(Ol.delete(n),Ol.size===0&&cancelAnimationFrame(K_))}}let K_;const Ol=new Map;function JD(){const n=[];Ol.forEach((e,t)=>{const r=t.getBoundingClientRect();var i,s;i=e.rect,s=r,(i.width!==s.width||i.height!==s.height||i.top!==s.top||i.right!==s.right||i.bottom!==s.bottom||i.left!==s.left)&&(e.rect=r,n.push(e))}),n.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),K_=requestAnimationFrame(JD)}function KD(n){const[e,t]=N.exports.useState();return N.exports.useEffect(()=>{if(n){const r=Jj(n,t);return()=>{t(void 0),r()}}},[n]),e}function XD(n,e=[]){let t=[];const r=()=>{const i=t.map(s=>N.exports.createContext(s));return function(s){const o=(s==null?void 0:s[n])||i;return N.exports.useMemo(()=>({[`__scope${n}`]:{...s,[n]:o}}),[s,o])}};return r.scopeName=n,[function(i,s){const o=N.exports.createContext(s),a=t.length;function l(u){const{scope:c,children:f,...p}=u,m=(c==null?void 0:c[n][a])||o,g=N.exports.useMemo(()=>p,Object.values(p));return N.exports.createElement(m.Provider,{value:g},f)}return t=[...t,s],l.displayName=i+"Provider",[l,function(u,c){const f=(c==null?void 0:c[n][a])||o,p=N.exports.useContext(f);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}]},Kj(r,...e)]}function Kj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((o,{useScope:a,scopeName:l})=>({...o,...a(i)[`__scope${l}`]}),{});return N.exports.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function Xj({anchorRect:n,popperSize:e,arrowSize:t,arrowOffset:r=0,side:i,sideOffset:s=0,align:o,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:c=0}){if(!n||!e||!u)return{popperStyles:Yj,arrowStyles:V1};const f=function(P,M,T=0,R=0,L){const I=L?L.height:0,H=LC(M,P,"x"),G=LC(M,P,"y"),X=G.before-T-I,$=G.after+T+I,ne=H.before-T-I,U=H.after+T+I;return{top:{start:{x:H.start+R,y:X},center:{x:H.center,y:X},end:{x:H.end-R,y:X}},right:{start:{x:U,y:G.start+R},center:{x:U,y:G.center},end:{x:U,y:G.end-R}},bottom:{start:{x:H.start+R,y:$},center:{x:H.center,y:$},end:{x:H.end-R,y:$}},left:{start:{x:ne,y:G.start+R},center:{x:ne,y:G.center},end:{x:ne,y:G.end-R}}}}(e,n,s,a,t),p=f[i][o];if(l===!1){const P=FC(p);let M=V1;return t&&(M=OC({popperSize:e,arrowSize:t,arrowOffset:r,side:i,align:o})),{popperStyles:{...P,"--radix-popper-transform-origin":kC(e,i,o,r,t)},arrowStyles:M,placedSide:i,placedAlign:o}}const m=DOMRect.fromRect({...e,...p}),g=(y=u,v=c,DOMRect.fromRect({width:y.width-2*v,height:y.height-2*v,x:y.left+v,y:y.top+v}));var y,v;const x=NC(m,g),_=f[UC(i)][o],S=function(P,M,T){const R=UC(P);return M[P]&&!T[R]?R:P}(i,x,NC(DOMRect.fromRect({...e,..._}),g)),b=function(P,M,T,R,L){const I=T==="top"||T==="bottom",H=I?"left":"top",G=I?"right":"bottom",X=I?"width":"height",$=M[X]>P[X];return(R==="start"||R==="center")&&(L[H]&&$||L[G]&&!$)?"end":(R==="end"||R==="center")&&(L[G]&&$||L[H]&&!$)?"start":R}(e,n,i,o,x),C=FC(f[S][b]);let E=V1;return t&&(E=OC({popperSize:e,arrowSize:t,arrowOffset:r,side:S,align:b})),{popperStyles:{...C,"--radix-popper-transform-origin":kC(e,S,b,r,t)},arrowStyles:E,placedSide:S,placedAlign:b}}function LC(n,e,t){const r=n[t==="x"?"left":"top"],i=t==="x"?"width":"height",s=n[i],o=e[i];return{before:r-o,start:r,center:r+(s-o)/2,end:r+s-o,after:r+s}}function FC(n){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(n.x+window.scrollX)}px, ${Math.round(n.y+window.scrollY)}px, 0)`}}function kC(n,e,t,r,i){const s=e==="top"||e==="bottom",o=i?i.width:0,a=i?i.height:0,l=o/2+r;let u="",c="";return s?(u={start:`${l}px`,center:"center",end:n.width-l+"px"}[t],c=e==="top"?`${n.height+a}px`:-a+"px"):(u=e==="left"?`${n.width+a}px`:-a+"px",c={start:`${l}px`,center:"center",end:n.height-l+"px"}[t]),`${u} ${c}`}const Yj={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},V1={position:"absolute",opacity:0};function OC({popperSize:n,arrowSize:e,arrowOffset:t,side:r,align:i}){const s=(n.width-e.width)/2,o=(n.height-e.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(e.width,e.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:Qj(r,i)};return r!=="top"&&r!=="bottom"||(i==="start"&&(u.left=`${t}px`),i==="center"&&(u.left=`${s}px`),i==="end"&&(u.right=`${t}px`)),r!=="left"&&r!=="right"||(i==="start"&&(u.top=`${t}px`),i==="center"&&(u.top=`${o}px`),i==="end"&&(u.bottom=`${t}px`)),u}function Qj(n,e){return(n!=="top"&&n!=="right"||e!=="end")&&(n!=="bottom"&&n!=="left"||e==="end")?"ltr":"rtl"}function UC(n){return{top:"bottom",right:"left",bottom:"top",left:"right"}[n]}function NC(n,e){return{top:n.top<e.top,right:n.right>e.right,bottom:n.bottom>e.bottom,left:n.left<e.left}}const[YD,QD]=XD("Popper"),[qj,qD]=YD("Popper"),Zj=n=>{const{__scopePopper:e,children:t}=n,[r,i]=N.exports.useState(null);return N.exports.createElement(qj,{scope:e,anchor:r,onAnchorChange:i},t)},e$=N.exports.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=qD("PopperAnchor",t),o=N.exports.useRef(null),a=rb(e,o);return N.exports.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:N.exports.createElement(bf.div,jn({},i,{ref:a}))}),[t$,n$]=YD("PopperContent"),r$=N.exports.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i,align:s="center",alignOffset:o,collisionTolerance:a,avoidCollisions:l=!0,...u}=n,c=qD("PopperContent",t),[f,p]=N.exports.useState(),m=KD(c.anchor),[g,y]=N.exports.useState(null),v=IC(g),[x,_]=N.exports.useState(null),S=IC(x),b=rb(e,I=>y(I)),C=function(){const[I,H]=N.exports.useState(void 0);return N.exports.useEffect(()=>{let G;function X(){H({width:window.innerWidth,height:window.innerHeight})}function $(){window.clearTimeout(G),G=window.setTimeout(X,100)}return X(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),I}(),E=C?DOMRect.fromRect({...C,x:0,y:0}):void 0,{popperStyles:P,arrowStyles:M,placedSide:T,placedAlign:R}=Xj({anchorRect:m,popperSize:v,arrowSize:S,arrowOffset:f,side:r,sideOffset:i,align:s,alignOffset:o,shouldAvoidCollisions:l,collisionBoundariesRect:E,collisionTolerance:a}),L=T!==void 0;return N.exports.createElement("div",{style:P,"data-radix-popper-content-wrapper":""},N.exports.createElement(t$,{scope:t,arrowStyles:M,onArrowChange:_,onArrowOffsetChange:p},N.exports.createElement(bf.div,jn({"data-side":T,"data-align":R},u,{style:{...u.style,animation:L?void 0:"none"},ref:b}))))}),i$=N.exports.forwardRef(function(n,e){const{__scopePopper:t,offset:r,...i}=n,s=n$("PopperArrow",t),{onArrowOffsetChange:o}=s;return N.exports.useEffect(()=>o(r),[o,r]),N.exports.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},N.exports.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},N.exports.createElement($j,jn({},i,{ref:e,style:{...i.style,display:"block"}}))))}),s$=Zj,o$=e$,a$=r$,l$=i$,zC=Boolean(globalThis==null?void 0:globalThis.document)?N.exports.useLayoutEffect:()=>{};function u$(...n){return e=>n.forEach(t=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(t,e))}function c$(...n){return N.exports.useCallback(u$(...n),n)}const ZD=n=>{const{present:e,children:t}=n,r=function(o){const[a,l]=N.exports.useState(),u=N.exports.useRef({}),c=N.exports.useRef(o),f=N.exports.useRef("none"),p=o?"mounted":"unmounted",[m,g]=function(y,v){return N.exports.useReducer((x,_)=>{const S=v[x][_];return S!=null?S:x},y)}(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.exports.useEffect(()=>{const y=fg(u.current);f.current=m==="mounted"?y:"none"},[m]),zC(()=>{const y=u.current,v=c.current;if(v!==o){const x=f.current,_=fg(y);o?g("MOUNT"):_==="none"||(y==null?void 0:y.display)==="none"?g("UNMOUNT"):g(v&&x!==_?"ANIMATION_OUT":"UNMOUNT"),c.current=o}},[o,g]),zC(()=>{if(a){const y=x=>{const _=fg(u.current).includes(x.animationName);x.target===a&&_&&g("ANIMATION_END")},v=x=>{x.target===a&&(f.current=fg(u.current))};return a.addEventListener("animationstart",v),a.addEventListener("animationcancel",y),a.addEventListener("animationend",y),()=>{a.removeEventListener("animationstart",v),a.removeEventListener("animationcancel",y),a.removeEventListener("animationend",y)}}},[a,g]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:N.exports.useCallback(y=>{y&&(u.current=getComputedStyle(y)),l(y)},[])}}(e),i=typeof t=="function"?t({present:r.isPresent}):N.exports.Children.only(t),s=c$(r.ref,i.ref);return typeof t=="function"||r.isPresent?N.exports.cloneElement(i,{ref:s}):null};function fg(n){return(n==null?void 0:n.animationName)||"none"}ZD.displayName="Presence";function GC(n){const e=N.exports.useRef(n);return N.exports.useEffect(()=>{e.current=n},[n]),e.current}function f$(n){const e=N.exports.useRef(n);return N.exports.useEffect(()=>{e.current=n}),N.exports.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function d$(n){const e=f$(n);N.exports.useEffect(()=>{const t=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function HC(n){const e=N.exports.useRef(n);return N.exports.useEffect(()=>{e.current=n}),N.exports.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function h$({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=function({defaultProp:l,onChange:u}){const c=N.exports.useState(l),[f]=c,p=N.exports.useRef(f),m=HC(u);return N.exports.useEffect(()=>{p.current!==f&&(m(f),p.current=f)},[f,p,m]),c}({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=HC(t);return[o,N.exports.useCallback(l=>{if(s){const u=l,c=typeof l=="function"?u(n):l;c!==n&&a(c)}else i(l)},[s,n,i,a])]}function gc(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}const[eI,lZ]=XD("Tooltip",[QD]),d0=QD(),p$=700,[uZ,m$]=eI("TooltipProvider",{isOpenDelayed:!0,delayDuration:p$,onOpen:()=>{},onClose:()=>{}}),[g$,h0]=eI("Tooltip"),v$=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,delayDuration:o}=n,a=m$("Tooltip",e),l=d0(e),[u,c]=N.exports.useState(null),f=Uj(),p=N.exports.useRef(0),m=o!=null?o:a.delayDuration,g=N.exports.useRef(!1),{onOpen:y,onClose:v}=a,[x=!1,_]=h$({prop:r,defaultProp:i,onChange:E=>{E&&(document.dispatchEvent(new CustomEvent("tooltip.open")),y()),s==null||s(E)}}),S=N.exports.useMemo(()=>x?g.current?"delayed-open":"instant-open":"closed",[x]),b=N.exports.useCallback(()=>{window.clearTimeout(p.current),g.current=!1,_(!0)},[_]),C=N.exports.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,_(!0)},m)},[m,_]);return N.exports.useEffect(()=>()=>window.clearTimeout(p.current),[]),N.exports.createElement(s$,l,N.exports.createElement(g$,{scope:e,contentId:f,open:x,stateAttribute:S,trigger:u,onTriggerChange:c,onTriggerEnter:N.exports.useCallback(()=>{a.isOpenDelayed?C():b()},[a.isOpenDelayed,C,b]),onOpen:N.exports.useCallback(b,[b]),onClose:N.exports.useCallback(()=>{window.clearTimeout(p.current),_(!1),v()},[_,v])},t))},y$=N.exports.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=h0("TooltipTrigger",t),s=d0(t),o=rb(e,i.onTriggerChange),a=N.exports.useRef(!1),l=N.exports.useCallback(()=>a.current=!1,[]);return N.exports.useEffect(()=>()=>document.removeEventListener("mouseup",l),[l]),N.exports.createElement(o$,jn({asChild:!0},s),N.exports.createElement(bf.button,jn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onMouseEnter:gc(n.onMouseEnter,i.onTriggerEnter),onMouseLeave:gc(n.onMouseLeave,i.onClose),onMouseDown:gc(n.onMouseDown,()=>{i.onClose(),a.current=!0,document.addEventListener("mouseup",l,{once:!0})}),onFocus:gc(n.onFocus,()=>{a.current||i.onOpen()}),onBlur:gc(n.onBlur,i.onClose),onClick:gc(n.onClick,i.onClose)})))}),x$=N.exports.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=h0("TooltipContent",n.__scopeTooltip);return N.exports.createElement(ZD,{present:t||i.open},N.exports.createElement(_$,jn({ref:e},r)))}),_$=N.exports.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,portalled:s=!0,...o}=n,a=h0("TooltipContent",t),l=d0(t),u=s?Wj:N.exports.Fragment,{onClose:c}=a;return d$(()=>c()),N.exports.useEffect(()=>(document.addEventListener("tooltip.open",c),()=>document.removeEventListener("tooltip.open",c)),[c]),N.exports.createElement(u,null,N.exports.createElement(S$,{__scopeTooltip:t}),N.exports.createElement(a$,jn({"data-state":a.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),N.exports.createElement($D,null,r),N.exports.createElement(Hj,{id:a.contentId,role:"tooltip"},i||r)))}),w$=N.exports.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=d0(t);return N.exports.createElement(l$,jn({},i,r,{ref:e}))});function S$(n){const{__scopeTooltip:e}=n,t=h0("CheckTriggerMoved",e),r=KD(t.trigger),i=r==null?void 0:r.left,s=GC(i),o=r==null?void 0:r.top,a=GC(o),l=t.onClose;return N.exports.useEffect(()=>{(s!==void 0&&s!==i||a!==void 0&&a!==o)&&l()},[l,s,a,i,o]),null}const b$=v$,M$=y$,A$=x$,E$=w$;function C$(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function en(n,e){if(n==null)return{};var t=C$(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}let xn;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(xn||(xn={}));const T$={[xn.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[xn.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[xn.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[xn.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[xn.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[xn.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[xn.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[xn.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[xn.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[xn.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[xn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function tI(n,e,...t){const[r,...i]=T$[e](...t);console[n]("LEVA: "+r,...i)}const Ro=tI.bind(null,"warn"),R$=tI.bind(null,"log"),P$=["value"],B$=["schema"],D$=["value"],nI=[],gu={};function VC(n){let{value:e}=n,t=en(n,P$);for(let r of nI){const i=r(e,t);if(i)return i}}function Yo(n,e){let{schema:t}=e,r=en(e,B$);if(n in gu){Ro(xn.ALREADY_REGISTERED_TYPE,n);return}nI.push((i,s)=>t(i,s)&&n),gu[n]=r}function W1(n,e,t,r){const{normalize:i}=gu[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=en(e,D$);return{value:s,settings:o}}function I$(n,e,t,r,i,s){const{sanitize:o}=gu[n];return o?o(e,t,r,i,s):e}function WC(n,e,t){const{format:r}=gu[n];return r?r(e,t):e}function L$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jC(Object(t),!0).forEach(function(r){L$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const el=(n,e,t)=>n>t?t:n<e?e:n,F$=n=>{if(n===""||typeof n=="number")return n;try{const e=Ma(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},k$=Math.log(10);function $C(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/k$)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const gv=(n,e,t)=>t===e?0:(el(n,e,t)-e)/(t-e),vv=(n,e,t)=>n*(t-e)+e,O$=()=>"_"+Math.random().toString(36).substr(2,9),JC=/\(([0-9+\-*/^ .]+)\)/,KC=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,XC=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,YC=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,QC=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,qC=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ma(n){if(isNaN(Number(n)))if(JC.test(n)){const e=n.replace(JC,(t,r)=>String(Ma(r)));return Ma(e)}else if(KC.test(n)){const e=n.replace(KC,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return Ma(e)}else if(XC.test(n)){const e=n.replace(XC,(t,r,i)=>String(Number(r)*Number(i)));return Ma(e)}else if(YC.test(n)){const e=n.replace(YC,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Ma(e)}else if(QC.test(n)){const e=n.replace(QC,(t,r,i)=>String(Number(r)+Number(i)));return Ma(e)}else if(qC.test(n)){const e=n.replace(qC,(t,r,i)=>String(Number(r)-Number(i)));return Ma(e)}else return Number(n);return Number(n)}function U$(n,e){return e.reduce((t,r)=>(!!n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function N$(n,e){const t=dt({},n);return e.forEach(r=>r in n&&delete t[r]),t}function z$(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function rI(n){return Object.prototype.toString.call(n)==="[object Object]"}const G$=n=>rI(n)&&Object.keys(n).length===0;let Bs;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Bs||(Bs={}));let Is;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Is||(Is={}));const H$=["type","__customInput"],V$=["render","label","optional","disabled","hint","onChange","onEditStart","onEditEnd","transient"],W$=["type"];function iI(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:dt({key:e,label:e,optional:!1,disabled:!1},t)};if("__customInput"in n){const{type:b,__customInput:C}=n,E=en(n,H$);return iI(C,e,E,b)}const{render:o,label:a,optional:l,disabled:u,hint:c,onChange:f,onEditStart:p,onEditEnd:m,transient:g}=n,y=en(n,V$),v=dt({render:o,key:e,label:a!=null?a:e,hint:c,transient:g!=null?g:!!f,onEditStart:p,onEditEnd:m,disabled:u,optional:l},t);let{type:x}=y,_=en(y,W$);if(x=r!=null?r:x,x in Bs)return{type:x,input:_,options:v};let S;return r&&rI(_)&&"value"in _?S=_.value:S=G$(_)?void 0:_,{type:x,input:S,options:dt(dt({},v),{},{onChange:f,optional:(i=v.optional)!==null&&i!==void 0?i:!1,disabled:(s=v.disabled)!==null&&s!==void 0?s:!1})}}function j$(n,e,t,r){const i=iI(n,e),{type:s,input:o,options:a}=i;if(s)return s in Bs?i:{type:s,input:W1(s,o,t,r),options:a};let l=VC(o);return l?{type:l,input:W1(l,o,t,r),options:a}:(l=VC({value:o}),l?{type:l,input:W1(l,{value:o},t,r),options:a}:!1)}function ZC(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=sI({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const eT=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function sI({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=I$(n,o,t,e,i,s)}catch(l){throw new eT(`The value \`${r}\` did not result in a correct value.`,e,l)}if(Ph(a,e))throw new eT(`The value \`${r}\` did not result in a value update, which remained the same: \`${e}\`.
        You can ignore this warning if this is the intended behavior.`,e);return a}const oI=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},aI=n=>n.shiftKey?5:n.altKey?1/5:1,$$=["value"],J$=["min","max"],K$=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},lI=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=el(i,e,t);return r?s+r:s},X$=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},uI=n=>{let{value:e}=n,t=en(n,$$);const{min:r=-1/0,max:i=1/0}=t,s=en(t,J$);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=el(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?$C(l)*10:$C(o);l=l||u/10;const c=Math.round(el(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:dt({initialValue:o,step:l,pad:c,min:r,max:i,suffix:a},s)}},cI=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var fI=Object.freeze({__proto__:null,schema:K$,sanitize:lI,format:X$,normalize:uI,sanitizeStep:cI});const dI=N.exports.createContext({});function Nr(){return N.exports.useContext(dI)}const ib=N.exports.createContext(null),hI=N.exports.createContext(null),pI=N.exports.createContext(null);function p0(){return N.exports.useContext(hI)}function Y$(){return N.exports.useContext(pI)}const mI=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function dg(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const bd={$inputStyle:()=>n=>dg(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>dg(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>dg(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>dg(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ct,css:cZ,createTheme:Q$,globalCss:q$,keyframes:fZ}=Lj({prefix:"leva",theme:mI(),utils:dt(dt({},bd),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":bd.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":bd.$focusStyle()(n)}),$hover:n=>({"&:hover":bd.$hoverStyle()(n)}),$active:n=>({"&:active":bd.$activeStyle()(n)})})}),Z$=q$({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function eJ(n){const e=mI();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=Q$(e);return{theme:e,className:t.className}}function ko(n,e){const{theme:t}=N.exports.useContext(ib);if(!(n in t)||!(e in t[n]))return Ro(xn.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const gI=ct("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),vI=ct("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${gI}`]:{paddingLeft:0}}),tJ=ct(vI,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),nJ=ct("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),rJ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],iJ=["onUpdate"];function sb(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=n,c=en(n,rJ);const{id:f,emitOnEditStart:p,emitOnEditEnd:m,disabled:g}=Nr(),y=a||f,v=N.exports.useRef(null),x=u>0,_=x?"textarea":"input",S=N.exports.useCallback(E=>P=>{const M=P.currentTarget.value;E(M)},[]);At.useEffect(()=>{const E=v.current,P=S(M=>{r(M),m()});return E==null||E.addEventListener("blur",P),()=>E==null?void 0:E.removeEventListener("blur",P)},[S,r,m]);const b=N.exports.useCallback(E=>{E.key==="Enter"&&S(r)(E)},[S,r]),C=Object.assign({as:_},x?{rows:u}:{},c);return at(nJ,{textArea:x,children:[e&&typeof e=="string"?ae(vI,{children:e}):e,ae(gI,{levaType:o,ref:v,id:y,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:S(i),onFocus:()=>p(),onKeyPress:b,onKeyDown:s,disabled:g,...C})]})}function sJ(n){let{onUpdate:e}=n,t=en(n,iJ);const r=N.exports.useCallback(s=>e(F$(s)),[e]),i=N.exports.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return ae(sb,{...t,onUpdate:r,onKeyDown:i,type:"number"})}const yv=ct("div",{}),X_=ct("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),oJ=ct("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${X_}::after`]:{opacity:.6},[`${yv}:hover > & + ${X_}::after`]:{opacity:.6},[`${yv}:hover > & > svg`]:{opacity:1}}),yI=ct("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${yv}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),xI=ct("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${yI} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),_I=ct(xI,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),aJ=ct("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),lJ=ct("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Y_=ct("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),uJ=ct("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Y_}`]:{pointerEvents:"auto"}}}}}),wI=ct("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),cJ=ct("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),fJ=ct(E$,{fill:"$toolTipBackground"});function ob({children:n}){const{className:e}=N.exports.useContext(ib);return ae(nj,{className:e,children:n})}const dJ=["align"];function hJ(){const{id:n,disable:e,disabled:t}=Nr();return at(ll,{children:[ae(lJ,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ae("label",{htmlFor:n+"__disable"})]})}function pJ(n){const{id:e,optional:t,hint:r}=Nr(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return at(ll,{children:[t&&ae(hJ,{}),r!==void 0?at(b$,{children:[ae(M$,{asChild:!0,children:ae(Y_,{...i,...n})}),ae(A$,{side:"top",sideOffset:2,children:at(cJ,{children:[r,ae(fJ,{})]})})]}):ae(Y_,{...i,...s,...n})]})}function ks(n){let{align:e}=n,t=en(n,dJ);const{value:r,label:i,key:s,disabled:o}=Nr(),{hideCopyButton:a}=Y$(),l=!a&&s!==void 0,[u,c]=N.exports.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r!=null?r:""})),c(!0)}catch{Ro(xn.CLIPBOARD_ERROR,{[s]:r})}};return at(aJ,{align:e,onPointerLeave:()=>c(!1),children:[ae(pJ,{...t}),l&&!o&&ae("div",{title:`Click to copy ${typeof i=="string"?i:s} value`,children:u?at("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[ae("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ae("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})]}):at("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[ae("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ae("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})}const mJ=["toggled"],gJ=ct("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function ab(n){let{toggled:e}=n,t=en(n,mJ);return ae(gJ,{width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`},...t,children:ae("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"})})}const vJ=["input"];function ms(n){let{input:e}=n,t=en(n,vJ);return e?ae(_I,{...t}):ae(xI,{...t})}function SI({value:n,type:e,settings:t,setValue:r}){const[i,s]=N.exports.useState(WC(e,n,t)),o=N.exports.useRef(n),a=N.exports.useRef(t);a.current=t;const l=N.exports.useCallback(c=>s(WC(e,c,a.current)),[e]),u=N.exports.useCallback(c=>{try{r(c)}catch(f){const{type:p,previousValue:m}=f;if(p!=="LEVA_ERROR")throw f;l(m)}},[l,r]);return N.exports.useEffect(()=>{Ph(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:u}}function op(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Nr();return VH(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function yJ(n){const e=N.exports.useRef(null),t=N.exports.useRef(null),r=N.exports.useRef(!1);return N.exports.useEffect(()=>{const i=oI(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),N.exports.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function bI(){const n=N.exports.useRef(null),e=N.exports.useRef({x:0,y:0}),t=N.exports.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const xJ=["__refCount"],j1=(n,e)=>{if(!n[e])return null;const t=n[e];return en(t,xJ)};function _J(n){const e=p0(),[t,r]=N.exports.useState(j1(e.getData(),n)),i=N.exports.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),s=N.exports.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),o=N.exports.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),a=N.exports.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=N.exports.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return N.exports.useEffect(()=>{r(j1(e.getData(),n));const u=e.useStore.subscribe(c=>j1(c.data,n),r,{equalityFn:ip});return()=>u()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const wJ=ct("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),MI=ct("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Q_=ct("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),AI=ct("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),EI=ct("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function SJ({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=N.exports.useRef(null),a=N.exports.useRef(null),l=N.exports.useRef(0),u=ko("sizes","scrubberWidth"),c=op(({event:p,first:m,xy:[g],movement:[y],memo:v})=>{if(m){const{width:_,left:S}=o.current.getBoundingClientRect();l.current=_-parseFloat(u),v=(p==null?void 0:p.target)===a.current?n:vv((g-S)/_,e,t)}const x=v+vv(y/l.current,0,t-e);return r(cI(x,{step:i,initialValue:s})),v}),f=gv(n,e,t);return at(AI,{ref:o,...c(),children:[ae(MI,{children:ae(EI,{style:{left:0,right:`${(1-f)*100}%`}})}),ae(Q_,{ref:a,style:{left:`calc(${f} * (100% - ${u}))`}})]})}const bJ=At.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=N.exports.useState(!1),o=op(({active:a,delta:[l],event:u,memo:c=0})=>(s(a),c+=l/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*t*aI(u)),c=0),c));return ae(tJ,{dragging:i,title:n.length>1?n:"",...o(),children:n.slice(0,r)})});function CI({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&ae(bJ,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return ae(sJ,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function MJ(){const n=Nr(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return at(ms,{input:!0,children:[ae(ks,{children:e}),at(wJ,{hasRange:l,children:[l&&ae(SJ,{value:parseFloat(t),onDrag:r,...i}),ae(CI,{...n,id:s,label:"value",innerLabelTrim:l?0:1})]})]})}const{sanitizeStep:AJ}=fI,EJ=en(fI,["sanitizeStep"]);var CJ=dt({component:MJ},EJ);const TJ=(n,e)=>pi().schema({options:pi().passesAnyOf(pi().object(),pi().array())}).test(e),RJ=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},PJ=(n,{values:e})=>e.indexOf(n),BJ=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var DJ=Object.freeze({__proto__:null,schema:TJ,sanitize:RJ,format:PJ,normalize:BJ});const IJ=ct("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),q_=ct("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),LJ=ct("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${q_}:focus + &`]:{$focusStyle:""},[`${q_}:hover + &`]:{$hoverStyle:""}});function FJ({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=N.exports.useRef();return e===a[n]&&(l.current=o[n]),at(IJ,{children:[ae(q_,{id:r,value:n,onChange:u=>t(a[Number(u.currentTarget.value)]),disabled:s,children:o.map((u,c)=>ae("option",{value:c,children:u},u))}),ae(LJ,{children:l.current}),ae(ab,{toggled:!0})]})}function kJ(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:n}),ae(FJ,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s})]})}var OJ=dt({component:kJ},DJ);const UJ=n=>pi().string().test(n),NJ=n=>{if(typeof n!="string")throw Error("Invalid string");return n},zJ=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var GJ=Object.freeze({__proto__:null,schema:UJ,sanitize:NJ,normalize:zJ});const HJ=["displayValue","onUpdate","onChange","editable"],VJ=ct("div",{whiteSpace:"pre-wrap"});function WJ(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=en(n,HJ);return i?ae(sb,{value:e,onUpdate:t,onChange:r,...s}):ae(VJ,{children:e})}function jJ(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:n}),ae(WJ,{displayValue:t,onUpdate:r,onChange:i,...e})]})}var $J=dt({component:jJ},GJ);const JJ=n=>pi().boolean().test(n),KJ=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var XJ=Object.freeze({__proto__:null,schema:JJ,sanitize:KJ});const YJ=ct("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function QJ({value:n,onUpdate:e,id:t,disabled:r}){return at(YJ,{children:[ae("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),ae("label",{htmlFor:t,children:ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:ae("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}function qJ(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:n}),ae(QJ,{value:e,onUpdate:t,id:i,disabled:r})]})}var ZJ=dt({component:qJ},XJ);const eK=["locked"];function tK({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=N.exports.useRef(n[t]);o.current=n[t];const a=N.exports.useCallback(u=>i({[t]:sI({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,t]),l=SI({type:"NUMBER",value:n[t],settings:r,setValue:a});return ae(CI,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const nK=ct("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function rK(n){let{locked:e}=n,t=en(n,eK);return ae("svg",{width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:e?ae("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ae("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function lb({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=Nr(),{lock:o,locked:a}=t;return at(nK,{withLock:o,children:[o&&ae(rK,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,u)=>ae(tK,{id:u===0?i:`${i}.${l}`,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r},l))]})}const TI=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=uI(dt({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},iK=["lock"],sK=["value"];function oK(n){const e=pi().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function aK(n){return Array.isArray(n)?"array":"object"}function Jd(n,e,t){return aK(n)===e?n:e==="array"?Object.values(n):z$(n,t)}const lK=(n,e,t)=>{const r=Jd(n,"object",e.keys);for(let o in r)r[o]=lI(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Jd(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],c=u!==0?l/u:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*c}else s=dt(dt({},o),r)}return Jd(s,e.format,e.keys)},uK=(n,e)=>Jd(n,"object",e.keys),cK=n=>!!n&&("step"in n||"min"in n||"max"in n);function fK(n,e,t=[]){const{lock:r=!1}=e,i=en(e,iK),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Jd(n,"object",o),l=cK(i)?o.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,u=TI(a,l);return{value:s==="array"?n:a,settings:dt(dt({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function RI(n){return{schema:oK(n.length),normalize:e=>{let{value:t}=e,r=en(e,sK);return fK(t,r,n)},format:(e,t)=>uK(e,t),sanitize:(e,t,r)=>lK(e,t,r)}}var dK={grad:.9,turn:360,rad:360/(2*Math.PI)},Mo=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},or=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ss=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},PI=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},tT=function(n){return{r:ss(n.r,0,255),g:ss(n.g,0,255),b:ss(n.b,0,255),a:ss(n.a)}},$1=function(n){return{r:or(n.r),g:or(n.g),b:or(n.b),a:or(n.a,3)}},hK=/^#([0-9a-f]{3,8})$/i,hg=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},BI=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},DI=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},nT=function(n){return{h:PI(n.h),s:ss(n.s,0,100),l:ss(n.l,0,100),a:ss(n.a)}},rT=function(n){return{h:or(n.h),s:or(n.s),l:or(n.l),a:or(n.a,3)}},iT=function(n){return DI((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},Kd=function(n){return{h:(e=BI(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},pK=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mK=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gK=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vK=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Z_={string:[[function(n){var e=hK.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?or(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?or(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=gK.exec(n)||vK.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:tT({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=pK.exec(n)||mK.exec(n);if(!e)return null;var t,r,i=nT({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(dK[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return iT(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return Mo(e)&&Mo(t)&&Mo(r)?tT({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!Mo(e)||!Mo(t)||!Mo(r))return null;var o=nT({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return iT(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!Mo(e)||!Mo(t)||!Mo(r))return null;var o=function(a){return{h:PI(a.h),s:ss(a.s,0,100),v:ss(a.v,0,100),a:ss(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return DI(o)},"hsv"]]},sT=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},II=function(n){return typeof n=="string"?sT(n.trim(),Z_.string):typeof n=="object"&&n!==null?sT(n,Z_.object):[null,void 0]},yK=function(n){return II(n)[1]},J1=function(n,e){var t=Kd(n);return{h:t.h,s:ss(t.s+100*e,0,100),l:t.l,a:t.a}},K1=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},oT=function(n,e){var t=Kd(n);return{h:t.h,s:t.s,l:ss(t.l+100*e,0,100),a:t.a}},ew=function(){function n(e){this.parsed=II(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return or(K1(this.rgba),2)},n.prototype.isDark=function(){return K1(this.rgba)<.5},n.prototype.isLight=function(){return K1(this.rgba)>=.5},n.prototype.toHex=function(){return e=$1(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?hg(or(255*s)):"","#"+hg(t)+hg(r)+hg(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return $1(this.rgba)},n.prototype.toRgbString=function(){return e=$1(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return rT(Kd(this.rgba))},n.prototype.toHslString=function(){return e=rT(Kd(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=BI(this.rgba),{h:or(e.h),s:or(e.s),v:or(e.v),a:or(e.a,3)};var e},n.prototype.invert=function(){return Yr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Yr(J1(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yr(J1(this.rgba,-e))},n.prototype.grayscale=function(){return Yr(J1(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Yr(oT(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Yr(oT(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Yr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):or(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Kd(this.rgba);return typeof e=="number"?Yr({h:e,s:t.s,l:t.l,a:t.a}):or(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Yr(e).toHex()},n}(),Yr=function(n){return n instanceof ew?n:new ew(n)},aT=[],xK=function(n){n.forEach(function(e){aT.indexOf(e)<0&&(e(ew,Z_),aT.push(e))})};function _K(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var g in t){var y=(a=c,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));y<f&&(f=y,p=g)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Mf(){return(Mf=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function ub(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function tw(n){var e=N.exports.useRef(n),t=N.exports.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var of=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Xd=function(n){return"touches"in n},nw=function(n){return n&&n.ownerDocument.defaultView||self},lT=function(n,e,t){var r=n.getBoundingClientRect(),i=Xd(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:of((i.pageX-(r.left+nw(n).pageXOffset))/r.width),top:of((i.pageY-(r.top+nw(n).pageYOffset))/r.height)}},uT=function(n){!Xd(n)&&n.preventDefault()},cb=At.memo(function(n){var e=n.onMove,t=n.onKey,r=ub(n,["onMove","onKey"]),i=N.exports.useRef(null),s=tw(e),o=tw(t),a=N.exports.useRef(null),l=N.exports.useRef(!1),u=N.exports.useMemo(function(){var m=function(v){uT(v),(Xd(v)?v.touches.length>0:v.buttons>0)&&i.current?s(lT(i.current,v,a.current)):y(!1)},g=function(){return y(!1)};function y(v){var x=l.current,_=nw(i.current),S=v?_.addEventListener:_.removeEventListener;S(x?"touchmove":"mousemove",m),S(x?"touchend":"mouseup",g)}return[function(v){var x=v.nativeEvent,_=i.current;if(_&&(uT(x),!function(b,C){return C&&!Xd(b)}(x,l.current)&&_)){if(Xd(x)){l.current=!0;var S=x.changedTouches||[];S.length&&(a.current=S[0].identifier)}_.focus(),s(lT(_,x,a.current)),y(!0)}},function(v){var x=v.which||v.keyCode;x<37||x>40||(v.preventDefault(),o({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},y]},[o,s]),c=u[0],f=u[1],p=u[2];return N.exports.useEffect(function(){return p},[p]),ae("div",{...Mf({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"})})}),ap=function(n){return n.filter(Boolean).join(" ")},fb=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=ap(["react-colorful__pointer",n.className]);return ae("div",{className:s,style:{top:100*i+"%",left:100*t+"%"},children:ae("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}})})},Zr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},LI=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:Zr(n.h),s:Zr(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:Zr(i/2),a:Zr(r,2)}},rw=function(n){var e=LI(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},X1=function(n){var e=LI(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},FI=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:Zr(255*[r,a,o,o,l,r][u]),g:Zr(255*[l,r,r,a,o,o][u]),b:Zr(255*[o,o,l,r,r,a][u]),a:Zr(i,2)}},kI=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:Zr(60*(a<0?a+6:a)),s:Zr(s?o/s*100:0),v:Zr(s/255*100),a:i}},OI=At.memo(function(n){var e=n.hue,t=n.onChange,r=ap(["react-colorful__hue",n.className]);return At.createElement("div",{className:r},At.createElement(cb,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:of(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Zr(e),"aria-valuemax":"360","aria-valuemin":"0"},At.createElement(fb,{className:"react-colorful__hue-pointer",left:e/360,color:rw({h:e,s:100,v:100,a:1})})))}),UI=At.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:rw({h:e.h,s:100,v:100,a:1})};return At.createElement("div",{className:"react-colorful__saturation",style:r},At.createElement(cb,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:of(e.s+100*i.left,0,100),v:of(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Zr(e.s)+"%, Brightness "+Zr(e.v)+"%"},At.createElement(fb,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:rw(e)})))}),db=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function NI(n,e,t){var r=tw(t),i=N.exports.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=N.exports.useRef({color:e,hsva:s});N.exports.useEffect(function(){if(!n.equal(e,a.current.color)){var u=n.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,n]),N.exports.useEffect(function(){var u;db(s,a.current.hsva)||n.equal(u=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,n,r]);var l=N.exports.useCallback(function(u){o(function(c){return Object.assign({},c,u)})},[]);return[s,l]}var wK=typeof window<"u"?N.exports.useLayoutEffect:N.exports.useEffect,SK=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},cT=new Map,zI=function(n){wK(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!cT.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,cT.set(e,t);var r=SK();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},bK=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=ub(n,["className","colorModel","color","onChange"]),a=N.exports.useRef(null);zI(a);var l=NI(t,i,s),u=l[0],c=l[1],f=ap(["react-colorful",e]);return at("div",{...Mf({},o,{ref:a,className:f}),children:[ae(UI,{hsva:u,onChange:c}),ae(OI,{hue:u.h,onChange:c,className:"react-colorful__last-control"})]})},MK=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+X1(Object.assign({},t,{a:0}))+", "+X1(Object.assign({},t,{a:1}))+")"},s=ap(["react-colorful__alpha",e]),o=Zr(100*t.a);return At.createElement("div",{className:s},ae("div",{className:"react-colorful__alpha-gradient",style:i}),At.createElement(cb,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:of(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},At.createElement(fb,{className:"react-colorful__alpha-pointer",left:t.a,color:X1(t)})))},AK=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=ub(n,["className","colorModel","color","onChange"]),a=N.exports.useRef(null);zI(a);var l=NI(t,i,s),u=l[0],c=l[1],f=ap(["react-colorful",e]);return At.createElement("div",Mf({},o,{ref:a,className:f}),ae(UI,{hsva:u,onChange:c}),ae(OI,{hue:u.h,onChange:c}),At.createElement(MK,{hsva:u,onChange:c,className:"react-colorful__last-control"}))},EK={defaultColor:{r:0,g:0,b:0,a:1},toHsva:kI,fromHsva:FI,equal:db},CK=function(n){return At.createElement(AK,Mf({},n,{colorModel:EK}))},TK={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return kI({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=FI(n)).r,g:e.g,b:e.b};var e},equal:db},RK=function(n){return ae(bK,{...Mf({},n,{colorModel:TK})})};function Af(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Ef(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function PK(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function BK(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(PK(arguments[e]));return n}var DK=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function lp(n,e){var t=IK(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function IK(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=DK.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var LK=[".DS_Store","Thumbs.db"];function FK(n){return Af(this,void 0,void 0,function(){return Ef(this,function(e){return xv(n)&&kK(n)?[2,zK(n.dataTransfer,n.type)]:OK(n)?[2,UK(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,NK(n)]:[2,[]]})})}function kK(n){return xv(n.dataTransfer)}function OK(n){return xv(n)&&xv(n.target)}function xv(n){return typeof n=="object"&&n!==null}function UK(n){return iw(n.target.files).map(function(e){return lp(e)})}function NK(n){return Af(this,void 0,void 0,function(){var e;return Ef(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return lp(r)})]}})})}function zK(n,e){return Af(this,void 0,void 0,function(){var t,r;return Ef(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=iw(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(GK))]):[3,2];case 1:return r=i.sent(),[2,fT(GI(r))];case 2:return[2,fT(iw(n.files).map(function(s){return lp(s)}))]}})})}function fT(n){return n.filter(function(e){return LK.indexOf(e.name)===-1})}function iw(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function GK(n){if(typeof n.webkitGetAsEntry!="function")return dT(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?HI(e):dT(n)}function GI(n){return n.reduce(function(e,t){return BK(e,Array.isArray(t)?GI(t):[t])},[])}function dT(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=lp(e);return Promise.resolve(t)}function HK(n){return Af(this,void 0,void 0,function(){return Ef(this,function(e){return[2,n.isDirectory?HI(n):VK(n)]})})}function HI(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Af(o,void 0,void 0,function(){var l,u,c;return Ef(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),t(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(HK)),i.push(c),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function VK(n){return Af(this,void 0,void 0,function(){return Ef(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=lp(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var WK=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function hT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(t),!0).forEach(function(r){VI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mT(n,e){return KK(n)||JK(n,e)||$K(n,e)||jK()}function jK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $K(n,e){if(!!n){if(typeof n=="string")return gT(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gT(n,e)}}function gT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function JK(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function KK(n){if(Array.isArray(n))return n}var XK="file-invalid-type",YK="file-too-large",QK="file-too-small",qK="too-many-files",ZK=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:XK,message:"File type must be ".concat(t)}},vT=function(e){return{code:YK,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},yT=function(e){return{code:QK,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},eX={code:qK,message:"Too many files"};function WI(n,e){var t=n.type==="application/x-moz-file"||WK(n,e);return[t,t?null:ZK(e)]}function jI(n,e,t){if(Md(n.size))if(Md(e)&&Md(t)){if(n.size>t)return[!1,vT(t)];if(n.size<e)return[!1,yT(e)]}else{if(Md(e)&&n.size<e)return[!1,yT(e)];if(Md(t)&&n.size>t)return[!1,vT(t)]}return[!0,null]}function Md(n){return n!=null}function tX(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=WI(a,t),u=mT(l,1),c=u[0],f=jI(a,r,i),p=mT(f,1),m=p[0];return c&&m})}function _v(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function pg(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function xT(n){n.preventDefault()}function nX(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function rX(n){return n.indexOf("Edge/")!==-1}function iX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return nX(n)||rX(n)}function Js(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!_v(r)&&a&&a.apply(void 0,[r].concat(s)),_v(r)})}}function sX(){return"showOpenFilePicker"in window}function oX(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return pT(pT({},e),{},VI({},t,[]))},{}):{}}]}function aX(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function lX(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var uX=["children"],cX=["open"],fX=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],dX=["refKey","onChange","onClick"];function hX(n){return gX(n)||mX(n)||$I(n)||pX()}function pX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gX(n){if(Array.isArray(n))return sw(n)}function Y1(n,e){return xX(n)||yX(n,e)||$I(n,e)||vX()}function vX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $I(n,e){if(!!n){if(typeof n=="string")return sw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sw(n,e)}}function sw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function xX(n){if(Array.isArray(n))return n}function _T(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_T(Object(t),!0).forEach(function(r){ow(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_T(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ow(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wv(n,e){if(n==null)return{};var t=_X(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}function _X(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var hb=N.exports.forwardRef(function(n,e){var t=n.children,r=wv(n,uX),i=KI(r),s=i.open,o=wv(i,cX);return N.exports.useImperativeHandle(e,function(){return{open:s}},[s]),ae(N.exports.Fragment,{children:t(yn(yn({},o),{},{open:s}))})});hb.displayName="Dropzone";var JI={disabled:!1,getFilesFromEvent:FK,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};hb.defaultProps=JI;hb.propTypes={children:yt.exports.func,accept:yt.exports.oneOfType([yt.exports.string,yt.exports.arrayOf(yt.exports.string)]),multiple:yt.exports.bool,preventDropOnDocument:yt.exports.bool,noClick:yt.exports.bool,noKeyboard:yt.exports.bool,noDrag:yt.exports.bool,noDragEventsBubbling:yt.exports.bool,minSize:yt.exports.number,maxSize:yt.exports.number,maxFiles:yt.exports.number,disabled:yt.exports.bool,getFilesFromEvent:yt.exports.func,onFileDialogCancel:yt.exports.func,onFileDialogOpen:yt.exports.func,useFsAccessApi:yt.exports.bool,onDragEnter:yt.exports.func,onDragLeave:yt.exports.func,onDragOver:yt.exports.func,onDrop:yt.exports.func,onDropAccepted:yt.exports.func,onDropRejected:yt.exports.func,validator:yt.exports.func};var aw={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function KI(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=yn(yn({},JI),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,g=e.onDropRejected,y=e.onFileDialogCancel,v=e.onFileDialogOpen,x=e.useFsAccessApi,_=e.preventDropOnDocument,S=e.noClick,b=e.noKeyboard,C=e.noDrag,E=e.noDragEventsBubbling,P=e.validator,M=N.exports.useMemo(function(){return typeof v=="function"?v:wT},[v]),T=N.exports.useMemo(function(){return typeof y=="function"?y:wT},[y]),R=N.exports.useRef(null),L=N.exports.useRef(null),I=N.exports.useReducer(wX,aw),H=Y1(I,2),G=H[0],X=H[1],$=G.isFocused,ne=G.isFileDialogActive,U=G.draggedFiles,O=N.exports.useRef(typeof window<"u"&&window.isSecureContext&&x&&sX()),z=function(){!O.current&&ne&&setTimeout(function(){if(L.current){var te=L.current.files;te.length||(X({type:"closeDialog"}),T())}},300)};N.exports.useEffect(function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}},[L,ne,T,O]);var W=N.exports.useRef([]),q=function(te){R.current&&R.current.contains(te.target)||(te.preventDefault(),W.current=[])};N.exports.useEffect(function(){return _&&(document.addEventListener("dragover",xT,!1),document.addEventListener("drop",q,!1)),function(){_&&(document.removeEventListener("dragover",xT),document.removeEventListener("drop",q))}},[R,_]);var oe=N.exports.useCallback(function(F){F.preventDefault(),F.persist(),Se(F),W.current=[].concat(hX(W.current),[F.target]),pg(F)&&Promise.resolve(i(F)).then(function(te){_v(F)&&!E||(X({draggedFiles:te,isDragActive:!0,type:"setDraggedFiles"}),u&&u(F))})},[i,u,E]),ce=N.exports.useCallback(function(F){F.preventDefault(),F.persist(),Se(F);var te=pg(F);if(te&&F.dataTransfer)try{F.dataTransfer.dropEffect="copy"}catch{}return te&&f&&f(F),!1},[f,E]),me=N.exports.useCallback(function(F){F.preventDefault(),F.persist(),Se(F);var te=W.current.filter(function(Ee){return R.current&&R.current.contains(Ee)}),pe=te.indexOf(F.target);pe!==-1&&te.splice(pe,1),W.current=te,!(te.length>0)&&(X({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),pg(F)&&c&&c(F))},[R,c,E]),re=N.exports.useCallback(function(F,te){var pe=[],Ee=[];F.forEach(function(Be){var De=WI(Be,t),fe=Y1(De,2),We=fe[0],Le=fe[1],He=jI(Be,o,s),ke=Y1(He,2),Fe=ke[0],Oe=ke[1],tt=P?P(Be):null;if(We&&Fe&&!tt)pe.push(Be);else{var se=[Le,Oe];tt&&(se=se.concat(tt)),Ee.push({file:Be,errors:se.filter(function(je){return je})})}}),(!a&&pe.length>1||a&&l>=1&&pe.length>l)&&(pe.forEach(function(Be){Ee.push({file:Be,errors:[eX]})}),pe.splice(0)),X({acceptedFiles:pe,fileRejections:Ee,type:"setFiles"}),p&&p(pe,Ee,te),Ee.length>0&&g&&g(Ee,te),pe.length>0&&m&&m(pe,te)},[X,a,t,o,s,l,p,m,g,P]),he=N.exports.useCallback(function(F){F.preventDefault(),F.persist(),Se(F),W.current=[],pg(F)&&Promise.resolve(i(F)).then(function(te){_v(F)&&!E||re(te,F)}),X({type:"reset"})},[i,re,E]),ie=N.exports.useCallback(function(){if(O.current){X({type:"openDialog"}),M();var F={multiple:a,types:oX(t)};window.showOpenFilePicker(F).then(function(te){return i(te)}).then(function(te){re(te,null),X({type:"closeDialog"})}).catch(function(te){aX(te)?(T(te),X({type:"closeDialog"})):lX(te)&&(O.current=!1,L.current&&(L.current.value=null,L.current.click()))});return}L.current&&(X({type:"openDialog"}),M(),L.current.value=null,L.current.click())},[X,M,T,x,re,t,a]),k=N.exports.useCallback(function(F){!R.current||!R.current.isEqualNode(F.target)||(F.key===" "||F.key==="Enter"||F.keyCode===32||F.keyCode===13)&&(F.preventDefault(),ie())},[R,ie]),V=N.exports.useCallback(function(){X({type:"focus"})},[]),K=N.exports.useCallback(function(){X({type:"blur"})},[]),Y=N.exports.useCallback(function(){S||(iX()?setTimeout(ie,0):ie())},[S,ie]),ee=function(te){return r?null:te},le=function(te){return b?null:ee(te)},we=function(te){return C?null:ee(te)},Se=function(te){E&&te.stopPropagation()},Ue=N.exports.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=F.refKey,pe=te===void 0?"ref":te,Ee=F.role,Be=F.onKeyDown,De=F.onFocus,fe=F.onBlur,We=F.onClick,Le=F.onDragEnter,He=F.onDragOver,ke=F.onDragLeave,Fe=F.onDrop,Oe=wv(F,fX);return yn(yn(ow({onKeyDown:le(Js(Be,k)),onFocus:le(Js(De,V)),onBlur:le(Js(fe,K)),onClick:ee(Js(We,Y)),onDragEnter:we(Js(Le,oe)),onDragOver:we(Js(He,ce)),onDragLeave:we(Js(ke,me)),onDrop:we(Js(Fe,he)),role:typeof Ee=="string"&&Ee!==""?Ee:"button"},pe,R),!r&&!b?{tabIndex:0}:{}),Oe)}},[R,k,V,K,Y,oe,ce,me,he,b,C,r]),xe=N.exports.useCallback(function(F){F.stopPropagation()},[]),Re=N.exports.useMemo(function(){return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=F.refKey,pe=te===void 0?"ref":te,Ee=F.onChange,Be=F.onClick,De=wv(F,dX),fe=ow({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:ee(Js(Ee,he)),onClick:ee(Js(Be,xe)),tabIndex:-1},pe,L);return yn(yn({},fe),De)}},[L,t,a,he,r]),Ie=U.length,ye=Ie>0&&tX({files:U,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),j=Ie>0&&!ye;return yn(yn({},G),{},{isDragAccept:ye,isDragReject:j,isFocused:$&&!r,getRootProps:Ue,getInputProps:Re,rootRef:R,inputRef:L,open:ee(ie)})}function wX(n,e){switch(e.type){case"focus":return yn(yn({},n),{},{isFocused:!0});case"blur":return yn(yn({},n),{},{isFocused:!1});case"openDialog":return yn(yn({},aw),{},{isFileDialogActive:!0});case"closeDialog":return yn(yn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return yn(yn({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return yn(yn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return yn({},aw);default:return n}}function wT(){}const SX=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const c=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());u=p=>{const m=o(p);if(!c(f,m)){const g=f;a(f=m,g)}},l!=null&&l.fireImmediately&&a(f,f)}return i(u)},n(e,t,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bX=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var MX=bX;function ST(n){return MX(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var XI=function(e){var t,r;return!(ST(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,ST(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var AX=XI,m0=function(e){return AX(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var EX=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},CX=m0,TX=EX;function YI(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];lw(i)&&TX(i,RX,n)}return n}function RX(n,e){if(!!PX(e)){var t=this[e];lw(n)&&lw(t)?YI(t,n):this[e]=n}}function lw(n){return CX(n)&&!Array.isArray(n)}function PX(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var BX=YI;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var DX=function(n,e,t,r,i){if(!IX(n)||!e)return n;if(e=mg(e),t&&(e+="."+mg(t)),r&&(e+="."+mg(r)),i&&(e+="."+mg(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function IX(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function mg(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var LX=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];t.call(o,u)&&(r[u]=o[u])}return r},FX=m0,kX=LX,OX=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");bT(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];NX(t)&&(t=zX(t)),bT(t)&&(UX(n,t),kX(n,t))}return n};function UX(n,e){for(var t in e)GX(e,t)&&(n[t]=e[t])}function NX(n){return n&&typeof n=="string"}function zX(n){var e={};for(var t in n)e[t]=n[t];return e}function bT(n){return n&&typeof n=="object"||FX(n)}function GX(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var HX=OX,VX=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=HX({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,c=n.length,f=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<c;){var g=n[f],y=n[f+1],v={val:g,idx:f,arr:l,str:n};if(o.push(v),g==="\\"){v.val=jX(r,n,f)===!0?g+y:y,v.escaped=!0,typeof t=="function"&&t(v),l[l.length-1]+=v.val,f++;continue}if(s&&s[g]){a.push(g);var x=m(),_=f+1;if(n.indexOf(x,_+1)!==-1)for(;a.length&&_<c;){var S=n[++_];if(S==="\\"){S++;continue}if(i.indexOf(S)!==-1){_=uw(n,S,_+1);continue}if(x=m(),a.length&&n.indexOf(x,_+1)===-1)break;if(s[S]){a.push(S);continue}x===S&&a.pop()}if(p=_,p===-1){l[l.length-1]+=g;continue}g=n.slice(f,p+1),v.val=g,v.idx=f=p}if(i.indexOf(g)!==-1){if(p=uw(n,g,f+1),p===-1){l[l.length-1]+=g;continue}WX(g,r)===!0?g=n.slice(f,p+1):g=n.slice(f+1,p),v.val=g,v.idx=f=p}if(typeof t=="function"&&(t(v,o),g=v.val,f=v.idx),v.val===u&&v.split!==!1){l.push("");continue}l[l.length-1]+=v.val}return l};function uw(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?uw(n,e,i+1):i}function WX(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function jX(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var $X=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},MT=$X,JX=function(e){MT(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];MT(i)&&KX(e,i)}return e};function KX(n,e){for(var t in e)XX(e,t)&&(n[t]=e[t])}function XX(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var YX=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var QX=VX,qX=JX,AT=XI,ET=YX,ZX=function(n,e,t){if(!ET(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=QX(e,{sep:".",brackets:!0}).filter(eY),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){ET(o[a])||(o[a]={}),o=o[a];continue}AT(o[a])&&AT(t)?o[a]=qX({},o[a],t):o[a]=t}return n};function eY(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var Q1=m0,CT=BX,tY=DX,TT=ZX,nY=function(e,t,r){if(!Q1(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return CT.apply(null,arguments);if(typeof r=="string")return TT(e,t,r),e;var i=tY(e,t);return Q1(r)&&Q1(i)&&(r=CT({},i,r)),TT(e,t,r),e};const QI=(...n)=>n.filter(Boolean).join(".");function rY(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function iY(n,e){return Object.entries(U$(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function sY(n,e){const t=N.exports.useRef();return(e?Ph:ip)(n,t.current)||(t.current=n),t.current}function qI(n,e){return N.exports.useMemo(n,sY(e,!0))}function oY(n){const e=N.exports.useRef(null),t=N.exports.useRef(null),r=N.exports.useRef(!0);return N.exports.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),N.exports.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const aY=n=>{const[e,t]=N.exports.useState(n.getVisiblePaths());return N.exports.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:ip});return()=>r()},[n]),e};function lY(n,e,t){return n.useStore(i=>{const s=dt(dt({},t),i.data);return iY(s,e)},ip)}function ZI(n=3){const e=N.exports.useRef(null),t=N.exports.useRef(null),[r,i]=N.exports.useState(!1),s=N.exports.useCallback(()=>i(!0),[]),o=N.exports.useCallback(()=>i(!1),[]);return N.exports.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:c}=t.current.getBoundingClientRect(),f=a+c>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",f==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}xK([_K]);const uY={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};pi.extend({color:()=>n=>Yr(n).isValid()});const cY=n=>pi().color().test(n);function eL(n,{format:e,hasAlpha:t,isString:r}){const i=uY[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?N$(s,["a"]):s}const tL=(n,e)=>{const t=Yr(n);if(!t.isValid())throw Error("Invalid color");return eL(t,e)},fY=(n,e)=>eL(Yr(n),dt(dt({},e),{},{isString:!0,format:"hex"})),dY=({value:n})=>{const e=yK(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:tL(n,i),settings:i}};var hY=Object.freeze({__proto__:null,schema:cY,sanitize:tL,format:fY,normalize:dY});const pY=ct("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),mY=ct("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),gY=ct("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function RT(n,e){return e!=="rgb"?Yr(n).toRgb():n}function vY({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Nr(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:u,shown:c,show:f,hide:p}=ZI(),m=N.exports.useRef(0),[g,y]=N.exports.useState(()=>RT(n,o)),v=a?CK:RK,x=()=>{y(RT(n,o)),f(),i()},_=()=>{p(),s(),window.clearTimeout(m.current)},S=()=>{m.current=window.setTimeout(_,500)};return N.exports.useEffect(()=>()=>window.clearTimeout(m.current),[]),at(ll,{children:[ae(pY,{ref:l,active:c,onClick:()=>x(),style:{color:e}}),c&&at(ob,{children:[ae(wI,{onPointerUp:_}),ae(gY,{ref:u,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:b=>b.buttons===0&&S(),children:ae(v,{color:g,onChange:r})})]})]})}function yY(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:t}),at(mY,{children:[ae(vY,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),ae(sb,{value:e,onChange:r,onUpdate:i})]})]})}var xY=dt({component:yY},hY);function _Y(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:n}),ae(lb,{value:e,settings:r,onUpdate:t})]})}var wY=dt({component:_Y},RI(["x","y","z"]));const SY=ct("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),bY=ct("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function MY({value:n,settings:e,onUpdate:t}){const r=N.exports.useRef(),i=N.exports.useRef(0),s=N.exports.useRef(0),o=N.exports.useRef(1),[a,l]=N.exports.useState(!1),[u,c]=N.exports.useState(!1),[f,p]=bI(),m=N.exports.useRef(null),g=N.exports.useRef(null);N.exports.useLayoutEffect(()=>{if(a){const{top:I,left:H,width:G,height:X}=m.current.getBoundingClientRect();g.current.style.left=H+G/2+"px",g.current.style.top=I+X/2+"px"}},[a]);const{keys:[y,v],joystick:x}=e,_=x==="invertY"?1:-1,{[y]:{step:S},[v]:{step:b}}=e,C=ko("sizes","joystickWidth"),E=ko("sizes","joystickHeight"),P=parseFloat(C)*.8/2,M=parseFloat(E)*.8/2,T=N.exports.useCallback(()=>{r.current||(c(!0),i.current&&p({x:i.current*P}),s.current&&p({y:s.current*-M}),r.current=window.setInterval(()=>{t(I=>{const H=S*i.current*o.current,G=_*b*s.current*o.current;return Array.isArray(I)?{[y]:I[0]+H,[v]:I[1]+G}:{[y]:I[y]+H,[v]:I[v]+G}})},16))},[P,M,t,p,S,b,y,v,_]),R=N.exports.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);N.exports.useEffect(()=>{function I(H){o.current=aI(H)}return window.addEventListener("keydown",I),window.addEventListener("keyup",I),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",I),window.removeEventListener("keyup",I)}},[]);const L=op(({first:I,active:H,delta:[G,X],movement:[$,ne]})=>{I&&l(!0);const U=el($,-P,P),O=el(ne,-M,M);i.current=Math.abs($)>Math.abs(U)?Math.sign($-U):0,s.current=Math.abs(ne)>Math.abs(O)?Math.sign(O-ne):0;let z=n[y],W=n[v];H?(i.current||(z+=G*S*o.current,p({x:U})),s.current||(W-=_*X*b*o.current,p({y:O})),i.current||s.current?T():R(),t({[y]:z,[v]:W})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),R())});return ae(SY,{ref:m,...L(),children:a&&ae(ob,{children:at(bY,{ref:g,isOutOfBounds:u,children:[ae("div",{}),ae("span",{ref:f})]})})})}const AY=ct("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function EY(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Nr();return at(ms,{input:!0,children:[ae(ks,{children:n}),at(AY,{withJoystick:!!r.joystick,children:[r.joystick&&ae(MY,{value:e,settings:r,onUpdate:t}),ae(lb,{value:e,settings:r,onUpdate:t})]})]})}const CY=["joystick"],nL=RI(["x","y"]),TY=n=>{let{joystick:e=!0}=n,t=en(n,CY);const{value:r,settings:i}=nL.normalize(t);return{value:r,settings:dt(dt({},i),{},{joystick:e})}};var RY=dt(dt({component:EY},nL),{},{normalize:TY});const PY=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |\xA0File].")}},BY=(n,e)=>typeof e=="object"&&"image"in e,DY=({image:n})=>({value:n});var IY=Object.freeze({__proto__:null,sanitize:PY,schema:BY,normalize:DY});const LY=ct("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),FY=ct("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),kY=ct("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),OY=ct("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),UY=ct("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),NY=ct("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function zY(){const{label:n,value:e,onUpdate:t,disabled:r}=Nr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=ZI(),u=N.exports.useCallback(g=>{g.length&&t(g[0])},[t]),c=N.exports.useCallback(g=>{g.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:p,isDragAccept:m}=KI({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return at(ms,{input:!0,children:[ae(ks,{children:n}),at(LY,{children:[ae(kY,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&at(ob,{children:[ae(wI,{onPointerUp:l,style:{cursor:"pointer"}}),ae(OY,{ref:s,style:{backgroundImage:`url(${e})`}})]}),at(FY,{...f({isDragAccept:m}),children:[ae("input",{...p()}),ae(UY,{children:m?"drop image":"click or drop"})]}),ae(NY,{onClick:c,disabled:!e})]})]})}var GY=dt({component:zY},IY);const PT=pi().number(),HY=(n,e)=>pi().array().length(2).every.number().test(n)&&pi().schema({min:PT,max:PT}).test(e),Sv=n=>({min:n[0],max:n[1]}),rL=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?Sv(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=dt(dt({},s),i);return[el(Number(o),e,Math.max(e,a)),el(Number(a),Math.min(t,o),t)]},VY=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=TI(Sv(n),{min:r,max:r}),s=[e,t],o=dt(dt({},i),{},{bounds:s});return{value:rL(Sv(n),o,n),settings:o}};var WY=Object.freeze({__proto__:null,schema:HY,format:Sv,sanitize:rL,normalize:VY});const jY=["value","bounds","onDrag"],$Y=["bounds"],JY=ct("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function KY(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=en(n,jY);const o=N.exports.useRef(null),a=N.exports.useRef(null),l=N.exports.useRef(null),u=N.exports.useRef(0),c=ko("sizes","scrubberWidth"),f=op(({event:g,first:y,xy:[v],movement:[x],memo:_={}})=>{if(y){const{width:b,left:C}=o.current.getBoundingClientRect();u.current=b-parseFloat(c);const E=(g==null?void 0:g.target)===a.current||(g==null?void 0:g.target)===l.current;_.pos=vv((v-C)/b,t,r);const P=Math.abs(_.pos-e.min)-Math.abs(_.pos-e.max);_.key=P<0||P===0&&_.pos<=e.min?"min":"max",E&&(_.pos=e[_.key])}const S=_.pos+vv(x/u.current,0,r-t);return i({[_.key]:AJ(S,s[_.key])}),_}),p=`calc(${gv(e.min,t,r)} * (100% - ${c} - 8px) + 4px)`,m=`calc(${1-gv(e.max,t,r)} * (100% - ${c} - 8px) + 4px)`;return at(AI,{ref:o,...f(),children:[ae(MI,{children:ae(EI,{style:{left:p,right:m}})}),ae(Q_,{position:"left",ref:a,style:{left:p}}),ae(Q_,{position:"right",ref:l,style:{right:m}})]})}function XY(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Nr(),i=en(r,$Y);return ae(ll,{children:at(ms,{input:!0,children:[ae(ks,{children:n}),at(JY,{children:[ae(KY,{value:e,...r,onDrag:t}),ae(lb,{value:e,settings:i,onUpdate:t,innerLabelTrim:0})]})]})})}var YY=dt({component:XY},WY);const QY=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},qY=["type","value"],ZY=["onChange","transient","onEditStart","onEditEnd"],eQ=function(){const e=GB(SX(()=>({data:{}}))),t=QY();this.storeId=O$(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([c,f])=>{f.render&&a.some(p=>p.indexOf(c)===0)&&!f.render(this.get)&&l.push(c+".")});const u=[];return i.forEach(c=>{c in o&&o[c].__refCount>0&&l.every(f=>c.indexOf(f)===-1)&&(!o[c].render||o[c].render(this.get))&&u.push(c)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const c=l[u];c.__refCount--,c.__refCount===0&&c.type in Bs&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{let p=u[c];if(p){const{type:m,value:g}=f,y=en(f,qY);m!==p.type?Ro(xn.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,y),p.__refCount++)}else u[c]=dt(dt({},f),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const c=u.data;return ZC(c[o],a,o,this,l),{data:c}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=dt(dt({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([c,f])=>{try{ZC(u[c],f,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Ro(xn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,dt(dt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,dt(dt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([c,f])=>{if(c==="")return Ro(xn.EMPTY_KEY);let p=QI(a,c);if(f.type===Bs.FOLDER){const m=s(f.schema,p,l);Object.assign(u,m),p in r||(r[p]=f.settings)}else if(c in l)Ro(xn.DUPLICATE_KEYS,c,p,l[c].path);else{const m=j$(f,c,p,u);if(m){const{type:g,options:y,input:v}=m,{onChange:x,transient:_,onEditStart:S,onEditEnd:b}=y,C=en(y,ZY);u[p]=dt(dt(dt({type:g},C),v),{},{fromPanel:!0}),l[c]={path:p,onChange:x,transient:_,onEditStart:S,onEditEnd:b}}else Ro(xn.UNKNOWN_INPUT,p,f)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},iL=new eQ,tQ={collapsed:!1};function nQ(n,e){return{type:Bs.FOLDER,schema:n,settings:dt(dt({},tQ),e)}}const rQ=n=>"__levaInput"in n,iQ=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=rY(i);(!r||s.toLowerCase().indexOf(r)>-1)&&nY(t,o,{[s]:{__levaInput:!0,path:i}})}),t};function sQ({toggle:n,toggled:e,name:t}){return at(oJ,{onClick:()=>n(),children:[ae(ab,{toggled:e}),ae("div",{children:t})]})}const oQ=["type","label","path","valueKey","value","settings","setValue","disabled"];function aQ(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,u=en(n,oQ);const{displayValue:c,onChange:f,onUpdate:p}=SI({type:e,value:s,settings:o,setValue:a}),m=gu[e].component;return m?ae(dI.Provider,{value:dt({key:i,path:r,id:""+r,label:t,displayValue:c,value:s,onChange:f,onUpdate:p,settings:o,setValue:a,disabled:l},u),children:ae(uJ,{disabled:l,children:ae(m,{})})}):(Ro(xn.NO_COMPONENT_FOR_TYPE,e,r),null)}const lQ=ct("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function uQ({onClick:n,settings:e,label:t}){const r=p0();return ae(ms,{children:ae(lQ,{disabled:e.disabled,onClick:()=>n(r.get),children:t})})}const cQ=ct("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),fQ=ct("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),dQ=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function hQ(n){const{label:e,opts:t}=dQ(n),r=p0();return at(ms,{input:!!e,children:[e&&ae(ks,{children:e}),ae(cQ,{children:Object.entries(t).map(([i,s])=>ae(fQ,{onClick:()=>s(r.get),children:i},i))})]})}const pQ=ct("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),sL=100;function mQ(n,e){n.push(e),n.length>sL&&n.shift()}const gQ=N.exports.forwardRef(function({initialValue:n},e){const t=ko("colors","highlight3"),r=ko("colors","elevation2"),i=ko("colors","highlight1"),[s,o]=N.exports.useMemo(()=>[Yr(i).alpha(.4).toRgbString(),Yr(i).alpha(.1).toRgbString()],[i]),a=N.exports.useRef([n]),l=N.exports.useRef(n),u=N.exports.useRef(n),c=N.exports.useRef(),f=N.exports.useCallback((g,y)=>{if(!g)return;const{width:v,height:x}=g,_=new Path2D,S=v/sL,b=x*.05;for(let P=0;P<a.current.length;P++){const M=gv(a.current[P],l.current,u.current),T=S*P,R=x-M*(x-b*2)-b;_.lineTo(T,R)}y.clearRect(0,0,v,x);const C=new Path2D(_);C.lineTo(S*(a.current.length+1),x),C.lineTo(0,x),C.lineTo(0,0);const E=y.createLinearGradient(0,0,0,x);E.addColorStop(0,s),E.addColorStop(1,o),y.fillStyle=E,y.fill(C),y.strokeStyle=r,y.lineJoin="round",y.lineWidth=14,y.stroke(_),y.strokeStyle=t,y.lineWidth=2,y.stroke(_)},[t,r,s,o]),[p,m]=yJ(f);return N.exports.useImperativeHandle(e,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(u.current===void 0||g>u.current)&&(u.current=g),mQ(a.current,g),c.current=requestAnimationFrame(()=>f(p.current,m.current))}}),[p,m,f]),N.exports.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),ae(pQ,{ref:p})}),BT=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),vQ=N.exports.forwardRef(function({initialValue:n},e){const[t,r]=N.exports.useState(BT(n));return N.exports.useImperativeHandle(e,()=>({frame:i=>r(BT(i))}),[]),ae("div",{children:t})});function DT(n){return typeof n=="function"?n():n.current}function yQ({label:n,objectOrFn:e,settings:t}){const r=N.exports.useRef(),i=N.exports.useRef(DT(e));return N.exports.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(DT(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),at(ms,{input:!0,children:[ae(ks,{align:"top",children:n}),t.graph?ae(gQ,{ref:r,initialValue:i.current}):ae(vQ,{ref:r,initialValue:i.current})]})}const xQ=["type","label","key"],_Q={[Bs.BUTTON]:uQ,[Bs.BUTTON_GROUP]:hQ,[Bs.MONITOR]:yQ},wQ=At.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=_J(n);if(!e)return null;const{type:l,label:u,key:c}=e,f=en(e,xQ);if(l in Bs){const p=_Q[l];return ae(p,{label:u,path:n,...f})}return l in gu?ae(aQ,{type:l,label:u,storeId:s,path:n,valueKey:c,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a,...f},s+n):(R$(xn.UNSUPPORTED_INPUT,l,n),null)}),SQ=({name:n,path:e,tree:t})=>{const r=p0(),i=QI(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=N.exports.useState(!s),u=N.exports.useRef(null),c=ko("colors","folderWidgetColor"),f=ko("colors","folderTextColor");return N.exports.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||c),u.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,c,f]),at(yv,{ref:u,children:[ae(sQ,{name:n,toggled:a,toggle:()=>l(p=>!p)}),ae(oL,{parent:i,tree:t,toggled:a})]})},oL=At.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=oY(s);return ae(X_,{ref:o,isRoot:n,fill:e,flat:t,children:ae(yI,{ref:a,isRoot:n,toggled:s,children:Object.entries(i).map(([l,u])=>rQ(u)?ae(wQ,{valueKey:u.valueKey,path:u.path},u.path):ae(SQ,{name:l,path:r,tree:u},l))})})}),bQ=ct("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${_I}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),aL=40,bv=ct("i",{$flexCenter:"",width:aL,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),MQ=ct("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),AQ=ct("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${bv}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),EQ=ct("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),CQ=ct("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:aL}}}}),TQ=At.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=N.exports.useState(""),s=N.exports.useMemo(()=>oI(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return N.exports.useEffect(()=>{s(r)},[r,s]),at(ll,{children:[ae(EQ,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),ae(bv,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"},children:ae("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor",children:ae("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})});function RQ({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[c,f]=N.exports.useState(!1),p=N.exports.useRef(null);N.exports.useEffect(()=>{var g,y;c?(g=p.current)===null||g===void 0||g.focus():(y=p.current)===null||y===void 0||y.blur()},[c]);const m=op(({offset:[g,y],first:v,last:x})=>{e({x:g,y}),v&&t({x:g,y}),x&&r({x:g,y})},{filterTaps:!0,from:({offset:[g,y]})=>[(u==null?void 0:u.x)||g,(u==null?void 0:u.y)||y]});return N.exports.useEffect(()=>{const g=y=>{y.key==="L"&&y.shiftKey&&y.metaKey&&f(v=>!v)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),at(ll,{children:[at(MQ,{mode:a?"drag":void 0,children:[ae(bv,{active:!s,onClick:()=>i(),children:ae(ab,{toggled:s,width:12,height:8})}),ae(CQ,{...a?m():{},drag:a,filterEnabled:l,children:o===void 0&&a?at("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg",children:[ae("circle",{cx:"2",cy:"2",r:"2"}),ae("circle",{cx:"14",cy:"2",r:"2"}),ae("circle",{cx:"26",cy:"2",r:"2"}),ae("circle",{cx:"2",cy:"12",r:"2"}),ae("circle",{cx:"14",cy:"12",r:"2"}),ae("circle",{cx:"26",cy:"12",r:"2"})]}):o}),l&&ae(bv,{active:c,onClick:()=>f(g=>!g),children:at("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20",children:[ae("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ae("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})]})})]}),ae(AQ,{toggled:c,children:ae(TQ,{ref:p,setFilter:n,toggle:i})})]})}const PQ=["store","hidden","theme","collapsed"];function BQ(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=en(n,PQ);const o=qI(()=>eJ(r),[r]),[a,l]=N.exports.useState(!i),u=typeof i=="object"?!i.collapsed:a,c=N.exports.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||t?null:ae(ib.Provider,{value:o,children:ae(DQ,{store:e,...s,toggled:u,setToggle:c,rootClass:o.className})})}const DQ=At.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var c,f;const p=aY(n),[m,g]=N.exports.useState(""),y=N.exports.useMemo(()=>iQ(p,m),[p,m]),[v,x]=bI(),_=i||p.length>0,S=typeof o=="object"&&o.title||void 0,b=typeof o=="object"&&(c=o.drag)!==null&&c!==void 0?c:!0,C=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,E=typeof o=="object"&&o.position||void 0,P=typeof o=="object"&&o.onDrag||void 0,M=typeof o=="object"&&o.onDragStart||void 0,T=typeof o=="object"&&o.onDragEnd||void 0;return At.useEffect(()=>{x({x:E==null?void 0:E.x,y:E==null?void 0:E.y})},[E,x]),Z$(),ae(pI.Provider,{value:{hideCopyButton:a},children:at(bQ,{ref:v,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:_?"block":"none"},children:[o&&ae(RQ,{onDrag:R=>{x(R),P==null||P(R)},onDragStart:R=>M==null?void 0:M(R),onDragEnd:R=>T==null?void 0:T(R),setFilter:g,toggle:R=>u(L=>R!=null?R:!L),toggled:l,title:S,drag:b,filterEnabled:C,from:E}),_&&ae(hI.Provider,{value:n,children:ae(oL,{isRoot:!0,fill:t,flat:r,tree:y,toggled:l})})]})})}),IQ=["isRoot"];let Mv=!1,Kl=null;function LQ(n){let{isRoot:e=!1}=n,t=en(n,IQ);return N.exports.useEffect(()=>(Mv=!0,!e&&Kl&&(Kl.remove(),Kl=null),()=>{e||(Mv=!1)}),[e]),ae(BQ,{store:iL,...t})}function FQ(n){N.exports.useEffect(()=>{n&&!Mv&&(Kl||(Kl=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Kl),oS.render(ae(LQ,{isRoot:!0}),Kl))),Mv=!0)},[n])}function kQ(n,e,t,r,i){let s,o,a,l,u;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?u=t:t&&("store"in t?(l=t,u=r):(a=t,Array.isArray(r)?u=r:(l=r,u=i)))):(s=n,Array.isArray(e)?u=e:(l=e,u=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:u||[]}}function OQ(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:u}=kQ(n,e,t,r,i),c=typeof o=="function",f=N.exports.useRef(!1),p=N.exports.useRef(!0),m=qI(()=>{f.current=!0;const L=typeof o=="function"?o():o;return s?{[s]:nQ(L,a)}:L},u),g=!(l!=null&&l.store);FQ(g);const[y]=N.exports.useState(()=>(l==null?void 0:l.store)||iL),[v,x]=N.exports.useMemo(()=>y.getDataFromSchema(m),[y,m]),[_,S,b,C,E]=N.exports.useMemo(()=>{const L=[],I=[],H={},G={},X={};return Object.values(x).forEach(({path:$,onChange:ne,onEditStart:U,onEditEnd:O,transient:z})=>{L.push($),ne?(H[$]=ne,z||I.push($)):I.push($),U&&(G[$]=U),O&&(X[$]=O)}),[L,I,H,G,X]},[x]),P=N.exports.useMemo(()=>y.orderPaths(_),[_,y]),M=lY(y,S,v),T=N.exports.useCallback(L=>{const I=Object.entries(L).reduce((H,[G,X])=>Object.assign(H,{[x[G].path]:X}),{});y.set(I,!1)},[y,x]),R=N.exports.useCallback(L=>y.get(x[L].path),[y,x]);return N.exports.useEffect(()=>{const L=!p.current&&f.current;return y.addData(v,L),p.current=!1,f.current=!1,()=>y.disposePaths(P)},[y,P,v]),N.exports.useEffect(()=>{const L=[];return Object.entries(b).forEach(([I,H])=>{H(y.get(I),I,dt({initial:!0,get:y.get},y.getInput(I)));const G=y.useStore.subscribe(X=>{const $=X.data[I];return[$.disabled?void 0:$.value,$]},([X,$])=>H(X,I,dt({initial:!1,get:y.get},$)),{equalityFn:ip});L.push(G)}),()=>L.forEach(I=>I())},[y,b]),N.exports.useEffect(()=>{const L=[];return Object.entries(C).forEach(([I,H])=>L.push(y.subscribeToEditStart(I,H))),Object.entries(E).forEach(([I,H])=>L.push(y.subscribeToEditEnd(I,H))),()=>L.forEach(I=>I())},[C,E,y]),c?[M,T,R]:M}Yo(Is.SELECT,OJ);Yo(Is.IMAGE,GY);Yo(Is.NUMBER,CJ);Yo(Is.COLOR,xY);Yo(Is.STRING,$J);Yo(Is.BOOLEAN,ZJ);Yo(Is.INTERVAL,YY);Yo(Is.VECTOR3D,wY);Yo(Is.VECTOR2D,RY);function IT(n){return typeof n=="string"?new Ge(n).convertLinearToSRGB():n}function UQ(n){switch(n){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function NQ({color:n,alpha:e,lighting:t,name:r,...i}={}){return[{color:n,alpha:e,lighting:t,name:r},i]}function lL(n){return n instanceof J||n instanceof Ae||n instanceof zt||n instanceof Ir||n instanceof ht}function LT(n){return lL(n)?n.toArray():n instanceof Ge?"#"+n.clone().convertLinearToSRGB().getHexString():n instanceof un?n.image.src:n}const zQ={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},uL={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},pb={local:"local",world:"world",uv:"uv"},GQ={phong:LS,physical:Xo,toon:FS,basic:qr,lambert:OS,standard:_u};class Qo{constructor(e,t,r){this.uuid=Uh.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const s=Object.getOwnPropertyNames(e).filter(a=>a.startsWith("u_")).reduce((a,l)=>{var u;let c=(u=Object.getOwnPropertyDescriptor(e,l))==null?void 0:u.value;return(lL(c)||c instanceof Ge)&&(c=c.clone()),{...a,[l.slice(1)]:c}},{});for(const a in s){const l=a.split("_")[1];(t==null?void 0:t[l])!==void 0&&(s[a]=t[l])}t&&Object.keys(t).map(a=>{t[a]!==void 0&&(this[a]=t[a])}),this.uniforms={},this.schema=[];const o={};Object.keys(s).map(a=>{const l=a.split("_")[1];this.uniforms[`u_${this.uuid}_${l}`]={value:IT(s[a])},this.schema.push({value:s[a],label:l}),o[l]={set:u=>{this.uniforms[`u_${this.uuid}_${l}`].value=IT(u)},get:()=>this.uniforms[`u_${this.uuid}_${l}`].value}}),t!=null&&t.name&&(this.name=t.name),t!=null&&t.mode&&(this.mode=t.mode),t!=null&&t.visible&&(this.visible=t.visible),Object.defineProperties(this,o),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=r,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(zQ)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var t;const r=Object.getOwnPropertyNames(e).filter(c=>c==="fragmentShader"||c==="vertexShader").reduce((c,f)=>{var p;return{...c,[f]:(p=Object.getOwnPropertyDescriptor(e,f))==null?void 0:p.value}},{}),i={vert:G_(r.vertexShader||""),frag:G_(r.fragmentShader||"")},s={vert:wC(i.vert,this.renameTokens.bind(this)),frag:wC(i.frag,this.renameTokens.bind(this))},o={vert:H_(s.vert),frag:H_(s.frag)},a={vert:o.vert.map(c=>c.name).indexOf("main"),frag:o.frag.map(c=>c.name).indexOf("main")},l={vert:a.vert>=0?$d(s.vert.slice(0,o.vert[a.vert].outer[0])):"",frag:a.frag>=0?$d(s.frag.slice(0,o.frag[a.frag].outer[0])):""},u={vert:a.vert>=0?this.getShaderFromIndex(s.vert,o.vert[a.vert].body):"",frag:a.frag>=0?this.getShaderFromIndex(s.frag,o.frag[a.frag].body):""};this.vertexShader=this.processFinal(u.vert,!0),this.fragmentShader=this.processFinal(u.frag),this.vertexVariables=l.vert,this.fragmentVariables=l.frag,(t=this.onParse)==null||t.call(this,this),this.schema=this.schema.filter((c,f)=>{const p=c.label;return f===this.schema.findIndex(m=>m.label===p)})}renameTokens(e){if(e.startsWith("u_")){const t=e.slice(2);return`u_${this.uuid}_${t}`}else if(e.startsWith("v_")){const t=e.slice(2);return`v_${this.uuid}_${t}`}else if(e.startsWith("f_")){const t=e.slice(2);return`f_${this.uuid}_${t}`}else return e}processFinal(e,t){const r=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),i=r.match(/^.*return.*$/gm);let s=r.replace(/^.*return.*$/gm,"");if(i!=null&&i[0]){const o=i[0].replace("return","").trim().replace(";",""),a=this.getBlendMode(o,"lamina_finalColor");s+=t?`lamina_finalPosition = ${o};`:`lamina_finalColor = ${a};`}return s}getShaderFromIndex(e,t){return $d(e.slice(t[0],t[1]))}getBlendMode(e,t){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${t}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${t}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${t}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${t}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${t}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${t}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${t}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${t}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${t}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${t}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${t}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${t}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:t,options:r,...i})=>({label:t,options:r,...UQ(t),...i,value:LT(this[t])}))}serialize(){const e=this.constructor.name.split("$")[0];let t=Object.keys(this);t=t.filter(s=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(s));const r={};t.forEach(s=>{r[s]=this[s]});const i={};for(const s in this.uniforms){const o=s.replace(`u_${this.uuid}_`,"");i[o]=LT(this.uniforms[s].value)}return{constructor:e,properties:{...i,...r}}}}class us extends Qo{constructor(e){super(us,{name:"Depth",...e},t=>{t.schema.push({value:t.mapping,label:"mapping",options:["vector","world","camera"]});const r=us.getMapping(t.uuid,t.mapping);t.fragmentShader=t.fragmentShader.replace("lamina_mapping_template",r)}),this.mapping="vector"}static getMapping(e,t){switch(t){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}us.u_near=2;us.u_far=10;us.u_origin=new J(0,0,0);us.u_colorA="white";us.u_colorB="black";us.u_alpha=1;us.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;us.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;class Cf extends Qo{constructor(e){super(Cf,{name:"Color",...e})}}Cf.u_color="red";Cf.u_alpha=1;Cf.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class yi extends Qo{constructor(e){super(yi,{name:"noise",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(uL)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pb)});const r=yi.getNoiseFunction(t.type),i=yi.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",i),t.fragmentShader=t.fragmentShader.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}yi.u_colorA="#666666";yi.u_colorB="#666666";yi.u_colorC="#FFFFFF";yi.u_colorD="#FFFFFF";yi.u_alpha=1;yi.u_scale=1;yi.u_offset=new J(0,0,0);yi.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;yi.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class Os extends Qo{constructor(e){super(Os,{name:"Fresnel",...e})}}Os.u_color="white";Os.u_alpha=1;Os.u_bias=0;Os.u_intensity=1;Os.u_power=2;Os.u_factor=1;Os.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;Os.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class cs extends Qo{constructor(e){super(cs,{name:"Gradient",...e},t=>{t.schema.push({value:t.axes,label:"axes",options:["x","y","z"]}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pb)});const r=cs.getMapping(t.mapping);t.vertexShader=t.vertexShader.replace("lamina_mapping_template",r||"local"),t.fragmentShader=t.fragmentShader.replace("axes_template",t.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}cs.u_colorA="white";cs.u_colorB="black";cs.u_alpha=1;cs.u_start=1;cs.u_end=-1;cs.u_contrast=1;cs.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;cs.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class Au extends Qo{constructor(e){super(Au,{name:"Matcap",...e})}}Au.u_alpha=1;Au.u_map=void 0;Au.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;Au.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;class Eu extends Qo{constructor(e){super(Eu,{name:"Texture",...e})}}Eu.u_alpha=1;Eu.u_map=void 0;Eu.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;Eu.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class Oo extends Qo{constructor(e){super(Oo,{name:"Displace",...e},t=>{t.schema.push({value:t.type,label:"type",options:Object.values(uL)}),t.schema.push({value:t.mapping,label:"mapping",options:Object.values(pb)});const r=Oo.getNoiseFunction(t.type),i=Oo.getMapping(t.mapping);t.vertexVariables=t.vertexVariables.replace("lamina_mapping_template",i),t.vertexVariables=t.vertexVariables.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}Oo.u_strength=1;Oo.u_scale=1;Oo.u_offset=new J(0,0,0);Oo.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class Cu extends Qo{constructor(e){super(Cu,{name:"Normal",...e})}}Cu.u_alpha=1;Cu.u_direction=new J(1,1,1);Cu.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;Cu.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;var HQ=`
vec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {

	return y * opacity + x * (1.0 - opacity);

}

vec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {

	float a = min(y.a, opacity);

	return vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);

}
vec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_burn(const in float x, const in float y) {

	return (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);

}

vec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_burn(x.r, y.r),
		lamina_blend_color_burn(x.g, y.g),
		lamina_blend_color_burn(x.b, y.b),
		lamina_blend_color_burn(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_dodge(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x / (1.0 - y), 1.0);

}

vec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_dodge(x.r, y.r),
		lamina_blend_color_dodge(x.g, y.g),
		lamina_blend_color_dodge(x.b, y.b),
		lamina_blend_color_dodge(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_divide(const in float x, const in float y) {

	return (y > 0.0) ? min(x / y, 1.0) : 1.0;

}

vec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_divide(x.r, y.r),
		lamina_blend_divide(x.g, y.g),
		lamina_blend_divide(x.b, y.b),
		lamina_blend_divide(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_overlay(const in float x, const in float y) {

	return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));

}

vec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_overlay(x.r, y.r),
		lamina_blend_overlay(x.g, y.g),
		lamina_blend_overlay(x.b, y.b),
		lamina_blend_overlay(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_reflect(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);

}

vec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_reflect(x.r, y.r),
		lamina_blend_reflect(x.g, y.g),
		lamina_blend_reflect(x.b, y.b),
		lamina_blend_reflect(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_softlight(const in float x, const in float y) {

	return (y < 0.5) ?
		(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :
		(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));

}

vec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_softlight(x.r, y.r),
		lamina_blend_softlight(x.g, y.g),
		lamina_blend_softlight(x.b, y.b),
		lamina_blend_softlight(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}

`,FT=`

// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83
// Huge thanks to the creators of these algorithms

float lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}
vec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }
vec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }


float lamina_noise_white(vec2 p) {
  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *
               (0.1 + abs(sin(p.y * 13.0 + p.x))));
}

float lamina_noise_white(vec3 p) {
  return lamina_noise_white(p.xy);
}


vec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float lamina_noise_perlin(vec3 P) {
  vec3 Pi0 = floor(P);        // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod(Pi0, 289.0);
  Pi1 = mod(Pi1, 289.0);
  vec3 Pf0 = fract(P);        // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);
  vec4 ixy0 = lamina_noise_permute(ixy + iz0);
  vec4 ixy1 = lamina_noise_permute(ixy + iz1);

  vec4 gx0 = ixy0 / 7.0;
  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 / 7.0;
  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);

  vec4 norm0 = lamina_noise_taylorInvSqrt(
      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = lamina_noise_taylorInvSqrt(
      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = lamina_noise_fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),
                 fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return lamina_normalize(2.2 * n_xyz);
}

float lamina_noise_simplex(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  //  x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +
                             vec4(0.0, i1.y, i2.y, 1.0)) +
                    i.x + vec4(0.0, i1.x, i2.x, 1.0));

  // Gradients
  // ( N*N points uniformly over a square, mapped onto an octahedron.)
  float n_ = 1.0 / 7.0; // N=7
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

  // Normalise gradients
  vec4 norm =
      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m =
      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return lamina_normalize(42.0 *
         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));
}

vec3 lamina_noise_simplex3(vec3 x) {
  float s = lamina_noise_simplex(vec3(x));
  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));
  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));
  vec3 c = vec3(s, s1, s2);
  return c;
}

vec3 lamina_noise_curl(vec3 p) {
  const float e = .1;
  vec3 dx = vec3(e, 0.0, 0.0);
  vec3 dy = vec3(0.0, e, 0.0);
  vec3 dz = vec3(0.0, 0.0, e);

  vec3 p_x0 = lamina_noise_simplex3(p - dx);
  vec3 p_x1 = lamina_noise_simplex3(p + dx);
  vec3 p_y0 = lamina_noise_simplex3(p - dy);
  vec3 p_y1 = lamina_noise_simplex3(p + dy);
  vec3 p_z0 = lamina_noise_simplex3(p - dz);
  vec3 p_z1 = lamina_noise_simplex3(p + dz);

  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;

  const float divisor = 1.0 / (2.0 * e);
  return normalize(vec3(x, y, z) * divisor);
}

vec3 lamina_permute(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {
  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);
}

// From: https://github.com/Erkaman/glsl-worley
float lamina_noise_worley(vec3 P) {
  float jitter = 1.;
  bool manhattanDistance = false; 

  float K = 0.142857142857; // 1/7
  float Ko = 0.428571428571; // 1/2-K/2
  float  K2 = 0.020408163265306; // 1/(7*7)
  float Kz = 0.166666666667; // 1/6
  float Kzo = 0.416666666667; // 1/2-1/6*2

	vec3 Pi = mod(floor(P), 289.0);
 	vec3 Pf = fract(P) - 0.5;

	vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);
	vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);
	vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);

	vec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));
	vec3 p1 = lamina_permute(p + Pi.y - 1.0);
	vec3 p2 = lamina_permute(p + Pi.y);
	vec3 p3 = lamina_permute(p + Pi.y + 1.0);

	vec3 p11 = lamina_permute(p1 + Pi.z - 1.0);
	vec3 p12 = lamina_permute(p1 + Pi.z);
	vec3 p13 = lamina_permute(p1 + Pi.z + 1.0);

	vec3 p21 = lamina_permute(p2 + Pi.z - 1.0);
	vec3 p22 = lamina_permute(p2 + Pi.z);
	vec3 p23 = lamina_permute(p2 + Pi.z + 1.0);

	vec3 p31 = lamina_permute(p3 + Pi.z - 1.0);
	vec3 p32 = lamina_permute(p3 + Pi.z);
	vec3 p33 = lamina_permute(p3 + Pi.z + 1.0);

	vec3 ox11 = fract(p11*K) - Ko;
	vec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;
	vec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed

	vec3 ox12 = fract(p12*K) - Ko;
	vec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;
	vec3 oz12 = floor(p12*K2)*Kz - Kzo;

	vec3 ox13 = fract(p13*K) - Ko;
	vec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;
	vec3 oz13 = floor(p13*K2)*Kz - Kzo;

	vec3 ox21 = fract(p21*K) - Ko;
	vec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;
	vec3 oz21 = floor(p21*K2)*Kz - Kzo;

	vec3 ox22 = fract(p22*K) - Ko;
	vec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;
	vec3 oz22 = floor(p22*K2)*Kz - Kzo;

	vec3 ox23 = fract(p23*K) - Ko;
	vec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;
	vec3 oz23 = floor(p23*K2)*Kz - Kzo;

	vec3 ox31 = fract(p31*K) - Ko;
	vec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;
	vec3 oz31 = floor(p31*K2)*Kz - Kzo;

	vec3 ox32 = fract(p32*K) - Ko;
	vec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;
	vec3 oz32 = floor(p32*K2)*Kz - Kzo;

	vec3 ox33 = fract(p33*K) - Ko;
	vec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;
	vec3 oz33 = floor(p33*K2)*Kz - Kzo;

	vec3 dx11 = Pfx + jitter*ox11;
	vec3 dy11 = Pfy.x + jitter*oy11;
	vec3 dz11 = Pfz.x + jitter*oz11;

	vec3 dx12 = Pfx + jitter*ox12;
	vec3 dy12 = Pfy.x + jitter*oy12;
	vec3 dz12 = Pfz.y + jitter*oz12;

	vec3 dx13 = Pfx + jitter*ox13;
	vec3 dy13 = Pfy.x + jitter*oy13;
	vec3 dz13 = Pfz.z + jitter*oz13;

	vec3 dx21 = Pfx + jitter*ox21;
	vec3 dy21 = Pfy.y + jitter*oy21;
	vec3 dz21 = Pfz.x + jitter*oz21;

	vec3 dx22 = Pfx + jitter*ox22;
	vec3 dy22 = Pfy.y + jitter*oy22;
	vec3 dz22 = Pfz.y + jitter*oz22;

	vec3 dx23 = Pfx + jitter*ox23;
	vec3 dy23 = Pfy.y + jitter*oy23;
	vec3 dz23 = Pfz.z + jitter*oz23;

	vec3 dx31 = Pfx + jitter*ox31;
	vec3 dy31 = Pfy.z + jitter*oy31;
	vec3 dz31 = Pfz.x + jitter*oz31;

	vec3 dx32 = Pfx + jitter*ox32;
	vec3 dy32 = Pfy.z + jitter*oy32;
	vec3 dz32 = Pfz.y + jitter*oz32;

	vec3 dx33 = Pfx + jitter*ox33;
	vec3 dy33 = Pfy.z + jitter*oy33;
	vec3 dz33 = Pfz.z + jitter*oz33;

	vec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);
	vec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);
	vec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);
	vec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);
	vec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);
	vec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);
	vec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);
	vec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);
	vec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);

	vec3 d1a = min(d11, d12);
	d12 = max(d11, d12);
	d11 = min(d1a, d13); // Smallest now not in d12 or d13
	d13 = max(d1a, d13);
	d12 = min(d12, d13); // 2nd smallest now not in d13
	vec3 d2a = min(d21, d22);
	d22 = max(d21, d22);
	d21 = min(d2a, d23); // Smallest now not in d22 or d23
	d23 = max(d2a, d23);
	d22 = min(d22, d23); // 2nd smallest now not in d23
	vec3 d3a = min(d31, d32);
	d32 = max(d31, d32);
	d31 = min(d3a, d33); // Smallest now not in d32 or d33
	d33 = max(d3a, d33);
	d32 = min(d32, d33); // 2nd smallest now not in d33
	vec3 da = min(d11, d21);
	d21 = max(d11, d21);
	d11 = min(da, d31); // Smallest now in d11
	d31 = max(da, d31); // 2nd smallest now not in d31
	d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;
	d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest
	d12 = min(d12, d21); // 2nd smallest now not in d21
	d12 = min(d12, d22); // nor in d22
	d12 = min(d12, d31); // nor in d31
	d12 = min(d12, d32); // nor in d32
	d11.yz = min(d11.yz,d12.xy); // nor in d12.yz
	d11.y = min(d11.y,d12.z); // Only two more to go
	d11.y = min(d11.y,d11.z); // Done! (Phew!)

  vec2 F = sqrt(d11.xy);
	return F.x; // F1, F2

}

float lamina_noise_swirl(vec3 position) {
    float scale = 0.1;
    float freq = 4. * scale;
    float t = 1.;

    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);

    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));
    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));
    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));
    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));
    
    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;
    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;
    float fbm3 = worley3 * .75 + worley4 * .25;

    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);
    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + 
        curlWorleyFbm.b * .125;

    return curlWorley;
}
  
  
`,kT=`

float lamina_map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }
`;class cL extends X7{constructor({color:e,alpha:t,lighting:r,layers:i,name:s,...o}={}){super({baseMaterial:GQ[r||"basic"],...o}),this.name="LayerMaterial",this.layers=[],this.lighting="basic";const a=e||"white",l=t!=null?t:1;this.uniforms={u_lamina_color:{value:typeof a=="string"?new Ge(a).convertSRGBToLinear():a},u_lamina_alpha:{value:l}},this.layers=i||this.layers,this.lighting=r||this.lighting,this.name=s||this.name,this.refresh()}genShaders(){let e="",t="",r="",i="",s={};return this.layers.filter(o=>o.visible).forEach(o=>{e+=o.vertexVariables+`
`,t+=o.fragmentVariables+`
`,r+=o.vertexShader+`
`,i+=o.fragmentShader+`
`,s={...s,...o.uniforms}}),s={...s,...this.uniforms},{uniforms:s,vertexShader:`
        ${kT}
        ${FT}
        ${e}

        void main() {
          vec3 lamina_finalPosition = position;
          vec3 lamina_finalNormal = normal;

          ${r}

          csm_Position = lamina_finalPosition;
          csm_Normal = lamina_finalNormal;
        }
        `,fragmentShader:`
        ${kT}
        ${FT}
        ${HQ}
        ${t}

        uniform vec3 u_lamina_color;
        uniform float u_lamina_alpha;

        void main() {
          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);

          ${i}

          csm_DiffuseColor = lamina_finalColor;
         
        }
        `}}refresh(){const{uniforms:e,fragmentShader:t,vertexShader:r}=this.genShaders();super.update({fragmentShader:t,vertexShader:r,uniforms:e})}serialize(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}set color(e){var t,r;(t=this.uniforms)!=null&&(r=t.u_lamina_color)!=null&&r.value&&(this.uniforms.u_lamina_color.value=typeof e=="string"?new Ge(e).convertSRGBToLinear():e)}get color(){var e,t;return(e=this.uniforms)==null||(t=e.u_lamina_color)==null?void 0:t.value}set alpha(e){this.uniforms.u_lamina_alpha.value=e}get alpha(){return this.uniforms.u_lamina_alpha.value}}l0({LayerMaterial:cL});l0({LayerMaterial:cL,Depth_:us,Color_:Cf,Noise_:yi,Fresnel_:Os,Gradient_:cs,Matcap_:Au,Texture_:Eu,Displace_:Oo,Normal_:Cu});const fL=At.forwardRef(({children:n,...e},t)=>{const r=At.useRef(null);N.exports.useImperativeHandle(t,()=>r.current),At.useLayoutEffect(()=>{r.current.layers=r.current.__r3f.objects,r.current.refresh()},[n]);const[i,s]=N.exports.useMemo(()=>NQ(e),[e]);return ae("layerMaterial",{args:[i],ref:r,...s,children:n})});function dL(n){return[{mode:n==null?void 0:n.mode,visible:n==null?void 0:n.visible,type:n==null?void 0:n.type,mapping:n==null?void 0:n.mapping,map:n==null?void 0:n.map,axes:n==null?void 0:n.axes}]}const Xl=At.forwardRef((n,e)=>ae("depth_",{args:dL(n),ref:e,...n})),hL=At.forwardRef((n,e)=>ae("fresnel_",{ref:e,args:dL(n),...n})),pL="/assets/checker.5e3574e0.png",VQ="/assets/Moon.782b6e7c.png";function WQ(n){const{nodes:e,materials:t}=sp("/Moon.gltf");ul(r0,[pL,VQ]);const r=N.exports.useRef(),i=N.exports.useRef(),{gradient:s}=OQ({gradient:{value:.7,min:0,max:1}});return Mu(o=>{const a=Math.cos(o.clock.elapsedTime)*1,l=Math.sin(o.clock.elapsedTime)*1;i.current.layers[0].origin.set(a/2,0,0),i.current.layers[1].origin.set(a,l,a),i.current.layers[2].origin.set(l,a,l),i.current.layers[3].origin.set(a,l,a)}),ae("group",{...n,dispose:null,scale:9,children:ae(dV,{speed:1,rotationIntensity:0,floatIntensity:1,floatingRange:[-.15,.15],children:ae("mesh",{geometry:e.Moon.geometry,material:t.Moon,ref:r,position:[0,-.6,0],rotation:[Math.PI*.5,-.6,Math.PI],scale:.8,children:at(fL,{ref:i,toneMapped:!1,children:[ae(Xl,{colorA:"#ff0080",colorB:"black",alpha:1,mode:"normal",near:1*3.5*s,far:1*3.5,origin:[0,0,0]}),ae(Xl,{colorA:"blue",colorB:"#f7b955",alpha:1,mode:"add",near:1*14*s,far:1*14,origin:[0,1,1]}),ae(Xl,{colorA:"green",colorB:"#f7b955",alpha:1,mode:"add",near:1*21*s,far:1*21,origin:[0,1,-1]}),ae(Xl,{colorA:"white",colorB:"red",alpha:1,mode:"overlay",near:1*8*s,far:1*8,origin:[1,-1,-1]}),ae(hL,{mode:"add",color:"white",intensity:.5,power:1.5,bias:.05})]})})})})}sp.preload("/Moon.gltf");function jQ(){return ul(a7,"/F-6800-STD.cube"),ae(ll,{children:at(c7,{disableNormalPass:!0,children:[" ",ae(l7,{luminanceThreshold:.1,mipmapBlur:!0,luminanceSmoothing:0,intensity:.7,blendFunction:0})]})})}function Yd(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}new Ae;new Ae;function mL(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Yi=function n(e,t,r){var i=this;mL(this,n),Yd(this,"dot2",function(s,o){return i.x*s+i.y*o}),Yd(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=t,this.z=r},$Q=[new Yi(1,1,0),new Yi(-1,1,0),new Yi(1,-1,0),new Yi(-1,-1,0),new Yi(1,0,1),new Yi(-1,0,1),new Yi(1,0,-1),new Yi(-1,0,-1),new Yi(0,1,1),new Yi(0,-1,1),new Yi(0,1,-1),new Yi(0,-1,-1)],OT=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],UT=new Array(512),NT=new Array(512),JQ=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;t&1?r=OT[t]^e&255:r=OT[t]^e>>8&255,UT[t]=UT[t+256]=r,NT[t]=NT[t+256]=$Q[r%12]}};JQ(0);function KQ(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function zT(n){var e=KQ(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var XQ=function n(e){var t=this;mL(this,n),Yd(this,"seed",0),Yd(this,"init",function(r){t.seed=r,t.value=zT(r)}),Yd(this,"value",zT(this.seed)),this.init(e)};new XQ(Math.random());function YQ(n){const e=N.exports.useRef(),t=.2;return Mu(r=>{const i=Math.cos(r.clock.elapsedTime)*20,s=Math.sin(r.clock.elapsedTime)*20;e.current.layers[0].origin.set(i/2,0,0),e.current.layers[1].origin.set(i,s,i),e.current.layers[2].origin.set(s,i,s)}),ae("group",{...n,dispose:null,scale:1,children:at(bD,{font:"Mysteria.otf",fontSize:10,position:[0,15,0],children:["Dreamwalker",at(fL,{ref:e,toneMapped:!1,children:[ae(Xl,{colorA:"#ff0080",colorB:"black",alpha:1,mode:"normal",near:4*3.5*t,far:4*3.5,origin:[0,0,0]}),ae(Xl,{colorA:"blue",colorB:"#f7b955",alpha:1,mode:"add",near:4*14*t,far:4*14,origin:[0,1,1]}),ae(Xl,{colorA:"green",colorB:"#f7b955",alpha:1,mode:"add",near:4*21*t,far:4*21,origin:[0,1,-1]}),ae(hL,{mode:"add",color:"white",intensity:.5,power:1.5,bias:.05})]})]})})}sp.preload("/Moon.gltf");var QQ=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function qQ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var ZQ=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;qQ(this,n),this.mousemoveCallback,this.mouseoutCallback,this.diagonalThreshold,this.element,this.diagonal=!1,this.directionX="none",this.directionY="none",this.selector=e,this.oldX=0,this.oldY=0,this.speedX=0,this.speedY=0,this.skipCalculation=!0,this.ticking=!1,this.windowOrDocument=!1,this.mouseLeave=this.mouseLeave.bind(this),this.fetchCoordinates=this.fetchCoordinates.bind(this)}return QQ(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.mousemoveCallback,i=r===void 0?function(){console.error("No callback function")}:r,s=t.mouseoutCallback,o=s===void 0?function(){}:s,a=t.diagonalThreshold,l=a===void 0?4:a,u=this.selector===window||this.selector==="window",c=this.selector===document||this.selector==="document";if(this.windowOrDocument=u||c,this.mousemoveCallback=i,this.mouseoutCallback=o,this.diagonalThreshold=l,u?this.element=window:c?this.element=document:this.element=document.querySelectorAll(this.selector),this.windowOrDocument)this.element.addEventListener("mousemove",this.fetchCoordinates),this.element.addEventListener("mouseleave",this.mouseLeave);else for(var f=0;f<this.element.length;f++)this.element[f].addEventListener("mousemove",this.fetchCoordinates),this.element[f].addEventListener("mouseleave",this.mouseLeave)}},{key:"fetchCoordinates",value:function(t){var r=this;this.ticking||(requestAnimationFrame(function(){r.movementHandler(t.x,t.y),r.ticking=!1}),this.ticking=!0)}},{key:"movementHandler",value:function(t,r){if(this.skipCalculation)this.oldX=t,this.oldY=r,this.skipCalculation=!1;else{var i=t-this.oldX,s=r-this.oldY;this.directionX=i<0?"left":i>0?"right":"none",this.directionY=s<0?"up":s>0?"down":"none",this.speedX=Math.abs(i),this.speedY=Math.abs(s),this.diagonal=this.speedX>this.diagonalThreshold&&this.speedY>this.diagonalThreshold,this.oldX=t,this.oldY=r,this.mousemoveCallback()}}},{key:"mouseLeave",value:function(){this.skipCalculation=!0,typeof this.mouseoutCallback=="function"&&this.mouseoutCallback()}},{key:"destroy",value:function(){if(this.windowOrDocument)this.element.removeEventListener("mousemove",this.fetchCoordinates),this.element.removeEventListener("mouseleave",this.mouseLeave);else for(var t=0;t<this.element.length;t++)this.element[t].removeEventListener("mousemove",this.fetchCoordinates),this.element[t].removeEventListener("mouseleave",this.mouseLeave)}}]),n}();/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var GT=Object.getOwnPropertySymbols,eq=Object.prototype.hasOwnProperty,tq=Object.prototype.propertyIsEnumerable;function nq(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function rq(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var HT=rq()?Object.assign:function(n,e){for(var t,r=nq(n),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)eq.call(t,o)&&(r[o]=t[o]);if(GT){i=GT(t);for(var a=0;a<i.length;a++)tq.call(t,i[a])&&(r[i[a]]=t[i[a]])}}return r};/*!
 * object.omit <https://github.com/jonschlinkert/object.omit>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var iq=m0,sq=function(e,t,r){if(!iq(e))return{};typeof t=="function"&&(r=t,t=[]),typeof t=="string"&&(t=[t]);for(var i=typeof r=="function",s=Object.keys(e),o={},a=0;a<s.length;a++){var l=s[a],u=e[l];(!t||t.indexOf(l)===-1&&(!i||r(u,l,e)))&&(o[l]=u)}return o},oq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function aq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var lq=function(){function n(e){aq(this,n),this.el=e}return oq(n,[{key:"getDocumentRelativeElementOffset",value:function(t){var r=this.getRootOfEl(t),i=r.getBoundingClientRect(),s=i.left,o=i.top,a=t.getBoundingClientRect(),l=a.left,u=a.top;return{x:Math.abs(s)+l,y:Math.abs(o)+u}}},{key:"getRootOfEl",value:function(t){return t.parentElement?this.getRootOfEl(t.parentElement):t}},{key:"getComputedElementRelativeCursorPosition",value:function(t,r){this.lastEvent=t;var i=this.getDocumentRelativeCursorPosition(t),s=i.x,o=i.y,a=r.x,l=r.y;return{x:Math.round(s-a),y:Math.round(o-l)}}},{key:"getDocumentRelativeCursorPosition",value:function(t){return{x:t.pageX,y:t.pageY}}},{key:"getCursorPosition",value:function(t){return this.getComputedElementRelativeCursorPosition(t,this.documentRelativeElementOffset)}},{key:"documentRelativeElementOffset",get:function(){return this.elementOffset||(this.elementOffset=this.getDocumentRelativeElementOffset(this.el)),this.elementOffset}}]),n}();function ba(n,e,t,r){return n.addEventListener(e,t,r),{removeEventListener:function(){n.removeEventListener(e,t,r)}}}var uq="pressEvent",cq="tap",fq="mouseEmulation",dq="setHovering",hq="unsetHovering",rs={TOUCH:"touch",TAP:"tap",DOUBLE_TAP:"double_tap",PRESS:"press",CLICK:"click",HOVER:"hover"};const q1=function(){};var pq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function mq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var gL=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.onIsActiveChanged;if(mq(this,n),typeof t!="function")throw new Error("onIsActiveChanged should be a function");this.onIsActiveChanged=t,this.isActive=!1,this.timers=[]}return pq(n,[{key:"activate",value:function(){this.isActive=!0,this.onIsActiveChanged({isActive:!0})}},{key:"deactivate",value:function(){this.isActive=!1,this.onIsActiveChanged({isActive:!1}),this.clearTimers()}},{key:"toggleActivation",value:function(){this.isActive?this.deactivate():this.activate()}},{key:"clearTimers",value:function(){for(var t=this.timers;t.length;){var r=t.pop();clearTimeout(r.id)}}},{key:"clearTimer",value:function(t){this.timers.forEach(function(r){r.name===t&&clearTimeout(r.id)})}}]),n}(),gq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function vq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function yq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function xq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var mb=function(n){xq(e,n);function e(t){var r=t.onIsActiveChanged;vq(this,e);var i=yq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}));return i.initialElTop=0,i.currentElTop=0,i}return gq(e,[{key:"touchStarted",value:function(){}},{key:"touchMoved",value:function(){}},{key:"touchEnded",value:function(){this.deactivate()}},{key:"touchCanceled",value:function(){this.deactivate()}}]),e}(gL),_q=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function wq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Sq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function bq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Mq=function(n){bq(e,n);function e(t){var r=t.onIsActiveChanged,i=t.pressDurationInMs,s=t.pressMoveThreshold;wq(this,e);var o=Sq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}));return o.pressDurationInMs=i,o.pressMoveThreshold=s,o}return _q(e,[{key:"touchStarted",value:function(r){var i=r.position;this.initPressEventCriteria(i),this.setPressEventTimer()}},{key:"touchMoved",value:function(r){var i=r.position;this.isActive||this.setPressEventCriteria(i)}},{key:"setPressEventTimer",value:function(){var r=this;this.timers.push({name:uq,id:setTimeout(function(){Math.abs(r.currentElTop-r.initialElTop)<r.pressMoveThreshold&&r.activate()},this.pressDurationInMs)})}},{key:"setPressEventCriteria",value:function(r){this.currentElTop=r.y}},{key:"initPressEventCriteria",value:function(r){var i=r.y;this.initialElTop=i,this.currentElTop=i}}]),e}(mb),Aq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Eq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Cq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Tq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Rq=function(n){Tq(e,n);function e(t){var r=t.onIsActiveChanged;return Eq(this,e),Cq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}))}return Aq(e,[{key:"touchStarted",value:function(r){var i=r.e;i.preventDefault(),this.activate()}}]),e}(mb),Pq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Bq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Dq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Iq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Lq=function(n){Iq(e,n);function e(t){var r=t.onIsActiveChanged,i=t.tapDurationInMs,s=t.tapMoveThreshold;Bq(this,e);var o=Dq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}));return o.hasTapGestureEnded=!1,o.tapDurationInMs=i,o.tapMoveThreshold=s,o}return Pq(e,[{key:"touchStarted",value:function(r){var i=r.position;this.hasTapGestureEnded=!1,this.initMoveThreshold(i),this.setTapEventTimer()}},{key:"touchMoved",value:function(r){var i=r.position;this.isActive||this.setMoveThresholdCriteria(i)}},{key:"touchEnded",value:function(){this.hasTapGestureEnded=!0}},{key:"setTapEventTimer",value:function(){var r=this;this.timers.push({name:cq,id:setTimeout(function(){r.isTapGestureActive&&r.toggleActivation()},this.tapDurationInMs)})}},{key:"setMoveThresholdCriteria",value:function(r){this.currentElTop=r.y}},{key:"initMoveThreshold",value:function(r){var i=r.y;this.initialElTop=i,this.currentElTop=i}},{key:"hasPassedMoveThreshold",get:function(){return Math.abs(this.currentElTop-this.initialElTop)>this.tapMoveThreshold}},{key:"isTapGestureActive",get:function(){return!this.hasPassedMoveThreshold&&this.hasTapGestureEnded}}]),e}(mb),Fq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function kq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Oq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Uq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var vL=function(n){Uq(e,n);function e(t){var r=t.onIsActiveChanged;return kq(this,e),Oq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}))}return Fq(e,[{key:"mouseEntered",value:function(){}},{key:"mouseMoved",value:function(){}},{key:"mouseLeft",value:function(){}},{key:"mouseClicked",value:function(){}}]),e}(gL),Nq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function zq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Gq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Hq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Vq=function(n){Hq(e,n);function e(t){var r=t.onIsActiveChanged,i=t.hoverDelayInMs,s=t.hoverOffDelayInMs;zq(this,e);var o=Gq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}));return o.hoverDelayInMs=i,o.hoverOffDelayInMs=s,o}return Nq(e,[{key:"mouseEntered",value:function(){this.clearTimers(),this.schedulActivation(this.hoverDelayInMs)}},{key:"mouseLeft",value:function(){this.clearTimers(),this.scheduleDeactivation(this.hoverOffDelayInMs)}},{key:"schedulActivation",value:function(r){var i=this,s=setTimeout(function(){i.activate()},r);this.timers.push({id:s,name:dq})}},{key:"scheduleDeactivation",value:function(r){var i=this,s=setTimeout(function(){i.deactivate()},r);this.timers.push({id:s,name:hq})}}]),e}(vL),Wq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function jq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $q(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Jq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Kq=function(n){Jq(e,n);function e(t){var r=t.onIsActiveChanged;return jq(this,e),$q(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{onIsActiveChanged:r}))}return Wq(e,[{key:"mouseClicked",value:function(){this.toggleActivation()}}]),e}(vL),Xq=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function Yq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qq(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function qq(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var gb=function(n){qq(e,n);function e(t){Yq(this,e);var r=Qq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Zq.call(r),r.state={detectedEnvironment:{isMouseDetected:!1,isTouchDetected:!1},elementDimensions:{width:0,height:0},isActive:!1,isPositionOutside:!0,position:{x:0,y:0}},r.shouldGuardAgainstMouseEmulationByDevices=!1,r.eventListeners=[],r.timers=[],r.elementOffset={x:0,y:0},r.onTouchStart=r.onTouchStart.bind(r),r.onTouchMove=r.onTouchMove.bind(r),r.onTouchEnd=r.onTouchEnd.bind(r),r.onTouchCancel=r.onTouchCancel.bind(r),r.onMouseEnter=r.onMouseEnter.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.onMouseLeave=r.onMouseLeave.bind(r),r.onClick=r.onClick.bind(r),r.onIsActiveChanged=r.onIsActiveChanged.bind(r),r.setTouchActivationStrategy(t.activationInteractionTouch),r.setMouseActivationStrategy(t.activationInteractionMouse),r}return Xq(e,[{key:"onIsActiveChanged",value:function(r){var i=r.isActive;i?this.activate():this.deactivate()}},{key:"onTouchStart",value:function(r){this.init(),this.onTouchDetected(),this.setShouldGuardAgainstMouseEmulationByDevices();var i=this.core.getCursorPosition(this.getTouchEvent(r));this.setPositionState(i),this.touchActivation.touchStarted({e:r,position:i})}},{key:"onTouchMove",value:function(r){if(!!this.isCoreReady){var i=this.core.getCursorPosition(this.getTouchEvent(r));this.touchActivation.touchMoved({e:r,position:i}),this.state.isActive&&(this.setPositionState(i),r.preventDefault(),this.props.shouldStopTouchMovePropagation&&r.stopPropagation())}}},{key:"onTouchEnd",value:function(){this.touchActivation.touchEnded(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onTouchCancel",value:function(){this.touchActivation.touchCanceled(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onMouseEnter",value:function(r){this.shouldGuardAgainstMouseEmulationByDevices||(this.init(),this.onMouseDetected(),this.setPositionState(this.core.getCursorPosition(r)),this.mouseActivation.mouseEntered())}},{key:"onMouseMove",value:function(r){if(!!this.isCoreReady){var i=this.core.getCursorPosition(r);this.setPositionState(i),this.mouseActivation.mouseMoved(i)}}},{key:"onMouseLeave",value:function(){this.mouseActivation.mouseLeft(),this.setState({isPositionOutside:!0})}},{key:"onClick",value:function(r){this.setPositionState(this.core.getCursorPosition(r)),this.mouseActivation.mouseClicked(),this.onMouseDetected()}},{key:"onTouchDetected",value:function(){var r={isTouchDetected:!0,isMouseDetected:!1};this.setState({detectedEnvironment:r}),this.props.onDetectedEnvironmentChanged(r)}},{key:"onMouseDetected",value:function(){var r={isTouchDetected:!1,isMouseDetected:!0};this.setState({detectedEnvironment:r}),this.props.onDetectedEnvironmentChanged(r)}},{key:"componentDidMount",value:function(){this.props.isEnabled&&this.enable()}},{key:"componentWillReceiveProps",value:function(r){var i=r.isEnabled,s=this.props.isEnabled,o=s!==i;!o||(i?this.enable():this.disable())}},{key:"componentWillUnmount",value:function(){this.disable()}},{key:"enable",value:function(){this.addEventListeners()}},{key:"disable",value:function(){this.removeEventListeners()}},{key:"init",value:function(){this.core=new lq(this.el),this.setElementDimensionsState(this.getElementDimensions(this.el))}},{key:"setTouchActivationStrategy",value:function(r){var i=this.props,s=i.pressDurationInMs,o=i.pressMoveThreshold,a=i.tapDurationInMs,l=i.tapMoveThreshold,u=rs.TOUCH,c=rs.TAP,f=rs.PRESS;switch(r){case f:this.touchActivation=new Mq({onIsActiveChanged:this.onIsActiveChanged,pressDurationInMs:s,pressMoveThreshold:o});break;case c:this.touchActivation=new Lq({onIsActiveChanged:this.onIsActiveChanged,tapDurationInMs:a,tapMoveThreshold:l});break;case u:this.touchActivation=new Rq({onIsActiveChanged:this.onIsActiveChanged});break;default:throw new Error("Must implement a touch activation strategy")}}},{key:"setMouseActivationStrategy",value:function(r){var i=this.props,s=i.hoverDelayInMs,o=i.hoverOffDelayInMs,a=rs.HOVER,l=rs.CLICK;switch(r){case a:this.mouseActivation=new Vq({onIsActiveChanged:this.onIsActiveChanged,hoverDelayInMs:s,hoverOffDelayInMs:o});break;case l:this.mouseActivation=new Kq({onIsActiveChanged:this.onIsActiveChanged});break;default:throw new Error("Must implement a mouse activation strategy")}}},{key:"reset",value:function(){var r=this.core;r=r===void 0?{}:r;var i=r.lastEvent;this.init(),i&&this.setPositionState(this.core.getCursorPosition(i))}},{key:"activate",value:function(){this.setState({isActive:!0}),this.props.onActivationChanged({isActive:!0})}},{key:"deactivate",value:function(){var r=this;this.setState({isActive:!1},function(){var i=r.state,s=i.isPositionOutside,o=i.position;r.props.onPositionChanged({isPositionOutside:s,position:o}),r.props.onActivationChanged({isActive:!1})})}},{key:"setPositionState",value:function(r){var i=this.getIsPositionOutside(r);this.setState({isPositionOutside:i,position:r},this.onPositionChanged)}},{key:"setElementDimensionsState",value:function(r){this.setState({elementDimensions:r})}},{key:"setShouldGuardAgainstMouseEmulationByDevices",value:function(){this.shouldGuardAgainstMouseEmulationByDevices=!0}},{key:"unsetShouldGuardAgainstMouseEmulationByDevices",value:function(){var r=this;this.timers.push({name:fq,id:setTimeout(function(){r.shouldGuardAgainstMouseEmulationByDevices=!1},0)})}},{key:"getElementDimensions",value:function(r){var i=r.getBoundingClientRect(),s=i.width,o=i.height;return{width:s,height:o}}},{key:"getIsPositionOutside",value:function(r){var i=r.x,s=r.y,o=this.state.elementDimensions,a=o.width,l=o.height,u=i<0||s<0||i>a||s>l;return u}},{key:"getTouchEvent",value:function(r){return r.touches[0]}},{key:"getIsReactComponent",value:function(r){return typeof r.type=="function"}},{key:"shouldDecorateChild",value:function(r){return!!r&&this.getIsReactComponent(r)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(r,i){return N.exports.cloneElement(r,i)}},{key:"decorateChildren",value:function(r,i){var s=this;return N.exports.Children.map(r,function(o){return s.shouldDecorateChild(o)?s.decorateChild(o,i):o})}},{key:"addEventListeners",value:function(){this.eventListeners.push(ba(this.el,"touchstart",this.onTouchStart,{passive:!1}),ba(this.el,"touchmove",this.onTouchMove,{passive:!1}),ba(this.el,"touchend",this.onTouchEnd),ba(this.el,"touchcancel",this.onTouchCancel),ba(this.el,"mouseenter",this.onMouseEnter),ba(this.el,"mousemove",this.onMouseMove),ba(this.el,"mouseleave",this.onMouseLeave),ba(this.el,"click",this.onClick))}},{key:"removeEventListeners",value:function(){for(;this.eventListeners.length;)this.eventListeners.pop().removeEventListener()}},{key:"getPassThroughProps",value:function(){var r=Object.keys(this.constructor.propTypes);return sq(this.props,r)}},{key:"render",value:function(){var r=this,i=this.props,s=i.children,o=i.className,a=i.mapChildProps,l=i.style,u=HT({},a(this.state),this.getPassThroughProps());return ae("div",{className:o,ref:function(f){return r.el=f},style:HT({},l,{WebkitUserSelect:"none"}),children:this.decorateChildren(s,u)})}},{key:"isCoreReady",get:function(){return!!this.core}}]),e}(At.Component);gb.displayName="ReactCursorPosition";gb.propTypes={activationInteractionMouse:yt.exports.oneOf([rs.CLICK,rs.HOVER]),activationInteractionTouch:yt.exports.oneOf([rs.PRESS,rs.TAP,rs.TOUCH]),children:yt.exports.any,className:yt.exports.string,hoverDelayInMs:yt.exports.number,hoverOffDelayInMs:yt.exports.number,isEnabled:yt.exports.bool,mapChildProps:yt.exports.func,onActivationChanged:yt.exports.func,onDetectedEnvironmentChanged:yt.exports.func,onPositionChanged:yt.exports.func,pressDurationInMs:yt.exports.number,pressMoveThreshold:yt.exports.number,shouldDecorateChildren:yt.exports.bool,shouldStopTouchMovePropagation:yt.exports.bool,style:yt.exports.object,tapDurationInMs:yt.exports.number,tapMoveThreshold:yt.exports.number};gb.defaultProps={activationInteractionMouse:rs.HOVER,activationInteractionTouch:rs.PRESS,hoverDelayInMs:0,hoverOffDelayInMs:0,isEnabled:!0,mapChildProps:function(e){return e},onActivationChanged:q1,onDetectedEnvironmentChanged:q1,onPositionChanged:q1,pressDurationInMs:500,pressMoveThreshold:5,shouldDecorateChildren:!0,shouldStopTouchMovePropagation:!1,tapDurationInMs:180,tapMoveThreshold:5};var Zq=function(){var e=this;this.onPositionChanged=function(){var t=e.props.onPositionChanged;t(e.state)}},Av={exports:{}};const eZ=XL(Th);(function(n,e){(function(){var t=this,r=typeof Pd<"u",i=t.THREE||r&&eZ;if(!i)throw new Error("MeshLine requires three.js");class s extends i.BufferGeometry{constructor(){super(),this.isMeshLine=!0,this.type="MeshLine",this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new i.Matrix4,Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return this}},geom:{enumerable:!0,get:function(){return this._geom},set:function(c){this.setGeometry(c,this.widthCallback)}},points:{enumerable:!0,get:function(){return this._points},set:function(c){this.setPoints(c,this.widthCallback)}}})}}s.prototype.setMatrixWorld=function(u){this.matrixWorld=u},s.prototype.setGeometry=function(u,c){this._geometry=u,this.setPoints(u.getAttribute("position").array,c)},s.prototype.setPoints=function(u,c){if(!(u instanceof Float32Array)&&!(u instanceof Array)){console.error("ERROR: The BufferArray of points is not instancied correctly.");return}if(this._points=u,this.widthCallback=c,this.positions=[],this.counters=[],u.length&&u[0]instanceof i.Vector3)for(var f=0;f<u.length;f++){var p=u[f],m=f/u.length;this.positions.push(p.x,p.y,p.z),this.positions.push(p.x,p.y,p.z),this.counters.push(m),this.counters.push(m)}else for(var f=0;f<u.length;f+=3){var m=f/u.length;this.positions.push(u[f],u[f+1],u[f+2]),this.positions.push(u[f],u[f+1],u[f+2]),this.counters.push(m),this.counters.push(m)}this.process()};function o(u,c){var f=new i.Matrix4,p=new i.Ray,m=new i.Sphere,g=new i.Vector3,y=this.geometry;if(y.boundingSphere||y.computeBoundingSphere(),m.copy(y.boundingSphere),m.applyMatrix4(this.matrixWorld),u.ray.intersectSphere(m,g)!==!1){f.copy(this.matrixWorld).invert(),p.copy(u.ray).applyMatrix4(f);var v=new i.Vector3,x=new i.Vector3,_=new i.Vector3,S=this instanceof i.LineSegments?2:1,b=y.index,C=y.attributes;if(b!==null)for(var E=b.array,P=C.position.array,M=C.width.array,T=0,R=E.length-1;T<R;T+=S){var L=E[T],I=E[T+1];v.fromArray(P,L*3),x.fromArray(P,I*3);var H=M[Math.floor(T/3)]!==void 0?M[Math.floor(T/3)]:1,G=u.params.Line.threshold+this.material.lineWidth*H/2,X=G*G,$=p.distanceSqToSegment(v,x,g,_);if(!($>X)){g.applyMatrix4(this.matrixWorld);var ne=u.ray.origin.distanceTo(g);ne<u.near||ne>u.far||(c.push({distance:ne,point:_.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this}),T=R)}}}}s.prototype.raycast=o,s.prototype.compareV3=function(u,c){var f=u*6,p=c*6;return this.positions[f]===this.positions[p]&&this.positions[f+1]===this.positions[p+1]&&this.positions[f+2]===this.positions[p+2]},s.prototype.copyV3=function(u){var c=u*6;return[this.positions[c],this.positions[c+1],this.positions[c+2]]},s.prototype.process=function(){var u=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];var c,f;this.compareV3(0,u-1)?f=this.copyV3(u-2):f=this.copyV3(0),this.previous.push(f[0],f[1],f[2]),this.previous.push(f[0],f[1],f[2]);for(var p=0;p<u;p++){if(this.side.push(1),this.side.push(-1),this.widthCallback?c=this.widthCallback(p/(u-1)):c=1,this.width.push(c),this.width.push(c),this.uvs.push(p/(u-1),0),this.uvs.push(p/(u-1),1),p<u-1){f=this.copyV3(p),this.previous.push(f[0],f[1],f[2]),this.previous.push(f[0],f[1],f[2]);var m=p*2;this.indices_array.push(m,m+1,m+2),this.indices_array.push(m+2,m+1,m+3)}p>0&&(f=this.copyV3(p),this.next.push(f[0],f[1],f[2]),this.next.push(f[0],f[1],f[2]))}this.compareV3(u-1,0)?f=this.copyV3(1):f=this.copyV3(u-1),this.next.push(f[0],f[1],f[2]),this.next.push(f[0],f[1],f[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new i.BufferAttribute(new Float32Array(this.positions),3),previous:new i.BufferAttribute(new Float32Array(this.previous),3),next:new i.BufferAttribute(new Float32Array(this.next),3),side:new i.BufferAttribute(new Float32Array(this.side),1),width:new i.BufferAttribute(new Float32Array(this.width),1),uv:new i.BufferAttribute(new Float32Array(this.uvs),2),index:new i.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new i.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()};function a(u,c,f,p,m){var g;if(u=u.subarray||u.slice?u:u.buffer,f=f.subarray||f.slice?f:f.buffer,u=c?u.subarray?u.subarray(c,m&&c+m):u.slice(c,m&&c+m):u,f.set)f.set(u,p);else for(g=0;g<u.length;g++)f[g+p]=u[g];return f}s.prototype.advance=function(u){var c=this._attributes.position.array,f=this._attributes.previous.array,p=this._attributes.next.array,m=c.length;a(c,0,f,0,m),a(c,6,c,0,m-6),c[m-6]=u.x,c[m-5]=u.y,c[m-4]=u.z,c[m-3]=u.x,c[m-2]=u.y,c[m-1]=u.z,a(c,6,p,0,m-6),p[m-6]=u.x,p[m-5]=u.y,p[m-4]=u.z,p[m-3]=u.x,p[m-2]=u.y,p[m-1]=u.z,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0},i.ShaderChunk.meshline_vert=["",i.ShaderChunk.logdepthbuf_pars_vertex,i.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","	 vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.fog_vertex,"}"].join(`
`),i.ShaderChunk.meshline_frag=["",i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",i.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",i.ShaderChunk.fog_fragment,"}"].join(`
`);class l extends i.ShaderMaterial{constructor(c){super({uniforms:Object.assign({},i.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new i.Color(16777215)},opacity:{value:1},resolution:{value:new i.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new i.Vector2(1,1)}}),vertexShader:i.ShaderChunk.meshline_vert,fragmentShader:i.ShaderChunk.meshline_frag}),this.isMeshLineMaterial=!0,this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(f){this.uniforms.lineWidth.value=f}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(f){this.uniforms.map.value=f}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(f){this.uniforms.useMap.value=f}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(f){this.uniforms.alphaMap.value=f}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(f){this.uniforms.useAlphaMap.value=f}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(f){this.uniforms.color.value=f}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(f){this.uniforms.opacity.value=f}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(f){this.uniforms.resolution.value.copy(f)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(f){this.uniforms.sizeAttenuation.value=f}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(f){this.uniforms.dashArray.value=f,this.useDash=f!==0?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(f){this.uniforms.dashOffset.value=f}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(f){this.uniforms.dashRatio.value=f}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(f){this.uniforms.useDash.value=f}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(f){this.uniforms.visibility.value=f}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(f){this.uniforms.alphaTest.value=f}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(f){this.uniforms.repeat.value.copy(f)}}}),this.setValues(c)}}l.prototype.copy=function(u){return i.ShaderMaterial.prototype.copy.call(this,u),this.lineWidth=u.lineWidth,this.map=u.map,this.useMap=u.useMap,this.alphaMap=u.alphaMap,this.useAlphaMap=u.useAlphaMap,this.color.copy(u.color),this.opacity=u.opacity,this.resolution.copy(u.resolution),this.sizeAttenuation=u.sizeAttenuation,this.dashArray.copy(u.dashArray),this.dashOffset.copy(u.dashOffset),this.dashRatio.copy(u.dashRatio),this.useDash=u.useDash,this.visibility=u.visibility,this.alphaTest=u.alphaTest,this.repeat.copy(u.repeat),this},n.exports&&(e=n.exports={MeshLine:s,MeshLineMaterial:l,MeshLineRaycast:o}),e.MeshLine=s,e.MeshLineMaterial=l,e.MeshLineRaycast=o}).call(KL)})(Av,Av.exports);const tZ=Av.exports,nZ=VT({__proto__:null,default:tZ},[Av.exports]),rZ="/assets/Alpha.3e3d496f.png";function iZ(){l0(nZ);const[n,e]=ul(r0,[pL,rZ]),t=N.exports.useRef();Va();const r=new ZQ;let i=function(){};r.init({mousemoveCallback:i});const s=N.exports.useRef();N.exports.useRef(),Mu(({mouse:a})=>{const l=a.x*window.innerWidth/15.3,u=a.y*window.innerHeight/15.3;r.speedX/20-5,t.current.position.set(l,u,5),t.current.rotation.set(-u,l,5)});const o=N.exports.useRef();return ae(ll,{children:ae("group",{ref:o,children:at(lV,{width:0,color:"hotpink",length:20,decay:.15,local:!1,stride:0,interval:1,target:t,attenuation:a=>a,children:[ae(fV,{args:[1,16],ref:t,children:ae("meshStandardMaterial",{})}),ae("meshLineMaterial",{ref:s,lineWidth:5,color:"lightblue",useMap:!0,map:e,blending:5})]})})})}function sZ(){function n(e){const t=N.exports.useRef();return ae(uV,{...e,ref:t,fov:60,near:1,far:1e3,makeDefault:!0,position:[0,-22.5,125]})}return ae("div",{className:"absolute, h-[110%] w-full CanvasClipTop",children:at(Z8,{children:[ae(n,{}),ae("ambientLight",{}),at(f7,{children:[ae(iZ,{}),at(d7,{enabled:!0,children:[ae(WQ,{}),ae(jQ,{})]}),ae(bD,{font:"Namita.otf",fontSize:6.180469715698393,position:[0,-45,0],children:"by Joshua Lim"}),ae(YQ,{})]})]})})}function oZ(){return at("div",{children:[ae("div",{className:"absolute h-full w-full  ",children:ae(sZ,{})}),ae("div",{className:""})]})}Z1.createRoot(document.getElementById("root")).render(ae(At.StrictMode,{children:ae(oZ,{})}));
